<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<HTML>
<HEAD>
<LINK REL=STYLESHEET TYPE="text/css" HREF="../../stylesheet.css" TITLE="Style">
<META NAME="GENERATOR" CONTENT="Java2HTML Version 1.5">
<TITLE>weka.clusterers.XMeans (Java2HTML)</TITLE>
</HEAD>
<BODY><TABLE id="Header" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td colspan="2" width="33%">&nbsp;</td>
<td align="center" colspan="2" width="33%">
<font size="4">XMeans.java</font>
</td>
<td align="right" colspan="2" width="33%">&nbsp;</td>
</tr>
</TABLE>
<pre ID="Classes">
<FONT ID="LN">1   </FONT><A NAME="1"></A><FONT ID="MultiLineComment">/*
<FONT ID="LN">2   </FONT><A NAME="2"></A> *    This program is free software; you can redistribute it and/or modify
<FONT ID="LN">3   </FONT><A NAME="3"></A> *    it under the terms of the GNU General Public License as published by
<FONT ID="LN">4   </FONT><A NAME="4"></A> *    the Free Software Foundation; either version 2 of the License, or
<FONT ID="LN">5   </FONT><A NAME="5"></A> *    (at your option) any later version.
<FONT ID="LN">6   </FONT><A NAME="6"></A> *
<FONT ID="LN">7   </FONT><A NAME="7"></A> *    This program is distributed in the hope that it will be useful,
<FONT ID="LN">8   </FONT><A NAME="8"></A> *    but WITHOUT ANY WARRANTY; without even the implied warranty of
<FONT ID="LN">9   </FONT><A NAME="9"></A> *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
<FONT ID="LN">10  </FONT><A NAME="10"></A> *    GNU General Public License for more details.
<FONT ID="LN">11  </FONT><A NAME="11"></A> *
<FONT ID="LN">12  </FONT><A NAME="12"></A> *    You should have received a copy of the GNU General Public License
<FONT ID="LN">13  </FONT><A NAME="13"></A> *    along with this program; if not, write to the Free Software
<FONT ID="LN">14  </FONT><A NAME="14"></A> *    Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
<FONT ID="LN">15  </FONT><A NAME="15"></A> */</FONT>
<FONT ID="LN">16  </FONT><A NAME="16"></A>
<FONT ID="LN">17  </FONT><A NAME="17"></A><FONT ID="MultiLineComment">/*
<FONT ID="LN">18  </FONT><A NAME="18"></A> *    XMeans.java
<FONT ID="LN">19  </FONT><A NAME="19"></A> *    Copyright (C) 2000 University of Waikato, Hamilton, New Zealand
<FONT ID="LN">20  </FONT><A NAME="20"></A> *
<FONT ID="LN">21  </FONT><A NAME="21"></A> */</FONT>
<FONT ID="LN">22  </FONT><A NAME="22"></A>
<FONT ID="LN">23  </FONT><A NAME="23"></A><FONT ID="Package">package</FONT> weka.clusterers;
<FONT ID="LN">24  </FONT><A NAME="24"></A>
<FONT ID="LN">25  </FONT><A NAME="25"></A><FONT ID="Import">import</FONT> <A HREF="../../weka/core/AlgVector.java.html">weka.core.AlgVector</A>;
<FONT ID="LN">26  </FONT><A NAME="26"></A><FONT ID="Import">import</FONT> <A HREF="../../weka/core/Capabilities.java.html">weka.core.Capabilities</A>;
<FONT ID="LN">27  </FONT><A NAME="27"></A><FONT ID="Import">import</FONT> <A HREF="../../weka/core/DistanceFunction.java.html">weka.core.DistanceFunction</A>;
<FONT ID="LN">28  </FONT><A NAME="28"></A><FONT ID="Import">import</FONT> <A HREF="../../weka/core/EuclideanDistance.java.html">weka.core.EuclideanDistance</A>;
<FONT ID="LN">29  </FONT><A NAME="29"></A><FONT ID="Import">import</FONT> <A HREF="../../weka/core/Instance.java.html">weka.core.Instance</A>;
<FONT ID="LN">30  </FONT><A NAME="30"></A><FONT ID="Import">import</FONT> <A HREF="../../weka/core/Instances.java.html">weka.core.Instances</A>;
<FONT ID="LN">31  </FONT><A NAME="31"></A><FONT ID="Import">import</FONT> <A HREF="../../weka/core/RevisionUtils.java.html">weka.core.RevisionUtils</A>;
<FONT ID="LN">32  </FONT><A NAME="32"></A><FONT ID="Import">import</FONT> <A HREF="../../weka/core/neighboursearch/KDTree.java.html">weka.core.neighboursearch.KDTree</A>;
<FONT ID="LN">33  </FONT><A NAME="33"></A><FONT ID="Import">import</FONT> <A HREF="../../weka/core/Option.java.html">weka.core.Option</A>;
<FONT ID="LN">34  </FONT><A NAME="34"></A><FONT ID="Import">import</FONT> <A HREF="../../weka/core/OptionHandler.java.html">weka.core.OptionHandler</A>;
<FONT ID="LN">35  </FONT><A NAME="35"></A><FONT ID="Import">import</FONT> <A HREF="../../weka/core/TechnicalInformation.java.html">weka.core.TechnicalInformation</A>;
<FONT ID="LN">36  </FONT><A NAME="36"></A><FONT ID="Import">import</FONT> <A HREF="../../weka/core/TechnicalInformationHandler.java.html">weka.core.TechnicalInformationHandler</A>;
<FONT ID="LN">37  </FONT><A NAME="37"></A><FONT ID="Import">import</FONT> <A HREF="../../weka/core/Utils.java.html">weka.core.Utils</A>;
<FONT ID="LN">38  </FONT><A NAME="38"></A><FONT ID="Import">import</FONT> <A HREF="../../weka/core/Capabilities.java.html">weka.core.Capabilities.Capability</A>;
<FONT ID="LN">39  </FONT><A NAME="39"></A><FONT ID="Import">import</FONT> <A HREF="../../weka/core/TechnicalInformation.java.html">weka.core.TechnicalInformation.Field</A>;
<FONT ID="LN">40  </FONT><A NAME="40"></A><FONT ID="Import">import</FONT> <A HREF="../../weka/core/TechnicalInformation.java.html">weka.core.TechnicalInformation.Type</A>;
<FONT ID="LN">41  </FONT><A NAME="41"></A><FONT ID="Import">import</FONT> <A HREF="../../weka/filters/Filter.java.html">weka.filters.Filter</A>;
<FONT ID="LN">42  </FONT><A NAME="42"></A><FONT ID="Import">import</FONT> <A HREF="../../weka/filters/unsupervised/attribute/ReplaceMissingValues.java.html">weka.filters.unsupervised.attribute.ReplaceMissingValues</A>;
<FONT ID="LN">43  </FONT><A NAME="43"></A>
<FONT ID="LN">44  </FONT><A NAME="44"></A><FONT ID="Import">import</FONT> java.io.BufferedReader;
<FONT ID="LN">45  </FONT><A NAME="45"></A><FONT ID="Import">import</FONT> java.io.File;
<FONT ID="LN">46  </FONT><A NAME="46"></A><FONT ID="Import">import</FONT> java.io.FileOutputStream;
<FONT ID="LN">47  </FONT><A NAME="47"></A><FONT ID="Import">import</FONT> java.io.FileReader;
<FONT ID="LN">48  </FONT><A NAME="48"></A><FONT ID="Import">import</FONT> java.io.PrintWriter;
<FONT ID="LN">49  </FONT><A NAME="49"></A><FONT ID="Import">import</FONT> java.io.Reader;
<FONT ID="LN">50  </FONT><A NAME="50"></A><FONT ID="Import">import</FONT> java.util.Enumeration;
<FONT ID="LN">51  </FONT><A NAME="51"></A><FONT ID="Import">import</FONT> java.util.Random;
<FONT ID="LN">52  </FONT><A NAME="52"></A><FONT ID="Import">import</FONT> java.util.Vector;
<FONT ID="LN">53  </FONT><A NAME="53"></A>
<FONT ID="LN">54  </FONT><A NAME="54"></A><FONT ID="FormalComment">/**
<FONT ID="LN">55  </FONT><A NAME="55"></A> &lt;!-- globalinfo-start --&gt;
<FONT ID="LN">56  </FONT><A NAME="56"></A> * Cluster data using the X-means algorithm.&lt;br/&gt;
<FONT ID="LN">57  </FONT><A NAME="57"></A> * &lt;br/&gt;
<FONT ID="LN">58  </FONT><A NAME="58"></A> * X-Means is K-Means extended by an Improve-Structure part In this part of the algorithm the centers are attempted to be split in its region. The decision between the children of each center and itself is done comparing the BIC-values of the two structures.&lt;br/&gt;
<FONT ID="LN">59  </FONT><A NAME="59"></A> * &lt;br/&gt;
<FONT ID="LN">60  </FONT><A NAME="60"></A> * For more information see:&lt;br/&gt;
<FONT ID="LN">61  </FONT><A NAME="61"></A> * &lt;br/&gt;
<FONT ID="LN">62  </FONT><A NAME="62"></A> * Dan Pelleg, Andrew W. Moore: X-means: Extending K-means with Efficient Estimation of the Number of Clusters. In: Seventeenth International Conference on Machine Learning, 727-734, 2000.
<FONT ID="LN">63  </FONT><A NAME="63"></A> * &lt;p/&gt;
<FONT ID="LN">64  </FONT><A NAME="64"></A> &lt;!-- globalinfo-end --&gt;
<FONT ID="LN">65  </FONT><A NAME="65"></A> *
<FONT ID="LN">66  </FONT><A NAME="66"></A> &lt;!-- technical-bibtex-start --&gt;
<FONT ID="LN">67  </FONT><A NAME="67"></A> * BibTeX:
<FONT ID="LN">68  </FONT><A NAME="68"></A> * &lt;pre&gt;
<FONT ID="LN">69  </FONT><A NAME="69"></A> * &amp;#64;inproceedings{Pelleg2000,
<FONT ID="LN">70  </FONT><A NAME="70"></A> *    author = {Dan Pelleg and Andrew W. Moore},
<FONT ID="LN">71  </FONT><A NAME="71"></A> *    booktitle = {Seventeenth International Conference on Machine Learning},
<FONT ID="LN">72  </FONT><A NAME="72"></A> *    pages = {727-734},
<FONT ID="LN">73  </FONT><A NAME="73"></A> *    publisher = {Morgan Kaufmann},
<FONT ID="LN">74  </FONT><A NAME="74"></A> *    title = {X-means: Extending K-means with Efficient Estimation of the Number of Clusters},
<FONT ID="LN">75  </FONT><A NAME="75"></A> *    year = {2000}
<FONT ID="LN">76  </FONT><A NAME="76"></A> * }
<FONT ID="LN">77  </FONT><A NAME="77"></A> * &lt;/pre&gt;
<FONT ID="LN">78  </FONT><A NAME="78"></A> * &lt;p/&gt;
<FONT ID="LN">79  </FONT><A NAME="79"></A> &lt;!-- technical-bibtex-end --&gt;
<FONT ID="LN">80  </FONT><A NAME="80"></A> *
<FONT ID="LN">81  </FONT><A NAME="81"></A> &lt;!-- options-start --&gt;
<FONT ID="LN">82  </FONT><A NAME="82"></A> * Valid options are: &lt;p/&gt;
<FONT ID="LN">83  </FONT><A NAME="83"></A> * 
<FONT ID="LN">84  </FONT><A NAME="84"></A> * &lt;pre&gt; -I &amp;lt;num&amp;gt;
<FONT ID="LN">85  </FONT><A NAME="85"></A> *  maximum number of overall iterations
<FONT ID="LN">86  </FONT><A NAME="86"></A> *  (default 1).&lt;/pre&gt;
<FONT ID="LN">87  </FONT><A NAME="87"></A> * 
<FONT ID="LN">88  </FONT><A NAME="88"></A> * &lt;pre&gt; -M &amp;lt;num&amp;gt;
<FONT ID="LN">89  </FONT><A NAME="89"></A> *  maximum number of iterations in the kMeans loop in
<FONT ID="LN">90  </FONT><A NAME="90"></A> *  the Improve-Parameter part 
<FONT ID="LN">91  </FONT><A NAME="91"></A> *  (default 1000).&lt;/pre&gt;
<FONT ID="LN">92  </FONT><A NAME="92"></A> * 
<FONT ID="LN">93  </FONT><A NAME="93"></A> * &lt;pre&gt; -J &amp;lt;num&amp;gt;
<FONT ID="LN">94  </FONT><A NAME="94"></A> *  maximum number of iterations in the kMeans loop
<FONT ID="LN">95  </FONT><A NAME="95"></A> *  for the splitted centroids in the Improve-Structure part 
<FONT ID="LN">96  </FONT><A NAME="96"></A> *  (default 1000).&lt;/pre&gt;
<FONT ID="LN">97  </FONT><A NAME="97"></A> * 
<FONT ID="LN">98  </FONT><A NAME="98"></A> * &lt;pre&gt; -L &amp;lt;num&amp;gt;
<FONT ID="LN">99  </FONT><A NAME="99"></A> *  minimum number of clusters
<FONT ID="LN">100 </FONT><A NAME="100"></A> *  (default 2).&lt;/pre&gt;
<FONT ID="LN">101 </FONT><A NAME="101"></A> * 
<FONT ID="LN">102 </FONT><A NAME="102"></A> * &lt;pre&gt; -H &amp;lt;num&amp;gt;
<FONT ID="LN">103 </FONT><A NAME="103"></A> *  maximum number of clusters
<FONT ID="LN">104 </FONT><A NAME="104"></A> *  (default 4).&lt;/pre&gt;
<FONT ID="LN">105 </FONT><A NAME="105"></A> * 
<FONT ID="LN">106 </FONT><A NAME="106"></A> * &lt;pre&gt; -B &amp;lt;value&amp;gt;
<FONT ID="LN">107 </FONT><A NAME="107"></A> *  distance value for binary attributes
<FONT ID="LN">108 </FONT><A NAME="108"></A> *  (default 1.0).&lt;/pre&gt;
<FONT ID="LN">109 </FONT><A NAME="109"></A> * 
<FONT ID="LN">110 </FONT><A NAME="110"></A> * &lt;pre&gt; -use-kdtree
<FONT ID="LN">111 </FONT><A NAME="111"></A> *  Uses the KDTree internally
<FONT ID="LN">112 </FONT><A NAME="112"></A> *  (default no).&lt;/pre&gt;
<FONT ID="LN">113 </FONT><A NAME="113"></A> * 
<FONT ID="LN">114 </FONT><A NAME="114"></A> * &lt;pre&gt; -K &amp;lt;KDTree class specification&amp;gt;
<FONT ID="LN">115 </FONT><A NAME="115"></A> *  Full class name of KDTree class to use, followed
<FONT ID="LN">116 </FONT><A NAME="116"></A> *  by scheme options.
<FONT ID="LN">117 </FONT><A NAME="117"></A> *  eg: "weka.core.neighboursearch.kdtrees.KDTree -P"
<FONT ID="LN">118 </FONT><A NAME="118"></A> *  (default no KDTree class used).&lt;/pre&gt;
<FONT ID="LN">119 </FONT><A NAME="119"></A> * 
<FONT ID="LN">120 </FONT><A NAME="120"></A> * &lt;pre&gt; -C &amp;lt;value&amp;gt;
<FONT ID="LN">121 </FONT><A NAME="121"></A> *  cutoff factor, takes the given percentage of the splitted 
<FONT ID="LN">122 </FONT><A NAME="122"></A> *  centroids if none of the children win
<FONT ID="LN">123 </FONT><A NAME="123"></A> *  (default 0.0).&lt;/pre&gt;
<FONT ID="LN">124 </FONT><A NAME="124"></A> * 
<FONT ID="LN">125 </FONT><A NAME="125"></A> * &lt;pre&gt; -D &amp;lt;distance function class specification&amp;gt;
<FONT ID="LN">126 </FONT><A NAME="126"></A> *  Full class name of Distance function class to use, followed
<FONT ID="LN">127 </FONT><A NAME="127"></A> *  by scheme options.
<FONT ID="LN">128 </FONT><A NAME="128"></A> *  (default weka.core.EuclideanDistance).&lt;/pre&gt;
<FONT ID="LN">129 </FONT><A NAME="129"></A> * 
<FONT ID="LN">130 </FONT><A NAME="130"></A> * &lt;pre&gt; -N &amp;lt;file name&amp;gt;
<FONT ID="LN">131 </FONT><A NAME="131"></A> *  file to read starting centers from (ARFF format).&lt;/pre&gt;
<FONT ID="LN">132 </FONT><A NAME="132"></A> * 
<FONT ID="LN">133 </FONT><A NAME="133"></A> * &lt;pre&gt; -O &amp;lt;file name&amp;gt;
<FONT ID="LN">134 </FONT><A NAME="134"></A> *  file to write centers to (ARFF format).&lt;/pre&gt;
<FONT ID="LN">135 </FONT><A NAME="135"></A> * 
<FONT ID="LN">136 </FONT><A NAME="136"></A> * &lt;pre&gt; -U &amp;lt;int&amp;gt;
<FONT ID="LN">137 </FONT><A NAME="137"></A> *  The debug level.
<FONT ID="LN">138 </FONT><A NAME="138"></A> *  (default 0)&lt;/pre&gt;
<FONT ID="LN">139 </FONT><A NAME="139"></A> * 
<FONT ID="LN">140 </FONT><A NAME="140"></A> * &lt;pre&gt; -Y &amp;lt;file name&amp;gt;
<FONT ID="LN">141 </FONT><A NAME="141"></A> *  The debug vectors file.&lt;/pre&gt;
<FONT ID="LN">142 </FONT><A NAME="142"></A> * 
<FONT ID="LN">143 </FONT><A NAME="143"></A> * &lt;pre&gt; -S &amp;lt;num&amp;gt;
<FONT ID="LN">144 </FONT><A NAME="144"></A> *  Random number seed.
<FONT ID="LN">145 </FONT><A NAME="145"></A> *  (default 10)&lt;/pre&gt;
<FONT ID="LN">146 </FONT><A NAME="146"></A> * 
<FONT ID="LN">147 </FONT><A NAME="147"></A> &lt;!-- options-end --&gt;
<FONT ID="LN">148 </FONT><A NAME="148"></A> *
<FONT ID="LN">149 </FONT><A NAME="149"></A> * @author Gabi Schmidberger (gabi@cs.waikato.ac.nz)
<FONT ID="LN">150 </FONT><A NAME="150"></A> * @author Mark Hall (mhall@cs.waikato.ac.nz)
<FONT ID="LN">151 </FONT><A NAME="151"></A> * @author Malcolm Ware (mfw4@cs.waikato.ac.nz)
<FONT ID="LN">152 </FONT><A NAME="152"></A> * @version $Revision: 5488 $
<FONT ID="LN">153 </FONT><A NAME="153"></A> * @see RandomizableClusterer
<FONT ID="LN">154 </FONT><A NAME="154"></A> */</FONT>
<FONT ID="LN">155 </FONT><A NAME="155"></A><FONT ID="Public">public</FONT> <FONT ID="Class">class</FONT> XMeans 
<FONT ID="LN">156 </FONT><A NAME="156"></A>  <FONT ID="Extends">extends</FONT> <A HREF="../../weka/clusterers/RandomizableClusterer.java.html">RandomizableClusterer</A>
<FONT ID="LN">157 </FONT><A NAME="157"></A>  <FONT ID="Implements">implements</FONT> <A HREF="../../weka/core/TechnicalInformationHandler.java.html">TechnicalInformationHandler</A> {
<FONT ID="LN">158 </FONT><A NAME="158"></A>
<FONT ID="LN">159 </FONT><A NAME="159"></A>  <FONT ID="MultiLineComment">/*
<FONT ID="LN">160 </FONT><A NAME="160"></A>   * major TODOS:
<FONT ID="LN">161 </FONT><A NAME="161"></A>   *
<FONT ID="LN">162 </FONT><A NAME="162"></A>   * make BIC-Score replaceable by other scores
<FONT ID="LN">163 </FONT><A NAME="163"></A>   */</FONT>
<FONT ID="LN">164 </FONT><A NAME="164"></A>
<FONT ID="LN">165 </FONT><A NAME="165"></A>  <FONT ID="FormalComment">/** for serialization. */</FONT>
<FONT ID="LN">166 </FONT><A NAME="166"></A>  <FONT ID="Private">private</FONT> <FONT ID="Static">static</FONT> <FONT ID="Final">final</FONT> <FONT ID="Long">long</FONT> serialVersionUID = -<FONT ID="IntegerLiteral">7941793078404132616L</FONT>;
<FONT ID="LN">167 </FONT><A NAME="167"></A>  
<FONT ID="LN">168 </FONT><A NAME="168"></A>  <FONT ID="FormalComment">/** training instances. */</FONT>
<FONT ID="LN">169 </FONT><A NAME="169"></A>  <FONT ID="Protected">protected</FONT> <A HREF="../../weka/core/Instances.java.html">Instances</A> m_Instances = <FONT ID="Null">null</FONT>;
<FONT ID="LN">170 </FONT><A NAME="170"></A>
<FONT ID="LN">171 </FONT><A NAME="171"></A>  <FONT ID="FormalComment">/** model information, should increase readability. */</FONT>
<FONT ID="LN">172 </FONT><A NAME="172"></A>  <FONT ID="Protected">protected</FONT> <A HREF="../../weka/core/Instances.java.html">Instances</A> m_Model = <FONT ID="Null">null</FONT>;
<FONT ID="LN">173 </FONT><A NAME="173"></A>  
<FONT ID="LN">174 </FONT><A NAME="174"></A>  <FONT ID="FormalComment">/** replace missing values in training instances. */</FONT>
<FONT ID="LN">175 </FONT><A NAME="175"></A>  <FONT ID="Protected">protected</FONT> <A HREF="../../weka/filters/unsupervised/attribute/ReplaceMissingValues.java.html">ReplaceMissingValues</A> m_ReplaceMissingFilter;
<FONT ID="LN">176 </FONT><A NAME="176"></A>
<FONT ID="LN">177 </FONT><A NAME="177"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">178 </FONT><A NAME="178"></A>   * Distance value between true and false of binary attributes and 
<FONT ID="LN">179 </FONT><A NAME="179"></A>   * "same" and "different" of nominal attributes (default = 1.0).
<FONT ID="LN">180 </FONT><A NAME="180"></A>   */</FONT>
<FONT ID="LN">181 </FONT><A NAME="181"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Double">double</FONT> m_BinValue = <FONT ID="FloatPointLiteral">1.0</FONT>;
<FONT ID="LN">182 </FONT><A NAME="182"></A>
<FONT ID="LN">183 </FONT><A NAME="183"></A>  <FONT ID="FormalComment">/** BIC-Score of the current model. */</FONT>
<FONT ID="LN">184 </FONT><A NAME="184"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Double">double</FONT> m_Bic = Double.MIN_VALUE;
<FONT ID="LN">185 </FONT><A NAME="185"></A>
<FONT ID="LN">186 </FONT><A NAME="186"></A>  <FONT ID="FormalComment">/** Distortion.  */</FONT>
<FONT ID="LN">187 </FONT><A NAME="187"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Double">double</FONT>[] m_Mle = <FONT ID="Null">null</FONT>;
<FONT ID="LN">188 </FONT><A NAME="188"></A>
<FONT ID="LN">189 </FONT><A NAME="189"></A>  <FONT ID="FormalComment">/** maximum overall iterations. */</FONT>
<FONT ID="LN">190 </FONT><A NAME="190"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Int">int</FONT> m_MaxIterations = <FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">191 </FONT><A NAME="191"></A>
<FONT ID="LN">192 </FONT><A NAME="192"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">193 </FONT><A NAME="193"></A>   * maximum iterations to perform Kmeans part 
<FONT ID="LN">194 </FONT><A NAME="194"></A>   * if negative, iterations are not checked.
<FONT ID="LN">195 </FONT><A NAME="195"></A>   */</FONT>
<FONT ID="LN">196 </FONT><A NAME="196"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Int">int</FONT> m_MaxKMeans = <FONT ID="IntegerLiteral">1000</FONT>;
<FONT ID="LN">197 </FONT><A NAME="197"></A>
<FONT ID="LN">198 </FONT><A NAME="198"></A>  <FONT ID="FormalComment">/** see above, but for kMeans of splitted clusters.
<FONT ID="LN">199 </FONT><A NAME="199"></A>   */</FONT>
<FONT ID="LN">200 </FONT><A NAME="200"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Int">int</FONT> m_MaxKMeansForChildren = <FONT ID="IntegerLiteral">1000</FONT>;
<FONT ID="LN">201 </FONT><A NAME="201"></A>
<FONT ID="LN">202 </FONT><A NAME="202"></A>  <FONT ID="FormalComment">/** The actual number of clusters. */</FONT>
<FONT ID="LN">203 </FONT><A NAME="203"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Int">int</FONT> m_NumClusters = <FONT ID="IntegerLiteral">2</FONT>;
<FONT ID="LN">204 </FONT><A NAME="204"></A>
<FONT ID="LN">205 </FONT><A NAME="205"></A>  <FONT ID="FormalComment">/** min number of clusters to generate. */</FONT>
<FONT ID="LN">206 </FONT><A NAME="206"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Int">int</FONT> m_MinNumClusters = <FONT ID="IntegerLiteral">2</FONT>;
<FONT ID="LN">207 </FONT><A NAME="207"></A>
<FONT ID="LN">208 </FONT><A NAME="208"></A>  <FONT ID="FormalComment">/** max number of clusters to generate. */</FONT>
<FONT ID="LN">209 </FONT><A NAME="209"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Int">int</FONT> m_MaxNumClusters = <FONT ID="IntegerLiteral">4</FONT>;
<FONT ID="LN">210 </FONT><A NAME="210"></A>
<FONT ID="LN">211 </FONT><A NAME="211"></A>  <FONT ID="FormalComment">/** the distance function used. */</FONT>
<FONT ID="LN">212 </FONT><A NAME="212"></A>  <FONT ID="Protected">protected</FONT> <A HREF="../../weka/core/DistanceFunction.java.html">DistanceFunction</A> m_DistanceF = <FONT ID="New">new</FONT> <A HREF="../../weka/core/EuclideanDistance.java.html">EuclideanDistance</A>();
<FONT ID="LN">213 </FONT><A NAME="213"></A>
<FONT ID="LN">214 </FONT><A NAME="214"></A>  <FONT ID="FormalComment">/** cluster centers. */</FONT>
<FONT ID="LN">215 </FONT><A NAME="215"></A>  <FONT ID="Protected">protected</FONT> <A HREF="../../weka/core/Instances.java.html">Instances</A> m_ClusterCenters;
<FONT ID="LN">216 </FONT><A NAME="216"></A>
<FONT ID="LN">217 </FONT><A NAME="217"></A>  <FONT ID="FormalComment">/** file name of the output file for the cluster centers. */</FONT>
<FONT ID="LN">218 </FONT><A NAME="218"></A>  <FONT ID="Protected">protected</FONT> File m_InputCenterFile = <FONT ID="New">new</FONT> File(System.getProperty(<FONT ID="StringLiteral">"user.dir"</FONT>));
<FONT ID="LN">219 </FONT><A NAME="219"></A>
<FONT ID="LN">220 </FONT><A NAME="220"></A>  <FONT ID="MultiLineComment">/* --&gt; DebugVectors - USED FOR DEBUGGING */</FONT>
<FONT ID="LN">221 </FONT><A NAME="221"></A>  <FONT ID="FormalComment">/** input file for the random vectors --&gt; USED FOR DEBUGGING. */</FONT>
<FONT ID="LN">222 </FONT><A NAME="222"></A>  <FONT ID="Protected">protected</FONT> Reader m_DebugVectorsInput = <FONT ID="Null">null</FONT>;
<FONT ID="LN">223 </FONT><A NAME="223"></A>  <FONT ID="FormalComment">/** the index for the current debug vector. */</FONT>
<FONT ID="LN">224 </FONT><A NAME="224"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Int">int</FONT> m_DebugVectorsIndex = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">225 </FONT><A NAME="225"></A>  <FONT ID="FormalComment">/** all the debug vectors. */</FONT>
<FONT ID="LN">226 </FONT><A NAME="226"></A>  <FONT ID="Protected">protected</FONT> <A HREF="../../weka/core/Instances.java.html">Instances</A> m_DebugVectors = <FONT ID="Null">null</FONT>;
<FONT ID="LN">227 </FONT><A NAME="227"></A>
<FONT ID="LN">228 </FONT><A NAME="228"></A>  <FONT ID="FormalComment">/** file name of the input file for the random vectors. */</FONT>
<FONT ID="LN">229 </FONT><A NAME="229"></A>  <FONT ID="Protected">protected</FONT> File m_DebugVectorsFile = <FONT ID="New">new</FONT> File(System.getProperty(<FONT ID="StringLiteral">"user.dir"</FONT>));
<FONT ID="LN">230 </FONT><A NAME="230"></A>
<FONT ID="LN">231 </FONT><A NAME="231"></A>  <FONT ID="FormalComment">/** input file for the cluster centers. */</FONT>
<FONT ID="LN">232 </FONT><A NAME="232"></A>  <FONT ID="Protected">protected</FONT> Reader m_CenterInput = <FONT ID="Null">null</FONT>;
<FONT ID="LN">233 </FONT><A NAME="233"></A>    
<FONT ID="LN">234 </FONT><A NAME="234"></A>  <FONT ID="FormalComment">/** file name of the output file for the cluster centers. */</FONT>
<FONT ID="LN">235 </FONT><A NAME="235"></A>  <FONT ID="Protected">protected</FONT> File m_OutputCenterFile = <FONT ID="New">new</FONT> File(System.getProperty(<FONT ID="StringLiteral">"user.dir"</FONT>));
<FONT ID="LN">236 </FONT><A NAME="236"></A>  
<FONT ID="LN">237 </FONT><A NAME="237"></A>  <FONT ID="FormalComment">/** output file for the cluster centers. */</FONT>
<FONT ID="LN">238 </FONT><A NAME="238"></A>  <FONT ID="Protected">protected</FONT> PrintWriter m_CenterOutput = <FONT ID="Null">null</FONT>;
<FONT ID="LN">239 </FONT><A NAME="239"></A>    
<FONT ID="LN">240 </FONT><A NAME="240"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">241 </FONT><A NAME="241"></A>   * temporary variable holding cluster assignments while iterating.
<FONT ID="LN">242 </FONT><A NAME="242"></A>   */</FONT>
<FONT ID="LN">243 </FONT><A NAME="243"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Int">int</FONT>[] m_ClusterAssignments;
<FONT ID="LN">244 </FONT><A NAME="244"></A>
<FONT ID="LN">245 </FONT><A NAME="245"></A>  <FONT ID="FormalComment">/** cutoff factor - percentage of splits done in Improve-Structure part
<FONT ID="LN">246 </FONT><A NAME="246"></A>     only relevant, if all children lost. */</FONT> 
<FONT ID="LN">247 </FONT><A NAME="247"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Double">double</FONT> m_CutOffFactor = <FONT ID="FloatPointLiteral">0.5</FONT>;
<FONT ID="LN">248 </FONT><A NAME="248"></A>
<FONT ID="LN">249 </FONT><A NAME="249"></A>  <FONT ID="FormalComment">/** Index in ranges for LOW. */</FONT>
<FONT ID="LN">250 </FONT><A NAME="250"></A>  <FONT ID="Public">public</FONT> <FONT ID="Static">static</FONT> <FONT ID="Int">int</FONT> R_LOW = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">251 </FONT><A NAME="251"></A>  <FONT ID="FormalComment">/** Index in ranges for HIGH. */</FONT>
<FONT ID="LN">252 </FONT><A NAME="252"></A>  <FONT ID="Public">public</FONT> <FONT ID="Static">static</FONT> <FONT ID="Int">int</FONT> R_HIGH = <FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">253 </FONT><A NAME="253"></A>  <FONT ID="FormalComment">/** Index in ranges for WIDTH. */</FONT>
<FONT ID="LN">254 </FONT><A NAME="254"></A>  <FONT ID="Public">public</FONT> <FONT ID="Static">static</FONT> <FONT ID="Int">int</FONT> R_WIDTH = <FONT ID="IntegerLiteral">2</FONT>;
<FONT ID="LN">255 </FONT><A NAME="255"></A>
<FONT ID="LN">256 </FONT><A NAME="256"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">257 </FONT><A NAME="257"></A>   * KDTrees class if KDTrees are used.
<FONT ID="LN">258 </FONT><A NAME="258"></A>   */</FONT>
<FONT ID="LN">259 </FONT><A NAME="259"></A>  <FONT ID="Protected">protected</FONT> <A HREF="../../weka/core/neighboursearch/KDTree.java.html">KDTree</A> m_KDTree = <FONT ID="New">new</FONT> <A HREF="../../weka/core/neighboursearch/KDTree.java.html">KDTree</A>();
<FONT ID="LN">260 </FONT><A NAME="260"></A>  
<FONT ID="LN">261 </FONT><A NAME="261"></A>  <FONT ID="FormalComment">/** whether to use the KDTree (the KDTree is only initialized to be 
<FONT ID="LN">262 </FONT><A NAME="262"></A>   * configurable from the GUI). */</FONT>
<FONT ID="LN">263 </FONT><A NAME="263"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Boolean">boolean</FONT> m_UseKDTree = <FONT ID="False">false</FONT>;
<FONT ID="LN">264 </FONT><A NAME="264"></A>
<FONT ID="LN">265 </FONT><A NAME="265"></A>  <FONT ID="FormalComment">/** counts iterations done in main loop. */</FONT>
<FONT ID="LN">266 </FONT><A NAME="266"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Int">int</FONT> m_IterationCount = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">267 </FONT><A NAME="267"></A>
<FONT ID="LN">268 </FONT><A NAME="268"></A>  <FONT ID="FormalComment">/** counter to say how often kMeans was stopped by loop counter. */</FONT>
<FONT ID="LN">269 </FONT><A NAME="269"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Int">int</FONT> m_KMeansStopped = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">270 </FONT><A NAME="270"></A>
<FONT ID="LN">271 </FONT><A NAME="271"></A>  <FONT ID="FormalComment">/** Number of splits prepared. */</FONT>
<FONT ID="LN">272 </FONT><A NAME="272"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Int">int</FONT> m_NumSplits = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">273 </FONT><A NAME="273"></A>
<FONT ID="LN">274 </FONT><A NAME="274"></A>  <FONT ID="FormalComment">/** Number of splits accepted (including cutoff factor decisions). */</FONT>
<FONT ID="LN">275 </FONT><A NAME="275"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Int">int</FONT> m_NumSplitsDone = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">276 </FONT><A NAME="276"></A>
<FONT ID="LN">277 </FONT><A NAME="277"></A>  <FONT ID="FormalComment">/** Number of splits accepted just because of cutoff factor. */</FONT>
<FONT ID="LN">278 </FONT><A NAME="278"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Int">int</FONT> m_NumSplitsStillDone = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">279 </FONT><A NAME="279"></A>
<FONT ID="LN">280 </FONT><A NAME="280"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">281 </FONT><A NAME="281"></A>   * level of debug output, 0 is no output.
<FONT ID="LN">282 </FONT><A NAME="282"></A>   */</FONT>
<FONT ID="LN">283 </FONT><A NAME="283"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Int">int</FONT> m_DebugLevel = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">284 </FONT><A NAME="284"></A>  
<FONT ID="LN">285 </FONT><A NAME="285"></A>  <FONT ID="FormalComment">/** print the centers. */</FONT>
<FONT ID="LN">286 </FONT><A NAME="286"></A>  <FONT ID="Public">public</FONT> <FONT ID="Static">static</FONT> <FONT ID="Int">int</FONT> D_PRINTCENTERS = <FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">287 </FONT><A NAME="287"></A>  <FONT ID="FormalComment">/** follows the splitting of the centers. */</FONT>
<FONT ID="LN">288 </FONT><A NAME="288"></A>  <FONT ID="Public">public</FONT> <FONT ID="Static">static</FONT> <FONT ID="Int">int</FONT> D_FOLLOWSPLIT = <FONT ID="IntegerLiteral">2</FONT>;
<FONT ID="LN">289 </FONT><A NAME="289"></A>  <FONT ID="FormalComment">/** have a closer look at converge children. */</FONT>
<FONT ID="LN">290 </FONT><A NAME="290"></A>  <FONT ID="Public">public</FONT> <FONT ID="Static">static</FONT> <FONT ID="Int">int</FONT> D_CONVCHCLOSER = <FONT ID="IntegerLiteral">3</FONT>;
<FONT ID="LN">291 </FONT><A NAME="291"></A>  <FONT ID="FormalComment">/** check on random vectors. */</FONT>
<FONT ID="LN">292 </FONT><A NAME="292"></A>  <FONT ID="Public">public</FONT> <FONT ID="Static">static</FONT> <FONT ID="Int">int</FONT> D_RANDOMVECTOR = <FONT ID="IntegerLiteral">4</FONT>;
<FONT ID="LN">293 </FONT><A NAME="293"></A>  <FONT ID="FormalComment">/** check on kdtree. */</FONT>
<FONT ID="LN">294 </FONT><A NAME="294"></A>  <FONT ID="Public">public</FONT> <FONT ID="Static">static</FONT> <FONT ID="Int">int</FONT> D_KDTREE = <FONT ID="IntegerLiteral">5</FONT>;
<FONT ID="LN">295 </FONT><A NAME="295"></A>  <FONT ID="FormalComment">/** follow iterations. */</FONT>
<FONT ID="LN">296 </FONT><A NAME="296"></A>  <FONT ID="Public">public</FONT> <FONT ID="Static">static</FONT> <FONT ID="Int">int</FONT> D_ITERCOUNT = <FONT ID="IntegerLiteral">6</FONT>;
<FONT ID="LN">297 </FONT><A NAME="297"></A>  <FONT ID="FormalComment">/** functions were maybe misused.  */</FONT>
<FONT ID="LN">298 </FONT><A NAME="298"></A>  <FONT ID="Public">public</FONT> <FONT ID="Static">static</FONT> <FONT ID="Int">int</FONT> D_METH_MISUSE = <FONT ID="IntegerLiteral">80</FONT>; 
<FONT ID="LN">299 </FONT><A NAME="299"></A>  <FONT ID="FormalComment">/** for current debug.  */</FONT>
<FONT ID="LN">300 </FONT><A NAME="300"></A>  <FONT ID="Public">public</FONT> <FONT ID="Static">static</FONT> <FONT ID="Int">int</FONT> D_CURR = <FONT ID="IntegerLiteral">88</FONT>;
<FONT ID="LN">301 </FONT><A NAME="301"></A>  <FONT ID="FormalComment">/** general debugging. */</FONT>
<FONT ID="LN">302 </FONT><A NAME="302"></A>  <FONT ID="Public">public</FONT> <FONT ID="Static">static</FONT> <FONT ID="Int">int</FONT> D_GENERAL = <FONT ID="IntegerLiteral">99</FONT>;
<FONT ID="LN">303 </FONT><A NAME="303"></A>
<FONT ID="LN">304 </FONT><A NAME="304"></A>  <FONT ID="FormalComment">/** Flag: I'm debugging. */</FONT>
<FONT ID="LN">305 </FONT><A NAME="305"></A>  <FONT ID="Public">public</FONT> <FONT ID="Boolean">boolean</FONT> m_CurrDebugFlag = <FONT ID="True">true</FONT>;
<FONT ID="LN">306 </FONT><A NAME="306"></A>
<FONT ID="LN">307 </FONT><A NAME="307"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">308 </FONT><A NAME="308"></A>   * the default constructor.
<FONT ID="LN">309 </FONT><A NAME="309"></A>   */</FONT>
<FONT ID="LN">310 </FONT><A NAME="310"></A>  <FONT ID="Public">public</FONT> XMeans() {
<FONT ID="LN">311 </FONT><A NAME="311"></A>    <FONT ID="Super">super</FONT>();
<FONT ID="LN">312 </FONT><A NAME="312"></A>    
<FONT ID="LN">313 </FONT><A NAME="313"></A>    m_SeedDefault = <FONT ID="IntegerLiteral">10</FONT>;
<FONT ID="LN">314 </FONT><A NAME="314"></A>    setSeed(m_SeedDefault);
<FONT ID="LN">315 </FONT><A NAME="315"></A>  }
<FONT ID="LN">316 </FONT><A NAME="316"></A>  
<FONT ID="LN">317 </FONT><A NAME="317"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">318 </FONT><A NAME="318"></A>   * Returns a string describing this clusterer.
<FONT ID="LN">319 </FONT><A NAME="319"></A>   * @return a description of the evaluator suitable for
<FONT ID="LN">320 </FONT><A NAME="320"></A>   * displaying in the explorer/experimenter gui
<FONT ID="LN">321 </FONT><A NAME="321"></A>   */</FONT>
<FONT ID="LN">322 </FONT><A NAME="322"></A>  <FONT ID="Public">public</FONT> String globalInfo() {
<FONT ID="LN">323 </FONT><A NAME="323"></A>    <FONT ID="Return">return</FONT> 
<FONT ID="LN">324 </FONT><A NAME="324"></A>        <FONT ID="StringLiteral">"Cluster data using the X-means algorithm.\n\n"</FONT> 
<FONT ID="LN">325 </FONT><A NAME="325"></A>      + <FONT ID="StringLiteral">"X-Means is K-Means extended by an Improve-Structure part In this "</FONT>
<FONT ID="LN">326 </FONT><A NAME="326"></A>      + <FONT ID="StringLiteral">"part of the algorithm the centers are attempted to be split in "</FONT>
<FONT ID="LN">327 </FONT><A NAME="327"></A>      + <FONT ID="StringLiteral">"its region. The decision between the children of each center and "</FONT>
<FONT ID="LN">328 </FONT><A NAME="328"></A>      + <FONT ID="StringLiteral">"itself is done comparing the BIC-values of the two structures.\n\n"</FONT>
<FONT ID="LN">329 </FONT><A NAME="329"></A>      + <FONT ID="StringLiteral">"For more information see:\n\n"</FONT>
<FONT ID="LN">330 </FONT><A NAME="330"></A>      + getTechnicalInformation().toString();
<FONT ID="LN">331 </FONT><A NAME="331"></A>  }
<FONT ID="LN">332 </FONT><A NAME="332"></A>
<FONT ID="LN">333 </FONT><A NAME="333"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">334 </FONT><A NAME="334"></A>   * Returns an instance of a TechnicalInformation object, containing 
<FONT ID="LN">335 </FONT><A NAME="335"></A>   * detailed information about the technical background of this class,
<FONT ID="LN">336 </FONT><A NAME="336"></A>   * e.g., paper reference or book this class is based on.
<FONT ID="LN">337 </FONT><A NAME="337"></A>   * 
<FONT ID="LN">338 </FONT><A NAME="338"></A>   * @return the technical information about this class
<FONT ID="LN">339 </FONT><A NAME="339"></A>   */</FONT>
<FONT ID="LN">340 </FONT><A NAME="340"></A>  <FONT ID="Public">public</FONT> <A HREF="../../weka/core/TechnicalInformation.java.html">TechnicalInformation</A> getTechnicalInformation() {
<FONT ID="LN">341 </FONT><A NAME="341"></A>    <A HREF="../../weka/core/TechnicalInformation.java.html">TechnicalInformation</A>    result;
<FONT ID="LN">342 </FONT><A NAME="342"></A>    
<FONT ID="LN">343 </FONT><A NAME="343"></A>    result = <FONT ID="New">new</FONT> <A HREF="../../weka/core/TechnicalInformation.java.html">TechnicalInformation</A>(Type.INPROCEEDINGS);
<FONT ID="LN">344 </FONT><A NAME="344"></A>    result.setValue(Field.AUTHOR, <FONT ID="StringLiteral">"Dan Pelleg and Andrew W. Moore"</FONT>);
<FONT ID="LN">345 </FONT><A NAME="345"></A>    result.setValue(Field.TITLE, <FONT ID="StringLiteral">"X-means: Extending K-means with Efficient Estimation of the Number of Clusters"</FONT>);
<FONT ID="LN">346 </FONT><A NAME="346"></A>    result.setValue(Field.BOOKTITLE, <FONT ID="StringLiteral">"Seventeenth International Conference on Machine Learning"</FONT>);
<FONT ID="LN">347 </FONT><A NAME="347"></A>    result.setValue(Field.YEAR, <FONT ID="StringLiteral">"2000"</FONT>);
<FONT ID="LN">348 </FONT><A NAME="348"></A>    result.setValue(Field.PAGES, <FONT ID="StringLiteral">"727-734"</FONT>);
<FONT ID="LN">349 </FONT><A NAME="349"></A>    result.setValue(Field.PUBLISHER, <FONT ID="StringLiteral">"Morgan Kaufmann"</FONT>);
<FONT ID="LN">350 </FONT><A NAME="350"></A>    
<FONT ID="LN">351 </FONT><A NAME="351"></A>    <FONT ID="Return">return</FONT> result;
<FONT ID="LN">352 </FONT><A NAME="352"></A>  }
<FONT ID="LN">353 </FONT><A NAME="353"></A>
<FONT ID="LN">354 </FONT><A NAME="354"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">355 </FONT><A NAME="355"></A>   * Returns default capabilities of the clusterer.
<FONT ID="LN">356 </FONT><A NAME="356"></A>   *
<FONT ID="LN">357 </FONT><A NAME="357"></A>   * @return      the capabilities of this clusterer
<FONT ID="LN">358 </FONT><A NAME="358"></A>   */</FONT>
<FONT ID="LN">359 </FONT><A NAME="359"></A>  <FONT ID="Public">public</FONT> <A HREF="../../weka/core/Capabilities.java.html">Capabilities</A> getCapabilities() {
<FONT ID="LN">360 </FONT><A NAME="360"></A>    <A HREF="../../weka/core/Capabilities.java.html">Capabilities</A> result = <FONT ID="Super">super</FONT>.getCapabilities();
<FONT ID="LN">361 </FONT><A NAME="361"></A>    result.disableAll();
<FONT ID="LN">362 </FONT><A NAME="362"></A>    result.enable(Capability.NO_CLASS);
<FONT ID="LN">363 </FONT><A NAME="363"></A>
<FONT ID="LN">364 </FONT><A NAME="364"></A>    <FONT ID="SingleLineComment">// attributes
<FONT ID="LN">365 </FONT><A NAME="365"></A></FONT>    result.enable(Capability.NUMERIC_ATTRIBUTES);
<FONT ID="LN">366 </FONT><A NAME="366"></A>    result.enable(Capability.DATE_ATTRIBUTES);
<FONT ID="LN">367 </FONT><A NAME="367"></A>    result.enable(Capability.MISSING_VALUES);
<FONT ID="LN">368 </FONT><A NAME="368"></A>
<FONT ID="LN">369 </FONT><A NAME="369"></A>    <FONT ID="Return">return</FONT> result;
<FONT ID="LN">370 </FONT><A NAME="370"></A>  }
<FONT ID="LN">371 </FONT><A NAME="371"></A> 
<FONT ID="LN">372 </FONT><A NAME="372"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">373 </FONT><A NAME="373"></A>   * Generates the X-Means clusterer. 
<FONT ID="LN">374 </FONT><A NAME="374"></A>   *
<FONT ID="LN">375 </FONT><A NAME="375"></A>   * @param data set of instances serving as training data 
<FONT ID="LN">376 </FONT><A NAME="376"></A>   * @throws Exception if the clusterer has not been 
<FONT ID="LN">377 </FONT><A NAME="377"></A>   * generated successfully
<FONT ID="LN">378 </FONT><A NAME="378"></A>   */</FONT>
<FONT ID="LN">379 </FONT><A NAME="379"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> buildClusterer(<A HREF="../../weka/core/Instances.java.html">Instances</A> data) <FONT ID="Throws">throws</FONT> Exception {
<FONT ID="LN">380 </FONT><A NAME="380"></A>
<FONT ID="LN">381 </FONT><A NAME="381"></A>    <FONT ID="SingleLineComment">// can clusterer handle the data?
<FONT ID="LN">382 </FONT><A NAME="382"></A></FONT>    getCapabilities().testWithFail(data);
<FONT ID="LN">383 </FONT><A NAME="383"></A>    
<FONT ID="LN">384 </FONT><A NAME="384"></A>    <FONT ID="If">if</FONT> (m_MinNumClusters &gt; m_MaxNumClusters) {
<FONT ID="LN">385 </FONT><A NAME="385"></A>      <FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> Exception(<FONT ID="StringLiteral">"XMeans: min number of clusters "</FONT>
<FONT ID="LN">386 </FONT><A NAME="386"></A>          + <FONT ID="StringLiteral">"can't be greater than max number of clusters!"</FONT>);
<FONT ID="LN">387 </FONT><A NAME="387"></A>    }
<FONT ID="LN">388 </FONT><A NAME="388"></A>
<FONT ID="LN">389 </FONT><A NAME="389"></A>    m_NumSplits = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">390 </FONT><A NAME="390"></A>    m_NumSplitsDone = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">391 </FONT><A NAME="391"></A>    m_NumSplitsStillDone = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">392 </FONT><A NAME="392"></A>
<FONT ID="LN">393 </FONT><A NAME="393"></A>    <FONT ID="SingleLineComment">// replace missing values
<FONT ID="LN">394 </FONT><A NAME="394"></A></FONT>    m_ReplaceMissingFilter = <FONT ID="New">new</FONT> <A HREF="../../weka/filters/unsupervised/attribute/ReplaceMissingValues.java.html">ReplaceMissingValues</A>();
<FONT ID="LN">395 </FONT><A NAME="395"></A>    m_ReplaceMissingFilter.setInputFormat(data);
<FONT ID="LN">396 </FONT><A NAME="396"></A>    m_Instances = Filter.useFilter(data, m_ReplaceMissingFilter);
<FONT ID="LN">397 </FONT><A NAME="397"></A>    
<FONT ID="LN">398 </FONT><A NAME="398"></A>    <FONT ID="SingleLineComment">// initialize random function
<FONT ID="LN">399 </FONT><A NAME="399"></A></FONT>    Random random0 = <FONT ID="New">new</FONT> Random(m_Seed);
<FONT ID="LN">400 </FONT><A NAME="400"></A>
<FONT ID="LN">401 </FONT><A NAME="401"></A>    <FONT ID="SingleLineComment">// num of clusters to start with
<FONT ID="LN">402 </FONT><A NAME="402"></A></FONT>    m_NumClusters =  m_MinNumClusters;
<FONT ID="LN">403 </FONT><A NAME="403"></A>
<FONT ID="LN">404 </FONT><A NAME="404"></A>    <FONT ID="SingleLineComment">// set distance function to default
<FONT ID="LN">405 </FONT><A NAME="405"></A></FONT>    <FONT ID="If">if</FONT> (m_DistanceF == <FONT ID="Null">null</FONT>) {
<FONT ID="LN">406 </FONT><A NAME="406"></A>      m_DistanceF = <FONT ID="New">new</FONT> <A HREF="../../weka/core/EuclideanDistance.java.html">EuclideanDistance</A>();
<FONT ID="LN">407 </FONT><A NAME="407"></A>    }
<FONT ID="LN">408 </FONT><A NAME="408"></A>
<FONT ID="LN">409 </FONT><A NAME="409"></A>    m_DistanceF.setInstances(m_Instances);
<FONT ID="LN">410 </FONT><A NAME="410"></A>    checkInstances();
<FONT ID="LN">411 </FONT><A NAME="411"></A>
<FONT ID="LN">412 </FONT><A NAME="412"></A>    <FONT ID="If">if</FONT> (m_DebugVectorsFile.exists() &amp;&amp; m_DebugVectorsFile.isFile())
<FONT ID="LN">413 </FONT><A NAME="413"></A>      initDebugVectorsInput();
<FONT ID="LN">414 </FONT><A NAME="414"></A>
<FONT ID="LN">415 </FONT><A NAME="415"></A>    <FONT ID="SingleLineComment">// make list of indexes for m_Instances
<FONT ID="LN">416 </FONT><A NAME="416"></A></FONT>    <FONT ID="Int">int</FONT>[] allInstList = <FONT ID="New">new</FONT> <FONT ID="Int">int</FONT>[m_Instances.numInstances()]; 
<FONT ID="LN">417 </FONT><A NAME="417"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; m_Instances.numInstances(); i++) {
<FONT ID="LN">418 </FONT><A NAME="418"></A>      allInstList[i] = i;
<FONT ID="LN">419 </FONT><A NAME="419"></A>    }
<FONT ID="LN">420 </FONT><A NAME="420"></A>    
<FONT ID="LN">421 </FONT><A NAME="421"></A>    <FONT ID="SingleLineComment">// set model used (just for convenience)
<FONT ID="LN">422 </FONT><A NAME="422"></A></FONT>    m_Model = <FONT ID="New">new</FONT> <A HREF="../../weka/core/Instances.java.html">Instances</A>(m_Instances, <FONT ID="IntegerLiteral">0</FONT>);
<FONT ID="LN">423 </FONT><A NAME="423"></A>
<FONT ID="LN">424 </FONT><A NAME="424"></A>    <FONT ID="SingleLineComment">// produce the starting centers
<FONT ID="LN">425 </FONT><A NAME="425"></A></FONT>    <FONT ID="If">if</FONT> (m_CenterInput != <FONT ID="Null">null</FONT>) {
<FONT ID="LN">426 </FONT><A NAME="426"></A>      <FONT ID="SingleLineComment">// read centers from file
<FONT ID="LN">427 </FONT><A NAME="427"></A></FONT>      m_ClusterCenters = <FONT ID="New">new</FONT> <A HREF="../../weka/core/Instances.java.html">Instances</A>(m_CenterInput);
<FONT ID="LN">428 </FONT><A NAME="428"></A>      m_NumClusters = m_ClusterCenters.numInstances();
<FONT ID="LN">429 </FONT><A NAME="429"></A>    }
<FONT ID="LN">430 </FONT><A NAME="430"></A>    <FONT ID="Else">else</FONT>
<FONT ID="LN">431 </FONT><A NAME="431"></A>      <FONT ID="SingleLineComment">// makes the first centers randomly
<FONT ID="LN">432 </FONT><A NAME="432"></A></FONT>      m_ClusterCenters = makeCentersRandomly(random0,
<FONT ID="LN">433 </FONT><A NAME="433"></A>                         m_Instances, m_NumClusters);
<FONT ID="LN">434 </FONT><A NAME="434"></A>    PFD(D_FOLLOWSPLIT, <FONT ID="StringLiteral">"\n*** Starting centers "</FONT>);
<FONT ID="LN">435 </FONT><A NAME="435"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> k = <FONT ID="IntegerLiteral">0</FONT>; k &lt; m_ClusterCenters.numInstances(); k++) {
<FONT ID="LN">436 </FONT><A NAME="436"></A>      PFD(D_FOLLOWSPLIT, <FONT ID="StringLiteral">"Center "</FONT> + k + <FONT ID="StringLiteral">": "</FONT> + m_ClusterCenters.instance(k));
<FONT ID="LN">437 </FONT><A NAME="437"></A>    }
<FONT ID="LN">438 </FONT><A NAME="438"></A>
<FONT ID="LN">439 </FONT><A NAME="439"></A>    PrCentersFD(D_PRINTCENTERS);
<FONT ID="LN">440 </FONT><A NAME="440"></A>
<FONT ID="LN">441 </FONT><A NAME="441"></A>    <FONT ID="Boolean">boolean</FONT> finished = <FONT ID="False">false</FONT>;
<FONT ID="LN">442 </FONT><A NAME="442"></A>    <A HREF="../../weka/core/Instances.java.html">Instances</A> children; 
<FONT ID="LN">443 </FONT><A NAME="443"></A>
<FONT ID="LN">444 </FONT><A NAME="444"></A>    <FONT ID="SingleLineComment">// builds up a KDTree
<FONT ID="LN">445 </FONT><A NAME="445"></A></FONT>    <FONT ID="If">if</FONT> (m_UseKDTree)
<FONT ID="LN">446 </FONT><A NAME="446"></A>      m_KDTree.setInstances(m_Instances);
<FONT ID="LN">447 </FONT><A NAME="447"></A>  
<FONT ID="LN">448 </FONT><A NAME="448"></A>    <FONT ID="SingleLineComment">// loop counter of main loop
<FONT ID="LN">449 </FONT><A NAME="449"></A></FONT>    m_IterationCount = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">450 </FONT><A NAME="450"></A>
<FONT ID="LN">451 </FONT><A NAME="451"></A>    <FONT ID="FormalComment">/**
<FONT ID="LN">452 </FONT><A NAME="452"></A>     * "finished" does get true as soon as:
<FONT ID="LN">453 </FONT><A NAME="453"></A>     * 1. number of clusters gets &gt;= m_MaxClusters, 
<FONT ID="LN">454 </FONT><A NAME="454"></A>     * 2. in the last round, none of the centers have been split
<FONT ID="LN">455 </FONT><A NAME="455"></A>     * 
<FONT ID="LN">456 </FONT><A NAME="456"></A>     * if number of clusters is already &gt;= m_MaxClusters 
<FONT ID="LN">457 </FONT><A NAME="457"></A>     * part 1 (= Improve-Params) is done at least once.
<FONT ID="LN">458 </FONT><A NAME="458"></A>     */</FONT>
<FONT ID="LN">459 </FONT><A NAME="459"></A>    <FONT ID="While">while</FONT> (!finished &amp;&amp;
<FONT ID="LN">460 </FONT><A NAME="460"></A>           !stopIteration(m_IterationCount, m_MaxIterations)) {
<FONT ID="LN">461 </FONT><A NAME="461"></A>      
<FONT ID="LN">462 </FONT><A NAME="462"></A>      <FONT ID="MultiLineComment">/* ====================================================================
<FONT ID="LN">463 </FONT><A NAME="463"></A>       * 1. Improve-Params                  
<FONT ID="LN">464 </FONT><A NAME="464"></A>       *    conventional K-means
<FONT ID="LN">465 </FONT><A NAME="465"></A>       */</FONT>
<FONT ID="LN">466 </FONT><A NAME="466"></A>
<FONT ID="LN">467 </FONT><A NAME="467"></A>
<FONT ID="LN">468 </FONT><A NAME="468"></A>      PFD(D_FOLLOWSPLIT, <FONT ID="StringLiteral">"\nBeginning of main loop - centers:"</FONT>);
<FONT ID="LN">469 </FONT><A NAME="469"></A>      PrCentersFD(D_FOLLOWSPLIT);
<FONT ID="LN">470 </FONT><A NAME="470"></A>
<FONT ID="LN">471 </FONT><A NAME="471"></A>      PFD(D_ITERCOUNT, <FONT ID="StringLiteral">"\n*** 1. Improve-Params "</FONT> + m_IterationCount + 
<FONT ID="LN">472 </FONT><A NAME="472"></A>      <FONT ID="StringLiteral">". time"</FONT>);
<FONT ID="LN">473 </FONT><A NAME="473"></A>      m_IterationCount++;
<FONT ID="LN">474 </FONT><A NAME="474"></A>
<FONT ID="LN">475 </FONT><A NAME="475"></A>      <FONT ID="SingleLineComment">// prepare to converge
<FONT ID="LN">476 </FONT><A NAME="476"></A></FONT>      <FONT ID="Boolean">boolean</FONT> converged = <FONT ID="False">false</FONT>;
<FONT ID="LN">477 </FONT><A NAME="477"></A>
<FONT ID="LN">478 </FONT><A NAME="478"></A>      <FONT ID="SingleLineComment">// initialize assignments to -1
<FONT ID="LN">479 </FONT><A NAME="479"></A></FONT>      m_ClusterAssignments = initAssignments(m_Instances.numInstances());
<FONT ID="LN">480 </FONT><A NAME="480"></A>      <FONT ID="SingleLineComment">// stores a list of indexes of instances belonging to each center
<FONT ID="LN">481 </FONT><A NAME="481"></A></FONT>      <FONT ID="Int">int</FONT>[][] instOfCent = <FONT ID="New">new</FONT> <FONT ID="Int">int</FONT>[m_ClusterCenters.numInstances()][];
<FONT ID="LN">482 </FONT><A NAME="482"></A>
<FONT ID="LN">483 </FONT><A NAME="483"></A>      <FONT ID="SingleLineComment">// KMeans loop counter
<FONT ID="LN">484 </FONT><A NAME="484"></A></FONT>      <FONT ID="Int">int</FONT> kMeansIteration = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">485 </FONT><A NAME="485"></A>
<FONT ID="LN">486 </FONT><A NAME="486"></A>      <FONT ID="SingleLineComment">// converge in conventional K-means ----------------------------------
<FONT ID="LN">487 </FONT><A NAME="487"></A></FONT>      PFD(D_FOLLOWSPLIT, <FONT ID="StringLiteral">"\nConverge in K-Means:"</FONT>);
<FONT ID="LN">488 </FONT><A NAME="488"></A>      <FONT ID="While">while</FONT> (!converged &amp;&amp; 
<FONT ID="LN">489 </FONT><A NAME="489"></A>         !stopKMeansIteration(kMeansIteration, m_MaxKMeans)) {
<FONT ID="LN">490 </FONT><A NAME="490"></A>    
<FONT ID="LN">491 </FONT><A NAME="491"></A>    kMeansIteration++;
<FONT ID="LN">492 </FONT><A NAME="492"></A>    converged = <FONT ID="True">true</FONT>;
<FONT ID="LN">493 </FONT><A NAME="493"></A>    
<FONT ID="LN">494 </FONT><A NAME="494"></A>        <FONT ID="SingleLineComment">// assign instances to centers -------------------------------------
<FONT ID="LN">495 </FONT><A NAME="495"></A></FONT>        converged = assignToCenters(m_UseKDTree ? m_KDTree : <FONT ID="Null">null</FONT>,
<FONT ID="LN">496 </FONT><A NAME="496"></A>                    m_ClusterCenters, 
<FONT ID="LN">497 </FONT><A NAME="497"></A>                    instOfCent,
<FONT ID="LN">498 </FONT><A NAME="498"></A>                    allInstList, 
<FONT ID="LN">499 </FONT><A NAME="499"></A>                    m_ClusterAssignments,
<FONT ID="LN">500 </FONT><A NAME="500"></A>                    kMeansIteration);
<FONT ID="LN">501 </FONT><A NAME="501"></A>    
<FONT ID="LN">502 </FONT><A NAME="502"></A>    PFD(D_FOLLOWSPLIT, <FONT ID="StringLiteral">"\nMain loop - Assign - centers:"</FONT>);
<FONT ID="LN">503 </FONT><A NAME="503"></A>    PrCentersFD(D_FOLLOWSPLIT);
<FONT ID="LN">504 </FONT><A NAME="504"></A>    <FONT ID="SingleLineComment">// compute new centers = centers of mass of points
<FONT ID="LN">505 </FONT><A NAME="505"></A></FONT>        converged = recomputeCenters(m_ClusterCenters, <FONT ID="SingleLineComment">// clusters
<FONT ID="LN">506 </FONT><A NAME="506"></A></FONT>                     instOfCent,       <FONT ID="SingleLineComment">// their instances
<FONT ID="LN">507 </FONT><A NAME="507"></A></FONT>                     m_Model);         <FONT ID="SingleLineComment">// model information
<FONT ID="LN">508 </FONT><A NAME="508"></A></FONT>      PFD(D_FOLLOWSPLIT, <FONT ID="StringLiteral">"\nMain loop - Recompute - centers:"</FONT>);
<FONT ID="LN">509 </FONT><A NAME="509"></A>      PrCentersFD(D_FOLLOWSPLIT);
<FONT ID="LN">510 </FONT><A NAME="510"></A>      }
<FONT ID="LN">511 </FONT><A NAME="511"></A>      PFD(D_FOLLOWSPLIT, <FONT ID="StringLiteral">""</FONT>);
<FONT ID="LN">512 </FONT><A NAME="512"></A>      PFD(D_FOLLOWSPLIT, <FONT ID="StringLiteral">"End of Part: 1. Improve-Params - conventional K-means"</FONT>);
<FONT ID="LN">513 </FONT><A NAME="513"></A>
<FONT ID="LN">514 </FONT><A NAME="514"></A>      <FONT ID="FormalComment">/** =====================================================================
<FONT ID="LN">515 </FONT><A NAME="515"></A>       * 2. Improve-Structur
<FONT ID="LN">516 </FONT><A NAME="516"></A>       */</FONT>
<FONT ID="LN">517 </FONT><A NAME="517"></A>
<FONT ID="LN">518 </FONT><A NAME="518"></A>      <FONT ID="SingleLineComment">// BIC before split distortioning the centres
<FONT ID="LN">519 </FONT><A NAME="519"></A></FONT>      m_Mle = distortion(instOfCent, m_ClusterCenters);
<FONT ID="LN">520 </FONT><A NAME="520"></A>      m_Bic = calculateBIC(instOfCent, m_ClusterCenters, m_Mle);
<FONT ID="LN">521 </FONT><A NAME="521"></A>      PFD(D_FOLLOWSPLIT, <FONT ID="StringLiteral">"m_Bic "</FONT> + m_Bic);
<FONT ID="LN">522 </FONT><A NAME="522"></A>
<FONT ID="LN">523 </FONT><A NAME="523"></A>      <FONT ID="Int">int</FONT> currNumCent = m_ClusterCenters.numInstances();
<FONT ID="LN">524 </FONT><A NAME="524"></A>      <A HREF="../../weka/core/Instances.java.html">Instances</A> splitCenters = <FONT ID="New">new</FONT> <A HREF="../../weka/core/Instances.java.html">Instances</A>(m_ClusterCenters, 
<FONT ID="LN">525 </FONT><A NAME="525"></A>                         currNumCent * <FONT ID="IntegerLiteral">2</FONT>);
<FONT ID="LN">526 </FONT><A NAME="526"></A>      
<FONT ID="LN">527 </FONT><A NAME="527"></A>      <FONT ID="SingleLineComment">// store BIC values of parent and children
<FONT ID="LN">528 </FONT><A NAME="528"></A></FONT>      <FONT ID="Double">double</FONT>[] pbic = <FONT ID="New">new</FONT> <FONT ID="Double">double</FONT> [currNumCent];
<FONT ID="LN">529 </FONT><A NAME="529"></A>      <FONT ID="Double">double</FONT>[] cbic = <FONT ID="New">new</FONT> <FONT ID="Double">double</FONT> [currNumCent];
<FONT ID="LN">530 </FONT><A NAME="530"></A>            
<FONT ID="LN">531 </FONT><A NAME="531"></A>      <FONT ID="SingleLineComment">// split each center
<FONT ID="LN">532 </FONT><A NAME="532"></A></FONT>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; currNumCent 
<FONT ID="LN">533 </FONT><A NAME="533"></A>       <FONT ID="SingleLineComment">// this could help to optimize the algorithm
<FONT ID="LN">534 </FONT><A NAME="534"></A></FONT>       <FONT ID="SingleLineComment">//        &amp;&amp; currNumCent + numSplits &lt;= m_MaxNumClusters
<FONT ID="LN">535 </FONT><A NAME="535"></A></FONT>           ; 
<FONT ID="LN">536 </FONT><A NAME="536"></A>       i++) {
<FONT ID="LN">537 </FONT><A NAME="537"></A>    
<FONT ID="LN">538 </FONT><A NAME="538"></A>    PFD(D_FOLLOWSPLIT, <FONT ID="StringLiteral">"\nsplit center "</FONT> + i +
<FONT ID="LN">539 </FONT><A NAME="539"></A>              <FONT ID="StringLiteral">" "</FONT> + m_ClusterCenters.instance(i));
<FONT ID="LN">540 </FONT><A NAME="540"></A>    <A HREF="../../weka/core/Instance.java.html">Instance</A> currCenter = m_ClusterCenters.instance(i);
<FONT ID="LN">541 </FONT><A NAME="541"></A>    <FONT ID="Int">int</FONT>[] currInstList = instOfCent[i];
<FONT ID="LN">542 </FONT><A NAME="542"></A>    <FONT ID="Int">int</FONT> currNumInst = instOfCent[i].length;
<FONT ID="LN">543 </FONT><A NAME="543"></A>    
<FONT ID="LN">544 </FONT><A NAME="544"></A>    <FONT ID="SingleLineComment">// not enough instances; than continue with next
<FONT ID="LN">545 </FONT><A NAME="545"></A></FONT>    <FONT ID="If">if</FONT> (currNumInst &lt;= <FONT ID="IntegerLiteral">2</FONT>) {
<FONT ID="LN">546 </FONT><A NAME="546"></A>      pbic[i] = Double.MAX_VALUE;
<FONT ID="LN">547 </FONT><A NAME="547"></A>      cbic[i] = <FONT ID="FloatPointLiteral">0.0</FONT>;
<FONT ID="LN">548 </FONT><A NAME="548"></A>      <FONT ID="SingleLineComment">// add center itself as dummy
<FONT ID="LN">549 </FONT><A NAME="549"></A></FONT>      splitCenters.add(currCenter);
<FONT ID="LN">550 </FONT><A NAME="550"></A>      splitCenters.add(currCenter);
<FONT ID="LN">551 </FONT><A NAME="551"></A>      <FONT ID="Continue">continue</FONT>;
<FONT ID="LN">552 </FONT><A NAME="552"></A>    }
<FONT ID="LN">553 </FONT><A NAME="553"></A>    
<FONT ID="LN">554 </FONT><A NAME="554"></A>    <FONT ID="SingleLineComment">// split centers  ----------------------------------------------
<FONT ID="LN">555 </FONT><A NAME="555"></A></FONT>    <FONT ID="Double">double</FONT> variance = m_Mle[i] / (<FONT ID="Double">double</FONT>)currNumInst;
<FONT ID="LN">556 </FONT><A NAME="556"></A>    children = splitCenter(random0, currCenter, variance, m_Model);
<FONT ID="LN">557 </FONT><A NAME="557"></A>    
<FONT ID="LN">558 </FONT><A NAME="558"></A>    <FONT ID="SingleLineComment">// initialize assignments to -1
<FONT ID="LN">559 </FONT><A NAME="559"></A></FONT>    <FONT ID="Int">int</FONT>[] oneCentAssignments = initAssignments(currNumInst);
<FONT ID="LN">560 </FONT><A NAME="560"></A>    <FONT ID="Int">int</FONT>[][] instOfChCent = <FONT ID="New">new</FONT> <FONT ID="Int">int</FONT> [<FONT ID="IntegerLiteral">2</FONT>][]; <FONT ID="SingleLineComment">// todo maybe split didn't work
<FONT ID="LN">561 </FONT><A NAME="561"></A></FONT>    
<FONT ID="LN">562 </FONT><A NAME="562"></A>    <FONT ID="SingleLineComment">// converge the children  --------------------------------------
<FONT ID="LN">563 </FONT><A NAME="563"></A></FONT>    converged = <FONT ID="False">false</FONT>;
<FONT ID="LN">564 </FONT><A NAME="564"></A>    <FONT ID="Int">int</FONT> kMeansForChildrenIteration = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">565 </FONT><A NAME="565"></A>    PFD(D_FOLLOWSPLIT, <FONT ID="StringLiteral">"\nConverge, K-Means for children: "</FONT> + i);
<FONT ID="LN">566 </FONT><A NAME="566"></A>    <FONT ID="While">while</FONT> (!converged &amp;&amp; 
<FONT ID="LN">567 </FONT><A NAME="567"></A>          !stopKMeansIteration(kMeansForChildrenIteration, 
<FONT ID="LN">568 </FONT><A NAME="568"></A>                   m_MaxKMeansForChildren)) {
<FONT ID="LN">569 </FONT><A NAME="569"></A>      kMeansForChildrenIteration++;
<FONT ID="LN">570 </FONT><A NAME="570"></A>      
<FONT ID="LN">571 </FONT><A NAME="571"></A>      converged =
<FONT ID="LN">572 </FONT><A NAME="572"></A>        assignToCenters(children, instOfChCent,
<FONT ID="LN">573 </FONT><A NAME="573"></A>                currInstList, oneCentAssignments);
<FONT ID="LN">574 </FONT><A NAME="574"></A>
<FONT ID="LN">575 </FONT><A NAME="575"></A>      <FONT ID="If">if</FONT> (!converged) {       
<FONT ID="LN">576 </FONT><A NAME="576"></A>        recomputeCentersFast(children, instOfChCent, m_Model);
<FONT ID="LN">577 </FONT><A NAME="577"></A>      }
<FONT ID="LN">578 </FONT><A NAME="578"></A>    } 
<FONT ID="LN">579 </FONT><A NAME="579"></A>
<FONT ID="LN">580 </FONT><A NAME="580"></A>    <FONT ID="SingleLineComment">// store new centers for later decision if they are taken
<FONT ID="LN">581 </FONT><A NAME="581"></A></FONT>    splitCenters.add(children.instance(<FONT ID="IntegerLiteral">0</FONT>));
<FONT ID="LN">582 </FONT><A NAME="582"></A>    splitCenters.add(children.instance(<FONT ID="IntegerLiteral">1</FONT>));
<FONT ID="LN">583 </FONT><A NAME="583"></A>
<FONT ID="LN">584 </FONT><A NAME="584"></A>    PFD(D_FOLLOWSPLIT, <FONT ID="StringLiteral">"\nconverged cildren "</FONT>);
<FONT ID="LN">585 </FONT><A NAME="585"></A>    PFD(D_FOLLOWSPLIT, <FONT ID="StringLiteral">" "</FONT> + children.instance(<FONT ID="IntegerLiteral">0</FONT>));
<FONT ID="LN">586 </FONT><A NAME="586"></A>    PFD(D_FOLLOWSPLIT, <FONT ID="StringLiteral">" "</FONT> + children.instance(<FONT ID="IntegerLiteral">1</FONT>));
<FONT ID="LN">587 </FONT><A NAME="587"></A>
<FONT ID="LN">588 </FONT><A NAME="588"></A>    <FONT ID="SingleLineComment">// compare parent and children model by their BIC-value
<FONT ID="LN">589 </FONT><A NAME="589"></A></FONT>    pbic[i] = calculateBIC(currInstList, currCenter,  m_Mle[i], m_Model);
<FONT ID="LN">590 </FONT><A NAME="590"></A>    <FONT ID="Double">double</FONT>[] chMLE = distortion(instOfChCent, children);
<FONT ID="LN">591 </FONT><A NAME="591"></A>    cbic[i] = calculateBIC(instOfChCent, children, chMLE);
<FONT ID="LN">592 </FONT><A NAME="592"></A>
<FONT ID="LN">593 </FONT><A NAME="593"></A>      } <FONT ID="SingleLineComment">// end of loop over clusters
<FONT ID="LN">594 </FONT><A NAME="594"></A></FONT>
<FONT ID="LN">595 </FONT><A NAME="595"></A>      <FONT ID="SingleLineComment">// decide which one to split and make new list of cluster centers
<FONT ID="LN">596 </FONT><A NAME="596"></A></FONT>      <A HREF="../../weka/core/Instances.java.html">Instances</A> newClusterCenters = <FONT ID="Null">null</FONT>;
<FONT ID="LN">597 </FONT><A NAME="597"></A>      newClusterCenters = newCentersAfterSplit(pbic, cbic, m_CutOffFactor,
<FONT ID="LN">598 </FONT><A NAME="598"></A>                                                 splitCenters);
<FONT ID="LN">599 </FONT><A NAME="599"></A>      <FONT ID="FormalComment">/**
<FONT ID="LN">600 </FONT><A NAME="600"></A>       * Compare with before Improve-Structure
<FONT ID="LN">601 </FONT><A NAME="601"></A>       */</FONT>
<FONT ID="LN">602 </FONT><A NAME="602"></A>      <FONT ID="Int">int</FONT> newNumClusters = newClusterCenters.numInstances();
<FONT ID="LN">603 </FONT><A NAME="603"></A>      <FONT ID="If">if</FONT> (newNumClusters != m_NumClusters) {
<FONT ID="LN">604 </FONT><A NAME="604"></A>    
<FONT ID="LN">605 </FONT><A NAME="605"></A>    PFD(D_FOLLOWSPLIT, <FONT ID="StringLiteral">"Compare with non-split"</FONT>);
<FONT ID="LN">606 </FONT><A NAME="606"></A>
<FONT ID="LN">607 </FONT><A NAME="607"></A>    <FONT ID="SingleLineComment">// initialize assignments to -1
<FONT ID="LN">608 </FONT><A NAME="608"></A></FONT>    <FONT ID="Int">int</FONT>[] newClusterAssignments = 
<FONT ID="LN">609 </FONT><A NAME="609"></A>      initAssignments(m_Instances.numInstances());
<FONT ID="LN">610 </FONT><A NAME="610"></A>    
<FONT ID="LN">611 </FONT><A NAME="611"></A>    <FONT ID="SingleLineComment">// stores a list of indexes of instances belonging to each center
<FONT ID="LN">612 </FONT><A NAME="612"></A></FONT>    <FONT ID="Int">int</FONT>[][] newInstOfCent = <FONT ID="New">new</FONT> <FONT ID="Int">int</FONT>[newClusterCenters.numInstances()][];
<FONT ID="LN">613 </FONT><A NAME="613"></A>    
<FONT ID="LN">614 </FONT><A NAME="614"></A>    <FONT ID="SingleLineComment">// assign instances to centers -------------------------------------
<FONT ID="LN">615 </FONT><A NAME="615"></A></FONT>    converged = assignToCenters(m_UseKDTree ? m_KDTree : <FONT ID="Null">null</FONT>,
<FONT ID="LN">616 </FONT><A NAME="616"></A>                    newClusterCenters, 
<FONT ID="LN">617 </FONT><A NAME="617"></A>                    newInstOfCent,
<FONT ID="LN">618 </FONT><A NAME="618"></A>                    allInstList, 
<FONT ID="LN">619 </FONT><A NAME="619"></A>                    newClusterAssignments,
<FONT ID="LN">620 </FONT><A NAME="620"></A>                    m_IterationCount);
<FONT ID="LN">621 </FONT><A NAME="621"></A>    
<FONT ID="LN">622 </FONT><A NAME="622"></A>    <FONT ID="Double">double</FONT>[] newMle = distortion(newInstOfCent, newClusterCenters);
<FONT ID="LN">623 </FONT><A NAME="623"></A>    <FONT ID="Double">double</FONT> newBic = calculateBIC(newInstOfCent, newClusterCenters, newMle);
<FONT ID="LN">624 </FONT><A NAME="624"></A>    PFD(D_FOLLOWSPLIT, <FONT ID="StringLiteral">"newBic "</FONT> + newBic);
<FONT ID="LN">625 </FONT><A NAME="625"></A>    <FONT ID="If">if</FONT> (newBic &gt; m_Bic) {
<FONT ID="LN">626 </FONT><A NAME="626"></A>          PFD(D_FOLLOWSPLIT, <FONT ID="StringLiteral">"*** decide for new clusters"</FONT>);
<FONT ID="LN">627 </FONT><A NAME="627"></A>      m_Bic = newBic;
<FONT ID="LN">628 </FONT><A NAME="628"></A>      m_ClusterCenters = newClusterCenters;
<FONT ID="LN">629 </FONT><A NAME="629"></A>      m_ClusterAssignments = newClusterAssignments;
<FONT ID="LN">630 </FONT><A NAME="630"></A>    } <FONT ID="Else">else</FONT> {
<FONT ID="LN">631 </FONT><A NAME="631"></A>          PFD(D_FOLLOWSPLIT, <FONT ID="StringLiteral">"*** keep old clusters"</FONT>);
<FONT ID="LN">632 </FONT><A NAME="632"></A>        }
<FONT ID="LN">633 </FONT><A NAME="633"></A>      }
<FONT ID="LN">634 </FONT><A NAME="634"></A>
<FONT ID="LN">635 </FONT><A NAME="635"></A>      newNumClusters = m_ClusterCenters.numInstances();
<FONT ID="LN">636 </FONT><A NAME="636"></A>      <FONT ID="SingleLineComment">// decide if finished: max num cluster reached 
<FONT ID="LN">637 </FONT><A NAME="637"></A></FONT>      <FONT ID="SingleLineComment">// or last centers where not split at all 
<FONT ID="LN">638 </FONT><A NAME="638"></A></FONT>      <FONT ID="If">if</FONT> ((newNumClusters &gt;= m_MaxNumClusters) 
<FONT ID="LN">639 </FONT><A NAME="639"></A>      || (newNumClusters == m_NumClusters)) {
<FONT ID="LN">640 </FONT><A NAME="640"></A>    finished = <FONT ID="True">true</FONT>;
<FONT ID="LN">641 </FONT><A NAME="641"></A>      }
<FONT ID="LN">642 </FONT><A NAME="642"></A>      m_NumClusters = newNumClusters;
<FONT ID="LN">643 </FONT><A NAME="643"></A>    }
<FONT ID="LN">644 </FONT><A NAME="644"></A>  }
<FONT ID="LN">645 </FONT><A NAME="645"></A>
<FONT ID="LN">646 </FONT><A NAME="646"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">647 </FONT><A NAME="647"></A>   * Checks for nominal attributes in the dataset.
<FONT ID="LN">648 </FONT><A NAME="648"></A>   * Class attribute is ignored.
<FONT ID="LN">649 </FONT><A NAME="649"></A>   * @param data the data to check
<FONT ID="LN">650 </FONT><A NAME="650"></A>   * @return false if no nominal attributes are present
<FONT ID="LN">651 </FONT><A NAME="651"></A>   */</FONT>
<FONT ID="LN">652 </FONT><A NAME="652"></A>  <FONT ID="Public">public</FONT> <FONT ID="Boolean">boolean</FONT> checkForNominalAttributes(<A HREF="../../weka/core/Instances.java.html">Instances</A> data) {
<FONT ID="LN">653 </FONT><A NAME="653"></A>
<FONT ID="LN">654 </FONT><A NAME="654"></A>    <FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">655 </FONT><A NAME="655"></A>    <FONT ID="While">while</FONT> (i &lt; data.numAttributes()) {
<FONT ID="LN">656 </FONT><A NAME="656"></A>      <FONT ID="If">if</FONT> ((i != data.classIndex()) &amp;&amp; data.attribute(i++).isNominal()) {
<FONT ID="LN">657 </FONT><A NAME="657"></A>    <FONT ID="Return">return</FONT> <FONT ID="True">true</FONT>;
<FONT ID="LN">658 </FONT><A NAME="658"></A>      }
<FONT ID="LN">659 </FONT><A NAME="659"></A>    }
<FONT ID="LN">660 </FONT><A NAME="660"></A>    <FONT ID="Return">return</FONT> <FONT ID="False">false</FONT>;
<FONT ID="LN">661 </FONT><A NAME="661"></A>  }
<FONT ID="LN">662 </FONT><A NAME="662"></A>
<FONT ID="LN">663 </FONT><A NAME="663"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">664 </FONT><A NAME="664"></A>   * Set array of int, used to store assignments, to -1.
<FONT ID="LN">665 </FONT><A NAME="665"></A>   * @param ass integer array used for storing assignments
<FONT ID="LN">666 </FONT><A NAME="666"></A>   * @return integer array used for storing assignments
<FONT ID="LN">667 </FONT><A NAME="667"></A>   */</FONT>
<FONT ID="LN">668 </FONT><A NAME="668"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Int">int</FONT>[] initAssignments(<FONT ID="Int">int</FONT>[] ass) {
<FONT ID="LN">669 </FONT><A NAME="669"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; ass.length; i++)
<FONT ID="LN">670 </FONT><A NAME="670"></A>      ass[i] = -<FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">671 </FONT><A NAME="671"></A>    <FONT ID="Return">return</FONT> ass;
<FONT ID="LN">672 </FONT><A NAME="672"></A>  }    
<FONT ID="LN">673 </FONT><A NAME="673"></A> 
<FONT ID="LN">674 </FONT><A NAME="674"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">675 </FONT><A NAME="675"></A>   * Creates and initializes integer array, used to store assignments.
<FONT ID="LN">676 </FONT><A NAME="676"></A>   * @param numInstances length of array used for assignments
<FONT ID="LN">677 </FONT><A NAME="677"></A>   * @return integer array used for storing assignments
<FONT ID="LN">678 </FONT><A NAME="678"></A>   */</FONT>
<FONT ID="LN">679 </FONT><A NAME="679"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Int">int</FONT>[] initAssignments(<FONT ID="Int">int</FONT> numInstances) {
<FONT ID="LN">680 </FONT><A NAME="680"></A>    <FONT ID="Int">int</FONT>[] ass = <FONT ID="New">new</FONT> <FONT ID="Int">int</FONT>[numInstances];
<FONT ID="LN">681 </FONT><A NAME="681"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; numInstances; i++)
<FONT ID="LN">682 </FONT><A NAME="682"></A>      ass[i] = -<FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">683 </FONT><A NAME="683"></A>    <FONT ID="Return">return</FONT> ass;
<FONT ID="LN">684 </FONT><A NAME="684"></A>  }    
<FONT ID="LN">685 </FONT><A NAME="685"></A>  
<FONT ID="LN">686 </FONT><A NAME="686"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">687 </FONT><A NAME="687"></A>   * Creates and initializes boolean array.
<FONT ID="LN">688 </FONT><A NAME="688"></A>   * @param len length of new array
<FONT ID="LN">689 </FONT><A NAME="689"></A>   * @return the new array
<FONT ID="LN">690 </FONT><A NAME="690"></A>   */</FONT>
<FONT ID="LN">691 </FONT><A NAME="691"></A>  <FONT ID="Boolean">boolean</FONT>[] initBoolArray(<FONT ID="Int">int</FONT> len) {
<FONT ID="LN">692 </FONT><A NAME="692"></A>    <FONT ID="Boolean">boolean</FONT>[] boolArray = <FONT ID="New">new</FONT> <FONT ID="Boolean">boolean</FONT> [len];
<FONT ID="LN">693 </FONT><A NAME="693"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; len; i++) {
<FONT ID="LN">694 </FONT><A NAME="694"></A>      boolArray[i] = <FONT ID="False">false</FONT>;
<FONT ID="LN">695 </FONT><A NAME="695"></A>    }
<FONT ID="LN">696 </FONT><A NAME="696"></A>    <FONT ID="Return">return</FONT> boolArray;
<FONT ID="LN">697 </FONT><A NAME="697"></A>  }
<FONT ID="LN">698 </FONT><A NAME="698"></A>
<FONT ID="LN">699 </FONT><A NAME="699"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">700 </FONT><A NAME="700"></A>   * Returns new center list.
<FONT ID="LN">701 </FONT><A NAME="701"></A>   *
<FONT ID="LN">702 </FONT><A NAME="702"></A>   * The following steps 1. and 2. both take care that the number of centers
<FONT ID="LN">703 </FONT><A NAME="703"></A>   * does not exceed maxCenters.
<FONT ID="LN">704 </FONT><A NAME="704"></A>   *
<FONT ID="LN">705 </FONT><A NAME="705"></A>   * 1. Compare BIC values of parent and children and takes the one as
<FONT ID="LN">706 </FONT><A NAME="706"></A>   * new centers which do win (= BIC-value is smaller).
<FONT ID="LN">707 </FONT><A NAME="707"></A>   *
<FONT ID="LN">708 </FONT><A NAME="708"></A>   * 2. If in 1. none of the children are chosen 
<FONT ID="LN">709 </FONT><A NAME="709"></A>   *    &amp;&amp; and cutoff factor is &gt; 0
<FONT ID="LN">710 </FONT><A NAME="710"></A>   * cutoff factor is taken as the percentage of "best" centers that are
<FONT ID="LN">711 </FONT><A NAME="711"></A>   * still taken.
<FONT ID="LN">712 </FONT><A NAME="712"></A>   * @param pbic array of parents BIC-values
<FONT ID="LN">713 </FONT><A NAME="713"></A>   * @param cbic array of childrens BIC-values
<FONT ID="LN">714 </FONT><A NAME="714"></A>   * @param cutoffFactor cutoff factor 
<FONT ID="LN">715 </FONT><A NAME="715"></A>   * @param splitCenters all children 
<FONT ID="LN">716 </FONT><A NAME="716"></A>   * @return the new centers
<FONT ID="LN">717 </FONT><A NAME="717"></A>   */</FONT>
<FONT ID="LN">718 </FONT><A NAME="718"></A>  <FONT ID="Protected">protected</FONT> <A HREF="../../weka/core/Instances.java.html">Instances</A> newCentersAfterSplit(<FONT ID="Double">double</FONT>[] pbic, 
<FONT ID="LN">719 </FONT><A NAME="719"></A>                     <FONT ID="Double">double</FONT>[] cbic,
<FONT ID="LN">720 </FONT><A NAME="720"></A>                     <FONT ID="Double">double</FONT> cutoffFactor,
<FONT ID="LN">721 </FONT><A NAME="721"></A>                     <A HREF="../../weka/core/Instances.java.html">Instances</A> splitCenters) {
<FONT ID="LN">722 </FONT><A NAME="722"></A>
<FONT ID="LN">723 </FONT><A NAME="723"></A>    <FONT ID="SingleLineComment">// store if split won
<FONT ID="LN">724 </FONT><A NAME="724"></A></FONT>    <FONT ID="Boolean">boolean</FONT> splitPerCutoff = <FONT ID="False">false</FONT>;
<FONT ID="LN">725 </FONT><A NAME="725"></A>    <FONT ID="Boolean">boolean</FONT> takeSomeAway = <FONT ID="False">false</FONT>;
<FONT ID="LN">726 </FONT><A NAME="726"></A>    <FONT ID="Boolean">boolean</FONT>[] splitWon = initBoolArray(m_ClusterCenters.numInstances());
<FONT ID="LN">727 </FONT><A NAME="727"></A>    <FONT ID="Int">int</FONT> numToSplit = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">728 </FONT><A NAME="728"></A>    <A HREF="../../weka/core/Instances.java.html">Instances</A> newCenters = <FONT ID="Null">null</FONT>;
<FONT ID="LN">729 </FONT><A NAME="729"></A>    
<FONT ID="LN">730 </FONT><A NAME="730"></A>    <FONT ID="SingleLineComment">// how many would be split, because the children have a better bic value
<FONT ID="LN">731 </FONT><A NAME="731"></A></FONT>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; cbic.length; i++) {
<FONT ID="LN">732 </FONT><A NAME="732"></A>      <FONT ID="If">if</FONT> (cbic[i] &gt; pbic[i]) {
<FONT ID="LN">733 </FONT><A NAME="733"></A>    <FONT ID="SingleLineComment">// decide for splitting ----------------------------------------
<FONT ID="LN">734 </FONT><A NAME="734"></A></FONT>    splitWon[i] = <FONT ID="True">true</FONT>; numToSplit++;
<FONT ID="LN">735 </FONT><A NAME="735"></A>    PFD(D_FOLLOWSPLIT, <FONT ID="StringLiteral">"Center "</FONT> + i + <FONT ID="StringLiteral">" decide for children"</FONT>);
<FONT ID="LN">736 </FONT><A NAME="736"></A>      }
<FONT ID="LN">737 </FONT><A NAME="737"></A>      <FONT ID="Else">else</FONT> {
<FONT ID="LN">738 </FONT><A NAME="738"></A>    <FONT ID="SingleLineComment">// decide for parents and finished stays true  -----------------
<FONT ID="LN">739 </FONT><A NAME="739"></A></FONT>    PFD(D_FOLLOWSPLIT, <FONT ID="StringLiteral">"Center "</FONT> + i + <FONT ID="StringLiteral">" decide for parent"</FONT>);
<FONT ID="LN">740 </FONT><A NAME="740"></A>      }
<FONT ID="LN">741 </FONT><A NAME="741"></A>    }
<FONT ID="LN">742 </FONT><A NAME="742"></A>
<FONT ID="LN">743 </FONT><A NAME="743"></A>    <FONT ID="SingleLineComment">// no splits yet so split per cutoff factor
<FONT ID="LN">744 </FONT><A NAME="744"></A></FONT>    <FONT ID="If">if</FONT> ((numToSplit == <FONT ID="IntegerLiteral">0</FONT>) &amp;&amp; (cutoffFactor &gt; <FONT ID="IntegerLiteral">0</FONT>)) {
<FONT ID="LN">745 </FONT><A NAME="745"></A>      splitPerCutoff = <FONT ID="True">true</FONT>;
<FONT ID="LN">746 </FONT><A NAME="746"></A>      
<FONT ID="LN">747 </FONT><A NAME="747"></A>      <FONT ID="SingleLineComment">// how many to split per cutoff factor
<FONT ID="LN">748 </FONT><A NAME="748"></A></FONT>      numToSplit = (<FONT ID="Int">int</FONT>) 
<FONT ID="LN">749 </FONT><A NAME="749"></A>        ((<FONT ID="Double">double</FONT>) m_ClusterCenters.numInstances() * m_CutOffFactor); 
<FONT ID="LN">750 </FONT><A NAME="750"></A>    }
<FONT ID="LN">751 </FONT><A NAME="751"></A>
<FONT ID="LN">752 </FONT><A NAME="752"></A>    <FONT ID="SingleLineComment">// prepare indexes of values in ascending order  
<FONT ID="LN">753 </FONT><A NAME="753"></A></FONT>    <FONT ID="Double">double</FONT>[] diff = <FONT ID="New">new</FONT> <FONT ID="Double">double</FONT> [m_NumClusters];
<FONT ID="LN">754 </FONT><A NAME="754"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = <FONT ID="IntegerLiteral">0</FONT>; j &lt; diff.length; j++) {
<FONT ID="LN">755 </FONT><A NAME="755"></A>      diff[j] = pbic[j] - cbic[j];
<FONT ID="LN">756 </FONT><A NAME="756"></A>    }    
<FONT ID="LN">757 </FONT><A NAME="757"></A>    <FONT ID="Int">int</FONT>[] sortOrder = Utils.sort(diff);
<FONT ID="LN">758 </FONT><A NAME="758"></A>    
<FONT ID="LN">759 </FONT><A NAME="759"></A>    <FONT ID="SingleLineComment">// check if maxNumClusters would be exceeded
<FONT ID="LN">760 </FONT><A NAME="760"></A></FONT>    <FONT ID="Int">int</FONT> possibleToSplit = m_MaxNumClusters - m_NumClusters; 
<FONT ID="LN">761 </FONT><A NAME="761"></A>
<FONT ID="LN">762 </FONT><A NAME="762"></A>    <FONT ID="If">if</FONT> (possibleToSplit &gt; numToSplit) {
<FONT ID="LN">763 </FONT><A NAME="763"></A>      <FONT ID="SingleLineComment">// still enough possible, do the whole amount
<FONT ID="LN">764 </FONT><A NAME="764"></A></FONT>      possibleToSplit = numToSplit;
<FONT ID="LN">765 </FONT><A NAME="765"></A>    }
<FONT ID="LN">766 </FONT><A NAME="766"></A>    <FONT ID="Else">else</FONT>
<FONT ID="LN">767 </FONT><A NAME="767"></A>      takeSomeAway = <FONT ID="True">true</FONT>;
<FONT ID="LN">768 </FONT><A NAME="768"></A>
<FONT ID="LN">769 </FONT><A NAME="769"></A>    <FONT ID="SingleLineComment">// prepare for splitting the one that are supposed to be split
<FONT ID="LN">770 </FONT><A NAME="770"></A></FONT>    <FONT ID="If">if</FONT> (splitPerCutoff) {
<FONT ID="LN">771 </FONT><A NAME="771"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = <FONT ID="IntegerLiteral">0</FONT>; (j &lt; possibleToSplit) &amp;&amp; (cbic[sortOrder[j]] &gt; <FONT ID="FloatPointLiteral">0.0</FONT>);
<FONT ID="LN">772 </FONT><A NAME="772"></A>       j++) {
<FONT ID="LN">773 </FONT><A NAME="773"></A>    splitWon[sortOrder[j]] = <FONT ID="True">true</FONT>;
<FONT ID="LN">774 </FONT><A NAME="774"></A>      }
<FONT ID="LN">775 </FONT><A NAME="775"></A>      m_NumSplitsStillDone += possibleToSplit;
<FONT ID="LN">776 </FONT><A NAME="776"></A>    } 
<FONT ID="LN">777 </FONT><A NAME="777"></A>    <FONT ID="Else">else</FONT> {
<FONT ID="LN">778 </FONT><A NAME="778"></A>      <FONT ID="SingleLineComment">// take some splits away if max number of clusters would be exceeded
<FONT ID="LN">779 </FONT><A NAME="779"></A></FONT>      <FONT ID="If">if</FONT> (takeSomeAway) {
<FONT ID="LN">780 </FONT><A NAME="780"></A>    <FONT ID="Int">int</FONT> count = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">781 </FONT><A NAME="781"></A>    <FONT ID="Int">int</FONT> j = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">782 </FONT><A NAME="782"></A>    <FONT ID="For">for</FONT> (;j &lt; splitWon.length &amp;&amp; count &lt; possibleToSplit; j++){
<FONT ID="LN">783 </FONT><A NAME="783"></A>      <FONT ID="If">if</FONT> (splitWon[sortOrder[j]] == <FONT ID="True">true</FONT>) count++;
<FONT ID="LN">784 </FONT><A NAME="784"></A>    }
<FONT ID="LN">785 </FONT><A NAME="785"></A>    
<FONT ID="LN">786 </FONT><A NAME="786"></A>    <FONT ID="While">while</FONT> (j &lt; splitWon.length) {
<FONT ID="LN">787 </FONT><A NAME="787"></A>      splitWon[sortOrder[j]] = <FONT ID="False">false</FONT>;
<FONT ID="LN">788 </FONT><A NAME="788"></A>      j++;
<FONT ID="LN">789 </FONT><A NAME="789"></A>    }
<FONT ID="LN">790 </FONT><A NAME="790"></A>      }
<FONT ID="LN">791 </FONT><A NAME="791"></A>    }
<FONT ID="LN">792 </FONT><A NAME="792"></A>   
<FONT ID="LN">793 </FONT><A NAME="793"></A>    <FONT ID="SingleLineComment">// finally split
<FONT ID="LN">794 </FONT><A NAME="794"></A></FONT>    <FONT ID="If">if</FONT> (possibleToSplit &gt; <FONT ID="IntegerLiteral">0</FONT>) 
<FONT ID="LN">795 </FONT><A NAME="795"></A>      newCenters = newCentersAfterSplit(splitWon, splitCenters);
<FONT ID="LN">796 </FONT><A NAME="796"></A>    <FONT ID="Else">else</FONT>
<FONT ID="LN">797 </FONT><A NAME="797"></A>      newCenters = m_ClusterCenters;
<FONT ID="LN">798 </FONT><A NAME="798"></A>    <FONT ID="Return">return</FONT> newCenters;
<FONT ID="LN">799 </FONT><A NAME="799"></A>  }
<FONT ID="LN">800 </FONT><A NAME="800"></A>
<FONT ID="LN">801 </FONT><A NAME="801"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">802 </FONT><A NAME="802"></A>   * Returns new centers. Depending on splitWon: if true takes children, if
<FONT ID="LN">803 </FONT><A NAME="803"></A>   * false takes parent = current center.
<FONT ID="LN">804 </FONT><A NAME="804"></A>   * 
<FONT ID="LN">805 </FONT><A NAME="805"></A>   * @param splitWon
<FONT ID="LN">806 </FONT><A NAME="806"></A>   *          array of boolean to indicate to take split or not
<FONT ID="LN">807 </FONT><A NAME="807"></A>   * @param splitCenters
<FONT ID="LN">808 </FONT><A NAME="808"></A>   *          list of splitted centers
<FONT ID="LN">809 </FONT><A NAME="809"></A>   * @return the new centers
<FONT ID="LN">810 </FONT><A NAME="810"></A>   */</FONT>
<FONT ID="LN">811 </FONT><A NAME="811"></A>  <FONT ID="Protected">protected</FONT> <A HREF="../../weka/core/Instances.java.html">Instances</A> newCentersAfterSplit(<FONT ID="Boolean">boolean</FONT>[] splitWon,
<FONT ID="LN">812 </FONT><A NAME="812"></A>      <A HREF="../../weka/core/Instances.java.html">Instances</A> splitCenters) {
<FONT ID="LN">813 </FONT><A NAME="813"></A>    <A HREF="../../weka/core/Instances.java.html">Instances</A> newCenters = <FONT ID="New">new</FONT> <A HREF="../../weka/core/Instances.java.html">Instances</A>(splitCenters, <FONT ID="IntegerLiteral">0</FONT>);
<FONT ID="LN">814 </FONT><A NAME="814"></A>
<FONT ID="LN">815 </FONT><A NAME="815"></A>    <FONT ID="Int">int</FONT> sIndex = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">816 </FONT><A NAME="816"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; splitWon.length; i++) {
<FONT ID="LN">817 </FONT><A NAME="817"></A>      <FONT ID="If">if</FONT> (splitWon[i]) {
<FONT ID="LN">818 </FONT><A NAME="818"></A>        m_NumSplitsDone++;
<FONT ID="LN">819 </FONT><A NAME="819"></A>        newCenters.add(splitCenters.instance(sIndex++));
<FONT ID="LN">820 </FONT><A NAME="820"></A>        newCenters.add(splitCenters.instance(sIndex++));
<FONT ID="LN">821 </FONT><A NAME="821"></A>      } <FONT ID="Else">else</FONT> {
<FONT ID="LN">822 </FONT><A NAME="822"></A>        sIndex++;
<FONT ID="LN">823 </FONT><A NAME="823"></A>        sIndex++;
<FONT ID="LN">824 </FONT><A NAME="824"></A>        newCenters.add(m_ClusterCenters.instance(i));
<FONT ID="LN">825 </FONT><A NAME="825"></A>      }
<FONT ID="LN">826 </FONT><A NAME="826"></A>    }
<FONT ID="LN">827 </FONT><A NAME="827"></A>    <FONT ID="Return">return</FONT> newCenters;
<FONT ID="LN">828 </FONT><A NAME="828"></A>  }
<FONT ID="LN">829 </FONT><A NAME="829"></A>
<FONT ID="LN">830 </FONT><A NAME="830"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">831 </FONT><A NAME="831"></A>   * Controls that counter does not exceed max iteration value. Special function
<FONT ID="LN">832 </FONT><A NAME="832"></A>   * for kmeans iterations.
<FONT ID="LN">833 </FONT><A NAME="833"></A>   * 
<FONT ID="LN">834 </FONT><A NAME="834"></A>   * @param iterationCount
<FONT ID="LN">835 </FONT><A NAME="835"></A>   *          current value of counter
<FONT ID="LN">836 </FONT><A NAME="836"></A>   * @param max
<FONT ID="LN">837 </FONT><A NAME="837"></A>   *          maximum value for counter
<FONT ID="LN">838 </FONT><A NAME="838"></A>   * @return true if iteration should be stopped
<FONT ID="LN">839 </FONT><A NAME="839"></A>   */</FONT> 
<FONT ID="LN">840 </FONT><A NAME="840"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Boolean">boolean</FONT> stopKMeansIteration(<FONT ID="Int">int</FONT> iterationCount, <FONT ID="Int">int</FONT> max) {
<FONT ID="LN">841 </FONT><A NAME="841"></A>    <FONT ID="Boolean">boolean</FONT> stopIterate = <FONT ID="False">false</FONT>;
<FONT ID="LN">842 </FONT><A NAME="842"></A>    <FONT ID="If">if</FONT> (max &gt;= <FONT ID="IntegerLiteral">0</FONT>) 
<FONT ID="LN">843 </FONT><A NAME="843"></A>      stopIterate = (iterationCount &gt;= max);
<FONT ID="LN">844 </FONT><A NAME="844"></A>    <FONT ID="If">if</FONT> (stopIterate) 
<FONT ID="LN">845 </FONT><A NAME="845"></A>      m_KMeansStopped++;
<FONT ID="LN">846 </FONT><A NAME="846"></A>    <FONT ID="Return">return</FONT> stopIterate;
<FONT ID="LN">847 </FONT><A NAME="847"></A>  }
<FONT ID="LN">848 </FONT><A NAME="848"></A>
<FONT ID="LN">849 </FONT><A NAME="849"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">850 </FONT><A NAME="850"></A>   * Checks if iterationCount has to be checked and if yes
<FONT ID="LN">851 </FONT><A NAME="851"></A>   * (this means max is &gt; 0) compares it with max.
<FONT ID="LN">852 </FONT><A NAME="852"></A>   * 
<FONT ID="LN">853 </FONT><A NAME="853"></A>   * @param iterationCount the current iteration count
<FONT ID="LN">854 </FONT><A NAME="854"></A>   * @param max the maximum number of iterations
<FONT ID="LN">855 </FONT><A NAME="855"></A>   * @return true if maximum has been reached
<FONT ID="LN">856 </FONT><A NAME="856"></A>   */</FONT> 
<FONT ID="LN">857 </FONT><A NAME="857"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Boolean">boolean</FONT> stopIteration(<FONT ID="Int">int</FONT> iterationCount, <FONT ID="Int">int</FONT> max) {
<FONT ID="LN">858 </FONT><A NAME="858"></A>    <FONT ID="Boolean">boolean</FONT> stopIterate = <FONT ID="False">false</FONT>;
<FONT ID="LN">859 </FONT><A NAME="859"></A>    <FONT ID="If">if</FONT> (max &gt;= <FONT ID="IntegerLiteral">0</FONT>) 
<FONT ID="LN">860 </FONT><A NAME="860"></A>      stopIterate = (iterationCount &gt;= max);
<FONT ID="LN">861 </FONT><A NAME="861"></A>    <FONT ID="Return">return</FONT> stopIterate;
<FONT ID="LN">862 </FONT><A NAME="862"></A>  }
<FONT ID="LN">863 </FONT><A NAME="863"></A>
<FONT ID="LN">864 </FONT><A NAME="864"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">865 </FONT><A NAME="865"></A>   * Recompute the new centers. New cluster center is center of mass of its 
<FONT ID="LN">866 </FONT><A NAME="866"></A>   * instances. Returns true if cluster stays the same.
<FONT ID="LN">867 </FONT><A NAME="867"></A>   * @param centers the input and output centers
<FONT ID="LN">868 </FONT><A NAME="868"></A>   * @param instOfCent the instances to the centers 
<FONT ID="LN">869 </FONT><A NAME="869"></A>   * @param model data model information
<FONT ID="LN">870 </FONT><A NAME="870"></A>   * @return true if converged.
<FONT ID="LN">871 </FONT><A NAME="871"></A>   */</FONT>
<FONT ID="LN">872 </FONT><A NAME="872"></A>   <FONT ID="Protected">protected</FONT> <FONT ID="Boolean">boolean</FONT> recomputeCenters(<A HREF="../../weka/core/Instances.java.html">Instances</A> centers,          
<FONT ID="LN">873 </FONT><A NAME="873"></A>                   <FONT ID="Int">int</FONT>[][] instOfCent, 
<FONT ID="LN">874 </FONT><A NAME="874"></A>                   <A HREF="../../weka/core/Instances.java.html">Instances</A> model) {
<FONT ID="LN">875 </FONT><A NAME="875"></A>    <FONT ID="Boolean">boolean</FONT> converged = <FONT ID="True">true</FONT>;
<FONT ID="LN">876 </FONT><A NAME="876"></A>    
<FONT ID="LN">877 </FONT><A NAME="877"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; centers.numInstances(); i++) {
<FONT ID="LN">878 </FONT><A NAME="878"></A>      <FONT ID="Double">double</FONT> val;
<FONT ID="LN">879 </FONT><A NAME="879"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = <FONT ID="IntegerLiteral">0</FONT>; j &lt; model.numAttributes(); j++) {
<FONT ID="LN">880 </FONT><A NAME="880"></A>    val = meanOrMode(m_Instances, instOfCent[i], j);
<FONT ID="LN">881 </FONT><A NAME="881"></A>
<FONT ID="LN">882 </FONT><A NAME="882"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> k = <FONT ID="IntegerLiteral">0</FONT>; k &lt; instOfCent[i].length; k++)
<FONT ID="LN">883 </FONT><A NAME="883"></A>
<FONT ID="LN">884 </FONT><A NAME="884"></A>    <FONT ID="If">if</FONT> (converged &amp;&amp; m_ClusterCenters.instance(i).value(j) != val) 
<FONT ID="LN">885 </FONT><A NAME="885"></A>      converged = <FONT ID="False">false</FONT>;
<FONT ID="LN">886 </FONT><A NAME="886"></A>    <FONT ID="If">if</FONT> (!converged)
<FONT ID="LN">887 </FONT><A NAME="887"></A>      m_ClusterCenters.instance(i).setValue(j, val);
<FONT ID="LN">888 </FONT><A NAME="888"></A>      }
<FONT ID="LN">889 </FONT><A NAME="889"></A>    }
<FONT ID="LN">890 </FONT><A NAME="890"></A>    <FONT ID="Return">return</FONT> converged;
<FONT ID="LN">891 </FONT><A NAME="891"></A>  }
<FONT ID="LN">892 </FONT><A NAME="892"></A>
<FONT ID="LN">893 </FONT><A NAME="893"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">894 </FONT><A NAME="894"></A>   * Recompute the new centers - 2nd version 
<FONT ID="LN">895 </FONT><A NAME="895"></A>   * Same as recomputeCenters, but does not check if center stays the same.
<FONT ID="LN">896 </FONT><A NAME="896"></A>   * 
<FONT ID="LN">897 </FONT><A NAME="897"></A>   * @param centers the input center and output centers
<FONT ID="LN">898 </FONT><A NAME="898"></A>   * @param instOfCentIndexes the indexes of the instances to the centers 
<FONT ID="LN">899 </FONT><A NAME="899"></A>   * @param model data model information
<FONT ID="LN">900 </FONT><A NAME="900"></A>   */</FONT>
<FONT ID="LN">901 </FONT><A NAME="901"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Void">void</FONT> recomputeCentersFast(<A HREF="../../weka/core/Instances.java.html">Instances</A> centers,          
<FONT ID="LN">902 </FONT><A NAME="902"></A>                    <FONT ID="Int">int</FONT>[][] instOfCentIndexes, 
<FONT ID="LN">903 </FONT><A NAME="903"></A>                    <A HREF="../../weka/core/Instances.java.html">Instances</A> model   
<FONT ID="LN">904 </FONT><A NAME="904"></A>                    ) {
<FONT ID="LN">905 </FONT><A NAME="905"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; centers.numInstances(); i++) {
<FONT ID="LN">906 </FONT><A NAME="906"></A>      <FONT ID="Double">double</FONT> val;
<FONT ID="LN">907 </FONT><A NAME="907"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = <FONT ID="IntegerLiteral">0</FONT>; j &lt; model.numAttributes(); j++) {
<FONT ID="LN">908 </FONT><A NAME="908"></A>    val = meanOrMode(m_Instances, instOfCentIndexes[i], j);
<FONT ID="LN">909 </FONT><A NAME="909"></A>    centers.instance(i).setValue(j, val);
<FONT ID="LN">910 </FONT><A NAME="910"></A>      }
<FONT ID="LN">911 </FONT><A NAME="911"></A>    }
<FONT ID="LN">912 </FONT><A NAME="912"></A>  }
<FONT ID="LN">913 </FONT><A NAME="913"></A>
<FONT ID="LN">914 </FONT><A NAME="914"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">915 </FONT><A NAME="915"></A>   * Computes Mean Or Mode of one attribute on a subset of m_Instances. 
<FONT ID="LN">916 </FONT><A NAME="916"></A>   * The subset is defined by an index list.
<FONT ID="LN">917 </FONT><A NAME="917"></A>   * @param instances all instances
<FONT ID="LN">918 </FONT><A NAME="918"></A>   * @param instList the indexes of the instances the mean is computed from
<FONT ID="LN">919 </FONT><A NAME="919"></A>   * @param attIndex the index of the attribute
<FONT ID="LN">920 </FONT><A NAME="920"></A>   * @return mean value
<FONT ID="LN">921 </FONT><A NAME="921"></A>   */</FONT>
<FONT ID="LN">922 </FONT><A NAME="922"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Double">double</FONT> meanOrMode(<A HREF="../../weka/core/Instances.java.html">Instances</A> instances, 
<FONT ID="LN">923 </FONT><A NAME="923"></A>                <FONT ID="Int">int</FONT>[] instList, 
<FONT ID="LN">924 </FONT><A NAME="924"></A>                <FONT ID="Int">int</FONT> attIndex) {
<FONT ID="LN">925 </FONT><A NAME="925"></A>    <FONT ID="Double">double</FONT> result, found;
<FONT ID="LN">926 </FONT><A NAME="926"></A>    <FONT ID="Int">int</FONT>[] counts;
<FONT ID="LN">927 </FONT><A NAME="927"></A>    <FONT ID="Int">int</FONT> numInst = instList.length;
<FONT ID="LN">928 </FONT><A NAME="928"></A>
<FONT ID="LN">929 </FONT><A NAME="929"></A>    <FONT ID="If">if</FONT> (instances.attribute(attIndex).isNumeric()) {
<FONT ID="LN">930 </FONT><A NAME="930"></A>      result = found = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">931 </FONT><A NAME="931"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = <FONT ID="IntegerLiteral">0</FONT>; j &lt; numInst; j++) {
<FONT ID="LN">932 </FONT><A NAME="932"></A>    <A HREF="../../weka/core/Instance.java.html">Instance</A> currInst = instances.instance(instList[j]);
<FONT ID="LN">933 </FONT><A NAME="933"></A>    <FONT ID="If">if</FONT> (!currInst.isMissing(attIndex)) {
<FONT ID="LN">934 </FONT><A NAME="934"></A>      found += currInst.weight();
<FONT ID="LN">935 </FONT><A NAME="935"></A>      result += currInst.weight() * 
<FONT ID="LN">936 </FONT><A NAME="936"></A>        currInst.value(attIndex);
<FONT ID="LN">937 </FONT><A NAME="937"></A>    }
<FONT ID="LN">938 </FONT><A NAME="938"></A>      }
<FONT ID="LN">939 </FONT><A NAME="939"></A>      <FONT ID="If">if</FONT> (Utils.eq(found, <FONT ID="IntegerLiteral">0</FONT>)) {
<FONT ID="LN">940 </FONT><A NAME="940"></A>    <FONT ID="Return">return</FONT> <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">941 </FONT><A NAME="941"></A>      } <FONT ID="Else">else</FONT> {
<FONT ID="LN">942 </FONT><A NAME="942"></A>    <FONT ID="Return">return</FONT> result / found;
<FONT ID="LN">943 </FONT><A NAME="943"></A>      }
<FONT ID="LN">944 </FONT><A NAME="944"></A>    } <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (instances.attribute(attIndex).isNominal()) {
<FONT ID="LN">945 </FONT><A NAME="945"></A>      counts = <FONT ID="New">new</FONT> <FONT ID="Int">int</FONT>[instances.attribute(attIndex).numValues()];
<FONT ID="LN">946 </FONT><A NAME="946"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = <FONT ID="IntegerLiteral">0</FONT>; j &lt; numInst; j++) {
<FONT ID="LN">947 </FONT><A NAME="947"></A>    <A HREF="../../weka/core/Instance.java.html">Instance</A> currInst = instances.instance(instList[j]);
<FONT ID="LN">948 </FONT><A NAME="948"></A>    <FONT ID="If">if</FONT> (!currInst.isMissing(attIndex)) {
<FONT ID="LN">949 </FONT><A NAME="949"></A>      counts[(<FONT ID="Int">int</FONT>) currInst.value(attIndex)] += currInst.weight();
<FONT ID="LN">950 </FONT><A NAME="950"></A>    }
<FONT ID="LN">951 </FONT><A NAME="951"></A>      }
<FONT ID="LN">952 </FONT><A NAME="952"></A>      <FONT ID="Return">return</FONT> (<FONT ID="Double">double</FONT>)Utils.maxIndex(counts);
<FONT ID="LN">953 </FONT><A NAME="953"></A>    } <FONT ID="Else">else</FONT> {
<FONT ID="LN">954 </FONT><A NAME="954"></A>      <FONT ID="Return">return</FONT> <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">955 </FONT><A NAME="955"></A>    }
<FONT ID="LN">956 </FONT><A NAME="956"></A>  }
<FONT ID="LN">957 </FONT><A NAME="957"></A>
<FONT ID="LN">958 </FONT><A NAME="958"></A> 
<FONT ID="LN">959 </FONT><A NAME="959"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">960 </FONT><A NAME="960"></A>   * Assigns instances to centers.
<FONT ID="LN">961 </FONT><A NAME="961"></A>   *
<FONT ID="LN">962 </FONT><A NAME="962"></A>   * @param tree KDTree on all instances
<FONT ID="LN">963 </FONT><A NAME="963"></A>   * @param centers all the input centers
<FONT ID="LN">964 </FONT><A NAME="964"></A>   * @param instOfCent the instances to each center
<FONT ID="LN">965 </FONT><A NAME="965"></A>   * @param allInstList list of all instances
<FONT ID="LN">966 </FONT><A NAME="966"></A>   * @param assignments assignments of instances to centers
<FONT ID="LN">967 </FONT><A NAME="967"></A>   * @param iterationCount the number of iteration 
<FONT ID="LN">968 </FONT><A NAME="968"></A>   * @return true if converged
<FONT ID="LN">969 </FONT><A NAME="969"></A>   * @throws Exception is something goes wrong
<FONT ID="LN">970 </FONT><A NAME="970"></A>   */</FONT>
<FONT ID="LN">971 </FONT><A NAME="971"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Boolean">boolean</FONT> assignToCenters(<A HREF="../../weka/core/neighboursearch/KDTree.java.html">KDTree</A> tree,
<FONT ID="LN">972 </FONT><A NAME="972"></A>                                  <A HREF="../../weka/core/Instances.java.html">Instances</A> centers, 
<FONT ID="LN">973 </FONT><A NAME="973"></A>                  <FONT ID="Int">int</FONT>[][] instOfCent, 
<FONT ID="LN">974 </FONT><A NAME="974"></A>                                  <FONT ID="Int">int</FONT>[] allInstList,
<FONT ID="LN">975 </FONT><A NAME="975"></A>                  <FONT ID="Int">int</FONT>[] assignments,
<FONT ID="LN">976 </FONT><A NAME="976"></A>                                  <FONT ID="Int">int</FONT> iterationCount) <FONT ID="Throws">throws</FONT> Exception {
<FONT ID="LN">977 </FONT><A NAME="977"></A>    
<FONT ID="LN">978 </FONT><A NAME="978"></A>    <FONT ID="Boolean">boolean</FONT> converged = <FONT ID="True">true</FONT>;
<FONT ID="LN">979 </FONT><A NAME="979"></A>    <FONT ID="If">if</FONT> (tree != <FONT ID="Null">null</FONT>) {
<FONT ID="LN">980 </FONT><A NAME="980"></A>      <FONT ID="SingleLineComment">// using KDTree structure for assigning
<FONT ID="LN">981 </FONT><A NAME="981"></A></FONT>      converged = assignToCenters(tree,
<FONT ID="LN">982 </FONT><A NAME="982"></A>                  centers, 
<FONT ID="LN">983 </FONT><A NAME="983"></A>                  instOfCent,
<FONT ID="LN">984 </FONT><A NAME="984"></A>                  assignments,
<FONT ID="LN">985 </FONT><A NAME="985"></A>                  iterationCount);
<FONT ID="LN">986 </FONT><A NAME="986"></A>    } <FONT ID="Else">else</FONT> {
<FONT ID="LN">987 </FONT><A NAME="987"></A>      converged = assignToCenters(centers, 
<FONT ID="LN">988 </FONT><A NAME="988"></A>                  instOfCent,
<FONT ID="LN">989 </FONT><A NAME="989"></A>                  allInstList, 
<FONT ID="LN">990 </FONT><A NAME="990"></A>                  assignments);
<FONT ID="LN">991 </FONT><A NAME="991"></A>    }
<FONT ID="LN">992 </FONT><A NAME="992"></A>    <FONT ID="Return">return</FONT> converged;
<FONT ID="LN">993 </FONT><A NAME="993"></A>  }
<FONT ID="LN">994 </FONT><A NAME="994"></A>
<FONT ID="LN">995 </FONT><A NAME="995"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">996 </FONT><A NAME="996"></A>   * Assign instances to centers using KDtree.
<FONT ID="LN">997 </FONT><A NAME="997"></A>   * First part of conventionell K-Means, returns true if new assignment
<FONT ID="LN">998 </FONT><A NAME="998"></A>   * is the same as the last one.
<FONT ID="LN">999 </FONT><A NAME="999"></A>   *
<FONT ID="LN">1000</FONT><A NAME="1000"></A>   * @param kdtree KDTree on all instances
<FONT ID="LN">1001</FONT><A NAME="1001"></A>   * @param centers all the input centers
<FONT ID="LN">1002</FONT><A NAME="1002"></A>   * @param instOfCent the instances to each center
<FONT ID="LN">1003</FONT><A NAME="1003"></A>   * @param assignments assignments of instances to centers
<FONT ID="LN">1004</FONT><A NAME="1004"></A>   * @param iterationCount the number of iteration 
<FONT ID="LN">1005</FONT><A NAME="1005"></A>   * @return true if converged
<FONT ID="LN">1006</FONT><A NAME="1006"></A>   * @throws Exception in case instances are not assigned to cluster
<FONT ID="LN">1007</FONT><A NAME="1007"></A>   */</FONT>
<FONT ID="LN">1008</FONT><A NAME="1008"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Boolean">boolean</FONT> assignToCenters(<A HREF="../../weka/core/neighboursearch/KDTree.java.html">KDTree</A> kdtree,
<FONT ID="LN">1009</FONT><A NAME="1009"></A>                  <A HREF="../../weka/core/Instances.java.html">Instances</A> centers, 
<FONT ID="LN">1010</FONT><A NAME="1010"></A>                  <FONT ID="Int">int</FONT>[][] instOfCent, 
<FONT ID="LN">1011</FONT><A NAME="1011"></A>                  <FONT ID="Int">int</FONT>[] assignments,
<FONT ID="LN">1012</FONT><A NAME="1012"></A>                                  <FONT ID="Int">int</FONT> iterationCount) <FONT ID="Throws">throws</FONT> Exception {
<FONT ID="LN">1013</FONT><A NAME="1013"></A>
<FONT ID="LN">1014</FONT><A NAME="1014"></A>    <FONT ID="Int">int</FONT> numCent = centers.numInstances();
<FONT ID="LN">1015</FONT><A NAME="1015"></A>    <FONT ID="Int">int</FONT> numInst = m_Instances.numInstances(); 
<FONT ID="LN">1016</FONT><A NAME="1016"></A>    <FONT ID="Int">int</FONT>[] oldAssignments = <FONT ID="New">new</FONT> <FONT ID="Int">int</FONT>[numInst];
<FONT ID="LN">1017</FONT><A NAME="1017"></A>    
<FONT ID="LN">1018</FONT><A NAME="1018"></A>    <FONT ID="SingleLineComment">// WARNING:  assignments is "input/output-parameter"
<FONT ID="LN">1019</FONT><A NAME="1019"></A></FONT>    <FONT ID="SingleLineComment">// should not be null
<FONT ID="LN">1020</FONT><A NAME="1020"></A></FONT>    <FONT ID="If">if</FONT> (assignments == <FONT ID="Null">null</FONT>) {
<FONT ID="LN">1021</FONT><A NAME="1021"></A>      assignments = <FONT ID="New">new</FONT> <FONT ID="Int">int</FONT>[numInst];
<FONT ID="LN">1022</FONT><A NAME="1022"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; numInst; i++) {
<FONT ID="LN">1023</FONT><A NAME="1023"></A>    assignments[<FONT ID="IntegerLiteral">0</FONT>] = -<FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">1024</FONT><A NAME="1024"></A>      }
<FONT ID="LN">1025</FONT><A NAME="1025"></A>    }
<FONT ID="LN">1026</FONT><A NAME="1026"></A>    
<FONT ID="LN">1027</FONT><A NAME="1027"></A>    <FONT ID="SingleLineComment">// WARNING:  instOfCent is "input/output-parameter"
<FONT ID="LN">1028</FONT><A NAME="1028"></A></FONT>    <FONT ID="SingleLineComment">// should not be null
<FONT ID="LN">1029</FONT><A NAME="1029"></A></FONT>    <FONT ID="If">if</FONT> (instOfCent == <FONT ID="Null">null</FONT>) {
<FONT ID="LN">1030</FONT><A NAME="1030"></A>      instOfCent = <FONT ID="New">new</FONT> <FONT ID="Int">int</FONT> [numCent][];
<FONT ID="LN">1031</FONT><A NAME="1031"></A>    }
<FONT ID="LN">1032</FONT><A NAME="1032"></A>    
<FONT ID="LN">1033</FONT><A NAME="1033"></A>    <FONT ID="SingleLineComment">// save old assignments
<FONT ID="LN">1034</FONT><A NAME="1034"></A></FONT>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; assignments.length; i++) {
<FONT ID="LN">1035</FONT><A NAME="1035"></A>      oldAssignments[i] = assignments[i];
<FONT ID="LN">1036</FONT><A NAME="1036"></A>    }
<FONT ID="LN">1037</FONT><A NAME="1037"></A>    
<FONT ID="LN">1038</FONT><A NAME="1038"></A>    <FONT ID="SingleLineComment">// use tree to get new assignments
<FONT ID="LN">1039</FONT><A NAME="1039"></A></FONT>    kdtree.centerInstances(centers, assignments,
<FONT ID="LN">1040</FONT><A NAME="1040"></A>               Math.pow(<FONT ID="FloatPointLiteral">.8</FONT>, iterationCount));   
<FONT ID="LN">1041</FONT><A NAME="1041"></A>    <FONT ID="Boolean">boolean</FONT> converged = <FONT ID="True">true</FONT>;
<FONT ID="LN">1042</FONT><A NAME="1042"></A>  
<FONT ID="LN">1043</FONT><A NAME="1043"></A>    <FONT ID="SingleLineComment">// compare with previous assignment
<FONT ID="LN">1044</FONT><A NAME="1044"></A></FONT>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; converged &amp;&amp; (i &lt; assignments.length); i++) {
<FONT ID="LN">1045</FONT><A NAME="1045"></A>      converged = (oldAssignments[i] == assignments[i]);
<FONT ID="LN">1046</FONT><A NAME="1046"></A>      <FONT ID="If">if</FONT> (assignments[i] == -<FONT ID="IntegerLiteral">1</FONT>) 
<FONT ID="LN">1047</FONT><A NAME="1047"></A>    <FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> Exception(<FONT ID="StringLiteral">"Instance "</FONT> + i + 
<FONT ID="LN">1048</FONT><A NAME="1048"></A>                <FONT ID="StringLiteral">" has not been assigned to cluster."</FONT>);
<FONT ID="LN">1049</FONT><A NAME="1049"></A>    }
<FONT ID="LN">1050</FONT><A NAME="1050"></A>
<FONT ID="LN">1051</FONT><A NAME="1051"></A>    <FONT ID="If">if</FONT> (!converged) {
<FONT ID="LN">1052</FONT><A NAME="1052"></A>      <FONT ID="Int">int</FONT>[] numInstOfCent = <FONT ID="New">new</FONT> <FONT ID="Int">int</FONT>[numCent];
<FONT ID="LN">1053</FONT><A NAME="1053"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; numCent; i++)
<FONT ID="LN">1054</FONT><A NAME="1054"></A>    numInstOfCent[i] = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">1055</FONT><A NAME="1055"></A>
<FONT ID="LN">1056</FONT><A NAME="1056"></A>      <FONT ID="SingleLineComment">// count num of assignments per center
<FONT ID="LN">1057</FONT><A NAME="1057"></A></FONT>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; numInst; i++)
<FONT ID="LN">1058</FONT><A NAME="1058"></A>    numInstOfCent[assignments[i]]++;
<FONT ID="LN">1059</FONT><A NAME="1059"></A>      
<FONT ID="LN">1060</FONT><A NAME="1060"></A>      <FONT ID="SingleLineComment">// prepare instancelists per center
<FONT ID="LN">1061</FONT><A NAME="1061"></A></FONT>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; numCent; i++){
<FONT ID="LN">1062</FONT><A NAME="1062"></A>    instOfCent[i] = <FONT ID="New">new</FONT> <FONT ID="Int">int</FONT>[numInstOfCent[i]];
<FONT ID="LN">1063</FONT><A NAME="1063"></A>      }
<FONT ID="LN">1064</FONT><A NAME="1064"></A>      <FONT ID="SingleLineComment">// write instance lists per center
<FONT ID="LN">1065</FONT><A NAME="1065"></A></FONT>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; numCent; i++) {
<FONT ID="LN">1066</FONT><A NAME="1066"></A>    <FONT ID="Int">int</FONT> index = -<FONT ID="IntegerLiteral">1</FONT>;   
<FONT ID="LN">1067</FONT><A NAME="1067"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = <FONT ID="IntegerLiteral">0</FONT>; j &lt; numInstOfCent[i]; j++) {
<FONT ID="LN">1068</FONT><A NAME="1068"></A>      index = nextAssignedOne(i, index, assignments);
<FONT ID="LN">1069</FONT><A NAME="1069"></A>      instOfCent[i][j] = index;
<FONT ID="LN">1070</FONT><A NAME="1070"></A>    }
<FONT ID="LN">1071</FONT><A NAME="1071"></A>      }
<FONT ID="LN">1072</FONT><A NAME="1072"></A>    }
<FONT ID="LN">1073</FONT><A NAME="1073"></A>  
<FONT ID="LN">1074</FONT><A NAME="1074"></A>    <FONT ID="Return">return</FONT> converged;
<FONT ID="LN">1075</FONT><A NAME="1075"></A>  }
<FONT ID="LN">1076</FONT><A NAME="1076"></A>
<FONT ID="LN">1077</FONT><A NAME="1077"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1078</FONT><A NAME="1078"></A>   * Assign instances to centers.
<FONT ID="LN">1079</FONT><A NAME="1079"></A>   * Part of conventionell K-Means, returns true if new assignment
<FONT ID="LN">1080</FONT><A NAME="1080"></A>   * is the same as the last one.
<FONT ID="LN">1081</FONT><A NAME="1081"></A>   *
<FONT ID="LN">1082</FONT><A NAME="1082"></A>   * @param centers all the input centers
<FONT ID="LN">1083</FONT><A NAME="1083"></A>   * @param instOfCent the instances to each center
<FONT ID="LN">1084</FONT><A NAME="1084"></A>   * @param allInstList list of all indexes
<FONT ID="LN">1085</FONT><A NAME="1085"></A>   * @param assignments assignments of instances to centers
<FONT ID="LN">1086</FONT><A NAME="1086"></A>   * @return true if converged
<FONT ID="LN">1087</FONT><A NAME="1087"></A>   * @throws Exception if something goes wrong
<FONT ID="LN">1088</FONT><A NAME="1088"></A>   */</FONT>
<FONT ID="LN">1089</FONT><A NAME="1089"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Boolean">boolean</FONT> assignToCenters(<A HREF="../../weka/core/Instances.java.html">Instances</A> centers, 
<FONT ID="LN">1090</FONT><A NAME="1090"></A>                  <FONT ID="Int">int</FONT>[][] instOfCent,
<FONT ID="LN">1091</FONT><A NAME="1091"></A>                  <FONT ID="Int">int</FONT>[] allInstList,
<FONT ID="LN">1092</FONT><A NAME="1092"></A>                  <FONT ID="Int">int</FONT>[] assignments) 
<FONT ID="LN">1093</FONT><A NAME="1093"></A>    <FONT ID="Throws">throws</FONT> Exception {
<FONT ID="LN">1094</FONT><A NAME="1094"></A>    
<FONT ID="LN">1095</FONT><A NAME="1095"></A>    <FONT ID="SingleLineComment">// todo: undecided situations
<FONT ID="LN">1096</FONT><A NAME="1096"></A></FONT>    <FONT ID="Boolean">boolean</FONT> converged = <FONT ID="True">true</FONT>; <FONT ID="SingleLineComment">// true if new assignment is the same 
<FONT ID="LN">1097</FONT><A NAME="1097"></A></FONT>                              <FONT ID="SingleLineComment">// as the old one
<FONT ID="LN">1098</FONT><A NAME="1098"></A></FONT>
<FONT ID="LN">1099</FONT><A NAME="1099"></A>    <FONT ID="Int">int</FONT> numInst = allInstList.length; 
<FONT ID="LN">1100</FONT><A NAME="1100"></A>    <FONT ID="Int">int</FONT> numCent = centers.numInstances();
<FONT ID="LN">1101</FONT><A NAME="1101"></A>    <FONT ID="Int">int</FONT>[] numInstOfCent = <FONT ID="New">new</FONT> <FONT ID="Int">int</FONT> [numCent];
<FONT ID="LN">1102</FONT><A NAME="1102"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; numCent; i++) numInstOfCent[i] = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">1103</FONT><A NAME="1103"></A>
<FONT ID="LN">1104</FONT><A NAME="1104"></A>    <FONT ID="SingleLineComment">// WARNING:  assignments is "input/output-parameter"
<FONT ID="LN">1105</FONT><A NAME="1105"></A></FONT>    <FONT ID="SingleLineComment">// should not be null
<FONT ID="LN">1106</FONT><A NAME="1106"></A></FONT>    <FONT ID="If">if</FONT> (assignments == <FONT ID="Null">null</FONT>) {
<FONT ID="LN">1107</FONT><A NAME="1107"></A>      assignments = <FONT ID="New">new</FONT> <FONT ID="Int">int</FONT>[numInst];
<FONT ID="LN">1108</FONT><A NAME="1108"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; numInst; i++) {
<FONT ID="LN">1109</FONT><A NAME="1109"></A>    assignments[i] = -<FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">1110</FONT><A NAME="1110"></A>      }
<FONT ID="LN">1111</FONT><A NAME="1111"></A>    }
<FONT ID="LN">1112</FONT><A NAME="1112"></A>
<FONT ID="LN">1113</FONT><A NAME="1113"></A>    <FONT ID="SingleLineComment">// WARNING: instOfCent is "input/output-parameter"
<FONT ID="LN">1114</FONT><A NAME="1114"></A></FONT>    <FONT ID="SingleLineComment">// should not be null
<FONT ID="LN">1115</FONT><A NAME="1115"></A></FONT>    <FONT ID="If">if</FONT> (instOfCent == <FONT ID="Null">null</FONT>) {
<FONT ID="LN">1116</FONT><A NAME="1116"></A>      instOfCent = <FONT ID="New">new</FONT> <FONT ID="Int">int</FONT> [numCent][];
<FONT ID="LN">1117</FONT><A NAME="1117"></A>    }
<FONT ID="LN">1118</FONT><A NAME="1118"></A>
<FONT ID="LN">1119</FONT><A NAME="1119"></A>    <FONT ID="SingleLineComment">// set assignments
<FONT ID="LN">1120</FONT><A NAME="1120"></A></FONT>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; numInst; i++) {
<FONT ID="LN">1121</FONT><A NAME="1121"></A>      <A HREF="../../weka/core/Instance.java.html">Instance</A> inst = m_Instances.instance(allInstList[i]);
<FONT ID="LN">1122</FONT><A NAME="1122"></A>      <FONT ID="Int">int</FONT> newC = clusterProcessedInstance(inst, centers);
<FONT ID="LN">1123</FONT><A NAME="1123"></A>      
<FONT ID="LN">1124</FONT><A NAME="1124"></A>      <FONT ID="If">if</FONT> (converged &amp;&amp; newC != assignments[i]) {
<FONT ID="LN">1125</FONT><A NAME="1125"></A>    converged = <FONT ID="False">false</FONT>;
<FONT ID="LN">1126</FONT><A NAME="1126"></A>      }
<FONT ID="LN">1127</FONT><A NAME="1127"></A>
<FONT ID="LN">1128</FONT><A NAME="1128"></A>      numInstOfCent[newC]++; 
<FONT ID="LN">1129</FONT><A NAME="1129"></A>      <FONT ID="If">if</FONT> (!converged)
<FONT ID="LN">1130</FONT><A NAME="1130"></A>    assignments[i] = newC;
<FONT ID="LN">1131</FONT><A NAME="1131"></A>    }
<FONT ID="LN">1132</FONT><A NAME="1132"></A>
<FONT ID="LN">1133</FONT><A NAME="1133"></A>    <FONT ID="SingleLineComment">// the following is only done
<FONT ID="LN">1134</FONT><A NAME="1134"></A></FONT>    <FONT ID="SingleLineComment">// if assignments are not the same, because too much effort
<FONT ID="LN">1135</FONT><A NAME="1135"></A></FONT>    <FONT ID="If">if</FONT> (!converged) {
<FONT ID="LN">1136</FONT><A NAME="1136"></A>      PFD(D_FOLLOWSPLIT, <FONT ID="StringLiteral">"assignToCenters -&gt; it has NOT converged"</FONT>);
<FONT ID="LN">1137</FONT><A NAME="1137"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; numCent; i++) {
<FONT ID="LN">1138</FONT><A NAME="1138"></A>    instOfCent[i] = <FONT ID="New">new</FONT> <FONT ID="Int">int</FONT> [numInstOfCent[i]];
<FONT ID="LN">1139</FONT><A NAME="1139"></A>      }
<FONT ID="LN">1140</FONT><A NAME="1140"></A>
<FONT ID="LN">1141</FONT><A NAME="1141"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; numCent; i++) {
<FONT ID="LN">1142</FONT><A NAME="1142"></A>    <FONT ID="Int">int</FONT> index = -<FONT ID="IntegerLiteral">1</FONT>;   
<FONT ID="LN">1143</FONT><A NAME="1143"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = <FONT ID="IntegerLiteral">0</FONT>; j &lt; numInstOfCent[i]; j++) {
<FONT ID="LN">1144</FONT><A NAME="1144"></A>      index = nextAssignedOne(i, index, assignments);
<FONT ID="LN">1145</FONT><A NAME="1145"></A>      instOfCent[i][j] = allInstList[index];
<FONT ID="LN">1146</FONT><A NAME="1146"></A>    }
<FONT ID="LN">1147</FONT><A NAME="1147"></A>      }
<FONT ID="LN">1148</FONT><A NAME="1148"></A>    }
<FONT ID="LN">1149</FONT><A NAME="1149"></A>    <FONT ID="Else">else</FONT>
<FONT ID="LN">1150</FONT><A NAME="1150"></A>      PFD(D_FOLLOWSPLIT, <FONT ID="StringLiteral">"assignToCenters -&gt; it has converged"</FONT>);
<FONT ID="LN">1151</FONT><A NAME="1151"></A>
<FONT ID="LN">1152</FONT><A NAME="1152"></A>    <FONT ID="Return">return</FONT> converged;
<FONT ID="LN">1153</FONT><A NAME="1153"></A>  }
<FONT ID="LN">1154</FONT><A NAME="1154"></A>
<FONT ID="LN">1155</FONT><A NAME="1155"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1156</FONT><A NAME="1156"></A>   * Searches along the assignment array for the next entry of the center 
<FONT ID="LN">1157</FONT><A NAME="1157"></A>   * in question.
<FONT ID="LN">1158</FONT><A NAME="1158"></A>   * @param cent index of the center 
<FONT ID="LN">1159</FONT><A NAME="1159"></A>   * @param lastIndex index to start searching
<FONT ID="LN">1160</FONT><A NAME="1160"></A>   * @param assignments assignments
<FONT ID="LN">1161</FONT><A NAME="1161"></A>   * @return index of the instance the center cent is assigned to
<FONT ID="LN">1162</FONT><A NAME="1162"></A>   */</FONT>
<FONT ID="LN">1163</FONT><A NAME="1163"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Int">int</FONT> nextAssignedOne(<FONT ID="Int">int</FONT> cent, <FONT ID="Int">int</FONT> lastIndex, 
<FONT ID="LN">1164</FONT><A NAME="1164"></A>                  <FONT ID="Int">int</FONT>[] assignments) {
<FONT ID="LN">1165</FONT><A NAME="1165"></A>    <FONT ID="Int">int</FONT> len = assignments.length;
<FONT ID="LN">1166</FONT><A NAME="1166"></A>    <FONT ID="Int">int</FONT> index = lastIndex + <FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">1167</FONT><A NAME="1167"></A>    <FONT ID="While">while</FONT> (index &lt; len) {
<FONT ID="LN">1168</FONT><A NAME="1168"></A>      <FONT ID="If">if</FONT> (assignments[index] == cent) {
<FONT ID="LN">1169</FONT><A NAME="1169"></A>    <FONT ID="Return">return</FONT> (index);
<FONT ID="LN">1170</FONT><A NAME="1170"></A>      }
<FONT ID="LN">1171</FONT><A NAME="1171"></A>      index++;
<FONT ID="LN">1172</FONT><A NAME="1172"></A>    }
<FONT ID="LN">1173</FONT><A NAME="1173"></A>    <FONT ID="Return">return</FONT> (-<FONT ID="IntegerLiteral">1</FONT>);
<FONT ID="LN">1174</FONT><A NAME="1174"></A>  }
<FONT ID="LN">1175</FONT><A NAME="1175"></A>
<FONT ID="LN">1176</FONT><A NAME="1176"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1177</FONT><A NAME="1177"></A>   * Split centers in their region. Generates random vector of 
<FONT ID="LN">1178</FONT><A NAME="1178"></A>   * length = variance and
<FONT ID="LN">1179</FONT><A NAME="1179"></A>   * adds and substractsx to cluster vector to get two new clusters.
<FONT ID="LN">1180</FONT><A NAME="1180"></A>   * 
<FONT ID="LN">1181</FONT><A NAME="1181"></A>   * @param random random function
<FONT ID="LN">1182</FONT><A NAME="1182"></A>   * @param center the center that is split here
<FONT ID="LN">1183</FONT><A NAME="1183"></A>   * @param variance variance of the cluster 
<FONT ID="LN">1184</FONT><A NAME="1184"></A>   * @param model data model valid
<FONT ID="LN">1185</FONT><A NAME="1185"></A>   * @return a pair of new centers
<FONT ID="LN">1186</FONT><A NAME="1186"></A>   * @throws Exception something in AlgVector goes wrong
<FONT ID="LN">1187</FONT><A NAME="1187"></A>   */</FONT>
<FONT ID="LN">1188</FONT><A NAME="1188"></A>  <FONT ID="Protected">protected</FONT> <A HREF="../../weka/core/Instances.java.html">Instances</A> splitCenter(Random random,
<FONT ID="LN">1189</FONT><A NAME="1189"></A>                    <A HREF="../../weka/core/Instance.java.html">Instance</A> center,
<FONT ID="LN">1190</FONT><A NAME="1190"></A>                    <FONT ID="Double">double</FONT> variance,
<FONT ID="LN">1191</FONT><A NAME="1191"></A>                    <A HREF="../../weka/core/Instances.java.html">Instances</A> model) <FONT ID="Throws">throws</FONT> Exception {
<FONT ID="LN">1192</FONT><A NAME="1192"></A>    m_NumSplits++;
<FONT ID="LN">1193</FONT><A NAME="1193"></A>    <A HREF="../../weka/core/AlgVector.java.html">AlgVector</A> r = <FONT ID="Null">null</FONT>;
<FONT ID="LN">1194</FONT><A NAME="1194"></A>    <A HREF="../../weka/core/Instances.java.html">Instances</A> children = <FONT ID="New">new</FONT> <A HREF="../../weka/core/Instances.java.html">Instances</A>(model, <FONT ID="IntegerLiteral">2</FONT>);
<FONT ID="LN">1195</FONT><A NAME="1195"></A>
<FONT ID="LN">1196</FONT><A NAME="1196"></A>    <FONT ID="If">if</FONT> (m_DebugVectorsFile.exists() &amp;&amp; m_DebugVectorsFile.isFile()) {
<FONT ID="LN">1197</FONT><A NAME="1197"></A>      <A HREF="../../weka/core/Instance.java.html">Instance</A> nextVector = getNextDebugVectorsInstance(model);
<FONT ID="LN">1198</FONT><A NAME="1198"></A>      PFD(D_RANDOMVECTOR, <FONT ID="StringLiteral">"Random Vector from File "</FONT> + nextVector);
<FONT ID="LN">1199</FONT><A NAME="1199"></A>      r = <FONT ID="New">new</FONT> <A HREF="../../weka/core/AlgVector.java.html">AlgVector</A>(nextVector);
<FONT ID="LN">1200</FONT><A NAME="1200"></A>    }
<FONT ID="LN">1201</FONT><A NAME="1201"></A>    <FONT ID="Else">else</FONT> {
<FONT ID="LN">1202</FONT><A NAME="1202"></A>      <FONT ID="SingleLineComment">// random vector of length = variance
<FONT ID="LN">1203</FONT><A NAME="1203"></A></FONT>      r = <FONT ID="New">new</FONT> <A HREF="../../weka/core/AlgVector.java.html">AlgVector</A>(model, random);
<FONT ID="LN">1204</FONT><A NAME="1204"></A>    }
<FONT ID="LN">1205</FONT><A NAME="1205"></A>    r.changeLength(Math.pow(variance, <FONT ID="FloatPointLiteral">0.5</FONT>));
<FONT ID="LN">1206</FONT><A NAME="1206"></A>    PFD(D_RANDOMVECTOR, <FONT ID="StringLiteral">"random vector *variance "</FONT>+ r);
<FONT ID="LN">1207</FONT><A NAME="1207"></A>    
<FONT ID="LN">1208</FONT><A NAME="1208"></A>    <FONT ID="SingleLineComment">// add random vector to center
<FONT ID="LN">1209</FONT><A NAME="1209"></A></FONT>    <A HREF="../../weka/core/AlgVector.java.html">AlgVector</A> c = <FONT ID="New">new</FONT> <A HREF="../../weka/core/AlgVector.java.html">AlgVector</A>(center);
<FONT ID="LN">1210</FONT><A NAME="1210"></A>    <A HREF="../../weka/core/AlgVector.java.html">AlgVector</A> c2 = (<A HREF="../../weka/core/AlgVector.java.html">AlgVector</A>) c.clone();
<FONT ID="LN">1211</FONT><A NAME="1211"></A>    c = c.add(r);
<FONT ID="LN">1212</FONT><A NAME="1212"></A>    <A HREF="../../weka/core/Instance.java.html">Instance</A> newCenter = c.getAsInstance(model, random);
<FONT ID="LN">1213</FONT><A NAME="1213"></A>    children.add(newCenter);
<FONT ID="LN">1214</FONT><A NAME="1214"></A>    PFD(D_FOLLOWSPLIT, <FONT ID="StringLiteral">"first child "</FONT>+ newCenter);
<FONT ID="LN">1215</FONT><A NAME="1215"></A>    
<FONT ID="LN">1216</FONT><A NAME="1216"></A>    <FONT ID="SingleLineComment">// substract random vector to center
<FONT ID="LN">1217</FONT><A NAME="1217"></A></FONT>    c2 = c2.substract(r);
<FONT ID="LN">1218</FONT><A NAME="1218"></A>    newCenter = c2.getAsInstance(model, random);
<FONT ID="LN">1219</FONT><A NAME="1219"></A>    children.add(newCenter);
<FONT ID="LN">1220</FONT><A NAME="1220"></A>    PFD(D_FOLLOWSPLIT, <FONT ID="StringLiteral">"second child "</FONT>+ newCenter);
<FONT ID="LN">1221</FONT><A NAME="1221"></A>
<FONT ID="LN">1222</FONT><A NAME="1222"></A>    <FONT ID="Return">return</FONT> children;
<FONT ID="LN">1223</FONT><A NAME="1223"></A>  }
<FONT ID="LN">1224</FONT><A NAME="1224"></A>
<FONT ID="LN">1225</FONT><A NAME="1225"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1226</FONT><A NAME="1226"></A>   * Split centers in their region.
<FONT ID="LN">1227</FONT><A NAME="1227"></A>   * (*Alternative version of splitCenter()*) 
<FONT ID="LN">1228</FONT><A NAME="1228"></A>   * 
<FONT ID="LN">1229</FONT><A NAME="1229"></A>   * @param random the random number generator
<FONT ID="LN">1230</FONT><A NAME="1230"></A>   * @param instances of the region
<FONT ID="LN">1231</FONT><A NAME="1231"></A>   * @param model the model for the centers 
<FONT ID="LN">1232</FONT><A NAME="1232"></A>   * (should be the same as that of instances)
<FONT ID="LN">1233</FONT><A NAME="1233"></A>   * @return a pair of new centers
<FONT ID="LN">1234</FONT><A NAME="1234"></A>   */</FONT>
<FONT ID="LN">1235</FONT><A NAME="1235"></A>  <FONT ID="Protected">protected</FONT> <A HREF="../../weka/core/Instances.java.html">Instances</A> splitCenters(Random random,
<FONT ID="LN">1236</FONT><A NAME="1236"></A>                 <A HREF="../../weka/core/Instances.java.html">Instances</A> instances,
<FONT ID="LN">1237</FONT><A NAME="1237"></A>                 <A HREF="../../weka/core/Instances.java.html">Instances</A> model) {
<FONT ID="LN">1238</FONT><A NAME="1238"></A>    <A HREF="../../weka/core/Instances.java.html">Instances</A> children = <FONT ID="New">new</FONT> <A HREF="../../weka/core/Instances.java.html">Instances</A>(model, <FONT ID="IntegerLiteral">2</FONT>);
<FONT ID="LN">1239</FONT><A NAME="1239"></A>    <FONT ID="Int">int</FONT> instIndex = Math.abs(random.nextInt()) % instances.numInstances();
<FONT ID="LN">1240</FONT><A NAME="1240"></A>    children.add(instances.instance(instIndex));
<FONT ID="LN">1241</FONT><A NAME="1241"></A>    <FONT ID="Int">int</FONT> instIndex2 = instIndex;
<FONT ID="LN">1242</FONT><A NAME="1242"></A>    <FONT ID="Int">int</FONT> count = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">1243</FONT><A NAME="1243"></A>    <FONT ID="While">while</FONT> ((instIndex2 == instIndex) &amp;&amp; count &lt; <FONT ID="IntegerLiteral">10</FONT>) {
<FONT ID="LN">1244</FONT><A NAME="1244"></A>      count++;
<FONT ID="LN">1245</FONT><A NAME="1245"></A>      instIndex2 = Math.abs(random.nextInt()) % instances.numInstances();
<FONT ID="LN">1246</FONT><A NAME="1246"></A>    }
<FONT ID="LN">1247</FONT><A NAME="1247"></A>    children.add(instances.instance(instIndex2));
<FONT ID="LN">1248</FONT><A NAME="1248"></A>    
<FONT ID="LN">1249</FONT><A NAME="1249"></A>    <FONT ID="Return">return</FONT> children;
<FONT ID="LN">1250</FONT><A NAME="1250"></A>  }
<FONT ID="LN">1251</FONT><A NAME="1251"></A>
<FONT ID="LN">1252</FONT><A NAME="1252"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1253</FONT><A NAME="1253"></A>   * Generates new centers randomly. Used for starting centers.
<FONT ID="LN">1254</FONT><A NAME="1254"></A>   *
<FONT ID="LN">1255</FONT><A NAME="1255"></A>   * @param random0 random number generator
<FONT ID="LN">1256</FONT><A NAME="1256"></A>   * @param model data model of the instances
<FONT ID="LN">1257</FONT><A NAME="1257"></A>   * @param numClusters number of clusters
<FONT ID="LN">1258</FONT><A NAME="1258"></A>   * @return new centers
<FONT ID="LN">1259</FONT><A NAME="1259"></A>   */</FONT>
<FONT ID="LN">1260</FONT><A NAME="1260"></A>  <FONT ID="Protected">protected</FONT> <A HREF="../../weka/core/Instances.java.html">Instances</A> makeCentersRandomly(Random random0,
<FONT ID="LN">1261</FONT><A NAME="1261"></A>                    <A HREF="../../weka/core/Instances.java.html">Instances</A> model,
<FONT ID="LN">1262</FONT><A NAME="1262"></A>                    <FONT ID="Int">int</FONT> numClusters) {
<FONT ID="LN">1263</FONT><A NAME="1263"></A>    <A HREF="../../weka/core/Instances.java.html">Instances</A> clusterCenters = <FONT ID="New">new</FONT> <A HREF="../../weka/core/Instances.java.html">Instances</A>(model, numClusters);
<FONT ID="LN">1264</FONT><A NAME="1264"></A>    m_NumClusters = numClusters;
<FONT ID="LN">1265</FONT><A NAME="1265"></A>
<FONT ID="LN">1266</FONT><A NAME="1266"></A>    <FONT ID="SingleLineComment">// makes the new centers randomly
<FONT ID="LN">1267</FONT><A NAME="1267"></A></FONT>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; numClusters; i++) {
<FONT ID="LN">1268</FONT><A NAME="1268"></A>      <FONT ID="Int">int</FONT> instIndex = Math.abs(random0.nextInt()) % m_Instances.numInstances();
<FONT ID="LN">1269</FONT><A NAME="1269"></A>      clusterCenters.add(m_Instances.instance(instIndex));
<FONT ID="LN">1270</FONT><A NAME="1270"></A>    }
<FONT ID="LN">1271</FONT><A NAME="1271"></A>    <FONT ID="Return">return</FONT> clusterCenters;
<FONT ID="LN">1272</FONT><A NAME="1272"></A>  }
<FONT ID="LN">1273</FONT><A NAME="1273"></A>
<FONT ID="LN">1274</FONT><A NAME="1274"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1275</FONT><A NAME="1275"></A>   * Returns the BIC-value for the given center and instances.
<FONT ID="LN">1276</FONT><A NAME="1276"></A>   * @param instList The indices of the instances that belong to the center
<FONT ID="LN">1277</FONT><A NAME="1277"></A>   * @param center the center.
<FONT ID="LN">1278</FONT><A NAME="1278"></A>   * @param mle maximum likelihood
<FONT ID="LN">1279</FONT><A NAME="1279"></A>   * @param model the data model
<FONT ID="LN">1280</FONT><A NAME="1280"></A>   * @return the BIC value 
<FONT ID="LN">1281</FONT><A NAME="1281"></A>   */</FONT>   
<FONT ID="LN">1282</FONT><A NAME="1282"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Double">double</FONT> calculateBIC(<FONT ID="Int">int</FONT>[] instList, <A HREF="../../weka/core/Instance.java.html">Instance</A> center,
<FONT ID="LN">1283</FONT><A NAME="1283"></A>                  <FONT ID="Double">double</FONT> mle, <A HREF="../../weka/core/Instances.java.html">Instances</A> model) {
<FONT ID="LN">1284</FONT><A NAME="1284"></A>    <FONT ID="Int">int</FONT>[][] w1 = <FONT ID="New">new</FONT> <FONT ID="Int">int</FONT>[<FONT ID="IntegerLiteral">1</FONT>][instList.length];
<FONT ID="LN">1285</FONT><A NAME="1285"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; instList.length; i++) {
<FONT ID="LN">1286</FONT><A NAME="1286"></A>      w1[<FONT ID="IntegerLiteral">0</FONT>][i] = instList[i];
<FONT ID="LN">1287</FONT><A NAME="1287"></A>    }
<FONT ID="LN">1288</FONT><A NAME="1288"></A>    <FONT ID="Double">double</FONT>[] m = {mle};
<FONT ID="LN">1289</FONT><A NAME="1289"></A>    <A HREF="../../weka/core/Instances.java.html">Instances</A> w2 = <FONT ID="New">new</FONT> <A HREF="../../weka/core/Instances.java.html">Instances</A>(model, <FONT ID="IntegerLiteral">1</FONT>);
<FONT ID="LN">1290</FONT><A NAME="1290"></A>    w2.add(center);
<FONT ID="LN">1291</FONT><A NAME="1291"></A>    <FONT ID="Return">return</FONT> calculateBIC(w1, w2, m);
<FONT ID="LN">1292</FONT><A NAME="1292"></A>    }
<FONT ID="LN">1293</FONT><A NAME="1293"></A>  
<FONT ID="LN">1294</FONT><A NAME="1294"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1295</FONT><A NAME="1295"></A>   * Calculates the BIC for the given set of centers and instances.
<FONT ID="LN">1296</FONT><A NAME="1296"></A>   * @param instOfCent The instances that belong to their respective centers
<FONT ID="LN">1297</FONT><A NAME="1297"></A>   * @param centers the centers
<FONT ID="LN">1298</FONT><A NAME="1298"></A>   * @param mle maximum likelihood
<FONT ID="LN">1299</FONT><A NAME="1299"></A>   * @return The BIC for the input.
<FONT ID="LN">1300</FONT><A NAME="1300"></A>   */</FONT>
<FONT ID="LN">1301</FONT><A NAME="1301"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Double">double</FONT> calculateBIC(<FONT ID="Int">int</FONT>[][] instOfCent, <A HREF="../../weka/core/Instances.java.html">Instances</A> centers,
<FONT ID="LN">1302</FONT><A NAME="1302"></A>                  <FONT ID="Double">double</FONT>[] mle) {
<FONT ID="LN">1303</FONT><A NAME="1303"></A>    <FONT ID="Double">double</FONT> loglike = <FONT ID="FloatPointLiteral">0.0</FONT>;
<FONT ID="LN">1304</FONT><A NAME="1304"></A>    <FONT ID="Int">int</FONT> numInstTotal = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">1305</FONT><A NAME="1305"></A>    <FONT ID="Int">int</FONT> numCenters = centers.numInstances();
<FONT ID="LN">1306</FONT><A NAME="1306"></A>    <FONT ID="Int">int</FONT> numDimensions = centers.numAttributes();
<FONT ID="LN">1307</FONT><A NAME="1307"></A>    <FONT ID="Int">int</FONT> numParameters = (numCenters - <FONT ID="IntegerLiteral">1</FONT>) + <FONT ID="SingleLineComment">//probabilities
<FONT ID="LN">1308</FONT><A NAME="1308"></A></FONT>      numCenters * numDimensions + <FONT ID="SingleLineComment">//means
<FONT ID="LN">1309</FONT><A NAME="1309"></A></FONT>      numCenters; <FONT ID="SingleLineComment">// variance params
<FONT ID="LN">1310</FONT><A NAME="1310"></A></FONT>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; centers.numInstances(); i++) {
<FONT ID="LN">1311</FONT><A NAME="1311"></A>      loglike += logLikelihoodEstimate(instOfCent[i].length, centers.instance(i),
<FONT ID="LN">1312</FONT><A NAME="1312"></A>                       mle[i], centers.numInstances() * <FONT ID="IntegerLiteral">2</FONT>);
<FONT ID="LN">1313</FONT><A NAME="1313"></A>      numInstTotal += instOfCent[i].length;
<FONT ID="LN">1314</FONT><A NAME="1314"></A>    }
<FONT ID="LN">1315</FONT><A NAME="1315"></A>    <FONT ID="MultiLineComment">/* diff
<FONT ID="LN">1316</FONT><A NAME="1316"></A>       thats how we did it
<FONT ID="LN">1317</FONT><A NAME="1317"></A>    loglike -= ((centers.numAttributes() + 1.0) * centers.numInstances() * 1)
<FONT ID="LN">1318</FONT><A NAME="1318"></A>      * Math.log(count);
<FONT ID="LN">1319</FONT><A NAME="1319"></A>      */</FONT>
<FONT ID="LN">1320</FONT><A NAME="1320"></A>    loglike -= numInstTotal * Math.log(numInstTotal);
<FONT ID="LN">1321</FONT><A NAME="1321"></A>    <FONT ID="SingleLineComment">//System.out.println ("numInstTotal " + numInstTotal +
<FONT ID="LN">1322</FONT><A NAME="1322"></A></FONT>    <FONT ID="SingleLineComment">//                    "calculateBIC res " + loglike);
<FONT ID="LN">1323</FONT><A NAME="1323"></A></FONT>    loglike -= (numParameters / <FONT ID="FloatPointLiteral">2.0</FONT>) * Math.log(numInstTotal);
<FONT ID="LN">1324</FONT><A NAME="1324"></A>    <FONT ID="SingleLineComment">//System.out.println ("numParam " +
<FONT ID="LN">1325</FONT><A NAME="1325"></A></FONT>    <FONT ID="SingleLineComment">//                     + numParameters +
<FONT ID="LN">1326</FONT><A NAME="1326"></A></FONT>    <FONT ID="SingleLineComment">//          " calculateBIC res " + loglike);
<FONT ID="LN">1327</FONT><A NAME="1327"></A></FONT>    <FONT ID="Return">return</FONT> loglike;
<FONT ID="LN">1328</FONT><A NAME="1328"></A>  }
<FONT ID="LN">1329</FONT><A NAME="1329"></A>  
<FONT ID="LN">1330</FONT><A NAME="1330"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1331</FONT><A NAME="1331"></A>   * Calculates the log-likelihood of the data for the given model, taken
<FONT ID="LN">1332</FONT><A NAME="1332"></A>   * at the maximum likelihood point.
<FONT ID="LN">1333</FONT><A NAME="1333"></A>   *
<FONT ID="LN">1334</FONT><A NAME="1334"></A>   * @param numInst number of instances that belong to the center
<FONT ID="LN">1335</FONT><A NAME="1335"></A>   * @param center the center
<FONT ID="LN">1336</FONT><A NAME="1336"></A>   * @param distortion distortion 
<FONT ID="LN">1337</FONT><A NAME="1337"></A>   * @param numCent number of centers 
<FONT ID="LN">1338</FONT><A NAME="1338"></A>   * @return the likelihood estimate
<FONT ID="LN">1339</FONT><A NAME="1339"></A>   */</FONT>
<FONT ID="LN">1340</FONT><A NAME="1340"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Double">double</FONT> logLikelihoodEstimate(<FONT ID="Int">int</FONT> numInst, 
<FONT ID="LN">1341</FONT><A NAME="1341"></A>                       <A HREF="../../weka/core/Instance.java.html">Instance</A> center, 
<FONT ID="LN">1342</FONT><A NAME="1342"></A>                       <FONT ID="Double">double</FONT> distortion, 
<FONT ID="LN">1343</FONT><A NAME="1343"></A>                       <FONT ID="Int">int</FONT> numCent) {
<FONT ID="LN">1344</FONT><A NAME="1344"></A>    <FONT ID="SingleLineComment">// R(n) num of instances of the center -&gt; numInst
<FONT ID="LN">1345</FONT><A NAME="1345"></A></FONT>    <FONT ID="SingleLineComment">// K num of centers -&gt; not used
<FONT ID="LN">1346</FONT><A NAME="1346"></A></FONT>    <FONT ID="SingleLineComment">//
<FONT ID="LN">1347</FONT><A NAME="1347"></A></FONT>    <FONT ID="SingleLineComment">//todo take the diff comments away
<FONT ID="LN">1348</FONT><A NAME="1348"></A></FONT>    <FONT ID="Double">double</FONT> loglike = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">1349</FONT><A NAME="1349"></A>    <FONT ID="MultiLineComment">/* if is new */</FONT>
<FONT ID="LN">1350</FONT><A NAME="1350"></A>    <FONT ID="If">if</FONT> (numInst &gt; <FONT ID="IntegerLiteral">1</FONT>) {
<FONT ID="LN">1351</FONT><A NAME="1351"></A>      <FONT ID="MultiLineComment">/* diff variance is new */</FONT>
<FONT ID="LN">1352</FONT><A NAME="1352"></A>      <FONT ID="SingleLineComment">//
<FONT ID="LN">1353</FONT><A NAME="1353"></A></FONT>      <FONT ID="SingleLineComment">// distortion = Sum over instances x of the center(x-center)
<FONT ID="LN">1354</FONT><A NAME="1354"></A></FONT>      <FONT ID="SingleLineComment">// different to paper; sum should be squared
<FONT ID="LN">1355</FONT><A NAME="1355"></A></FONT>      <FONT ID="SingleLineComment">//
<FONT ID="LN">1356</FONT><A NAME="1356"></A></FONT>      <FONT ID="SingleLineComment">// (Sum of distances to center) / R(n) - 1.0
<FONT ID="LN">1357</FONT><A NAME="1357"></A></FONT>      <FONT ID="SingleLineComment">// different to paper; should be R(n)-K
<FONT ID="LN">1358</FONT><A NAME="1358"></A></FONT>      <FONT ID="Double">double</FONT> variance =  distortion / (numInst - <FONT ID="FloatPointLiteral">1.0</FONT>); 
<FONT ID="LN">1359</FONT><A NAME="1359"></A>  
<FONT ID="LN">1360</FONT><A NAME="1360"></A>      <FONT ID="SingleLineComment">//
<FONT ID="LN">1361</FONT><A NAME="1361"></A></FONT>      <FONT ID="SingleLineComment">//  -R(n)/2 * log(pi*2)
<FONT ID="LN">1362</FONT><A NAME="1362"></A></FONT>      <FONT ID="SingleLineComment">//
<FONT ID="LN">1363</FONT><A NAME="1363"></A></FONT>      <FONT ID="Double">double</FONT> p1 = - (numInst / <FONT ID="FloatPointLiteral">2.0</FONT>) * Math.log(Math.PI * <FONT ID="FloatPointLiteral">2.0</FONT>);
<FONT ID="LN">1364</FONT><A NAME="1364"></A>      <FONT ID="MultiLineComment">/* diff
<FONT ID="LN">1365</FONT><A NAME="1365"></A>     thats how we had it
<FONT ID="LN">1366</FONT><A NAME="1366"></A>     double p2 = -((ni * center.numAttributes()) / 2) * distortion;
<FONT ID="LN">1367</FONT><A NAME="1367"></A>      */</FONT>
<FONT ID="LN">1368</FONT><A NAME="1368"></A>      <FONT ID="SingleLineComment">//
<FONT ID="LN">1369</FONT><A NAME="1369"></A></FONT>      <FONT ID="SingleLineComment">// -(R(n)*M)/2 * log(variance) 
<FONT ID="LN">1370</FONT><A NAME="1370"></A></FONT>      <FONT ID="SingleLineComment">//
<FONT ID="LN">1371</FONT><A NAME="1371"></A></FONT>      <FONT ID="Double">double</FONT> p2 = - (numInst * center.numAttributes()) / <FONT ID="IntegerLiteral">2</FONT> * Math.log(variance);
<FONT ID="LN">1372</FONT><A NAME="1372"></A>      
<FONT ID="LN">1373</FONT><A NAME="1373"></A>      <FONT ID="MultiLineComment">/* diff
<FONT ID="LN">1374</FONT><A NAME="1374"></A>     thats how we had it, the difference is a bug in x-means
<FONT ID="LN">1375</FONT><A NAME="1375"></A>     double p3 = - (numInst - numCent) / 2;
<FONT ID="LN">1376</FONT><A NAME="1376"></A>      */</FONT>
<FONT ID="LN">1377</FONT><A NAME="1377"></A>      <FONT ID="SingleLineComment">//
<FONT ID="LN">1378</FONT><A NAME="1378"></A></FONT>      <FONT ID="SingleLineComment">// -(R(n)-1)/2
<FONT ID="LN">1379</FONT><A NAME="1379"></A></FONT>      <FONT ID="SingleLineComment">//
<FONT ID="LN">1380</FONT><A NAME="1380"></A></FONT>      <FONT ID="Double">double</FONT> p3 = - (numInst - <FONT ID="FloatPointLiteral">1.0</FONT>) / <FONT ID="FloatPointLiteral">2.0</FONT>;
<FONT ID="LN">1381</FONT><A NAME="1381"></A>      
<FONT ID="LN">1382</FONT><A NAME="1382"></A>      <FONT ID="SingleLineComment">//
<FONT ID="LN">1383</FONT><A NAME="1383"></A></FONT>      <FONT ID="SingleLineComment">// R(n)*log(R(n))
<FONT ID="LN">1384</FONT><A NAME="1384"></A></FONT>      <FONT ID="SingleLineComment">//
<FONT ID="LN">1385</FONT><A NAME="1385"></A></FONT>      <FONT ID="Double">double</FONT> p4 = numInst * Math.log(numInst);
<FONT ID="LN">1386</FONT><A NAME="1386"></A>      
<FONT ID="LN">1387</FONT><A NAME="1387"></A>      <FONT ID="MultiLineComment">/* diff x-means doesn't have this part 
<FONT ID="LN">1388</FONT><A NAME="1388"></A>     double p5 = - numInst * Math.log(numInstTotal);
<FONT ID="LN">1389</FONT><A NAME="1389"></A>      */</FONT>
<FONT ID="LN">1390</FONT><A NAME="1390"></A>      
<FONT ID="LN">1391</FONT><A NAME="1391"></A>      <FONT ID="MultiLineComment">/*
<FONT ID="LN">1392</FONT><A NAME="1392"></A>    loglike = -(ni / 2) * Math.log(Math.PI * 2) 
<FONT ID="LN">1393</FONT><A NAME="1393"></A>    - (ni * center.numAttributes()) / 2.0) * logdistortion
<FONT ID="LN">1394</FONT><A NAME="1394"></A>    - (ni - k) / 2.0 
<FONT ID="LN">1395</FONT><A NAME="1395"></A>    + ni * Math.log(ni) 
<FONT ID="LN">1396</FONT><A NAME="1396"></A>    - ni * Math.log(r);
<FONT ID="LN">1397</FONT><A NAME="1397"></A>      */</FONT>
<FONT ID="LN">1398</FONT><A NAME="1398"></A>      loglike = p1 + p2 + p3 + p4; <FONT ID="SingleLineComment">// diff + p5;
<FONT ID="LN">1399</FONT><A NAME="1399"></A></FONT>      <FONT ID="SingleLineComment">//the log(r) is something that can be reused.
<FONT ID="LN">1400</FONT><A NAME="1400"></A></FONT>      <FONT ID="SingleLineComment">//as is the log(2 PI), these could provide extra speed up later on.
<FONT ID="LN">1401</FONT><A NAME="1401"></A></FONT>      <FONT ID="SingleLineComment">//since distortion is so expensive to compute, I only do that once.
<FONT ID="LN">1402</FONT><A NAME="1402"></A></FONT>    }
<FONT ID="LN">1403</FONT><A NAME="1403"></A>    <FONT ID="Return">return</FONT> loglike;
<FONT ID="LN">1404</FONT><A NAME="1404"></A>  }
<FONT ID="LN">1405</FONT><A NAME="1405"></A>  
<FONT ID="LN">1406</FONT><A NAME="1406"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1407</FONT><A NAME="1407"></A>   * Calculates the maximum likelihood estimate for the variance.
<FONT ID="LN">1408</FONT><A NAME="1408"></A>   * @param instOfCent indices of instances to each center
<FONT ID="LN">1409</FONT><A NAME="1409"></A>   * @param centers the centers
<FONT ID="LN">1410</FONT><A NAME="1410"></A>   * @return the list of distortions distortion.
<FONT ID="LN">1411</FONT><A NAME="1411"></A>   */</FONT>
<FONT ID="LN">1412</FONT><A NAME="1412"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Double">double</FONT>[] distortion(<FONT ID="Int">int</FONT>[][] instOfCent, <A HREF="../../weka/core/Instances.java.html">Instances</A> centers) {
<FONT ID="LN">1413</FONT><A NAME="1413"></A>    <FONT ID="Double">double</FONT>[] distortion = <FONT ID="New">new</FONT> <FONT ID="Double">double</FONT>[centers.numInstances()];
<FONT ID="LN">1414</FONT><A NAME="1414"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; centers.numInstances(); i++) {
<FONT ID="LN">1415</FONT><A NAME="1415"></A>      distortion[i] = <FONT ID="FloatPointLiteral">0.0</FONT>;
<FONT ID="LN">1416</FONT><A NAME="1416"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = <FONT ID="IntegerLiteral">0</FONT>; j &lt; instOfCent[i].length; j++) {
<FONT ID="LN">1417</FONT><A NAME="1417"></A>        distortion[i] += m_DistanceF.distance(m_Instances
<FONT ID="LN">1418</FONT><A NAME="1418"></A>            .instance(instOfCent[i][j]), centers.instance(i));
<FONT ID="LN">1419</FONT><A NAME="1419"></A>      }
<FONT ID="LN">1420</FONT><A NAME="1420"></A>    }
<FONT ID="LN">1421</FONT><A NAME="1421"></A>    <FONT ID="MultiLineComment">/*
<FONT ID="LN">1422</FONT><A NAME="1422"></A>     * diff not done in x-means res *= 1.0 / (count - centers.numInstances());
<FONT ID="LN">1423</FONT><A NAME="1423"></A>     */</FONT>
<FONT ID="LN">1424</FONT><A NAME="1424"></A>    <FONT ID="Return">return</FONT> distortion;
<FONT ID="LN">1425</FONT><A NAME="1425"></A>  }
<FONT ID="LN">1426</FONT><A NAME="1426"></A>  
<FONT ID="LN">1427</FONT><A NAME="1427"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1428</FONT><A NAME="1428"></A>   * Clusters an instance.
<FONT ID="LN">1429</FONT><A NAME="1429"></A>   * 
<FONT ID="LN">1430</FONT><A NAME="1430"></A>   * @param instance
<FONT ID="LN">1431</FONT><A NAME="1431"></A>   *          the instance to assign a cluster to.
<FONT ID="LN">1432</FONT><A NAME="1432"></A>   * @param centers
<FONT ID="LN">1433</FONT><A NAME="1433"></A>   *          the centers to cluster the instance to.
<FONT ID="LN">1434</FONT><A NAME="1434"></A>   * @return a cluster index.
<FONT ID="LN">1435</FONT><A NAME="1435"></A>   */</FONT>
<FONT ID="LN">1436</FONT><A NAME="1436"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Int">int</FONT> clusterProcessedInstance(<A HREF="../../weka/core/Instance.java.html">Instance</A> instance, <A HREF="../../weka/core/Instances.java.html">Instances</A> centers) {
<FONT ID="LN">1437</FONT><A NAME="1437"></A>    
<FONT ID="LN">1438</FONT><A NAME="1438"></A>    <FONT ID="Double">double</FONT> minDist = Integer.MAX_VALUE;
<FONT ID="LN">1439</FONT><A NAME="1439"></A>    <FONT ID="Int">int</FONT> bestCluster = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">1440</FONT><A NAME="1440"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; centers.numInstances(); i++) {
<FONT ID="LN">1441</FONT><A NAME="1441"></A>      <FONT ID="Double">double</FONT> dist = m_DistanceF.distance(instance, centers.instance(i));
<FONT ID="LN">1442</FONT><A NAME="1442"></A>
<FONT ID="LN">1443</FONT><A NAME="1443"></A>      <FONT ID="If">if</FONT> (dist &lt; minDist) {
<FONT ID="LN">1444</FONT><A NAME="1444"></A>        minDist = dist;
<FONT ID="LN">1445</FONT><A NAME="1445"></A>        bestCluster = i;
<FONT ID="LN">1446</FONT><A NAME="1446"></A>      }
<FONT ID="LN">1447</FONT><A NAME="1447"></A>    }
<FONT ID="LN">1448</FONT><A NAME="1448"></A>    ;
<FONT ID="LN">1449</FONT><A NAME="1449"></A>    <FONT ID="Return">return</FONT> bestCluster;
<FONT ID="LN">1450</FONT><A NAME="1450"></A>  }
<FONT ID="LN">1451</FONT><A NAME="1451"></A>  
<FONT ID="LN">1452</FONT><A NAME="1452"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1453</FONT><A NAME="1453"></A>   * Clusters an instance that has been through the filters.
<FONT ID="LN">1454</FONT><A NAME="1454"></A>   * 
<FONT ID="LN">1455</FONT><A NAME="1455"></A>   * @param instance
<FONT ID="LN">1456</FONT><A NAME="1456"></A>   *          the instance to assign a cluster to
<FONT ID="LN">1457</FONT><A NAME="1457"></A>   * @return a cluster number
<FONT ID="LN">1458</FONT><A NAME="1458"></A>   */</FONT>
<FONT ID="LN">1459</FONT><A NAME="1459"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Int">int</FONT> clusterProcessedInstance(<A HREF="../../weka/core/Instance.java.html">Instance</A> instance) {
<FONT ID="LN">1460</FONT><A NAME="1460"></A>    <FONT ID="Double">double</FONT> minDist = Integer.MAX_VALUE;
<FONT ID="LN">1461</FONT><A NAME="1461"></A>    <FONT ID="Int">int</FONT> bestCluster = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">1462</FONT><A NAME="1462"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; m_NumClusters; i++) {
<FONT ID="LN">1463</FONT><A NAME="1463"></A>      <FONT ID="Double">double</FONT> dist = m_DistanceF
<FONT ID="LN">1464</FONT><A NAME="1464"></A>          .distance(instance, m_ClusterCenters.instance(i));
<FONT ID="LN">1465</FONT><A NAME="1465"></A>      <FONT ID="If">if</FONT> (dist &lt; minDist) {
<FONT ID="LN">1466</FONT><A NAME="1466"></A>        minDist = dist;
<FONT ID="LN">1467</FONT><A NAME="1467"></A>        bestCluster = i;
<FONT ID="LN">1468</FONT><A NAME="1468"></A>      }
<FONT ID="LN">1469</FONT><A NAME="1469"></A>    }
<FONT ID="LN">1470</FONT><A NAME="1470"></A>    <FONT ID="Return">return</FONT> bestCluster;
<FONT ID="LN">1471</FONT><A NAME="1471"></A>  }
<FONT ID="LN">1472</FONT><A NAME="1472"></A>
<FONT ID="LN">1473</FONT><A NAME="1473"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1474</FONT><A NAME="1474"></A>   * Classifies a given instance.
<FONT ID="LN">1475</FONT><A NAME="1475"></A>   *
<FONT ID="LN">1476</FONT><A NAME="1476"></A>   * @param instance the instance to be assigned to a cluster
<FONT ID="LN">1477</FONT><A NAME="1477"></A>   * @return the number of the assigned cluster as an integer
<FONT ID="LN">1478</FONT><A NAME="1478"></A>   * if the class is enumerated, otherwise the predicted value
<FONT ID="LN">1479</FONT><A NAME="1479"></A>   * @throws Exception if instance could not be classified
<FONT ID="LN">1480</FONT><A NAME="1480"></A>   * successfully
<FONT ID="LN">1481</FONT><A NAME="1481"></A>   */</FONT>
<FONT ID="LN">1482</FONT><A NAME="1482"></A>  <FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> clusterInstance(<A HREF="../../weka/core/Instance.java.html">Instance</A> instance) <FONT ID="Throws">throws</FONT> Exception {
<FONT ID="LN">1483</FONT><A NAME="1483"></A>    m_ReplaceMissingFilter.input(instance);
<FONT ID="LN">1484</FONT><A NAME="1484"></A>    <A HREF="../../weka/core/Instance.java.html">Instance</A> inst = m_ReplaceMissingFilter.output();
<FONT ID="LN">1485</FONT><A NAME="1485"></A>
<FONT ID="LN">1486</FONT><A NAME="1486"></A>    <FONT ID="Return">return</FONT> clusterProcessedInstance(inst);
<FONT ID="LN">1487</FONT><A NAME="1487"></A>  }
<FONT ID="LN">1488</FONT><A NAME="1488"></A>
<FONT ID="LN">1489</FONT><A NAME="1489"></A>
<FONT ID="LN">1490</FONT><A NAME="1490"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1491</FONT><A NAME="1491"></A>   * Returns the number of clusters.
<FONT ID="LN">1492</FONT><A NAME="1492"></A>   *
<FONT ID="LN">1493</FONT><A NAME="1493"></A>   * @return the number of clusters generated for a training dataset.
<FONT ID="LN">1494</FONT><A NAME="1494"></A>   */</FONT>
<FONT ID="LN">1495</FONT><A NAME="1495"></A>  <FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> numberOfClusters() {
<FONT ID="LN">1496</FONT><A NAME="1496"></A>    <FONT ID="Return">return</FONT> m_NumClusters;
<FONT ID="LN">1497</FONT><A NAME="1497"></A>  }
<FONT ID="LN">1498</FONT><A NAME="1498"></A>
<FONT ID="LN">1499</FONT><A NAME="1499"></A>
<FONT ID="LN">1500</FONT><A NAME="1500"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1501</FONT><A NAME="1501"></A>   * Returns an enumeration describing the available options. 
<FONT ID="LN">1502</FONT><A NAME="1502"></A>   * @return an enumeration of all the available options
<FONT ID="LN">1503</FONT><A NAME="1503"></A>   **/</FONT>
<FONT ID="LN">1504</FONT><A NAME="1504"></A>  <FONT ID="Public">public</FONT> Enumeration listOptions() {
<FONT ID="LN">1505</FONT><A NAME="1505"></A>    <A HREF="../../weka/core/AlgVector.java.html">Vector</A> result = <FONT ID="New">new</FONT> <A HREF="../../weka/core/AlgVector.java.html">Vector</A>();
<FONT ID="LN">1506</FONT><A NAME="1506"></A>    
<FONT ID="LN">1507</FONT><A NAME="1507"></A>    result.addElement(<FONT ID="New">new</FONT> <A HREF="../../weka/core/Option.java.html">Option</A>(
<FONT ID="LN">1508</FONT><A NAME="1508"></A>    <FONT ID="StringLiteral">"\tmaximum number of overall iterations\n"</FONT>
<FONT ID="LN">1509</FONT><A NAME="1509"></A>    + <FONT ID="StringLiteral">"\t(default 1)."</FONT>, 
<FONT ID="LN">1510</FONT><A NAME="1510"></A>    <FONT ID="StringLiteral">"I"</FONT>, <FONT ID="IntegerLiteral">1</FONT>, <FONT ID="StringLiteral">"-I &lt;num&gt;"</FONT>));
<FONT ID="LN">1511</FONT><A NAME="1511"></A>    
<FONT ID="LN">1512</FONT><A NAME="1512"></A>    result.addElement(<FONT ID="New">new</FONT> <A HREF="../../weka/core/Option.java.html">Option</A>(
<FONT ID="LN">1513</FONT><A NAME="1513"></A>    <FONT ID="StringLiteral">"\tmaximum number of iterations in the kMeans loop in\n"</FONT>
<FONT ID="LN">1514</FONT><A NAME="1514"></A>    + <FONT ID="StringLiteral">"\tthe Improve-Parameter part \n"</FONT>
<FONT ID="LN">1515</FONT><A NAME="1515"></A>    + <FONT ID="StringLiteral">"\t(default 1000)."</FONT>, 
<FONT ID="LN">1516</FONT><A NAME="1516"></A>    <FONT ID="StringLiteral">"M"</FONT>, <FONT ID="IntegerLiteral">1</FONT>, <FONT ID="StringLiteral">"-M &lt;num&gt;"</FONT>));
<FONT ID="LN">1517</FONT><A NAME="1517"></A>    
<FONT ID="LN">1518</FONT><A NAME="1518"></A>    result.addElement(<FONT ID="New">new</FONT> <A HREF="../../weka/core/Option.java.html">Option</A>(
<FONT ID="LN">1519</FONT><A NAME="1519"></A>    <FONT ID="StringLiteral">"\tmaximum number of iterations in the kMeans loop\n"</FONT>
<FONT ID="LN">1520</FONT><A NAME="1520"></A>    + <FONT ID="StringLiteral">"\tfor the splitted centroids in the Improve-Structure part \n"</FONT>
<FONT ID="LN">1521</FONT><A NAME="1521"></A>    + <FONT ID="StringLiteral">"\t(default 1000)."</FONT>,
<FONT ID="LN">1522</FONT><A NAME="1522"></A>    <FONT ID="StringLiteral">"J"</FONT>, <FONT ID="IntegerLiteral">1</FONT>, <FONT ID="StringLiteral">"-J &lt;num&gt;"</FONT>));
<FONT ID="LN">1523</FONT><A NAME="1523"></A>    
<FONT ID="LN">1524</FONT><A NAME="1524"></A>    result.addElement(<FONT ID="New">new</FONT> <A HREF="../../weka/core/Option.java.html">Option</A>(
<FONT ID="LN">1525</FONT><A NAME="1525"></A>    <FONT ID="StringLiteral">"\tminimum number of clusters\n"</FONT>
<FONT ID="LN">1526</FONT><A NAME="1526"></A>    + <FONT ID="StringLiteral">"\t(default 2)."</FONT>, 
<FONT ID="LN">1527</FONT><A NAME="1527"></A>    <FONT ID="StringLiteral">"L"</FONT>, <FONT ID="IntegerLiteral">1</FONT>, <FONT ID="StringLiteral">"-L &lt;num&gt;"</FONT>));
<FONT ID="LN">1528</FONT><A NAME="1528"></A>    
<FONT ID="LN">1529</FONT><A NAME="1529"></A>    result.addElement(<FONT ID="New">new</FONT> <A HREF="../../weka/core/Option.java.html">Option</A>(
<FONT ID="LN">1530</FONT><A NAME="1530"></A>    <FONT ID="StringLiteral">"\tmaximum number of clusters\n"</FONT>
<FONT ID="LN">1531</FONT><A NAME="1531"></A>    + <FONT ID="StringLiteral">"\t(default 4)."</FONT>,
<FONT ID="LN">1532</FONT><A NAME="1532"></A>    <FONT ID="StringLiteral">"H"</FONT>, <FONT ID="IntegerLiteral">1</FONT>, <FONT ID="StringLiteral">"-H &lt;num&gt;"</FONT>));
<FONT ID="LN">1533</FONT><A NAME="1533"></A>    
<FONT ID="LN">1534</FONT><A NAME="1534"></A>    result.addElement(<FONT ID="New">new</FONT> <A HREF="../../weka/core/Option.java.html">Option</A>(
<FONT ID="LN">1535</FONT><A NAME="1535"></A>    <FONT ID="StringLiteral">"\tdistance value for binary attributes\n"</FONT>
<FONT ID="LN">1536</FONT><A NAME="1536"></A>    + <FONT ID="StringLiteral">"\t(default 1.0)."</FONT>,
<FONT ID="LN">1537</FONT><A NAME="1537"></A>    <FONT ID="StringLiteral">"B"</FONT>, <FONT ID="IntegerLiteral">1</FONT>, <FONT ID="StringLiteral">"-B &lt;value&gt;"</FONT>));
<FONT ID="LN">1538</FONT><A NAME="1538"></A>    
<FONT ID="LN">1539</FONT><A NAME="1539"></A>    result.addElement(<FONT ID="New">new</FONT> <A HREF="../../weka/core/Option.java.html">Option</A>(
<FONT ID="LN">1540</FONT><A NAME="1540"></A>    <FONT ID="StringLiteral">"\tUses the KDTree internally\n"</FONT>
<FONT ID="LN">1541</FONT><A NAME="1541"></A>    + <FONT ID="StringLiteral">"\t(default no)."</FONT>,
<FONT ID="LN">1542</FONT><A NAME="1542"></A>    <FONT ID="StringLiteral">"use-kdtree"</FONT>, <FONT ID="IntegerLiteral">0</FONT>, <FONT ID="StringLiteral">"-use-kdtree"</FONT>));
<FONT ID="LN">1543</FONT><A NAME="1543"></A>    
<FONT ID="LN">1544</FONT><A NAME="1544"></A>    result.addElement(<FONT ID="New">new</FONT> <A HREF="../../weka/core/Option.java.html">Option</A>(
<FONT ID="LN">1545</FONT><A NAME="1545"></A>    <FONT ID="StringLiteral">"\tFull class name of KDTree class to use, followed\n"</FONT>
<FONT ID="LN">1546</FONT><A NAME="1546"></A>    + <FONT ID="StringLiteral">"\tby scheme options.\n"</FONT>
<FONT ID="LN">1547</FONT><A NAME="1547"></A>    + <FONT ID="StringLiteral">"\teg: \"weka.core.neighboursearch.kdtrees.KDTree -P\"\n"</FONT>
<FONT ID="LN">1548</FONT><A NAME="1548"></A>    + <FONT ID="StringLiteral">"\t(default no KDTree class used)."</FONT>,
<FONT ID="LN">1549</FONT><A NAME="1549"></A>    <FONT ID="StringLiteral">"K"</FONT>, <FONT ID="IntegerLiteral">1</FONT>, <FONT ID="StringLiteral">"-K &lt;KDTree class specification&gt;"</FONT>));
<FONT ID="LN">1550</FONT><A NAME="1550"></A>    
<FONT ID="LN">1551</FONT><A NAME="1551"></A>    result.addElement(<FONT ID="New">new</FONT> <A HREF="../../weka/core/Option.java.html">Option</A>(
<FONT ID="LN">1552</FONT><A NAME="1552"></A>    <FONT ID="StringLiteral">"\tcutoff factor, takes the given percentage of the splitted \n"</FONT>
<FONT ID="LN">1553</FONT><A NAME="1553"></A>    + <FONT ID="StringLiteral">"\tcentroids if none of the children win\n"</FONT>
<FONT ID="LN">1554</FONT><A NAME="1554"></A>    + <FONT ID="StringLiteral">"\t(default 0.0)."</FONT>,
<FONT ID="LN">1555</FONT><A NAME="1555"></A>    <FONT ID="StringLiteral">"C"</FONT>, <FONT ID="IntegerLiteral">1</FONT>, <FONT ID="StringLiteral">"-C &lt;value&gt;"</FONT>));
<FONT ID="LN">1556</FONT><A NAME="1556"></A>    
<FONT ID="LN">1557</FONT><A NAME="1557"></A>    result.addElement(<FONT ID="New">new</FONT> <A HREF="../../weka/core/Option.java.html">Option</A>(
<FONT ID="LN">1558</FONT><A NAME="1558"></A>    <FONT ID="StringLiteral">"\tFull class name of Distance function class to use, followed\n"</FONT>
<FONT ID="LN">1559</FONT><A NAME="1559"></A>    + <FONT ID="StringLiteral">"\tby scheme options.\n"</FONT> +
<FONT ID="LN">1560</FONT><A NAME="1560"></A>    <FONT ID="StringLiteral">"\t(default weka.core.EuclideanDistance)."</FONT>,
<FONT ID="LN">1561</FONT><A NAME="1561"></A>    <FONT ID="StringLiteral">"D"</FONT>, <FONT ID="IntegerLiteral">1</FONT>, <FONT ID="StringLiteral">"-D &lt;distance function class specification&gt;"</FONT>));
<FONT ID="LN">1562</FONT><A NAME="1562"></A>    
<FONT ID="LN">1563</FONT><A NAME="1563"></A>    result.addElement(<FONT ID="New">new</FONT> <A HREF="../../weka/core/Option.java.html">Option</A>(
<FONT ID="LN">1564</FONT><A NAME="1564"></A>    <FONT ID="StringLiteral">"\tfile to read starting centers from (ARFF format)."</FONT>,
<FONT ID="LN">1565</FONT><A NAME="1565"></A>    <FONT ID="StringLiteral">"N"</FONT>, <FONT ID="IntegerLiteral">1</FONT>, <FONT ID="StringLiteral">"-N &lt;file name&gt;"</FONT>));
<FONT ID="LN">1566</FONT><A NAME="1566"></A>    
<FONT ID="LN">1567</FONT><A NAME="1567"></A>    result.addElement(<FONT ID="New">new</FONT> <A HREF="../../weka/core/Option.java.html">Option</A>(
<FONT ID="LN">1568</FONT><A NAME="1568"></A>    <FONT ID="StringLiteral">"\tfile to write centers to (ARFF format)."</FONT>,
<FONT ID="LN">1569</FONT><A NAME="1569"></A>    <FONT ID="StringLiteral">"O"</FONT>, <FONT ID="IntegerLiteral">1</FONT>, <FONT ID="StringLiteral">"-O &lt;file name&gt;"</FONT>));
<FONT ID="LN">1570</FONT><A NAME="1570"></A>    
<FONT ID="LN">1571</FONT><A NAME="1571"></A>    result.addElement(<FONT ID="New">new</FONT> <A HREF="../../weka/core/Option.java.html">Option</A>(
<FONT ID="LN">1572</FONT><A NAME="1572"></A>    <FONT ID="StringLiteral">"\tThe debug level.\n"</FONT>
<FONT ID="LN">1573</FONT><A NAME="1573"></A>    + <FONT ID="StringLiteral">"\t(default 0)"</FONT>,
<FONT ID="LN">1574</FONT><A NAME="1574"></A>    <FONT ID="StringLiteral">"U"</FONT>, <FONT ID="IntegerLiteral">1</FONT>, <FONT ID="StringLiteral">"-U &lt;int&gt;"</FONT>));
<FONT ID="LN">1575</FONT><A NAME="1575"></A>    
<FONT ID="LN">1576</FONT><A NAME="1576"></A>    result.addElement(<FONT ID="New">new</FONT> <A HREF="../../weka/core/Option.java.html">Option</A>(
<FONT ID="LN">1577</FONT><A NAME="1577"></A>    <FONT ID="StringLiteral">"\tThe debug vectors file."</FONT>,
<FONT ID="LN">1578</FONT><A NAME="1578"></A>    <FONT ID="StringLiteral">"Y"</FONT>, <FONT ID="IntegerLiteral">1</FONT>, <FONT ID="StringLiteral">"-Y &lt;file name&gt;"</FONT>));
<FONT ID="LN">1579</FONT><A NAME="1579"></A>    
<FONT ID="LN">1580</FONT><A NAME="1580"></A>    Enumeration en = <FONT ID="Super">super</FONT>.listOptions();
<FONT ID="LN">1581</FONT><A NAME="1581"></A>    <FONT ID="While">while</FONT> (en.hasMoreElements())
<FONT ID="LN">1582</FONT><A NAME="1582"></A>      result.addElement(en.nextElement());
<FONT ID="LN">1583</FONT><A NAME="1583"></A>    
<FONT ID="LN">1584</FONT><A NAME="1584"></A>    <FONT ID="Return">return</FONT> result.elements();
<FONT ID="LN">1585</FONT><A NAME="1585"></A>  }
<FONT ID="LN">1586</FONT><A NAME="1586"></A>
<FONT ID="LN">1587</FONT><A NAME="1587"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1588</FONT><A NAME="1588"></A>   * Returns the tip text for this property.
<FONT ID="LN">1589</FONT><A NAME="1589"></A>   * @return tip text for this property 
<FONT ID="LN">1590</FONT><A NAME="1590"></A>   */</FONT>
<FONT ID="LN">1591</FONT><A NAME="1591"></A>  <FONT ID="Public">public</FONT> String minNumClustersTipText() {
<FONT ID="LN">1592</FONT><A NAME="1592"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"set minimum number of clusters"</FONT>;
<FONT ID="LN">1593</FONT><A NAME="1593"></A>  }
<FONT ID="LN">1594</FONT><A NAME="1594"></A>
<FONT ID="LN">1595</FONT><A NAME="1595"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1596</FONT><A NAME="1596"></A>   * Sets the minimum number of clusters to generate.
<FONT ID="LN">1597</FONT><A NAME="1597"></A>   *
<FONT ID="LN">1598</FONT><A NAME="1598"></A>   * @param n the minimum number of clusters to generate
<FONT ID="LN">1599</FONT><A NAME="1599"></A>   */</FONT>
<FONT ID="LN">1600</FONT><A NAME="1600"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setMinNumClusters(<FONT ID="Int">int</FONT> n) {
<FONT ID="LN">1601</FONT><A NAME="1601"></A>    m_MinNumClusters = n;
<FONT ID="LN">1602</FONT><A NAME="1602"></A>  }
<FONT ID="LN">1603</FONT><A NAME="1603"></A>
<FONT ID="LN">1604</FONT><A NAME="1604"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1605</FONT><A NAME="1605"></A>   * Gets the minimum number of clusters to generate.
<FONT ID="LN">1606</FONT><A NAME="1606"></A>   * @return the minimum number of clusters to generate
<FONT ID="LN">1607</FONT><A NAME="1607"></A>   */</FONT>
<FONT ID="LN">1608</FONT><A NAME="1608"></A>  <FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> getMinNumClusters() {
<FONT ID="LN">1609</FONT><A NAME="1609"></A>    <FONT ID="Return">return</FONT> m_MinNumClusters;
<FONT ID="LN">1610</FONT><A NAME="1610"></A>  }
<FONT ID="LN">1611</FONT><A NAME="1611"></A>
<FONT ID="LN">1612</FONT><A NAME="1612"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1613</FONT><A NAME="1613"></A>   * Returns the tip text for this property.
<FONT ID="LN">1614</FONT><A NAME="1614"></A>   * @return tip text for this property 
<FONT ID="LN">1615</FONT><A NAME="1615"></A>   */</FONT>
<FONT ID="LN">1616</FONT><A NAME="1616"></A>  <FONT ID="Public">public</FONT> String maxNumClustersTipText() {
<FONT ID="LN">1617</FONT><A NAME="1617"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"set maximum number of clusters"</FONT>;
<FONT ID="LN">1618</FONT><A NAME="1618"></A>  }
<FONT ID="LN">1619</FONT><A NAME="1619"></A>
<FONT ID="LN">1620</FONT><A NAME="1620"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1621</FONT><A NAME="1621"></A>   * Sets the maximum number of clusters to generate.
<FONT ID="LN">1622</FONT><A NAME="1622"></A>   * @param n the maximum number of clusters to generate
<FONT ID="LN">1623</FONT><A NAME="1623"></A>   */</FONT>
<FONT ID="LN">1624</FONT><A NAME="1624"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setMaxNumClusters(<FONT ID="Int">int</FONT> n) {
<FONT ID="LN">1625</FONT><A NAME="1625"></A>    <FONT ID="If">if</FONT> (n &gt;= m_MinNumClusters) {
<FONT ID="LN">1626</FONT><A NAME="1626"></A>      m_MaxNumClusters = n;
<FONT ID="LN">1627</FONT><A NAME="1627"></A>    }
<FONT ID="LN">1628</FONT><A NAME="1628"></A>  }
<FONT ID="LN">1629</FONT><A NAME="1629"></A>  
<FONT ID="LN">1630</FONT><A NAME="1630"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1631</FONT><A NAME="1631"></A>   * Gets the maximum number of clusters to generate.
<FONT ID="LN">1632</FONT><A NAME="1632"></A>   * @return the maximum number of clusters to generate
<FONT ID="LN">1633</FONT><A NAME="1633"></A>   */</FONT>
<FONT ID="LN">1634</FONT><A NAME="1634"></A>  <FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> getMaxNumClusters() {
<FONT ID="LN">1635</FONT><A NAME="1635"></A>    <FONT ID="Return">return</FONT> m_MaxNumClusters;
<FONT ID="LN">1636</FONT><A NAME="1636"></A>  }
<FONT ID="LN">1637</FONT><A NAME="1637"></A>
<FONT ID="LN">1638</FONT><A NAME="1638"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1639</FONT><A NAME="1639"></A>   * Returns the tip text for this property.
<FONT ID="LN">1640</FONT><A NAME="1640"></A>   * @return tip text for this property 
<FONT ID="LN">1641</FONT><A NAME="1641"></A>   */</FONT>
<FONT ID="LN">1642</FONT><A NAME="1642"></A>  <FONT ID="Public">public</FONT> String maxIterationsTipText() {
<FONT ID="LN">1643</FONT><A NAME="1643"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"the maximum number of iterations to perform"</FONT>;
<FONT ID="LN">1644</FONT><A NAME="1644"></A>  }
<FONT ID="LN">1645</FONT><A NAME="1645"></A>
<FONT ID="LN">1646</FONT><A NAME="1646"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1647</FONT><A NAME="1647"></A>   * Sets the maximum number of iterations to perform.
<FONT ID="LN">1648</FONT><A NAME="1648"></A>   * @param i the number of iterations
<FONT ID="LN">1649</FONT><A NAME="1649"></A>   * @throws Exception if i is less than 1
<FONT ID="LN">1650</FONT><A NAME="1650"></A>   */</FONT>
<FONT ID="LN">1651</FONT><A NAME="1651"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setMaxIterations(<FONT ID="Int">int</FONT> i) <FONT ID="Throws">throws</FONT> Exception {
<FONT ID="LN">1652</FONT><A NAME="1652"></A>    <FONT ID="If">if</FONT> (i &lt; <FONT ID="IntegerLiteral">0</FONT>) 
<FONT ID="LN">1653</FONT><A NAME="1653"></A>      <FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> Exception(<FONT ID="StringLiteral">"Only positive values for iteration number"</FONT> +
<FONT ID="LN">1654</FONT><A NAME="1654"></A>                           <FONT ID="StringLiteral">" allowed (Option I)."</FONT>); 
<FONT ID="LN">1655</FONT><A NAME="1655"></A>    m_MaxIterations = i;
<FONT ID="LN">1656</FONT><A NAME="1656"></A>  }
<FONT ID="LN">1657</FONT><A NAME="1657"></A>
<FONT ID="LN">1658</FONT><A NAME="1658"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1659</FONT><A NAME="1659"></A>   * Gets the maximum number of iterations.
<FONT ID="LN">1660</FONT><A NAME="1660"></A>   * @return the number of iterations
<FONT ID="LN">1661</FONT><A NAME="1661"></A>   */</FONT>
<FONT ID="LN">1662</FONT><A NAME="1662"></A>  <FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> getMaxIterations() {
<FONT ID="LN">1663</FONT><A NAME="1663"></A>    <FONT ID="Return">return</FONT>  m_MaxIterations;
<FONT ID="LN">1664</FONT><A NAME="1664"></A>  }
<FONT ID="LN">1665</FONT><A NAME="1665"></A>
<FONT ID="LN">1666</FONT><A NAME="1666"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1667</FONT><A NAME="1667"></A>   * Returns the tip text for this property.
<FONT ID="LN">1668</FONT><A NAME="1668"></A>   * @return tip text for this property 
<FONT ID="LN">1669</FONT><A NAME="1669"></A>   */</FONT>
<FONT ID="LN">1670</FONT><A NAME="1670"></A>  <FONT ID="Public">public</FONT> String maxKMeansTipText() {
<FONT ID="LN">1671</FONT><A NAME="1671"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"the maximum number of iterations to perform in KMeans"</FONT>;
<FONT ID="LN">1672</FONT><A NAME="1672"></A>  }
<FONT ID="LN">1673</FONT><A NAME="1673"></A>
<FONT ID="LN">1674</FONT><A NAME="1674"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1675</FONT><A NAME="1675"></A>   * Set the maximum number of iterations to perform in KMeans.
<FONT ID="LN">1676</FONT><A NAME="1676"></A>   * @param i the number of iterations
<FONT ID="LN">1677</FONT><A NAME="1677"></A>   */</FONT>
<FONT ID="LN">1678</FONT><A NAME="1678"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setMaxKMeans(<FONT ID="Int">int</FONT> i) {
<FONT ID="LN">1679</FONT><A NAME="1679"></A>    m_MaxKMeans = i;
<FONT ID="LN">1680</FONT><A NAME="1680"></A>    m_MaxKMeansForChildren = i;
<FONT ID="LN">1681</FONT><A NAME="1681"></A>  }
<FONT ID="LN">1682</FONT><A NAME="1682"></A>
<FONT ID="LN">1683</FONT><A NAME="1683"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1684</FONT><A NAME="1684"></A>   * Gets the maximum number of iterations in KMeans.
<FONT ID="LN">1685</FONT><A NAME="1685"></A>   * @return the number of iterations
<FONT ID="LN">1686</FONT><A NAME="1686"></A>   */</FONT>
<FONT ID="LN">1687</FONT><A NAME="1687"></A>  <FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> getMaxKMeans() {
<FONT ID="LN">1688</FONT><A NAME="1688"></A>    <FONT ID="Return">return</FONT>  m_MaxKMeans;
<FONT ID="LN">1689</FONT><A NAME="1689"></A>  }
<FONT ID="LN">1690</FONT><A NAME="1690"></A>
<FONT ID="LN">1691</FONT><A NAME="1691"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1692</FONT><A NAME="1692"></A>   * Returns the tip text for this property.
<FONT ID="LN">1693</FONT><A NAME="1693"></A>   * @return tip text for this property 
<FONT ID="LN">1694</FONT><A NAME="1694"></A>   */</FONT>
<FONT ID="LN">1695</FONT><A NAME="1695"></A>  <FONT ID="Public">public</FONT> String maxKMeansForChildrenTipText() {
<FONT ID="LN">1696</FONT><A NAME="1696"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"the maximum number of iterations KMeans that is performed on the child centers"</FONT>;
<FONT ID="LN">1697</FONT><A NAME="1697"></A>  }
<FONT ID="LN">1698</FONT><A NAME="1698"></A>
<FONT ID="LN">1699</FONT><A NAME="1699"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1700</FONT><A NAME="1700"></A>   * Sets the maximum number of iterations KMeans that is performed 
<FONT ID="LN">1701</FONT><A NAME="1701"></A>   * on the child centers.
<FONT ID="LN">1702</FONT><A NAME="1702"></A>   * @param i the number of iterations
<FONT ID="LN">1703</FONT><A NAME="1703"></A>   */</FONT>
<FONT ID="LN">1704</FONT><A NAME="1704"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setMaxKMeansForChildren(<FONT ID="Int">int</FONT> i) {
<FONT ID="LN">1705</FONT><A NAME="1705"></A>    m_MaxKMeansForChildren = i;
<FONT ID="LN">1706</FONT><A NAME="1706"></A>  }
<FONT ID="LN">1707</FONT><A NAME="1707"></A>
<FONT ID="LN">1708</FONT><A NAME="1708"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1709</FONT><A NAME="1709"></A>   * Gets the maximum number of iterations in KMeans.
<FONT ID="LN">1710</FONT><A NAME="1710"></A>   * @return the number of iterations
<FONT ID="LN">1711</FONT><A NAME="1711"></A>   */</FONT>
<FONT ID="LN">1712</FONT><A NAME="1712"></A>  <FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> getMaxKMeansForChildren() {
<FONT ID="LN">1713</FONT><A NAME="1713"></A>    <FONT ID="Return">return</FONT>  m_MaxKMeansForChildren;
<FONT ID="LN">1714</FONT><A NAME="1714"></A>  }
<FONT ID="LN">1715</FONT><A NAME="1715"></A>
<FONT ID="LN">1716</FONT><A NAME="1716"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1717</FONT><A NAME="1717"></A>   * Returns the tip text for this property.
<FONT ID="LN">1718</FONT><A NAME="1718"></A>   * @return tip text for this property 
<FONT ID="LN">1719</FONT><A NAME="1719"></A>   */</FONT>
<FONT ID="LN">1720</FONT><A NAME="1720"></A>  <FONT ID="Public">public</FONT> String cutOffFactorTipText() {
<FONT ID="LN">1721</FONT><A NAME="1721"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"the cut-off factor to use"</FONT>;
<FONT ID="LN">1722</FONT><A NAME="1722"></A>  }
<FONT ID="LN">1723</FONT><A NAME="1723"></A>
<FONT ID="LN">1724</FONT><A NAME="1724"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1725</FONT><A NAME="1725"></A>   * Sets a new cutoff factor.
<FONT ID="LN">1726</FONT><A NAME="1726"></A>   * @param i the new cutoff factor
<FONT ID="LN">1727</FONT><A NAME="1727"></A>   */</FONT>
<FONT ID="LN">1728</FONT><A NAME="1728"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setCutOffFactor(<FONT ID="Double">double</FONT> i) {
<FONT ID="LN">1729</FONT><A NAME="1729"></A>    m_CutOffFactor = i;
<FONT ID="LN">1730</FONT><A NAME="1730"></A>  }
<FONT ID="LN">1731</FONT><A NAME="1731"></A>
<FONT ID="LN">1732</FONT><A NAME="1732"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1733</FONT><A NAME="1733"></A>   * Gets the cutoff factor.
<FONT ID="LN">1734</FONT><A NAME="1734"></A>   * @return the cutoff factor
<FONT ID="LN">1735</FONT><A NAME="1735"></A>   */</FONT>
<FONT ID="LN">1736</FONT><A NAME="1736"></A>  <FONT ID="Public">public</FONT> <FONT ID="Double">double</FONT> getCutOffFactor() {
<FONT ID="LN">1737</FONT><A NAME="1737"></A>    <FONT ID="Return">return</FONT>  m_CutOffFactor;
<FONT ID="LN">1738</FONT><A NAME="1738"></A>  }
<FONT ID="LN">1739</FONT><A NAME="1739"></A>
<FONT ID="LN">1740</FONT><A NAME="1740"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1741</FONT><A NAME="1741"></A>   * Returns the tip text for this property.
<FONT ID="LN">1742</FONT><A NAME="1742"></A>   * @return tip text for this property suitable for
<FONT ID="LN">1743</FONT><A NAME="1743"></A>   * displaying in the explorer/experimenter gui
<FONT ID="LN">1744</FONT><A NAME="1744"></A>   */</FONT>
<FONT ID="LN">1745</FONT><A NAME="1745"></A>  <FONT ID="Public">public</FONT> String binValueTipText() {
<FONT ID="LN">1746</FONT><A NAME="1746"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"Set the value that represents true in the new attributes."</FONT>;
<FONT ID="LN">1747</FONT><A NAME="1747"></A>  }
<FONT ID="LN">1748</FONT><A NAME="1748"></A>  
<FONT ID="LN">1749</FONT><A NAME="1749"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1750</FONT><A NAME="1750"></A>   * Gets value that represents true in a new numeric attribute.
<FONT ID="LN">1751</FONT><A NAME="1751"></A>   * (False is always represented by 0.0.)
<FONT ID="LN">1752</FONT><A NAME="1752"></A>   * @return the value that represents true in a new numeric attribute
<FONT ID="LN">1753</FONT><A NAME="1753"></A>   */</FONT>
<FONT ID="LN">1754</FONT><A NAME="1754"></A>  <FONT ID="Public">public</FONT> <FONT ID="Double">double</FONT> getBinValue() {
<FONT ID="LN">1755</FONT><A NAME="1755"></A>    <FONT ID="Return">return</FONT> m_BinValue;
<FONT ID="LN">1756</FONT><A NAME="1756"></A>  }
<FONT ID="LN">1757</FONT><A NAME="1757"></A>
<FONT ID="LN">1758</FONT><A NAME="1758"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1759</FONT><A NAME="1759"></A>   * Sets the distance value between true and false of binary attributes.
<FONT ID="LN">1760</FONT><A NAME="1760"></A>   * and  "same" and "different" of nominal attributes    
<FONT ID="LN">1761</FONT><A NAME="1761"></A>   * @param value the distance
<FONT ID="LN">1762</FONT><A NAME="1762"></A>   */</FONT>
<FONT ID="LN">1763</FONT><A NAME="1763"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setBinValue(<FONT ID="Double">double</FONT> value) {
<FONT ID="LN">1764</FONT><A NAME="1764"></A>    m_BinValue = value;
<FONT ID="LN">1765</FONT><A NAME="1765"></A>  }
<FONT ID="LN">1766</FONT><A NAME="1766"></A>
<FONT ID="LN">1767</FONT><A NAME="1767"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1768</FONT><A NAME="1768"></A>   * Returns the tip text for this property.
<FONT ID="LN">1769</FONT><A NAME="1769"></A>   * 
<FONT ID="LN">1770</FONT><A NAME="1770"></A>   * @return        tip text for this property suitable for
<FONT ID="LN">1771</FONT><A NAME="1771"></A>   *            displaying in the explorer/experimenter gui
<FONT ID="LN">1772</FONT><A NAME="1772"></A>   */</FONT>
<FONT ID="LN">1773</FONT><A NAME="1773"></A>  <FONT ID="Public">public</FONT> String distanceFTipText() {
<FONT ID="LN">1774</FONT><A NAME="1774"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"The distance function to use."</FONT>;
<FONT ID="LN">1775</FONT><A NAME="1775"></A>  }
<FONT ID="LN">1776</FONT><A NAME="1776"></A>
<FONT ID="LN">1777</FONT><A NAME="1777"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1778</FONT><A NAME="1778"></A>   * gets the "binary" distance value.
<FONT ID="LN">1779</FONT><A NAME="1779"></A>   * @param distanceF the distance function with all options set
<FONT ID="LN">1780</FONT><A NAME="1780"></A>   */</FONT>
<FONT ID="LN">1781</FONT><A NAME="1781"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setDistanceF(<A HREF="../../weka/core/DistanceFunction.java.html">DistanceFunction</A> distanceF) {
<FONT ID="LN">1782</FONT><A NAME="1782"></A>    m_DistanceF = distanceF;
<FONT ID="LN">1783</FONT><A NAME="1783"></A>  }
<FONT ID="LN">1784</FONT><A NAME="1784"></A>
<FONT ID="LN">1785</FONT><A NAME="1785"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1786</FONT><A NAME="1786"></A>   * Gets the distance function.
<FONT ID="LN">1787</FONT><A NAME="1787"></A>   * @return the distance function
<FONT ID="LN">1788</FONT><A NAME="1788"></A>   */</FONT>
<FONT ID="LN">1789</FONT><A NAME="1789"></A>  <FONT ID="Public">public</FONT> <A HREF="../../weka/core/DistanceFunction.java.html">DistanceFunction</A> getDistanceF() {
<FONT ID="LN">1790</FONT><A NAME="1790"></A>    <FONT ID="Return">return</FONT> m_DistanceF;
<FONT ID="LN">1791</FONT><A NAME="1791"></A>  }
<FONT ID="LN">1792</FONT><A NAME="1792"></A>
<FONT ID="LN">1793</FONT><A NAME="1793"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1794</FONT><A NAME="1794"></A>   * Gets the distance function specification string, which contains the 
<FONT ID="LN">1795</FONT><A NAME="1795"></A>   * class name of the distance function class and any options to it.
<FONT ID="LN">1796</FONT><A NAME="1796"></A>   *
<FONT ID="LN">1797</FONT><A NAME="1797"></A>   * @return the distance function specification string
<FONT ID="LN">1798</FONT><A NAME="1798"></A>   */</FONT>
<FONT ID="LN">1799</FONT><A NAME="1799"></A>  <FONT ID="Protected">protected</FONT> String getDistanceFSpec() {
<FONT ID="LN">1800</FONT><A NAME="1800"></A>    
<FONT ID="LN">1801</FONT><A NAME="1801"></A>    <A HREF="../../weka/core/DistanceFunction.java.html">DistanceFunction</A> d = getDistanceF();
<FONT ID="LN">1802</FONT><A NAME="1802"></A>    <FONT ID="If">if</FONT> (d <FONT ID="InstanceOf">instanceof</FONT> <A HREF="../../weka/core/OptionHandler.java.html">OptionHandler</A>) {
<FONT ID="LN">1803</FONT><A NAME="1803"></A>      <FONT ID="Return">return</FONT> d.getClass().getName() + <FONT ID="StringLiteral">" "</FONT>
<FONT ID="LN">1804</FONT><A NAME="1804"></A>    + Utils.joinOptions(((<A HREF="../../weka/core/OptionHandler.java.html">OptionHandler</A>) d).getOptions());
<FONT ID="LN">1805</FONT><A NAME="1805"></A>    }
<FONT ID="LN">1806</FONT><A NAME="1806"></A>    <FONT ID="Return">return</FONT> d.getClass().getName();
<FONT ID="LN">1807</FONT><A NAME="1807"></A>  }
<FONT ID="LN">1808</FONT><A NAME="1808"></A>
<FONT ID="LN">1809</FONT><A NAME="1809"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1810</FONT><A NAME="1810"></A>   * Returns the tip text for this property.
<FONT ID="LN">1811</FONT><A NAME="1811"></A>   * 
<FONT ID="LN">1812</FONT><A NAME="1812"></A>   * @return        tip text for this property suitable for
<FONT ID="LN">1813</FONT><A NAME="1813"></A>   *            displaying in the explorer/experimenter gui
<FONT ID="LN">1814</FONT><A NAME="1814"></A>   */</FONT>
<FONT ID="LN">1815</FONT><A NAME="1815"></A>  <FONT ID="Public">public</FONT> String debugVectorsFileTipText() {
<FONT ID="LN">1816</FONT><A NAME="1816"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"The file containing the debug vectors (only for debugging!)."</FONT>;
<FONT ID="LN">1817</FONT><A NAME="1817"></A>  }
<FONT ID="LN">1818</FONT><A NAME="1818"></A>  
<FONT ID="LN">1819</FONT><A NAME="1819"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1820</FONT><A NAME="1820"></A>   * Sets the file that has the random vectors stored.
<FONT ID="LN">1821</FONT><A NAME="1821"></A>   * Only used for debugging reasons.
<FONT ID="LN">1822</FONT><A NAME="1822"></A>   * @param value the file to read the random vectors from
<FONT ID="LN">1823</FONT><A NAME="1823"></A>   */</FONT>
<FONT ID="LN">1824</FONT><A NAME="1824"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setDebugVectorsFile(File value) {
<FONT ID="LN">1825</FONT><A NAME="1825"></A>    m_DebugVectorsFile = value;
<FONT ID="LN">1826</FONT><A NAME="1826"></A>  }
<FONT ID="LN">1827</FONT><A NAME="1827"></A>
<FONT ID="LN">1828</FONT><A NAME="1828"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1829</FONT><A NAME="1829"></A>   * Gets the file name for a file that has the random vectors stored.
<FONT ID="LN">1830</FONT><A NAME="1830"></A>   * Only used for debugging purposes.
<FONT ID="LN">1831</FONT><A NAME="1831"></A>   * @return the file to read the vectors from
<FONT ID="LN">1832</FONT><A NAME="1832"></A>   */</FONT>
<FONT ID="LN">1833</FONT><A NAME="1833"></A>  <FONT ID="Public">public</FONT> File getDebugVectorsFile() {
<FONT ID="LN">1834</FONT><A NAME="1834"></A>    <FONT ID="Return">return</FONT> m_DebugVectorsFile;
<FONT ID="LN">1835</FONT><A NAME="1835"></A>  }
<FONT ID="LN">1836</FONT><A NAME="1836"></A>  
<FONT ID="LN">1837</FONT><A NAME="1837"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1838</FONT><A NAME="1838"></A>   * Initialises the debug vector input.
<FONT ID="LN">1839</FONT><A NAME="1839"></A>   * @throws Exception if there is error 
<FONT ID="LN">1840</FONT><A NAME="1840"></A>   * opening the debug input file.
<FONT ID="LN">1841</FONT><A NAME="1841"></A>   */</FONT>
<FONT ID="LN">1842</FONT><A NAME="1842"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> initDebugVectorsInput() <FONT ID="Throws">throws</FONT> Exception {
<FONT ID="LN">1843</FONT><A NAME="1843"></A>    m_DebugVectorsInput = 
<FONT ID="LN">1844</FONT><A NAME="1844"></A>      <FONT ID="New">new</FONT> BufferedReader(<FONT ID="New">new</FONT> FileReader(m_DebugVectorsFile));
<FONT ID="LN">1845</FONT><A NAME="1845"></A>    m_DebugVectors = <FONT ID="New">new</FONT> <A HREF="../../weka/core/Instances.java.html">Instances</A>(m_DebugVectorsInput);
<FONT ID="LN">1846</FONT><A NAME="1846"></A>    m_DebugVectorsIndex = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">1847</FONT><A NAME="1847"></A>  }
<FONT ID="LN">1848</FONT><A NAME="1848"></A>
<FONT ID="LN">1849</FONT><A NAME="1849"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1850</FONT><A NAME="1850"></A>   * Read an instance from debug vectors file.
<FONT ID="LN">1851</FONT><A NAME="1851"></A>   * @param model the data model for the instance.
<FONT ID="LN">1852</FONT><A NAME="1852"></A>   * @throws Exception if there are no debug vector 
<FONT ID="LN">1853</FONT><A NAME="1853"></A>   * in m_DebugVectors.
<FONT ID="LN">1854</FONT><A NAME="1854"></A>   * @return the next debug vector.
<FONT ID="LN">1855</FONT><A NAME="1855"></A>   */</FONT>
<FONT ID="LN">1856</FONT><A NAME="1856"></A>  <FONT ID="Public">public</FONT> <A HREF="../../weka/core/Instance.java.html">Instance</A> getNextDebugVectorsInstance(<A HREF="../../weka/core/Instances.java.html">Instances</A> model) 
<FONT ID="LN">1857</FONT><A NAME="1857"></A>    <FONT ID="Throws">throws</FONT> Exception {
<FONT ID="LN">1858</FONT><A NAME="1858"></A>    <FONT ID="If">if</FONT> (m_DebugVectorsIndex &gt;= m_DebugVectors.numInstances())
<FONT ID="LN">1859</FONT><A NAME="1859"></A>      <FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> Exception(<FONT ID="StringLiteral">"no more prefabricated Vectors"</FONT>);
<FONT ID="LN">1860</FONT><A NAME="1860"></A>    <A HREF="../../weka/core/Instance.java.html">Instance</A> nex = m_DebugVectors.instance(m_DebugVectorsIndex);
<FONT ID="LN">1861</FONT><A NAME="1861"></A>    nex.setDataset(model);
<FONT ID="LN">1862</FONT><A NAME="1862"></A>    m_DebugVectorsIndex++;
<FONT ID="LN">1863</FONT><A NAME="1863"></A>    <FONT ID="Return">return</FONT> nex;
<FONT ID="LN">1864</FONT><A NAME="1864"></A>  }
<FONT ID="LN">1865</FONT><A NAME="1865"></A>
<FONT ID="LN">1866</FONT><A NAME="1866"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1867</FONT><A NAME="1867"></A>   * Returns the tip text for this property.
<FONT ID="LN">1868</FONT><A NAME="1868"></A>   * 
<FONT ID="LN">1869</FONT><A NAME="1869"></A>   * @return        tip text for this property suitable for
<FONT ID="LN">1870</FONT><A NAME="1870"></A>   *            displaying in the explorer/experimenter gui
<FONT ID="LN">1871</FONT><A NAME="1871"></A>   */</FONT>
<FONT ID="LN">1872</FONT><A NAME="1872"></A>  <FONT ID="Public">public</FONT> String inputCenterFileTipText() {
<FONT ID="LN">1873</FONT><A NAME="1873"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"The file to read the list of centers from."</FONT>;
<FONT ID="LN">1874</FONT><A NAME="1874"></A>  }
<FONT ID="LN">1875</FONT><A NAME="1875"></A>
<FONT ID="LN">1876</FONT><A NAME="1876"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1877</FONT><A NAME="1877"></A>   * Sets the file to read the list of centers from.
<FONT ID="LN">1878</FONT><A NAME="1878"></A>   *
<FONT ID="LN">1879</FONT><A NAME="1879"></A>   * @param value the file to read centers from
<FONT ID="LN">1880</FONT><A NAME="1880"></A>   */</FONT>
<FONT ID="LN">1881</FONT><A NAME="1881"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setInputCenterFile(File value) {
<FONT ID="LN">1882</FONT><A NAME="1882"></A>    m_InputCenterFile = value;
<FONT ID="LN">1883</FONT><A NAME="1883"></A>  }
<FONT ID="LN">1884</FONT><A NAME="1884"></A>  
<FONT ID="LN">1885</FONT><A NAME="1885"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1886</FONT><A NAME="1886"></A>   * Gets the file to read the list of centers from.
<FONT ID="LN">1887</FONT><A NAME="1887"></A>   *
<FONT ID="LN">1888</FONT><A NAME="1888"></A>   * @return the file to read the centers from
<FONT ID="LN">1889</FONT><A NAME="1889"></A>   */</FONT>
<FONT ID="LN">1890</FONT><A NAME="1890"></A>  <FONT ID="Public">public</FONT> File getInputCenterFile() {
<FONT ID="LN">1891</FONT><A NAME="1891"></A>    <FONT ID="Return">return</FONT> m_InputCenterFile;
<FONT ID="LN">1892</FONT><A NAME="1892"></A>  }
<FONT ID="LN">1893</FONT><A NAME="1893"></A>
<FONT ID="LN">1894</FONT><A NAME="1894"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1895</FONT><A NAME="1895"></A>   * Returns the tip text for this property.
<FONT ID="LN">1896</FONT><A NAME="1896"></A>   * 
<FONT ID="LN">1897</FONT><A NAME="1897"></A>   * @return        tip text for this property suitable for
<FONT ID="LN">1898</FONT><A NAME="1898"></A>   *            displaying in the explorer/experimenter gui
<FONT ID="LN">1899</FONT><A NAME="1899"></A>   */</FONT>
<FONT ID="LN">1900</FONT><A NAME="1900"></A>  <FONT ID="Public">public</FONT> String outputCenterFileTipText() {
<FONT ID="LN">1901</FONT><A NAME="1901"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"The file to write the list of centers to."</FONT>;
<FONT ID="LN">1902</FONT><A NAME="1902"></A>  }
<FONT ID="LN">1903</FONT><A NAME="1903"></A>    
<FONT ID="LN">1904</FONT><A NAME="1904"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1905</FONT><A NAME="1905"></A>   * Sets file to write the list of centers to. 
<FONT ID="LN">1906</FONT><A NAME="1906"></A>   *
<FONT ID="LN">1907</FONT><A NAME="1907"></A>   * @param value file to write centers to
<FONT ID="LN">1908</FONT><A NAME="1908"></A>   */</FONT>
<FONT ID="LN">1909</FONT><A NAME="1909"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setOutputCenterFile(File value) {
<FONT ID="LN">1910</FONT><A NAME="1910"></A>    m_OutputCenterFile = value;
<FONT ID="LN">1911</FONT><A NAME="1911"></A>  }
<FONT ID="LN">1912</FONT><A NAME="1912"></A>
<FONT ID="LN">1913</FONT><A NAME="1913"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1914</FONT><A NAME="1914"></A>   * Gets the file to write the list of centers to. 
<FONT ID="LN">1915</FONT><A NAME="1915"></A>   * 
<FONT ID="LN">1916</FONT><A NAME="1916"></A>   * @return filename of the file to write centers to
<FONT ID="LN">1917</FONT><A NAME="1917"></A>   */</FONT>
<FONT ID="LN">1918</FONT><A NAME="1918"></A>  <FONT ID="Public">public</FONT> File getOutputCenterFile() {
<FONT ID="LN">1919</FONT><A NAME="1919"></A>    <FONT ID="Return">return</FONT> m_OutputCenterFile;
<FONT ID="LN">1920</FONT><A NAME="1920"></A>  }
<FONT ID="LN">1921</FONT><A NAME="1921"></A>
<FONT ID="LN">1922</FONT><A NAME="1922"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1923</FONT><A NAME="1923"></A>   * Returns the tip text for this property.
<FONT ID="LN">1924</FONT><A NAME="1924"></A>   * 
<FONT ID="LN">1925</FONT><A NAME="1925"></A>   * @return        tip text for this property suitable for
<FONT ID="LN">1926</FONT><A NAME="1926"></A>   *            displaying in the explorer/experimenter gui
<FONT ID="LN">1927</FONT><A NAME="1927"></A>   */</FONT>
<FONT ID="LN">1928</FONT><A NAME="1928"></A>  <FONT ID="Public">public</FONT> String KDTreeTipText() {
<FONT ID="LN">1929</FONT><A NAME="1929"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"The KDTree to use."</FONT>;
<FONT ID="LN">1930</FONT><A NAME="1930"></A>  }
<FONT ID="LN">1931</FONT><A NAME="1931"></A>    
<FONT ID="LN">1932</FONT><A NAME="1932"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1933</FONT><A NAME="1933"></A>   * Sets the KDTree class.
<FONT ID="LN">1934</FONT><A NAME="1934"></A>   * @param k a KDTree object with all options set
<FONT ID="LN">1935</FONT><A NAME="1935"></A>   */</FONT>
<FONT ID="LN">1936</FONT><A NAME="1936"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setKDTree(<A HREF="../../weka/core/neighboursearch/KDTree.java.html">KDTree</A> k) {
<FONT ID="LN">1937</FONT><A NAME="1937"></A>    m_KDTree = k;
<FONT ID="LN">1938</FONT><A NAME="1938"></A>  }
<FONT ID="LN">1939</FONT><A NAME="1939"></A>
<FONT ID="LN">1940</FONT><A NAME="1940"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1941</FONT><A NAME="1941"></A>   * Gets the KDTree class.
<FONT ID="LN">1942</FONT><A NAME="1942"></A>   * 
<FONT ID="LN">1943</FONT><A NAME="1943"></A>   * @return the configured KDTree
<FONT ID="LN">1944</FONT><A NAME="1944"></A>   */</FONT>
<FONT ID="LN">1945</FONT><A NAME="1945"></A>  <FONT ID="Public">public</FONT> <A HREF="../../weka/core/neighboursearch/KDTree.java.html">KDTree</A> getKDTree() {
<FONT ID="LN">1946</FONT><A NAME="1946"></A>    <FONT ID="Return">return</FONT> m_KDTree;
<FONT ID="LN">1947</FONT><A NAME="1947"></A>  }
<FONT ID="LN">1948</FONT><A NAME="1948"></A>
<FONT ID="LN">1949</FONT><A NAME="1949"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1950</FONT><A NAME="1950"></A>   * Returns the tip text for this property.
<FONT ID="LN">1951</FONT><A NAME="1951"></A>   * 
<FONT ID="LN">1952</FONT><A NAME="1952"></A>   * @return        tip text for this property suitable for
<FONT ID="LN">1953</FONT><A NAME="1953"></A>   *            displaying in the explorer/experimenter gui
<FONT ID="LN">1954</FONT><A NAME="1954"></A>   */</FONT>
<FONT ID="LN">1955</FONT><A NAME="1955"></A>  <FONT ID="Public">public</FONT> String useKDTreeTipText() {
<FONT ID="LN">1956</FONT><A NAME="1956"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"Whether to use the KDTree."</FONT>;
<FONT ID="LN">1957</FONT><A NAME="1957"></A>  }
<FONT ID="LN">1958</FONT><A NAME="1958"></A>    
<FONT ID="LN">1959</FONT><A NAME="1959"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1960</FONT><A NAME="1960"></A>   * Sets whether to use the KDTree or not.
<FONT ID="LN">1961</FONT><A NAME="1961"></A>   * 
<FONT ID="LN">1962</FONT><A NAME="1962"></A>   * @param value   if true the KDTree is used
<FONT ID="LN">1963</FONT><A NAME="1963"></A>   */</FONT>
<FONT ID="LN">1964</FONT><A NAME="1964"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setUseKDTree(<FONT ID="Boolean">boolean</FONT> value) {
<FONT ID="LN">1965</FONT><A NAME="1965"></A>    m_UseKDTree = value;
<FONT ID="LN">1966</FONT><A NAME="1966"></A>  }
<FONT ID="LN">1967</FONT><A NAME="1967"></A>
<FONT ID="LN">1968</FONT><A NAME="1968"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1969</FONT><A NAME="1969"></A>   * Gets whether the KDTree is used or not.
<FONT ID="LN">1970</FONT><A NAME="1970"></A>   * 
<FONT ID="LN">1971</FONT><A NAME="1971"></A>   * @return        true if KDTrees are used
<FONT ID="LN">1972</FONT><A NAME="1972"></A>   */</FONT>
<FONT ID="LN">1973</FONT><A NAME="1973"></A>  <FONT ID="Public">public</FONT> <FONT ID="Boolean">boolean</FONT> getUseKDTree() {
<FONT ID="LN">1974</FONT><A NAME="1974"></A>    <FONT ID="Return">return</FONT> m_UseKDTree;
<FONT ID="LN">1975</FONT><A NAME="1975"></A>  }
<FONT ID="LN">1976</FONT><A NAME="1976"></A>
<FONT ID="LN">1977</FONT><A NAME="1977"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1978</FONT><A NAME="1978"></A>   * Gets the KDTree specification string, which contains the class name of
<FONT ID="LN">1979</FONT><A NAME="1979"></A>   * the KDTree class and any options to the KDTree.
<FONT ID="LN">1980</FONT><A NAME="1980"></A>   *
<FONT ID="LN">1981</FONT><A NAME="1981"></A>   * @return the KDTree string.
<FONT ID="LN">1982</FONT><A NAME="1982"></A>   */</FONT>
<FONT ID="LN">1983</FONT><A NAME="1983"></A>  <FONT ID="Protected">protected</FONT> String getKDTreeSpec() {
<FONT ID="LN">1984</FONT><A NAME="1984"></A>    
<FONT ID="LN">1985</FONT><A NAME="1985"></A>    <A HREF="../../weka/core/neighboursearch/KDTree.java.html">KDTree</A> c = getKDTree();
<FONT ID="LN">1986</FONT><A NAME="1986"></A>    <FONT ID="If">if</FONT> (c <FONT ID="InstanceOf">instanceof</FONT> <A HREF="../../weka/core/OptionHandler.java.html">OptionHandler</A>) {
<FONT ID="LN">1987</FONT><A NAME="1987"></A>      <FONT ID="Return">return</FONT> c.getClass().getName() + <FONT ID="StringLiteral">" "</FONT>
<FONT ID="LN">1988</FONT><A NAME="1988"></A>    + Utils.joinOptions(((<A HREF="../../weka/core/OptionHandler.java.html">OptionHandler</A>)c).getOptions());
<FONT ID="LN">1989</FONT><A NAME="1989"></A>    }
<FONT ID="LN">1990</FONT><A NAME="1990"></A>    <FONT ID="Return">return</FONT> c.getClass().getName();
<FONT ID="LN">1991</FONT><A NAME="1991"></A>  }
<FONT ID="LN">1992</FONT><A NAME="1992"></A>
<FONT ID="LN">1993</FONT><A NAME="1993"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1994</FONT><A NAME="1994"></A>   * Returns the tip text for this property.
<FONT ID="LN">1995</FONT><A NAME="1995"></A>   * 
<FONT ID="LN">1996</FONT><A NAME="1996"></A>   * @return        tip text for this property suitable for
<FONT ID="LN">1997</FONT><A NAME="1997"></A>   *            displaying in the explorer/experimenter gui
<FONT ID="LN">1998</FONT><A NAME="1998"></A>   */</FONT>
<FONT ID="LN">1999</FONT><A NAME="1999"></A>  <FONT ID="Public">public</FONT> String debugLevelTipText() {
<FONT ID="LN">2000</FONT><A NAME="2000"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"The debug level to use."</FONT>;
<FONT ID="LN">2001</FONT><A NAME="2001"></A>  }
<FONT ID="LN">2002</FONT><A NAME="2002"></A>
<FONT ID="LN">2003</FONT><A NAME="2003"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">2004</FONT><A NAME="2004"></A>   * Sets the debug level.
<FONT ID="LN">2005</FONT><A NAME="2005"></A>   * debug level = 0, means no output
<FONT ID="LN">2006</FONT><A NAME="2006"></A>   * @param d debuglevel
<FONT ID="LN">2007</FONT><A NAME="2007"></A>   */</FONT>
<FONT ID="LN">2008</FONT><A NAME="2008"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setDebugLevel(<FONT ID="Int">int</FONT> d) {
<FONT ID="LN">2009</FONT><A NAME="2009"></A>    m_DebugLevel = d;
<FONT ID="LN">2010</FONT><A NAME="2010"></A>  }
<FONT ID="LN">2011</FONT><A NAME="2011"></A>
<FONT ID="LN">2012</FONT><A NAME="2012"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">2013</FONT><A NAME="2013"></A>   * Gets the debug level.
<FONT ID="LN">2014</FONT><A NAME="2014"></A>   * @return debug level
<FONT ID="LN">2015</FONT><A NAME="2015"></A>   */</FONT>
<FONT ID="LN">2016</FONT><A NAME="2016"></A>  <FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> getDebugLevel() {
<FONT ID="LN">2017</FONT><A NAME="2017"></A>    <FONT ID="Return">return</FONT> m_DebugLevel;
<FONT ID="LN">2018</FONT><A NAME="2018"></A>  }
<FONT ID="LN">2019</FONT><A NAME="2019"></A>
<FONT ID="LN">2020</FONT><A NAME="2020"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">2021</FONT><A NAME="2021"></A>   * Checks the instances.
<FONT ID="LN">2022</FONT><A NAME="2022"></A>   * No checks in this KDTree but it calls the check of the distance function.
<FONT ID="LN">2023</FONT><A NAME="2023"></A>   */</FONT>
<FONT ID="LN">2024</FONT><A NAME="2024"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Void">void</FONT> checkInstances () {
<FONT ID="LN">2025</FONT><A NAME="2025"></A>    
<FONT ID="LN">2026</FONT><A NAME="2026"></A>   <FONT ID="SingleLineComment">// m_DistanceF.checkInstances();
<FONT ID="LN">2027</FONT><A NAME="2027"></A></FONT>  }
<FONT ID="LN">2028</FONT><A NAME="2028"></A>  
<FONT ID="LN">2029</FONT><A NAME="2029"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">2030</FONT><A NAME="2030"></A>   * Parses a given list of options. &lt;p/&gt;
<FONT ID="LN">2031</FONT><A NAME="2031"></A>   * 
<FONT ID="LN">2032</FONT><A NAME="2032"></A>   &lt;!-- options-start --&gt;
<FONT ID="LN">2033</FONT><A NAME="2033"></A>   * Valid options are: &lt;p/&gt;
<FONT ID="LN">2034</FONT><A NAME="2034"></A>   * 
<FONT ID="LN">2035</FONT><A NAME="2035"></A>   * &lt;pre&gt; -I &amp;lt;num&amp;gt;
<FONT ID="LN">2036</FONT><A NAME="2036"></A>   *  maximum number of overall iterations
<FONT ID="LN">2037</FONT><A NAME="2037"></A>   *  (default 1).&lt;/pre&gt;
<FONT ID="LN">2038</FONT><A NAME="2038"></A>   * 
<FONT ID="LN">2039</FONT><A NAME="2039"></A>   * &lt;pre&gt; -M &amp;lt;num&amp;gt;
<FONT ID="LN">2040</FONT><A NAME="2040"></A>   *  maximum number of iterations in the kMeans loop in
<FONT ID="LN">2041</FONT><A NAME="2041"></A>   *  the Improve-Parameter part 
<FONT ID="LN">2042</FONT><A NAME="2042"></A>   *  (default 1000).&lt;/pre&gt;
<FONT ID="LN">2043</FONT><A NAME="2043"></A>   * 
<FONT ID="LN">2044</FONT><A NAME="2044"></A>   * &lt;pre&gt; -J &amp;lt;num&amp;gt;
<FONT ID="LN">2045</FONT><A NAME="2045"></A>   *  maximum number of iterations in the kMeans loop
<FONT ID="LN">2046</FONT><A NAME="2046"></A>   *  for the splitted centroids in the Improve-Structure part 
<FONT ID="LN">2047</FONT><A NAME="2047"></A>   *  (default 1000).&lt;/pre&gt;
<FONT ID="LN">2048</FONT><A NAME="2048"></A>   * 
<FONT ID="LN">2049</FONT><A NAME="2049"></A>   * &lt;pre&gt; -L &amp;lt;num&amp;gt;
<FONT ID="LN">2050</FONT><A NAME="2050"></A>   *  minimum number of clusters
<FONT ID="LN">2051</FONT><A NAME="2051"></A>   *  (default 2).&lt;/pre&gt;
<FONT ID="LN">2052</FONT><A NAME="2052"></A>   * 
<FONT ID="LN">2053</FONT><A NAME="2053"></A>   * &lt;pre&gt; -H &amp;lt;num&amp;gt;
<FONT ID="LN">2054</FONT><A NAME="2054"></A>   *  maximum number of clusters
<FONT ID="LN">2055</FONT><A NAME="2055"></A>   *  (default 4).&lt;/pre&gt;
<FONT ID="LN">2056</FONT><A NAME="2056"></A>   * 
<FONT ID="LN">2057</FONT><A NAME="2057"></A>   * &lt;pre&gt; -B &amp;lt;value&amp;gt;
<FONT ID="LN">2058</FONT><A NAME="2058"></A>   *  distance value for binary attributes
<FONT ID="LN">2059</FONT><A NAME="2059"></A>   *  (default 1.0).&lt;/pre&gt;
<FONT ID="LN">2060</FONT><A NAME="2060"></A>   * 
<FONT ID="LN">2061</FONT><A NAME="2061"></A>   * &lt;pre&gt; -use-kdtree
<FONT ID="LN">2062</FONT><A NAME="2062"></A>   *  Uses the KDTree internally
<FONT ID="LN">2063</FONT><A NAME="2063"></A>   *  (default no).&lt;/pre&gt;
<FONT ID="LN">2064</FONT><A NAME="2064"></A>   * 
<FONT ID="LN">2065</FONT><A NAME="2065"></A>   * &lt;pre&gt; -K &amp;lt;KDTree class specification&amp;gt;
<FONT ID="LN">2066</FONT><A NAME="2066"></A>   *  Full class name of KDTree class to use, followed
<FONT ID="LN">2067</FONT><A NAME="2067"></A>   *  by scheme options.
<FONT ID="LN">2068</FONT><A NAME="2068"></A>   *  eg: "weka.core.neighboursearch.kdtrees.KDTree -P"
<FONT ID="LN">2069</FONT><A NAME="2069"></A>   *  (default no KDTree class used).&lt;/pre&gt;
<FONT ID="LN">2070</FONT><A NAME="2070"></A>   * 
<FONT ID="LN">2071</FONT><A NAME="2071"></A>   * &lt;pre&gt; -C &amp;lt;value&amp;gt;
<FONT ID="LN">2072</FONT><A NAME="2072"></A>   *  cutoff factor, takes the given percentage of the splitted 
<FONT ID="LN">2073</FONT><A NAME="2073"></A>   *  centroids if none of the children win
<FONT ID="LN">2074</FONT><A NAME="2074"></A>   *  (default 0.0).&lt;/pre&gt;
<FONT ID="LN">2075</FONT><A NAME="2075"></A>   * 
<FONT ID="LN">2076</FONT><A NAME="2076"></A>   * &lt;pre&gt; -D &amp;lt;distance function class specification&amp;gt;
<FONT ID="LN">2077</FONT><A NAME="2077"></A>   *  Full class name of Distance function class to use, followed
<FONT ID="LN">2078</FONT><A NAME="2078"></A>   *  by scheme options.
<FONT ID="LN">2079</FONT><A NAME="2079"></A>   *  (default weka.core.EuclideanDistance).&lt;/pre&gt;
<FONT ID="LN">2080</FONT><A NAME="2080"></A>   * 
<FONT ID="LN">2081</FONT><A NAME="2081"></A>   * &lt;pre&gt; -N &amp;lt;file name&amp;gt;
<FONT ID="LN">2082</FONT><A NAME="2082"></A>   *  file to read starting centers from (ARFF format).&lt;/pre&gt;
<FONT ID="LN">2083</FONT><A NAME="2083"></A>   * 
<FONT ID="LN">2084</FONT><A NAME="2084"></A>   * &lt;pre&gt; -O &amp;lt;file name&amp;gt;
<FONT ID="LN">2085</FONT><A NAME="2085"></A>   *  file to write centers to (ARFF format).&lt;/pre&gt;
<FONT ID="LN">2086</FONT><A NAME="2086"></A>   * 
<FONT ID="LN">2087</FONT><A NAME="2087"></A>   * &lt;pre&gt; -U &amp;lt;int&amp;gt;
<FONT ID="LN">2088</FONT><A NAME="2088"></A>   *  The debug level.
<FONT ID="LN">2089</FONT><A NAME="2089"></A>   *  (default 0)&lt;/pre&gt;
<FONT ID="LN">2090</FONT><A NAME="2090"></A>   * 
<FONT ID="LN">2091</FONT><A NAME="2091"></A>   * &lt;pre&gt; -Y &amp;lt;file name&amp;gt;
<FONT ID="LN">2092</FONT><A NAME="2092"></A>   *  The debug vectors file.&lt;/pre&gt;
<FONT ID="LN">2093</FONT><A NAME="2093"></A>   * 
<FONT ID="LN">2094</FONT><A NAME="2094"></A>   * &lt;pre&gt; -S &amp;lt;num&amp;gt;
<FONT ID="LN">2095</FONT><A NAME="2095"></A>   *  Random number seed.
<FONT ID="LN">2096</FONT><A NAME="2096"></A>   *  (default 10)&lt;/pre&gt;
<FONT ID="LN">2097</FONT><A NAME="2097"></A>   * 
<FONT ID="LN">2098</FONT><A NAME="2098"></A>   &lt;!-- options-end --&gt;
<FONT ID="LN">2099</FONT><A NAME="2099"></A>   * 
<FONT ID="LN">2100</FONT><A NAME="2100"></A>   * @param options the list of options as an array of strings
<FONT ID="LN">2101</FONT><A NAME="2101"></A>   * @throws Exception if an option is not supported
<FONT ID="LN">2102</FONT><A NAME="2102"></A>   */</FONT>
<FONT ID="LN">2103</FONT><A NAME="2103"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setOptions(String[] options)
<FONT ID="LN">2104</FONT><A NAME="2104"></A>    <FONT ID="Throws">throws</FONT> Exception {
<FONT ID="LN">2105</FONT><A NAME="2105"></A>    
<FONT ID="LN">2106</FONT><A NAME="2106"></A>    String  optionString;
<FONT ID="LN">2107</FONT><A NAME="2107"></A>    String  funcString;
<FONT ID="LN">2108</FONT><A NAME="2108"></A>
<FONT ID="LN">2109</FONT><A NAME="2109"></A>    optionString = Utils.getOption(<FONT ID="CharacerLiteral">'I'</FONT>, options);
<FONT ID="LN">2110</FONT><A NAME="2110"></A>    <FONT ID="If">if</FONT> (optionString.length() != <FONT ID="IntegerLiteral">0</FONT>)
<FONT ID="LN">2111</FONT><A NAME="2111"></A>      setMaxIterations(Integer.parseInt(optionString));
<FONT ID="LN">2112</FONT><A NAME="2112"></A>    <FONT ID="Else">else</FONT>
<FONT ID="LN">2113</FONT><A NAME="2113"></A>      setMaxIterations(<FONT ID="IntegerLiteral">1</FONT>);
<FONT ID="LN">2114</FONT><A NAME="2114"></A>    
<FONT ID="LN">2115</FONT><A NAME="2115"></A>    optionString = Utils.getOption(<FONT ID="CharacerLiteral">'M'</FONT>, options);
<FONT ID="LN">2116</FONT><A NAME="2116"></A>    <FONT ID="If">if</FONT> (optionString.length() != <FONT ID="IntegerLiteral">0</FONT>)
<FONT ID="LN">2117</FONT><A NAME="2117"></A>      setMaxKMeans(Integer.parseInt(optionString));
<FONT ID="LN">2118</FONT><A NAME="2118"></A>    <FONT ID="Else">else</FONT>
<FONT ID="LN">2119</FONT><A NAME="2119"></A>      setMaxKMeans(<FONT ID="IntegerLiteral">1000</FONT>);
<FONT ID="LN">2120</FONT><A NAME="2120"></A>    
<FONT ID="LN">2121</FONT><A NAME="2121"></A>    optionString = Utils.getOption(<FONT ID="CharacerLiteral">'J'</FONT>, options);
<FONT ID="LN">2122</FONT><A NAME="2122"></A>    <FONT ID="If">if</FONT> (optionString.length() != <FONT ID="IntegerLiteral">0</FONT>)
<FONT ID="LN">2123</FONT><A NAME="2123"></A>      setMaxKMeansForChildren(Integer.parseInt(optionString));
<FONT ID="LN">2124</FONT><A NAME="2124"></A>    <FONT ID="Else">else</FONT>
<FONT ID="LN">2125</FONT><A NAME="2125"></A>      setMaxKMeansForChildren(<FONT ID="IntegerLiteral">1000</FONT>);
<FONT ID="LN">2126</FONT><A NAME="2126"></A>      
<FONT ID="LN">2127</FONT><A NAME="2127"></A>    optionString = Utils.getOption(<FONT ID="CharacerLiteral">'L'</FONT>, options);
<FONT ID="LN">2128</FONT><A NAME="2128"></A>    <FONT ID="If">if</FONT> (optionString.length() != <FONT ID="IntegerLiteral">0</FONT>)
<FONT ID="LN">2129</FONT><A NAME="2129"></A>      setMinNumClusters(Integer.parseInt(optionString));
<FONT ID="LN">2130</FONT><A NAME="2130"></A>    <FONT ID="Else">else</FONT>
<FONT ID="LN">2131</FONT><A NAME="2131"></A>      setMinNumClusters(<FONT ID="IntegerLiteral">2</FONT>);
<FONT ID="LN">2132</FONT><A NAME="2132"></A>      
<FONT ID="LN">2133</FONT><A NAME="2133"></A>    optionString = Utils.getOption(<FONT ID="CharacerLiteral">'H'</FONT>, options);
<FONT ID="LN">2134</FONT><A NAME="2134"></A>    <FONT ID="If">if</FONT> (optionString.length() != <FONT ID="IntegerLiteral">0</FONT>)
<FONT ID="LN">2135</FONT><A NAME="2135"></A>      setMaxNumClusters(Integer.parseInt(optionString));
<FONT ID="LN">2136</FONT><A NAME="2136"></A>    <FONT ID="Else">else</FONT>
<FONT ID="LN">2137</FONT><A NAME="2137"></A>      setMaxNumClusters(<FONT ID="IntegerLiteral">4</FONT>);
<FONT ID="LN">2138</FONT><A NAME="2138"></A>    
<FONT ID="LN">2139</FONT><A NAME="2139"></A>    optionString = Utils.getOption(<FONT ID="CharacerLiteral">'B'</FONT>, options);
<FONT ID="LN">2140</FONT><A NAME="2140"></A>    <FONT ID="If">if</FONT> (optionString.length() != <FONT ID="IntegerLiteral">0</FONT>)
<FONT ID="LN">2141</FONT><A NAME="2141"></A>      setBinValue(Double.parseDouble(optionString));
<FONT ID="LN">2142</FONT><A NAME="2142"></A>    <FONT ID="Else">else</FONT>
<FONT ID="LN">2143</FONT><A NAME="2143"></A>      setBinValue(<FONT ID="FloatPointLiteral">1.0</FONT>);
<FONT ID="LN">2144</FONT><A NAME="2144"></A>
<FONT ID="LN">2145</FONT><A NAME="2145"></A>    setUseKDTree(Utils.getFlag(<FONT ID="StringLiteral">"use-kdtree"</FONT>, options));
<FONT ID="LN">2146</FONT><A NAME="2146"></A>    
<FONT ID="LN">2147</FONT><A NAME="2147"></A>    <FONT ID="If">if</FONT> (getUseKDTree()) {
<FONT ID="LN">2148</FONT><A NAME="2148"></A>      funcString = Utils.getOption(<FONT ID="CharacerLiteral">'K'</FONT>, options);
<FONT ID="LN">2149</FONT><A NAME="2149"></A>      <FONT ID="If">if</FONT> (funcString.length() != <FONT ID="IntegerLiteral">0</FONT>) {
<FONT ID="LN">2150</FONT><A NAME="2150"></A>    String[] funcSpec = Utils.splitOptions(funcString);
<FONT ID="LN">2151</FONT><A NAME="2151"></A>    <FONT ID="If">if</FONT> (funcSpec.length == <FONT ID="IntegerLiteral">0</FONT>) {
<FONT ID="LN">2152</FONT><A NAME="2152"></A>      <FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> Exception(<FONT ID="StringLiteral">"Invalid function specification string"</FONT>);
<FONT ID="LN">2153</FONT><A NAME="2153"></A>    }
<FONT ID="LN">2154</FONT><A NAME="2154"></A>    String funcName = funcSpec[<FONT ID="IntegerLiteral">0</FONT>];
<FONT ID="LN">2155</FONT><A NAME="2155"></A>    funcSpec[<FONT ID="IntegerLiteral">0</FONT>] = <FONT ID="StringLiteral">""</FONT>;
<FONT ID="LN">2156</FONT><A NAME="2156"></A>    setKDTree((<A HREF="../../weka/core/neighboursearch/KDTree.java.html">KDTree</A>) Utils.forName(<A HREF="../../weka/core/neighboursearch/KDTree.java.html">KDTree</A>.<FONT ID="Class">class</FONT>, funcName, funcSpec));
<FONT ID="LN">2157</FONT><A NAME="2157"></A>      }
<FONT ID="LN">2158</FONT><A NAME="2158"></A>      <FONT ID="Else">else</FONT> {
<FONT ID="LN">2159</FONT><A NAME="2159"></A>    setKDTree(<FONT ID="New">new</FONT> <A HREF="../../weka/core/neighboursearch/KDTree.java.html">KDTree</A>());
<FONT ID="LN">2160</FONT><A NAME="2160"></A>      }
<FONT ID="LN">2161</FONT><A NAME="2161"></A>    }
<FONT ID="LN">2162</FONT><A NAME="2162"></A>    <FONT ID="Else">else</FONT> {
<FONT ID="LN">2163</FONT><A NAME="2163"></A>      setKDTree(<FONT ID="New">new</FONT> <A HREF="../../weka/core/neighboursearch/KDTree.java.html">KDTree</A>());
<FONT ID="LN">2164</FONT><A NAME="2164"></A>    }
<FONT ID="LN">2165</FONT><A NAME="2165"></A>
<FONT ID="LN">2166</FONT><A NAME="2166"></A>    optionString = Utils.getOption(<FONT ID="CharacerLiteral">'C'</FONT>, options);
<FONT ID="LN">2167</FONT><A NAME="2167"></A>    <FONT ID="If">if</FONT> (optionString.length() != <FONT ID="IntegerLiteral">0</FONT>)
<FONT ID="LN">2168</FONT><A NAME="2168"></A>      setCutOffFactor(Double.parseDouble(optionString));
<FONT ID="LN">2169</FONT><A NAME="2169"></A>    <FONT ID="Else">else</FONT>
<FONT ID="LN">2170</FONT><A NAME="2170"></A>      setCutOffFactor(<FONT ID="FloatPointLiteral">0.0</FONT>);
<FONT ID="LN">2171</FONT><A NAME="2171"></A>    
<FONT ID="LN">2172</FONT><A NAME="2172"></A>    funcString = Utils.getOption(<FONT ID="CharacerLiteral">'D'</FONT>, options);
<FONT ID="LN">2173</FONT><A NAME="2173"></A>    <FONT ID="If">if</FONT> (funcString.length() != <FONT ID="IntegerLiteral">0</FONT>) {
<FONT ID="LN">2174</FONT><A NAME="2174"></A>      String[] funcSpec = Utils.splitOptions(funcString);
<FONT ID="LN">2175</FONT><A NAME="2175"></A>      <FONT ID="If">if</FONT> (funcSpec.length == <FONT ID="IntegerLiteral">0</FONT>) {
<FONT ID="LN">2176</FONT><A NAME="2176"></A>    <FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> Exception(<FONT ID="StringLiteral">"Invalid function specification string"</FONT>);
<FONT ID="LN">2177</FONT><A NAME="2177"></A>      }
<FONT ID="LN">2178</FONT><A NAME="2178"></A>      String funcName = funcSpec[<FONT ID="IntegerLiteral">0</FONT>];
<FONT ID="LN">2179</FONT><A NAME="2179"></A>      funcSpec[<FONT ID="IntegerLiteral">0</FONT>] = <FONT ID="StringLiteral">""</FONT>;
<FONT ID="LN">2180</FONT><A NAME="2180"></A>      setDistanceF((<A HREF="../../weka/core/DistanceFunction.java.html">DistanceFunction</A>) Utils.forName(<A HREF="../../weka/core/DistanceFunction.java.html">DistanceFunction</A>.<FONT ID="Class">class</FONT>,
<FONT ID="LN">2181</FONT><A NAME="2181"></A>                            funcName, funcSpec));
<FONT ID="LN">2182</FONT><A NAME="2182"></A>    }
<FONT ID="LN">2183</FONT><A NAME="2183"></A>    <FONT ID="Else">else</FONT> {
<FONT ID="LN">2184</FONT><A NAME="2184"></A>      setDistanceF(<FONT ID="New">new</FONT> <A HREF="../../weka/core/EuclideanDistance.java.html">EuclideanDistance</A>());
<FONT ID="LN">2185</FONT><A NAME="2185"></A>    }
<FONT ID="LN">2186</FONT><A NAME="2186"></A>
<FONT ID="LN">2187</FONT><A NAME="2187"></A>    optionString  = Utils.getOption(<FONT ID="CharacerLiteral">'N'</FONT>, options);
<FONT ID="LN">2188</FONT><A NAME="2188"></A>    <FONT ID="If">if</FONT> (optionString.length() != <FONT ID="IntegerLiteral">0</FONT>) {
<FONT ID="LN">2189</FONT><A NAME="2189"></A>      setInputCenterFile(<FONT ID="New">new</FONT> File(optionString));
<FONT ID="LN">2190</FONT><A NAME="2190"></A>      m_CenterInput = 
<FONT ID="LN">2191</FONT><A NAME="2191"></A>    <FONT ID="New">new</FONT> BufferedReader(<FONT ID="New">new</FONT> FileReader(optionString));
<FONT ID="LN">2192</FONT><A NAME="2192"></A>    }
<FONT ID="LN">2193</FONT><A NAME="2193"></A>    <FONT ID="Else">else</FONT> {
<FONT ID="LN">2194</FONT><A NAME="2194"></A>      setInputCenterFile(<FONT ID="New">new</FONT> File(System.getProperty(<FONT ID="StringLiteral">"user.dir"</FONT>)));
<FONT ID="LN">2195</FONT><A NAME="2195"></A>      m_CenterInput = <FONT ID="Null">null</FONT>;
<FONT ID="LN">2196</FONT><A NAME="2196"></A>    }
<FONT ID="LN">2197</FONT><A NAME="2197"></A>
<FONT ID="LN">2198</FONT><A NAME="2198"></A>    optionString  = Utils.getOption(<FONT ID="CharacerLiteral">'O'</FONT>, options);
<FONT ID="LN">2199</FONT><A NAME="2199"></A>    <FONT ID="If">if</FONT> (optionString.length() != <FONT ID="IntegerLiteral">0</FONT>) {
<FONT ID="LN">2200</FONT><A NAME="2200"></A>      setOutputCenterFile(<FONT ID="New">new</FONT> File(optionString));
<FONT ID="LN">2201</FONT><A NAME="2201"></A>      m_CenterOutput = <FONT ID="New">new</FONT> PrintWriter(<FONT ID="New">new</FONT> FileOutputStream(optionString));
<FONT ID="LN">2202</FONT><A NAME="2202"></A>    }
<FONT ID="LN">2203</FONT><A NAME="2203"></A>    <FONT ID="Else">else</FONT> {
<FONT ID="LN">2204</FONT><A NAME="2204"></A>      setOutputCenterFile(<FONT ID="New">new</FONT> File(System.getProperty(<FONT ID="StringLiteral">"user.dir"</FONT>)));
<FONT ID="LN">2205</FONT><A NAME="2205"></A>      m_CenterOutput = <FONT ID="Null">null</FONT>;
<FONT ID="LN">2206</FONT><A NAME="2206"></A>    }
<FONT ID="LN">2207</FONT><A NAME="2207"></A>
<FONT ID="LN">2208</FONT><A NAME="2208"></A>    optionString = Utils.getOption(<FONT ID="CharacerLiteral">'U'</FONT>, options);
<FONT ID="LN">2209</FONT><A NAME="2209"></A>    <FONT ID="Int">int</FONT> debugLevel = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">2210</FONT><A NAME="2210"></A>    <FONT ID="If">if</FONT> (optionString.length() != <FONT ID="IntegerLiteral">0</FONT>) {
<FONT ID="LN">2211</FONT><A NAME="2211"></A>      <FONT ID="Try">try</FONT> {
<FONT ID="LN">2212</FONT><A NAME="2212"></A>    debugLevel = Integer.parseInt(optionString);
<FONT ID="LN">2213</FONT><A NAME="2213"></A>      } <FONT ID="Catch">catch</FONT> (NumberFormatException e) {
<FONT ID="LN">2214</FONT><A NAME="2214"></A>    <FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> Exception(optionString +
<FONT ID="LN">2215</FONT><A NAME="2215"></A>                            <FONT ID="StringLiteral">"is an illegal value for option -U"</FONT>); 
<FONT ID="LN">2216</FONT><A NAME="2216"></A>      }
<FONT ID="LN">2217</FONT><A NAME="2217"></A>    }
<FONT ID="LN">2218</FONT><A NAME="2218"></A>    setDebugLevel(debugLevel);
<FONT ID="LN">2219</FONT><A NAME="2219"></A>
<FONT ID="LN">2220</FONT><A NAME="2220"></A>    optionString  = Utils.getOption(<FONT ID="CharacerLiteral">'Y'</FONT>, options);
<FONT ID="LN">2221</FONT><A NAME="2221"></A>    <FONT ID="If">if</FONT> (optionString.length() != <FONT ID="IntegerLiteral">0</FONT>) {
<FONT ID="LN">2222</FONT><A NAME="2222"></A>      setDebugVectorsFile(<FONT ID="New">new</FONT> File(optionString));
<FONT ID="LN">2223</FONT><A NAME="2223"></A>    }
<FONT ID="LN">2224</FONT><A NAME="2224"></A>    <FONT ID="Else">else</FONT> {
<FONT ID="LN">2225</FONT><A NAME="2225"></A>      setDebugVectorsFile(<FONT ID="New">new</FONT> File(System.getProperty(<FONT ID="StringLiteral">"user.dir"</FONT>)));
<FONT ID="LN">2226</FONT><A NAME="2226"></A>      m_DebugVectorsInput = <FONT ID="Null">null</FONT>;
<FONT ID="LN">2227</FONT><A NAME="2227"></A>      m_DebugVectors      = <FONT ID="Null">null</FONT>;
<FONT ID="LN">2228</FONT><A NAME="2228"></A>    }
<FONT ID="LN">2229</FONT><A NAME="2229"></A>    
<FONT ID="LN">2230</FONT><A NAME="2230"></A>    <FONT ID="Super">super</FONT>.setOptions(options);
<FONT ID="LN">2231</FONT><A NAME="2231"></A>  }
<FONT ID="LN">2232</FONT><A NAME="2232"></A>  
<FONT ID="LN">2233</FONT><A NAME="2233"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">2234</FONT><A NAME="2234"></A>   * Gets the current settings of SimpleKMeans.
<FONT ID="LN">2235</FONT><A NAME="2235"></A>   * @return an array of strings suitable for passing to setOptions
<FONT ID="LN">2236</FONT><A NAME="2236"></A>   */</FONT>
<FONT ID="LN">2237</FONT><A NAME="2237"></A>  <FONT ID="Public">public</FONT> String[] getOptions() {
<FONT ID="LN">2238</FONT><A NAME="2238"></A>    <FONT ID="Int">int</FONT>         i;
<FONT ID="LN">2239</FONT><A NAME="2239"></A>    <A HREF="../../weka/core/AlgVector.java.html">Vector</A>      result;
<FONT ID="LN">2240</FONT><A NAME="2240"></A>    String[]    options;
<FONT ID="LN">2241</FONT><A NAME="2241"></A>
<FONT ID="LN">2242</FONT><A NAME="2242"></A>    result = <FONT ID="New">new</FONT> <A HREF="../../weka/core/AlgVector.java.html">Vector</A>();
<FONT ID="LN">2243</FONT><A NAME="2243"></A>
<FONT ID="LN">2244</FONT><A NAME="2244"></A>    result.add(<FONT ID="StringLiteral">"-I"</FONT>);
<FONT ID="LN">2245</FONT><A NAME="2245"></A>    result.add(<FONT ID="StringLiteral">""</FONT> + getMaxIterations());
<FONT ID="LN">2246</FONT><A NAME="2246"></A>    
<FONT ID="LN">2247</FONT><A NAME="2247"></A>    result.add(<FONT ID="StringLiteral">"-M"</FONT>);
<FONT ID="LN">2248</FONT><A NAME="2248"></A>    result.add(<FONT ID="StringLiteral">""</FONT> + getMaxKMeans());
<FONT ID="LN">2249</FONT><A NAME="2249"></A>    
<FONT ID="LN">2250</FONT><A NAME="2250"></A>    result.add(<FONT ID="StringLiteral">"-J"</FONT>);
<FONT ID="LN">2251</FONT><A NAME="2251"></A>    result.add(<FONT ID="StringLiteral">""</FONT> + getMaxKMeansForChildren());
<FONT ID="LN">2252</FONT><A NAME="2252"></A>    
<FONT ID="LN">2253</FONT><A NAME="2253"></A>    result.add(<FONT ID="StringLiteral">"-L"</FONT>);
<FONT ID="LN">2254</FONT><A NAME="2254"></A>    result.add(<FONT ID="StringLiteral">""</FONT> + getMinNumClusters());
<FONT ID="LN">2255</FONT><A NAME="2255"></A>    
<FONT ID="LN">2256</FONT><A NAME="2256"></A>    result.add(<FONT ID="StringLiteral">"-H"</FONT>);
<FONT ID="LN">2257</FONT><A NAME="2257"></A>    result.add(<FONT ID="StringLiteral">""</FONT> + getMaxNumClusters());
<FONT ID="LN">2258</FONT><A NAME="2258"></A>    
<FONT ID="LN">2259</FONT><A NAME="2259"></A>    result.add(<FONT ID="StringLiteral">"-B"</FONT>);
<FONT ID="LN">2260</FONT><A NAME="2260"></A>    result.add(<FONT ID="StringLiteral">""</FONT> + getBinValue());
<FONT ID="LN">2261</FONT><A NAME="2261"></A>    
<FONT ID="LN">2262</FONT><A NAME="2262"></A>    <FONT ID="If">if</FONT> (getUseKDTree()) {
<FONT ID="LN">2263</FONT><A NAME="2263"></A>      result.add(<FONT ID="StringLiteral">"-use-kdtree"</FONT>);
<FONT ID="LN">2264</FONT><A NAME="2264"></A>      result.add(<FONT ID="StringLiteral">"-K"</FONT>);
<FONT ID="LN">2265</FONT><A NAME="2265"></A>      result.add(<FONT ID="StringLiteral">""</FONT> + getKDTreeSpec());
<FONT ID="LN">2266</FONT><A NAME="2266"></A>    }
<FONT ID="LN">2267</FONT><A NAME="2267"></A>    
<FONT ID="LN">2268</FONT><A NAME="2268"></A>    result.add(<FONT ID="StringLiteral">"-C"</FONT>);
<FONT ID="LN">2269</FONT><A NAME="2269"></A>    result.add(<FONT ID="StringLiteral">""</FONT> + getCutOffFactor());
<FONT ID="LN">2270</FONT><A NAME="2270"></A>    
<FONT ID="LN">2271</FONT><A NAME="2271"></A>    <FONT ID="If">if</FONT> (getDistanceF() != <FONT ID="Null">null</FONT>) {
<FONT ID="LN">2272</FONT><A NAME="2272"></A>      result.add(<FONT ID="StringLiteral">"-D"</FONT>);
<FONT ID="LN">2273</FONT><A NAME="2273"></A>      result.add(<FONT ID="StringLiteral">""</FONT> + getDistanceFSpec());
<FONT ID="LN">2274</FONT><A NAME="2274"></A>    }
<FONT ID="LN">2275</FONT><A NAME="2275"></A>    
<FONT ID="LN">2276</FONT><A NAME="2276"></A>    <FONT ID="If">if</FONT> (getInputCenterFile().exists() &amp;&amp; getInputCenterFile().isFile()) {
<FONT ID="LN">2277</FONT><A NAME="2277"></A>      result.add(<FONT ID="StringLiteral">"-N"</FONT>);
<FONT ID="LN">2278</FONT><A NAME="2278"></A>      result.add(<FONT ID="StringLiteral">""</FONT> + getInputCenterFile());
<FONT ID="LN">2279</FONT><A NAME="2279"></A>    }
<FONT ID="LN">2280</FONT><A NAME="2280"></A>    
<FONT ID="LN">2281</FONT><A NAME="2281"></A>    <FONT ID="If">if</FONT> (getOutputCenterFile().exists() &amp;&amp; getOutputCenterFile().isFile()) {
<FONT ID="LN">2282</FONT><A NAME="2282"></A>      result.add(<FONT ID="StringLiteral">"-O"</FONT>);
<FONT ID="LN">2283</FONT><A NAME="2283"></A>      result.add(<FONT ID="StringLiteral">""</FONT> + getOutputCenterFile());
<FONT ID="LN">2284</FONT><A NAME="2284"></A>    }
<FONT ID="LN">2285</FONT><A NAME="2285"></A>    
<FONT ID="LN">2286</FONT><A NAME="2286"></A>    <FONT ID="Int">int</FONT> dL = getDebugLevel();
<FONT ID="LN">2287</FONT><A NAME="2287"></A>    <FONT ID="If">if</FONT> (dL &gt; <FONT ID="IntegerLiteral">0</FONT>) {
<FONT ID="LN">2288</FONT><A NAME="2288"></A>      result.add(<FONT ID="StringLiteral">"-U"</FONT>);
<FONT ID="LN">2289</FONT><A NAME="2289"></A>      result.add(<FONT ID="StringLiteral">""</FONT> + getDebugLevel());
<FONT ID="LN">2290</FONT><A NAME="2290"></A>    }
<FONT ID="LN">2291</FONT><A NAME="2291"></A>
<FONT ID="LN">2292</FONT><A NAME="2292"></A>    <FONT ID="If">if</FONT> (getDebugVectorsFile().exists() &amp;&amp; getDebugVectorsFile().isFile()) {
<FONT ID="LN">2293</FONT><A NAME="2293"></A>      result.add(<FONT ID="StringLiteral">"-Y"</FONT>);
<FONT ID="LN">2294</FONT><A NAME="2294"></A>      result.add(<FONT ID="StringLiteral">""</FONT> + getDebugVectorsFile());
<FONT ID="LN">2295</FONT><A NAME="2295"></A>    }
<FONT ID="LN">2296</FONT><A NAME="2296"></A>    
<FONT ID="LN">2297</FONT><A NAME="2297"></A>    options = <FONT ID="Super">super</FONT>.getOptions();
<FONT ID="LN">2298</FONT><A NAME="2298"></A>    <FONT ID="For">for</FONT> (i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; options.length; i++)
<FONT ID="LN">2299</FONT><A NAME="2299"></A>      result.add(options[i]);
<FONT ID="LN">2300</FONT><A NAME="2300"></A>
<FONT ID="LN">2301</FONT><A NAME="2301"></A>    <FONT ID="Return">return</FONT> (String[]) result.toArray(<FONT ID="New">new</FONT> String[result.size()]);      
<FONT ID="LN">2302</FONT><A NAME="2302"></A>  }
<FONT ID="LN">2303</FONT><A NAME="2303"></A>
<FONT ID="LN">2304</FONT><A NAME="2304"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">2305</FONT><A NAME="2305"></A>   * Return a string describing this clusterer.
<FONT ID="LN">2306</FONT><A NAME="2306"></A>   * @return a description of the clusterer as a string
<FONT ID="LN">2307</FONT><A NAME="2307"></A>   */</FONT>
<FONT ID="LN">2308</FONT><A NAME="2308"></A>  <FONT ID="Public">public</FONT> String toString() {
<FONT ID="LN">2309</FONT><A NAME="2309"></A>    StringBuffer temp = <FONT ID="New">new</FONT> StringBuffer();
<FONT ID="LN">2310</FONT><A NAME="2310"></A>
<FONT ID="LN">2311</FONT><A NAME="2311"></A>    temp.append(<FONT ID="StringLiteral">"\nXMeans\n======\n"</FONT>);
<FONT ID="LN">2312</FONT><A NAME="2312"></A>
<FONT ID="LN">2313</FONT><A NAME="2313"></A>    temp.append(<FONT ID="StringLiteral">"Requested iterations            : "</FONT> + m_MaxIterations + <FONT ID="StringLiteral">"\n"</FONT>);
<FONT ID="LN">2314</FONT><A NAME="2314"></A>    temp.append(<FONT ID="StringLiteral">"Iterations performed            : "</FONT> + m_IterationCount+ <FONT ID="StringLiteral">"\n"</FONT>);
<FONT ID="LN">2315</FONT><A NAME="2315"></A>    <FONT ID="If">if</FONT> (m_KMeansStopped &gt; <FONT ID="IntegerLiteral">0</FONT>) {
<FONT ID="LN">2316</FONT><A NAME="2316"></A>      temp.append(<FONT ID="StringLiteral">"kMeans did not converge\n"</FONT>);
<FONT ID="LN">2317</FONT><A NAME="2317"></A>      temp.append(<FONT ID="StringLiteral">"  but was stopped by max-loops "</FONT> 
<FONT ID="LN">2318</FONT><A NAME="2318"></A>      + m_KMeansStopped + <FONT ID="StringLiteral">" times (max kMeans-iter)\n"</FONT>);
<FONT ID="LN">2319</FONT><A NAME="2319"></A>    }
<FONT ID="LN">2320</FONT><A NAME="2320"></A>    temp.append(<FONT ID="StringLiteral">"Splits prepared                 : "</FONT> + m_NumSplits + <FONT ID="StringLiteral">"\n"</FONT>);
<FONT ID="LN">2321</FONT><A NAME="2321"></A>    temp.append(<FONT ID="StringLiteral">"Splits performed                : "</FONT> + m_NumSplitsDone + <FONT ID="StringLiteral">"\n"</FONT>);
<FONT ID="LN">2322</FONT><A NAME="2322"></A>    temp.append(<FONT ID="StringLiteral">"Cutoff factor                   : "</FONT> + m_CutOffFactor + <FONT ID="StringLiteral">"\n"</FONT>);
<FONT ID="LN">2323</FONT><A NAME="2323"></A>    <FONT ID="Double">double</FONT> perc;
<FONT ID="LN">2324</FONT><A NAME="2324"></A>    <FONT ID="If">if</FONT> (m_NumSplitsDone &gt; <FONT ID="IntegerLiteral">0</FONT>)
<FONT ID="LN">2325</FONT><A NAME="2325"></A>      perc = (((<FONT ID="Double">double</FONT>)m_NumSplitsStillDone)/((<FONT ID="Double">double</FONT>) m_NumSplitsDone))
<FONT ID="LN">2326</FONT><A NAME="2326"></A>             * <FONT ID="FloatPointLiteral">100.0</FONT>;
<FONT ID="LN">2327</FONT><A NAME="2327"></A>    <FONT ID="Else">else</FONT>
<FONT ID="LN">2328</FONT><A NAME="2328"></A>      perc = <FONT ID="FloatPointLiteral">0.0</FONT>;
<FONT ID="LN">2329</FONT><A NAME="2329"></A>    temp.append(<FONT ID="StringLiteral">"Percentage of splits accepted \n"</FONT> +
<FONT ID="LN">2330</FONT><A NAME="2330"></A>                <FONT ID="StringLiteral">"by cutoff factor                : "</FONT> 
<FONT ID="LN">2331</FONT><A NAME="2331"></A>        + Utils.doubleToString(perc,<FONT ID="IntegerLiteral">2</FONT>) + <FONT ID="StringLiteral">" %\n"</FONT>);
<FONT ID="LN">2332</FONT><A NAME="2332"></A>    temp.append(<FONT ID="StringLiteral">"------\n"</FONT>);
<FONT ID="LN">2333</FONT><A NAME="2333"></A>
<FONT ID="LN">2334</FONT><A NAME="2334"></A>    temp.append(<FONT ID="StringLiteral">"Cutoff factor                   : "</FONT> + m_CutOffFactor + <FONT ID="StringLiteral">"\n"</FONT>);
<FONT ID="LN">2335</FONT><A NAME="2335"></A>    temp.append(<FONT ID="StringLiteral">"------\n"</FONT>);
<FONT ID="LN">2336</FONT><A NAME="2336"></A>    temp.append(<FONT ID="StringLiteral">"\nCluster centers                 : "</FONT> + m_NumClusters + <FONT ID="StringLiteral">" centers\n"</FONT>);
<FONT ID="LN">2337</FONT><A NAME="2337"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; m_NumClusters; i++) {
<FONT ID="LN">2338</FONT><A NAME="2338"></A>      temp.append(<FONT ID="StringLiteral">"\nCluster "</FONT>+i+<FONT ID="StringLiteral">"\n           "</FONT>);
<FONT ID="LN">2339</FONT><A NAME="2339"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = <FONT ID="IntegerLiteral">0</FONT>; j &lt; m_ClusterCenters.numAttributes(); j++) {
<FONT ID="LN">2340</FONT><A NAME="2340"></A>    <FONT ID="If">if</FONT> (m_ClusterCenters.attribute(j).isNominal()) {
<FONT ID="LN">2341</FONT><A NAME="2341"></A>      temp.append(<FONT ID="StringLiteral">" "</FONT>+m_ClusterCenters.attribute(j).
<FONT ID="LN">2342</FONT><A NAME="2342"></A>              value((<FONT ID="Int">int</FONT>)m_ClusterCenters.instance(i).value(j)));
<FONT ID="LN">2343</FONT><A NAME="2343"></A>    } <FONT ID="Else">else</FONT> {
<FONT ID="LN">2344</FONT><A NAME="2344"></A>      temp.append(<FONT ID="StringLiteral">" "</FONT>+m_ClusterCenters.instance(i).value(j));
<FONT ID="LN">2345</FONT><A NAME="2345"></A>    }
<FONT ID="LN">2346</FONT><A NAME="2346"></A>      }
<FONT ID="LN">2347</FONT><A NAME="2347"></A>    }
<FONT ID="LN">2348</FONT><A NAME="2348"></A>    <FONT ID="If">if</FONT> (m_Mle != <FONT ID="Null">null</FONT>)
<FONT ID="LN">2349</FONT><A NAME="2349"></A>      temp.append(<FONT ID="StringLiteral">"\n\nDistortion: "</FONT> + 
<FONT ID="LN">2350</FONT><A NAME="2350"></A>          Utils.doubleToString(Utils.sum(m_Mle),<FONT ID="IntegerLiteral">6</FONT>) + <FONT ID="StringLiteral">"\n"</FONT>);
<FONT ID="LN">2351</FONT><A NAME="2351"></A>    temp.append(<FONT ID="StringLiteral">"BIC-Value : "</FONT> + Utils.doubleToString(m_Bic,<FONT ID="IntegerLiteral">6</FONT>) + <FONT ID="StringLiteral">"\n"</FONT>);
<FONT ID="LN">2352</FONT><A NAME="2352"></A>    <FONT ID="Return">return</FONT> temp.toString();
<FONT ID="LN">2353</FONT><A NAME="2353"></A>  }
<FONT ID="LN">2354</FONT><A NAME="2354"></A>
<FONT ID="LN">2355</FONT><A NAME="2355"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">2356</FONT><A NAME="2356"></A>   * Print centers for debug.
<FONT ID="LN">2357</FONT><A NAME="2357"></A>   * @param debugLevel level that gives according messages
<FONT ID="LN">2358</FONT><A NAME="2358"></A>   */</FONT>
<FONT ID="LN">2359</FONT><A NAME="2359"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Void">void</FONT> PrCentersFD(<FONT ID="Int">int</FONT> debugLevel) {
<FONT ID="LN">2360</FONT><A NAME="2360"></A>    <FONT ID="If">if</FONT> (debugLevel == m_DebugLevel) {
<FONT ID="LN">2361</FONT><A NAME="2361"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; m_ClusterCenters.numInstances(); i++) {
<FONT ID="LN">2362</FONT><A NAME="2362"></A>    System.out.println(m_ClusterCenters.instance(i));
<FONT ID="LN">2363</FONT><A NAME="2363"></A>      }
<FONT ID="LN">2364</FONT><A NAME="2364"></A>    }
<FONT ID="LN">2365</FONT><A NAME="2365"></A>  }
<FONT ID="LN">2366</FONT><A NAME="2366"></A>
<FONT ID="LN">2367</FONT><A NAME="2367"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">2368</FONT><A NAME="2368"></A>   * Tests on debug status.
<FONT ID="LN">2369</FONT><A NAME="2369"></A>   * @param debugLevel level that gives according messages
<FONT ID="LN">2370</FONT><A NAME="2370"></A>   * @return true if debug level is set
<FONT ID="LN">2371</FONT><A NAME="2371"></A>   */</FONT>
<FONT ID="LN">2372</FONT><A NAME="2372"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Boolean">boolean</FONT> TFD(<FONT ID="Int">int</FONT> debugLevel) {
<FONT ID="LN">2373</FONT><A NAME="2373"></A>    <FONT ID="Return">return</FONT> (debugLevel == m_DebugLevel);
<FONT ID="LN">2374</FONT><A NAME="2374"></A>  }
<FONT ID="LN">2375</FONT><A NAME="2375"></A>
<FONT ID="LN">2376</FONT><A NAME="2376"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">2377</FONT><A NAME="2377"></A>   * Does debug printouts.
<FONT ID="LN">2378</FONT><A NAME="2378"></A>   * @param debugLevel level that gives according messages
<FONT ID="LN">2379</FONT><A NAME="2379"></A>   * @param output string that is printed
<FONT ID="LN">2380</FONT><A NAME="2380"></A>   */</FONT>
<FONT ID="LN">2381</FONT><A NAME="2381"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Void">void</FONT> PFD(<FONT ID="Int">int</FONT> debugLevel, String output) {
<FONT ID="LN">2382</FONT><A NAME="2382"></A>    <FONT ID="If">if</FONT> (debugLevel == m_DebugLevel)
<FONT ID="LN">2383</FONT><A NAME="2383"></A>      System.out.println(output);
<FONT ID="LN">2384</FONT><A NAME="2384"></A>  }
<FONT ID="LN">2385</FONT><A NAME="2385"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">2386</FONT><A NAME="2386"></A>   * Does debug printouts.
<FONT ID="LN">2387</FONT><A NAME="2387"></A>   * @param output string that is printed
<FONT ID="LN">2388</FONT><A NAME="2388"></A>   */</FONT>
<FONT ID="LN">2389</FONT><A NAME="2389"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Void">void</FONT> PFD_CURR(String output) {
<FONT ID="LN">2390</FONT><A NAME="2390"></A>    <FONT ID="If">if</FONT> (m_CurrDebugFlag)
<FONT ID="LN">2391</FONT><A NAME="2391"></A>      System.out.println(output);
<FONT ID="LN">2392</FONT><A NAME="2392"></A>  }
<FONT ID="LN">2393</FONT><A NAME="2393"></A>  
<FONT ID="LN">2394</FONT><A NAME="2394"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">2395</FONT><A NAME="2395"></A>   * Returns the revision string.
<FONT ID="LN">2396</FONT><A NAME="2396"></A>   * 
<FONT ID="LN">2397</FONT><A NAME="2397"></A>   * @return        the revision
<FONT ID="LN">2398</FONT><A NAME="2398"></A>   */</FONT>
<FONT ID="LN">2399</FONT><A NAME="2399"></A>  <FONT ID="Public">public</FONT> String getRevision() {
<FONT ID="LN">2400</FONT><A NAME="2400"></A>    <FONT ID="Return">return</FONT> RevisionUtils.extract(<FONT ID="StringLiteral">"$Revision: 5488 $"</FONT>);
<FONT ID="LN">2401</FONT><A NAME="2401"></A>  }
<FONT ID="LN">2402</FONT><A NAME="2402"></A>
<FONT ID="LN">2403</FONT><A NAME="2403"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">2404</FONT><A NAME="2404"></A>   * Main method for testing this class.
<FONT ID="LN">2405</FONT><A NAME="2405"></A>   * @param argv should contain options 
<FONT ID="LN">2406</FONT><A NAME="2406"></A>   */</FONT>
<FONT ID="LN">2407</FONT><A NAME="2407"></A>  <FONT ID="Public">public</FONT> <FONT ID="Static">static</FONT> <FONT ID="Void">void</FONT> main(String[] argv) {
<FONT ID="LN">2408</FONT><A NAME="2408"></A>    runClusterer(<FONT ID="New">new</FONT> <A HREF="../../weka/clusterers/XMeans.java.html">XMeans</A>(), argv);
<FONT ID="LN">2409</FONT><A NAME="2409"></A>  }
<FONT ID="LN">2410</FONT><A NAME="2410"></A>}
<FONT ID="LN">2411</FONT><A NAME="2411"></A></pre><TABLE id="Header" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td colspan="2" width="33%">&nbsp;</td>
<td align="center" colspan="2" width="33%">
<font size="4">XMeans.java</font>
</td>
<td align="right" colspan="2" width="33%">&nbsp;</td>
</tr>
</TABLE>

</BODY>
</HTML>