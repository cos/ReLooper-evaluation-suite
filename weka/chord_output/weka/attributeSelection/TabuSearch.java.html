<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<HTML>
<HEAD>
<LINK REL=STYLESHEET TYPE="text/css" HREF="../../stylesheet.css" TITLE="Style">
<META NAME="GENERATOR" CONTENT="Java2HTML Version 1.5">
<TITLE>weka.attributeSelection.TabuSearch (Java2HTML)</TITLE>
</HEAD>
<BODY><TABLE id="Header" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td colspan="2" width="33%">&nbsp;</td>
<td align="center" colspan="2" width="33%">
<font size="4">TabuSearch.java</font>
</td>
<td align="right" colspan="2" width="33%">&nbsp;</td>
</tr>
</TABLE>
<pre ID="Classes">
<FONT ID="LN">1   </FONT><A NAME="1"></A><FONT ID="MultiLineComment">/*
<FONT ID="LN">2   </FONT><A NAME="2"></A> *    This program is free software; you can redistribute it and/or modify
<FONT ID="LN">3   </FONT><A NAME="3"></A> *    it under the terms of the GNU General Public License as published by
<FONT ID="LN">4   </FONT><A NAME="4"></A> *    the Free Software Foundation; either version 2 of the License, or
<FONT ID="LN">5   </FONT><A NAME="5"></A> *    (at your option) any later version.
<FONT ID="LN">6   </FONT><A NAME="6"></A> *
<FONT ID="LN">7   </FONT><A NAME="7"></A> *    This program is distributed in the hope that it will be useful,
<FONT ID="LN">8   </FONT><A NAME="8"></A> *    but WITHOUT ANY WARRANTY; without even the implied warranty of
<FONT ID="LN">9   </FONT><A NAME="9"></A> *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
<FONT ID="LN">10  </FONT><A NAME="10"></A> *    GNU General Public License for more details.
<FONT ID="LN">11  </FONT><A NAME="11"></A> *
<FONT ID="LN">12  </FONT><A NAME="12"></A> *    You should have received a copy of the GNU General Public License
<FONT ID="LN">13  </FONT><A NAME="13"></A> *    along with this program; if not, write to the Free Software
<FONT ID="LN">14  </FONT><A NAME="14"></A> *    Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
<FONT ID="LN">15  </FONT><A NAME="15"></A> */</FONT>
<FONT ID="LN">16  </FONT><A NAME="16"></A>
<FONT ID="LN">17  </FONT><A NAME="17"></A><FONT ID="MultiLineComment">/*
<FONT ID="LN">18  </FONT><A NAME="18"></A> *    TabuSearch.java
<FONT ID="LN">19  </FONT><A NAME="19"></A> *    Copyright (C) 2009 Adrian Pino
<FONT ID="LN">20  </FONT><A NAME="20"></A> *    Copyright (C) 2009 University of Waikato, Hamilton, NZ
<FONT ID="LN">21  </FONT><A NAME="21"></A> *
<FONT ID="LN">22  </FONT><A NAME="22"></A> */</FONT>
<FONT ID="LN">23  </FONT><A NAME="23"></A>
<FONT ID="LN">24  </FONT><A NAME="24"></A><FONT ID="Package">package</FONT> weka.attributeSelection;
<FONT ID="LN">25  </FONT><A NAME="25"></A>
<FONT ID="LN">26  </FONT><A NAME="26"></A>
<FONT ID="LN">27  </FONT><A NAME="27"></A><FONT ID="Import">import</FONT> java.io.Serializable;
<FONT ID="LN">28  </FONT><A NAME="28"></A><FONT ID="Import">import</FONT> java.util.ArrayList;
<FONT ID="LN">29  </FONT><A NAME="29"></A><FONT ID="Import">import</FONT> java.util.BitSet;
<FONT ID="LN">30  </FONT><A NAME="30"></A><FONT ID="Import">import</FONT> java.util.Enumeration;
<FONT ID="LN">31  </FONT><A NAME="31"></A><FONT ID="Import">import</FONT> java.util.List;
<FONT ID="LN">32  </FONT><A NAME="32"></A><FONT ID="Import">import</FONT> java.util.Random;
<FONT ID="LN">33  </FONT><A NAME="33"></A><FONT ID="Import">import</FONT> java.util.Vector;
<FONT ID="LN">34  </FONT><A NAME="34"></A>
<FONT ID="LN">35  </FONT><A NAME="35"></A><FONT ID="Import">import</FONT> <A HREF="../../weka/core/Instances.java.html">weka.core.Instances</A>;
<FONT ID="LN">36  </FONT><A NAME="36"></A><FONT ID="Import">import</FONT> <A HREF="../../weka/core/Option.java.html">weka.core.Option</A>;
<FONT ID="LN">37  </FONT><A NAME="37"></A><FONT ID="Import">import</FONT> <A HREF="../../weka/core/OptionHandler.java.html">weka.core.OptionHandler</A>;
<FONT ID="LN">38  </FONT><A NAME="38"></A><FONT ID="Import">import</FONT> <A HREF="../../weka/core/RevisionUtils.java.html">weka.core.RevisionUtils</A>;
<FONT ID="LN">39  </FONT><A NAME="39"></A><FONT ID="Import">import</FONT> <A HREF="../../weka/core/TechnicalInformation.java.html">weka.core.TechnicalInformation</A>;
<FONT ID="LN">40  </FONT><A NAME="40"></A><FONT ID="Import">import</FONT> <A HREF="../../weka/core/TechnicalInformationHandler.java.html">weka.core.TechnicalInformationHandler</A>;
<FONT ID="LN">41  </FONT><A NAME="41"></A><FONT ID="Import">import</FONT> <A HREF="../../weka/core/Utils.java.html">weka.core.Utils</A>;
<FONT ID="LN">42  </FONT><A NAME="42"></A><FONT ID="Import">import</FONT> <A HREF="../../weka/core/TechnicalInformation.java.html">weka.core.TechnicalInformation.Field</A>;
<FONT ID="LN">43  </FONT><A NAME="43"></A><FONT ID="Import">import</FONT> <A HREF="../../weka/core/TechnicalInformation.java.html">weka.core.TechnicalInformation.Type</A>;
<FONT ID="LN">44  </FONT><A NAME="44"></A>
<FONT ID="LN">45  </FONT><A NAME="45"></A>
<FONT ID="LN">46  </FONT><A NAME="46"></A><FONT ID="FormalComment">/**
<FONT ID="LN">47  </FONT><A NAME="47"></A> * Class for performing the TabuSearch method. &lt;p&gt;
<FONT ID="LN">48  </FONT><A NAME="48"></A> * 
<FONT ID="LN">49  </FONT><A NAME="49"></A> &lt;!-- globalinfo-start --&gt;
<FONT ID="LN">50  </FONT><A NAME="50"></A> * Tabu Search :&lt;br/&gt;
<FONT ID="LN">51  </FONT><A NAME="51"></A> * &lt;br/&gt;
<FONT ID="LN">52  </FONT><A NAME="52"></A> * Performs a search  through the space of attribute subsets. Evading local maximums by accepting bad and diverse solutions and make further search in the best soluions. Stops when there's not more improvement in n iterations&lt;br/&gt;
<FONT ID="LN">53  </FONT><A NAME="53"></A> * ;For more information see:&lt;br/&gt;
<FONT ID="LN">54  </FONT><A NAME="54"></A> * &lt;br/&gt;
<FONT ID="LN">55  </FONT><A NAME="55"></A> * Abdel-Rahman Hedar, Jue Wangy,, Masao Fukushima (2006). Tabu Search for Attribute Reduction in Rough Set Theory. .
<FONT ID="LN">56  </FONT><A NAME="56"></A> * &lt;p/&gt;
<FONT ID="LN">57  </FONT><A NAME="57"></A> &lt;!-- globalinfo-end --&gt;
<FONT ID="LN">58  </FONT><A NAME="58"></A> *
<FONT ID="LN">59  </FONT><A NAME="59"></A> &lt;!-- options-start --&gt;
<FONT ID="LN">60  </FONT><A NAME="60"></A> * Valid options are: &lt;p/&gt;
<FONT ID="LN">61  </FONT><A NAME="61"></A> * 
<FONT ID="LN">62  </FONT><A NAME="62"></A> * &lt;pre&gt; -Z &amp;lt;numInitialSolution&amp;gt;
<FONT ID="LN">63  </FONT><A NAME="63"></A> *  Specify the number of attributes 
<FONT ID="LN">64  </FONT><A NAME="64"></A> *  in the initial Solution..&lt;/pre&gt;
<FONT ID="LN">65  </FONT><A NAME="65"></A> * 
<FONT ID="LN">66  </FONT><A NAME="66"></A> * &lt;pre&gt; -P &amp;lt;diversificationProb&amp;gt;
<FONT ID="LN">67  </FONT><A NAME="67"></A> *  Specify the diversification probabilities,
<FONT ID="LN">68  </FONT><A NAME="68"></A> *  if this value is near to 0 then the best attributes
<FONT ID="LN">69  </FONT><A NAME="69"></A> *   will have more probabilities of keeping in the new diverse solution&lt;/pre&gt;
<FONT ID="LN">70  </FONT><A NAME="70"></A> * 
<FONT ID="LN">71  </FONT><A NAME="71"></A> * &lt;pre&gt; -S &amp;lt;seed&amp;gt;
<FONT ID="LN">72  </FONT><A NAME="72"></A> *  Set the random number seed.
<FONT ID="LN">73  </FONT><A NAME="73"></A> *  (default = 1)&lt;/pre&gt;
<FONT ID="LN">74  </FONT><A NAME="74"></A> * 
<FONT ID="LN">75  </FONT><A NAME="75"></A> * &lt;pre&gt; -N &amp;lt;number of neighbors&amp;gt;
<FONT ID="LN">76  </FONT><A NAME="76"></A> *  Set the number of neighbors to generate.&lt;/pre&gt;
<FONT ID="LN">77  </FONT><A NAME="77"></A> * 
<FONT ID="LN">78  </FONT><A NAME="78"></A> &lt;!-- options-end --&gt;
<FONT ID="LN">79  </FONT><A NAME="79"></A> *
<FONT ID="LN">80  </FONT><A NAME="80"></A> &lt;!-- technical-bibtex-start --&gt;
<FONT ID="LN">81  </FONT><A NAME="81"></A> * BibTeX:
<FONT ID="LN">82  </FONT><A NAME="82"></A> * &lt;pre&gt;
<FONT ID="LN">83  </FONT><A NAME="83"></A> * &amp;#64;book{Abdel-RahmanHedar2006,
<FONT ID="LN">84  </FONT><A NAME="84"></A> *    author = {Abdel-Rahman Hedar, Jue Wangy, and Masao Fukushima},
<FONT ID="LN">85  </FONT><A NAME="85"></A> *    month = {July},
<FONT ID="LN">86  </FONT><A NAME="86"></A> *    title = {Tabu Search for Attribute Reduction in Rough Set Theory},
<FONT ID="LN">87  </FONT><A NAME="87"></A> *    year = {2006},
<FONT ID="LN">88  </FONT><A NAME="88"></A> *    language = {English}
<FONT ID="LN">89  </FONT><A NAME="89"></A> * }
<FONT ID="LN">90  </FONT><A NAME="90"></A> * &lt;/pre&gt;
<FONT ID="LN">91  </FONT><A NAME="91"></A> * &lt;p/&gt;
<FONT ID="LN">92  </FONT><A NAME="92"></A> &lt;!-- technical-bibtex-end --&gt;
<FONT ID="LN">93  </FONT><A NAME="93"></A> *
<FONT ID="LN">94  </FONT><A NAME="94"></A> * from the Book: Tabu Search for Attribute Reduction in Rough Set Theory, Abdel-Rahman Hedar, Jue Wangy, and Masao Fukushima.
<FONT ID="LN">95  </FONT><A NAME="95"></A> * 
<FONT ID="LN">96  </FONT><A NAME="96"></A> * @author Adrian Pino (apinoa@facinf.uho.edu.cu)
<FONT ID="LN">97  </FONT><A NAME="97"></A> * @version $Revision: 4976 $
<FONT ID="LN">98  </FONT><A NAME="98"></A> *
<FONT ID="LN">99  </FONT><A NAME="99"></A> */</FONT>
<FONT ID="LN">100 </FONT><A NAME="100"></A>
<FONT ID="LN">101 </FONT><A NAME="101"></A><FONT ID="Public">public</FONT> <FONT ID="Class">class</FONT> TabuSearch <FONT ID="Extends">extends</FONT> <A HREF="../../weka/attributeSelection/ASSearch.java.html">ASSearch</A>
<FONT ID="LN">102 </FONT><A NAME="102"></A>  <FONT ID="Implements">implements</FONT> <A HREF="../../weka/core/OptionHandler.java.html">OptionHandler</A>, <A HREF="../../weka/core/TechnicalInformationHandler.java.html">TechnicalInformationHandler</A>{
<FONT ID="LN">103 </FONT><A NAME="103"></A>
<FONT ID="LN">104 </FONT><A NAME="104"></A>  <FONT ID="FormalComment">/** for serialization */</FONT>
<FONT ID="LN">105 </FONT><A NAME="105"></A>  <FONT ID="Static">static</FONT> <FONT ID="Final">final</FONT> <FONT ID="Long">long</FONT> serialVersionUID = -<FONT ID="IntegerLiteral">8812132617585120414L</FONT>;
<FONT ID="LN">106 </FONT><A NAME="106"></A>
<FONT ID="LN">107 </FONT><A NAME="107"></A>  <FONT ID="FormalComment">/** number of attributes in the data */</FONT>
<FONT ID="LN">108 </FONT><A NAME="108"></A>  <FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT> m_numAttribs;
<FONT ID="LN">109 </FONT><A NAME="109"></A>
<FONT ID="LN">110 </FONT><A NAME="110"></A>  <FONT ID="FormalComment">/** holds the class index */</FONT>
<FONT ID="LN">111 </FONT><A NAME="111"></A>  <FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT> m_classIndex;
<FONT ID="LN">112 </FONT><A NAME="112"></A>
<FONT ID="LN">113 </FONT><A NAME="113"></A>  <FONT ID="FormalComment">/** random number generation */</FONT>
<FONT ID="LN">114 </FONT><A NAME="114"></A>  <FONT ID="Private">private</FONT> Random m_random;
<FONT ID="LN">115 </FONT><A NAME="115"></A>
<FONT ID="LN">116 </FONT><A NAME="116"></A>  <FONT ID="FormalComment">/** seed for random number generation */</FONT>
<FONT ID="LN">117 </FONT><A NAME="117"></A>  <FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT> m_seed;
<FONT ID="LN">118 </FONT><A NAME="118"></A>
<FONT ID="LN">119 </FONT><A NAME="119"></A>  <FONT ID="FormalComment">/** probabilities of diversification */</FONT>
<FONT ID="LN">120 </FONT><A NAME="120"></A>  <FONT ID="Private">private</FONT> <FONT ID="Double">double</FONT> m_diversificationProb;
<FONT ID="LN">121 </FONT><A NAME="121"></A>
<FONT ID="LN">122 </FONT><A NAME="122"></A>  <FONT ID="FormalComment">/** number of iterations for getting the best subset*/</FONT>
<FONT ID="LN">123 </FONT><A NAME="123"></A>  <FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT> m_numIterations;
<FONT ID="LN">124 </FONT><A NAME="124"></A>
<FONT ID="LN">125 </FONT><A NAME="125"></A>  <FONT ID="FormalComment">/** total number of subsets evaluated during a search */</FONT>
<FONT ID="LN">126 </FONT><A NAME="126"></A>  <FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT> m_totalEvals;
<FONT ID="LN">127 </FONT><A NAME="127"></A>
<FONT ID="LN">128 </FONT><A NAME="128"></A>  <FONT ID="FormalComment">/** holds the best Subset found */</FONT>
<FONT ID="LN">129 </FONT><A NAME="129"></A>  <FONT ID="Protected">protected</FONT> Subset m_Sbest;
<FONT ID="LN">130 </FONT><A NAME="130"></A>
<FONT ID="LN">131 </FONT><A NAME="131"></A>  <FONT ID="FormalComment">/** holds the number of neighborhood to generate from a Subset*/</FONT>
<FONT ID="LN">132 </FONT><A NAME="132"></A>  <FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT> m_numNeighborhood;
<FONT ID="LN">133 </FONT><A NAME="133"></A>
<FONT ID="LN">134 </FONT><A NAME="134"></A>  <FONT ID="FormalComment">/** time for procesing the search method */</FONT>
<FONT ID="LN">135 </FONT><A NAME="135"></A>  <FONT ID="Private">private</FONT> <FONT ID="Long">long</FONT> m_processinTime;
<FONT ID="LN">136 </FONT><A NAME="136"></A>
<FONT ID="LN">137 </FONT><A NAME="137"></A>  <FONT ID="FormalComment">/** holds the solution size*/</FONT>
<FONT ID="LN">138 </FONT><A NAME="138"></A>  <FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT> m_initialSize;
<FONT ID="LN">139 </FONT><A NAME="139"></A>
<FONT ID="LN">140 </FONT><A NAME="140"></A>  <FONT ID="FormalComment">/**Subset holding the initial solution*/</FONT>
<FONT ID="LN">141 </FONT><A NAME="141"></A>  <FONT ID="Private">private</FONT> Subset m_initialSolution;
<FONT ID="LN">142 </FONT><A NAME="142"></A>
<FONT ID="LN">143 </FONT><A NAME="143"></A>  <FONT ID="FormalComment">/**attribute ranking*/</FONT>
<FONT ID="LN">144 </FONT><A NAME="144"></A>  <FONT ID="Private">private</FONT> List&lt;Subset&gt; m_rankedAttribs;
<FONT ID="LN">145 </FONT><A NAME="145"></A>
<FONT ID="LN">146 </FONT><A NAME="146"></A>  <FONT ID="FormalComment">/**tabu List*/</FONT>
<FONT ID="LN">147 </FONT><A NAME="147"></A>  <FONT ID="Private">private</FONT> List&lt;BitSet&gt; m_vectorTabu;
<FONT ID="LN">148 </FONT><A NAME="148"></A>
<FONT ID="LN">149 </FONT><A NAME="149"></A>  <FONT ID="FormalComment">/**Evaluator used to know the significance of a subset (for guiding the search)*/</FONT>
<FONT ID="LN">150 </FONT><A NAME="150"></A>  <FONT ID="Private">private</FONT> <A HREF="../../weka/attributeSelection/SubsetEvaluator.java.html">SubsetEvaluator</A> ASEvaluator =<FONT ID="Null">null</FONT>;
<FONT ID="LN">151 </FONT><A NAME="151"></A>
<FONT ID="LN">152 </FONT><A NAME="152"></A>
<FONT ID="LN">153 </FONT><A NAME="153"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">154 </FONT><A NAME="154"></A>   * Searches the attribute subset space using Tabu Search.
<FONT ID="LN">155 </FONT><A NAME="155"></A>   *
<FONT ID="LN">156 </FONT><A NAME="156"></A>   * @param ASEvaluator the attribute evaluator to guide the search
<FONT ID="LN">157 </FONT><A NAME="157"></A>   * @param data the training instances.
<FONT ID="LN">158 </FONT><A NAME="158"></A>   * @return an array of selected attribute indexes
<FONT ID="LN">159 </FONT><A NAME="159"></A>   * @exception Exception if the search can't be completed
<FONT ID="LN">160 </FONT><A NAME="160"></A>   */</FONT>
<FONT ID="LN">161 </FONT><A NAME="161"></A>  <FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT>[] search(<A HREF="../../weka/attributeSelection/ASEvaluation.java.html">ASEvaluation</A> ASEval, <A HREF="../../weka/core/Instances.java.html">Instances</A> data)
<FONT ID="LN">162 </FONT><A NAME="162"></A>  <FONT ID="Throws">throws</FONT> Exception{
<FONT ID="LN">163 </FONT><A NAME="163"></A>    m_totalEvals = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">164 </FONT><A NAME="164"></A>    m_processinTime =System.currentTimeMillis ();
<FONT ID="LN">165 </FONT><A NAME="165"></A>
<FONT ID="LN">166 </FONT><A NAME="166"></A>    m_numAttribs =data.numAttributes ();
<FONT ID="LN">167 </FONT><A NAME="167"></A>    m_classIndex =data.classIndex ();
<FONT ID="LN">168 </FONT><A NAME="168"></A>
<FONT ID="LN">169 </FONT><A NAME="169"></A>    ASEvaluator =(<A HREF="../../weka/attributeSelection/SubsetEvaluator.java.html">SubsetEvaluator</A>)ASEval;
<FONT ID="LN">170 </FONT><A NAME="170"></A>
<FONT ID="LN">171 </FONT><A NAME="171"></A>    m_random = <FONT ID="New">new</FONT> Random(m_seed);
<FONT ID="LN">172 </FONT><A NAME="172"></A>
<FONT ID="LN">173 </FONT><A NAME="173"></A>    <FONT ID="Int">int</FONT> numN = m_numNeighborhood;
<FONT ID="LN">174 </FONT><A NAME="174"></A>    numN = (m_numNeighborhood &lt;= <FONT ID="IntegerLiteral">0</FONT>) ? <FONT ID="IntegerLiteral">3</FONT>*m_numAttribs/<FONT ID="IntegerLiteral">4</FONT> : m_numNeighborhood;
<FONT ID="LN">175 </FONT><A NAME="175"></A>
<FONT ID="LN">176 </FONT><A NAME="176"></A>
<FONT ID="LN">177 </FONT><A NAME="177"></A>    <FONT ID="If">if</FONT>(m_numAttribs &lt;= <FONT ID="IntegerLiteral">14</FONT>) m_numIterations = m_numAttribs;
<FONT ID="LN">178 </FONT><A NAME="178"></A>    <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT>(m_numAttribs &gt; <FONT ID="IntegerLiteral">14</FONT>) m_numIterations = m_numAttribs/<FONT ID="IntegerLiteral">3</FONT>;
<FONT ID="LN">179 </FONT><A NAME="179"></A>
<FONT ID="LN">180 </FONT><A NAME="180"></A>    m_rankedAttribs = RankEachAttribute ();
<FONT ID="LN">181 </FONT><A NAME="181"></A>
<FONT ID="LN">182 </FONT><A NAME="182"></A>    <FONT ID="FormalComment">/** generating an initial Solution based in SFS*/</FONT>
<FONT ID="LN">183 </FONT><A NAME="183"></A>    <FONT ID="If">if</FONT>(m_initialSize &lt; <FONT ID="IntegerLiteral">0</FONT>)m_initialSize = m_numAttribs;
<FONT ID="LN">184 </FONT><A NAME="184"></A>    m_initialSolution = GenerateInitialSolution(<FONT ID="New">new</FONT> Subset(<FONT ID="New">new</FONT> BitSet(m_numAttribs), <FONT ID="IntegerLiteral">0</FONT>), m_initialSize);
<FONT ID="LN">185 </FONT><A NAME="185"></A>
<FONT ID="LN">186 </FONT><A NAME="186"></A>
<FONT ID="LN">187 </FONT><A NAME="187"></A>    <FONT ID="FormalComment">/**Initializing Vector Tabu*/</FONT>
<FONT ID="LN">188 </FONT><A NAME="188"></A>    m_vectorTabu =<FONT ID="New">new</FONT> ArrayList&lt;BitSet&gt;();
<FONT ID="LN">189 </FONT><A NAME="189"></A>    BitSet tabu1 = <FONT ID="New">new</FONT> BitSet(m_numAttribs);
<FONT ID="LN">190 </FONT><A NAME="190"></A>    BitSet tabu2 = <FONT ID="New">new</FONT> BitSet(m_numAttribs);
<FONT ID="LN">191 </FONT><A NAME="191"></A>
<FONT ID="LN">192 </FONT><A NAME="192"></A>    tabu2.set (<FONT ID="IntegerLiteral">0</FONT>,m_numAttribs-<FONT ID="IntegerLiteral">1</FONT>);
<FONT ID="LN">193 </FONT><A NAME="193"></A>    <FONT ID="If">if</FONT> (m_classIndex &gt;= <FONT ID="IntegerLiteral">0</FONT>) tabu2.set (m_classIndex, <FONT ID="False">false</FONT>);
<FONT ID="LN">194 </FONT><A NAME="194"></A>
<FONT ID="LN">195 </FONT><A NAME="195"></A>    m_vectorTabu.add (tabu1);
<FONT ID="LN">196 </FONT><A NAME="196"></A>    m_vectorTabu.add (tabu2);
<FONT ID="LN">197 </FONT><A NAME="197"></A>
<FONT ID="LN">198 </FONT><A NAME="198"></A>
<FONT ID="LN">199 </FONT><A NAME="199"></A>    <FONT ID="FormalComment">/**For Controlling the Search*/</FONT>
<FONT ID="LN">200 </FONT><A NAME="200"></A>    <FONT ID="Int">int</FONT> iterationCounter = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">201 </FONT><A NAME="201"></A>    <FONT ID="Int">int</FONT> numGenerationNeighborForDiv = (m_numAttribs/m_numIterations &gt;= <FONT ID="IntegerLiteral">2</FONT>) ? m_numAttribs/m_numIterations : <FONT ID="IntegerLiteral">3</FONT>;
<FONT ID="LN">202 </FONT><A NAME="202"></A>    <FONT ID="Int">int</FONT> numTotalWImp = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">203 </FONT><A NAME="203"></A>    <FONT ID="Int">int</FONT> numTotalWImpForFinishing = m_numIterations/<FONT ID="IntegerLiteral">2</FONT>;
<FONT ID="LN">204 </FONT><A NAME="204"></A>
<FONT ID="LN">205 </FONT><A NAME="205"></A>    BitSet S = m_initialSolution.subset;
<FONT ID="LN">206 </FONT><A NAME="206"></A>    m_Sbest = m_initialSolution;
<FONT ID="LN">207 </FONT><A NAME="207"></A>
<FONT ID="LN">208 </FONT><A NAME="208"></A>    List&lt;Subset&gt; RedSet = <FONT ID="New">new</FONT> ArrayList&lt;Subset&gt;();
<FONT ID="LN">209 </FONT><A NAME="209"></A>    RedSet.add (m_Sbest.clone ());
<FONT ID="LN">210 </FONT><A NAME="210"></A>
<FONT ID="LN">211 </FONT><A NAME="211"></A>    <FONT ID="While">while</FONT>(iterationCounter &lt; m_numIterations &amp;&amp; numTotalWImp &lt; numTotalWImpForFinishing){
<FONT ID="LN">212 </FONT><A NAME="212"></A>      iterationCounter ++;
<FONT ID="LN">213 </FONT><A NAME="213"></A>
<FONT ID="LN">214 </FONT><A NAME="214"></A>      List&lt;Subset&gt; neighborhood = <FONT ID="Null">null</FONT>;
<FONT ID="LN">215 </FONT><A NAME="215"></A>      <FONT ID="Int">int</FONT> counterGenerationNeighborWImp = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">216 </FONT><A NAME="216"></A>      <FONT ID="While">while</FONT> (counterGenerationNeighborWImp &lt; numGenerationNeighborForDiv) {
<FONT ID="LN">217 </FONT><A NAME="217"></A>
<FONT ID="LN">218 </FONT><A NAME="218"></A>        neighborhood = generateNeighborhood(S, numN);
<FONT ID="LN">219 </FONT><A NAME="219"></A>        <FONT ID="If">if</FONT>(neighborhood != <FONT ID="Null">null</FONT>){
<FONT ID="LN">220 </FONT><A NAME="220"></A>          S =((Subset)neighborhood.get (<FONT ID="IntegerLiteral">0</FONT>)).subset;
<FONT ID="LN">221 </FONT><A NAME="221"></A>          <FONT ID="Double">double</FONT> Smerit = ASEvaluator.evaluateSubset (S);
<FONT ID="LN">222 </FONT><A NAME="222"></A>          m_totalEvals ++;
<FONT ID="LN">223 </FONT><A NAME="223"></A>
<FONT ID="LN">224 </FONT><A NAME="224"></A>          RedSet.add (<FONT ID="New">new</FONT> Subset((BitSet)S.clone (), Smerit));
<FONT ID="LN">225 </FONT><A NAME="225"></A>
<FONT ID="LN">226 </FONT><A NAME="226"></A>          m_vectorTabu.add ((BitSet)S.clone ());
<FONT ID="LN">227 </FONT><A NAME="227"></A>
<FONT ID="LN">228 </FONT><A NAME="228"></A>
<FONT ID="LN">229 </FONT><A NAME="229"></A>          <FONT ID="If">if</FONT>(Smerit &gt; m_Sbest.merit){
<FONT ID="LN">230 </FONT><A NAME="230"></A>            m_Sbest = <FONT ID="New">new</FONT> Subset((BitSet)S.clone (), Smerit);
<FONT ID="LN">231 </FONT><A NAME="231"></A>            Subset aux = shake ();
<FONT ID="LN">232 </FONT><A NAME="232"></A>            <FONT ID="If">if</FONT>(aux != <FONT ID="Null">null</FONT>)
<FONT ID="LN">233 </FONT><A NAME="233"></A>              m_Sbest = aux.clone ();
<FONT ID="LN">234 </FONT><A NAME="234"></A>          }
<FONT ID="LN">235 </FONT><A NAME="235"></A>          <FONT ID="Else">else</FONT>{
<FONT ID="LN">236 </FONT><A NAME="236"></A>            counterGenerationNeighborWImp ++;
<FONT ID="LN">237 </FONT><A NAME="237"></A>            numTotalWImp ++;
<FONT ID="LN">238 </FONT><A NAME="238"></A>          }
<FONT ID="LN">239 </FONT><A NAME="239"></A>        }
<FONT ID="LN">240 </FONT><A NAME="240"></A>        <FONT ID="Else">else</FONT> <FONT ID="Break">break</FONT>;
<FONT ID="LN">241 </FONT><A NAME="241"></A>      }
<FONT ID="LN">242 </FONT><A NAME="242"></A>      S = diversify (neighborhood);
<FONT ID="LN">243 </FONT><A NAME="243"></A>    }
<FONT ID="LN">244 </FONT><A NAME="244"></A>
<FONT ID="LN">245 </FONT><A NAME="245"></A>    Subset elite = eliteReducts(RedSet, RedSet.size ());
<FONT ID="LN">246 </FONT><A NAME="246"></A>
<FONT ID="LN">247 </FONT><A NAME="247"></A>    <FONT ID="If">if</FONT>(elite.merit &gt;= m_Sbest.merit)
<FONT ID="LN">248 </FONT><A NAME="248"></A>      <FONT ID="Return">return</FONT> attributeList (elite.subset);
<FONT ID="LN">249 </FONT><A NAME="249"></A>
<FONT ID="LN">250 </FONT><A NAME="250"></A>    m_processinTime = System.currentTimeMillis () - m_processinTime;
<FONT ID="LN">251 </FONT><A NAME="251"></A>
<FONT ID="LN">252 </FONT><A NAME="252"></A>    <FONT ID="Return">return</FONT> attributeList (m_Sbest.subset);
<FONT ID="LN">253 </FONT><A NAME="253"></A>  }
<FONT ID="LN">254 </FONT><A NAME="254"></A>
<FONT ID="LN">255 </FONT><A NAME="255"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">256 </FONT><A NAME="256"></A>   * Generates a list of neighborhood given a Solution, flipping randomly the state of many attributes.
<FONT ID="LN">257 </FONT><A NAME="257"></A>   *
<FONT ID="LN">258 </FONT><A NAME="258"></A>   * @param S the Solution from which we are going to find the neighborhood
<FONT ID="LN">259 </FONT><A NAME="259"></A>   * @param numNeighborhood number of attributes for flipping
<FONT ID="LN">260 </FONT><A NAME="260"></A>   * @return a Subset list containing the neighborhood
<FONT ID="LN">261 </FONT><A NAME="261"></A>   * @exception Exception if the evaluation can not be complete
<FONT ID="LN">262 </FONT><A NAME="262"></A>   */</FONT>
<FONT ID="LN">263 </FONT><A NAME="263"></A>  <FONT ID="Private">private</FONT> List&lt;Subset&gt; generateNeighborhood(BitSet S, <FONT ID="Int">int</FONT> numNeighborhood)
<FONT ID="LN">264 </FONT><A NAME="264"></A>  <FONT ID="Throws">throws</FONT> Exception{
<FONT ID="LN">265 </FONT><A NAME="265"></A>    <FONT ID="Int">int</FONT> counter = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">266 </FONT><A NAME="266"></A>    List&lt;Subset&gt; neighborhood = <FONT ID="New">new</FONT> ArrayList&lt;Subset&gt;();
<FONT ID="LN">267 </FONT><A NAME="267"></A>
<FONT ID="LN">268 </FONT><A NAME="268"></A>    <FONT ID="Int">int</FONT> numAttribs = (m_classIndex == -<FONT ID="IntegerLiteral">1</FONT>) ? m_numAttribs  : m_numAttribs - <FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">269 </FONT><A NAME="269"></A>
<FONT ID="LN">270 </FONT><A NAME="270"></A>    <FONT ID="If">if</FONT>(numNeighborhood &gt;= numAttribs){
<FONT ID="LN">271 </FONT><A NAME="271"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; m_numAttribs; i++) {
<FONT ID="LN">272 </FONT><A NAME="272"></A>        <FONT ID="If">if</FONT>(i == m_classIndex)<FONT ID="Continue">continue</FONT>;
<FONT ID="LN">273 </FONT><A NAME="273"></A>
<FONT ID="LN">274 </FONT><A NAME="274"></A>        BitSet aux = (BitSet)S.clone ();
<FONT ID="LN">275 </FONT><A NAME="275"></A>        aux.flip (i);
<FONT ID="LN">276 </FONT><A NAME="276"></A>
<FONT ID="LN">277 </FONT><A NAME="277"></A>        <FONT ID="If">if</FONT>(!m_vectorTabu.contains (aux)){
<FONT ID="LN">278 </FONT><A NAME="278"></A>          neighborhood.add (<FONT ID="New">new</FONT> Subset((BitSet)aux.clone (), ASEvaluator.evaluateSubset (aux)));
<FONT ID="LN">279 </FONT><A NAME="279"></A>          m_totalEvals ++;
<FONT ID="LN">280 </FONT><A NAME="280"></A>        }
<FONT ID="LN">281 </FONT><A NAME="281"></A>      }
<FONT ID="LN">282 </FONT><A NAME="282"></A>    }
<FONT ID="LN">283 </FONT><A NAME="283"></A>    <FONT ID="Else">else</FONT>{
<FONT ID="LN">284 </FONT><A NAME="284"></A>      <FONT ID="While">while</FONT> (counter &lt; numNeighborhood) {
<FONT ID="LN">285 </FONT><A NAME="285"></A>        BitSet aux = (BitSet)S.clone ();
<FONT ID="LN">286 </FONT><A NAME="286"></A>
<FONT ID="LN">287 </FONT><A NAME="287"></A>        <FONT ID="Int">int</FONT> randomNumber = m_random.nextInt (m_numAttribs);
<FONT ID="LN">288 </FONT><A NAME="288"></A>        <FONT ID="If">if</FONT>(randomNumber == m_classIndex)
<FONT ID="LN">289 </FONT><A NAME="289"></A>          <FONT ID="Continue">continue</FONT>;
<FONT ID="LN">290 </FONT><A NAME="290"></A>
<FONT ID="LN">291 </FONT><A NAME="291"></A>        aux.flip (randomNumber);
<FONT ID="LN">292 </FONT><A NAME="292"></A>        <FONT ID="If">if</FONT>(!m_vectorTabu.contains (aux)){
<FONT ID="LN">293 </FONT><A NAME="293"></A>          neighborhood.add (<FONT ID="New">new</FONT> Subset((BitSet)aux.clone (), ASEvaluator.evaluateSubset (aux)));
<FONT ID="LN">294 </FONT><A NAME="294"></A>          m_totalEvals ++;
<FONT ID="LN">295 </FONT><A NAME="295"></A>          counter ++;
<FONT ID="LN">296 </FONT><A NAME="296"></A>        }
<FONT ID="LN">297 </FONT><A NAME="297"></A>      }
<FONT ID="LN">298 </FONT><A NAME="298"></A>    }
<FONT ID="LN">299 </FONT><A NAME="299"></A>
<FONT ID="LN">300 </FONT><A NAME="300"></A>    <FONT ID="If">if</FONT>(neighborhood.isEmpty ())
<FONT ID="LN">301 </FONT><A NAME="301"></A>      <FONT ID="Return">return</FONT> <FONT ID="Null">null</FONT>;
<FONT ID="LN">302 </FONT><A NAME="302"></A>
<FONT ID="LN">303 </FONT><A NAME="303"></A>    <FONT ID="Return">return</FONT> bubbleSubsetSort (neighborhood);
<FONT ID="LN">304 </FONT><A NAME="304"></A>  }
<FONT ID="LN">305 </FONT><A NAME="305"></A>
<FONT ID="LN">306 </FONT><A NAME="306"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">307 </FONT><A NAME="307"></A>   * Generate a diverse Bitset given a List of Subset
<FONT ID="LN">308 </FONT><A NAME="308"></A>   *
<FONT ID="LN">309 </FONT><A NAME="309"></A>   * @param neighborhood the list from which are going to be generate the diverse solution
<FONT ID="LN">310 </FONT><A NAME="310"></A>   * @return a diverse Bitset
<FONT ID="LN">311 </FONT><A NAME="311"></A>   */</FONT>
<FONT ID="LN">312 </FONT><A NAME="312"></A>  <FONT ID="Public">public</FONT> BitSet diversify(List&lt;Subset&gt; neighborhood){
<FONT ID="LN">313 </FONT><A NAME="313"></A>
<FONT ID="LN">314 </FONT><A NAME="314"></A>    <FONT ID="If">if</FONT>(neighborhood == <FONT ID="Null">null</FONT>)
<FONT ID="LN">315 </FONT><A NAME="315"></A>      <FONT ID="Return">return</FONT> m_Sbest.subset;
<FONT ID="LN">316 </FONT><A NAME="316"></A>
<FONT ID="LN">317 </FONT><A NAME="317"></A>    BitSet result = <FONT ID="New">new</FONT> BitSet(m_numAttribs);
<FONT ID="LN">318 </FONT><A NAME="318"></A>
<FONT ID="LN">319 </FONT><A NAME="319"></A>    <FONT ID="Double">double</FONT> [] counts = <FONT ID="New">new</FONT> <FONT ID="Double">double</FONT>[m_numAttribs];
<FONT ID="LN">320 </FONT><A NAME="320"></A>    <FONT ID="Int">int</FONT> numNeighborhood = neighborhood.size ();
<FONT ID="LN">321 </FONT><A NAME="321"></A>
<FONT ID="LN">322 </FONT><A NAME="322"></A>
<FONT ID="LN">323 </FONT><A NAME="323"></A>
<FONT ID="LN">324 </FONT><A NAME="324"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; m_numAttribs; i++) {
<FONT ID="LN">325 </FONT><A NAME="325"></A>      <FONT ID="If">if</FONT>(i == m_classIndex)
<FONT ID="LN">326 </FONT><A NAME="326"></A>        <FONT ID="Continue">continue</FONT>;
<FONT ID="LN">327 </FONT><A NAME="327"></A>
<FONT ID="LN">328 </FONT><A NAME="328"></A>      <FONT ID="Int">int</FONT> counter = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">329 </FONT><A NAME="329"></A>
<FONT ID="LN">330 </FONT><A NAME="330"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = <FONT ID="IntegerLiteral">0</FONT>; j &lt; numNeighborhood; j++) {
<FONT ID="LN">331 </FONT><A NAME="331"></A>        <FONT ID="If">if</FONT>(((Subset)neighborhood.get (j)).subset.get (i))
<FONT ID="LN">332 </FONT><A NAME="332"></A>          counter ++;
<FONT ID="LN">333 </FONT><A NAME="333"></A>      }
<FONT ID="LN">334 </FONT><A NAME="334"></A>      counts [i] = counter/(<FONT ID="Double">double</FONT>)numNeighborhood;
<FONT ID="LN">335 </FONT><A NAME="335"></A>    }
<FONT ID="LN">336 </FONT><A NAME="336"></A>
<FONT ID="LN">337 </FONT><A NAME="337"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; m_numAttribs; i++) {
<FONT ID="LN">338 </FONT><A NAME="338"></A>      <FONT ID="Double">double</FONT> randomNumber = m_random.nextDouble ();
<FONT ID="LN">339 </FONT><A NAME="339"></A>      <FONT ID="Double">double</FONT> ocurrenceAndRank = counts [i] * (m_diversificationProb) + doubleRank (i) * (<FONT ID="IntegerLiteral">1</FONT> - m_diversificationProb);
<FONT ID="LN">340 </FONT><A NAME="340"></A>
<FONT ID="LN">341 </FONT><A NAME="341"></A>      <FONT ID="If">if</FONT>(randomNumber &gt; ocurrenceAndRank)
<FONT ID="LN">342 </FONT><A NAME="342"></A>        result.set (i);
<FONT ID="LN">343 </FONT><A NAME="343"></A>    }
<FONT ID="LN">344 </FONT><A NAME="344"></A>
<FONT ID="LN">345 </FONT><A NAME="345"></A>    <FONT ID="Return">return</FONT> result;
<FONT ID="LN">346 </FONT><A NAME="346"></A>  }
<FONT ID="LN">347 </FONT><A NAME="347"></A>
<FONT ID="LN">348 </FONT><A NAME="348"></A>
<FONT ID="LN">349 </FONT><A NAME="349"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">350 </FONT><A NAME="350"></A>   * Try to improve the best Solution obtained till now in the way of Sequential Backward Selection(SBS)
<FONT ID="LN">351 </FONT><A NAME="351"></A>   *
<FONT ID="LN">352 </FONT><A NAME="352"></A>   * @param ASEvaluator the attribute evaluator to guide the search
<FONT ID="LN">353 </FONT><A NAME="353"></A>   * @return null if there is not improvement otherwise a Subset better than the obtained till now.
<FONT ID="LN">354 </FONT><A NAME="354"></A>   */</FONT>
<FONT ID="LN">355 </FONT><A NAME="355"></A>  <FONT ID="Private">private</FONT> Subset shake()
<FONT ID="LN">356 </FONT><A NAME="356"></A>  <FONT ID="Throws">throws</FONT> Exception{
<FONT ID="LN">357 </FONT><A NAME="357"></A>    Subset bestCopy = m_Sbest.clone ();
<FONT ID="LN">358 </FONT><A NAME="358"></A>    <FONT ID="Boolean">boolean</FONT> anyImprovement = <FONT ID="False">false</FONT>;
<FONT ID="LN">359 </FONT><A NAME="359"></A>
<FONT ID="LN">360 </FONT><A NAME="360"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = m_rankedAttribs.size ()-<FONT ID="IntegerLiteral">1</FONT>; i &gt;= <FONT ID="IntegerLiteral">0</FONT>; i --) {
<FONT ID="LN">361 </FONT><A NAME="361"></A>      Subset ranking = m_rankedAttribs.get (i);
<FONT ID="LN">362 </FONT><A NAME="362"></A>      <FONT ID="Int">int</FONT> attributeIndex = ranking.subset.nextSetBit (<FONT ID="IntegerLiteral">0</FONT>);
<FONT ID="LN">363 </FONT><A NAME="363"></A>
<FONT ID="LN">364 </FONT><A NAME="364"></A>      BitSet aux = (BitSet)bestCopy.subset.clone ();
<FONT ID="LN">365 </FONT><A NAME="365"></A>      <FONT ID="If">if</FONT>(aux.get (attributeIndex)){
<FONT ID="LN">366 </FONT><A NAME="366"></A>        aux.set (attributeIndex, <FONT ID="False">false</FONT>);
<FONT ID="LN">367 </FONT><A NAME="367"></A>
<FONT ID="LN">368 </FONT><A NAME="368"></A>        <FONT ID="If">if</FONT>(m_vectorTabu.contains (aux))
<FONT ID="LN">369 </FONT><A NAME="369"></A>          <FONT ID="Continue">continue</FONT>;
<FONT ID="LN">370 </FONT><A NAME="370"></A>
<FONT ID="LN">371 </FONT><A NAME="371"></A>        <FONT ID="Double">double</FONT> tempMerit = ASEvaluator.evaluateSubset (aux);
<FONT ID="LN">372 </FONT><A NAME="372"></A>        m_totalEvals ++;
<FONT ID="LN">373 </FONT><A NAME="373"></A>
<FONT ID="LN">374 </FONT><A NAME="374"></A>        <FONT ID="If">if</FONT>(tempMerit &gt;= bestCopy.merit){
<FONT ID="LN">375 </FONT><A NAME="375"></A>          bestCopy = <FONT ID="New">new</FONT> Subset((BitSet)aux.clone (), tempMerit);
<FONT ID="LN">376 </FONT><A NAME="376"></A>          anyImprovement = <FONT ID="True">true</FONT>;
<FONT ID="LN">377 </FONT><A NAME="377"></A>        }
<FONT ID="LN">378 </FONT><A NAME="378"></A>      }
<FONT ID="LN">379 </FONT><A NAME="379"></A>    }
<FONT ID="LN">380 </FONT><A NAME="380"></A>    <FONT ID="If">if</FONT>(anyImprovement)
<FONT ID="LN">381 </FONT><A NAME="381"></A>      <FONT ID="Return">return</FONT> bestCopy;
<FONT ID="LN">382 </FONT><A NAME="382"></A>    <FONT ID="Return">return</FONT> <FONT ID="Null">null</FONT>;
<FONT ID="LN">383 </FONT><A NAME="383"></A>  }
<FONT ID="LN">384 </FONT><A NAME="384"></A>
<FONT ID="LN">385 </FONT><A NAME="385"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">386 </FONT><A NAME="386"></A>   * Find a better solution by intersecting and SFS of the best elite Reducts found till that moment
<FONT ID="LN">387 </FONT><A NAME="387"></A>   *
<FONT ID="LN">388 </FONT><A NAME="388"></A>   * @param RedSet the Subset List of the Elite Reducted found till that moment
<FONT ID="LN">389 </FONT><A NAME="389"></A>   * @param numSubset number of elites to intersect
<FONT ID="LN">390 </FONT><A NAME="390"></A>   * @return a the resulting Subset
<FONT ID="LN">391 </FONT><A NAME="391"></A>   * @exception Exception if any evaluation can't be completed
<FONT ID="LN">392 </FONT><A NAME="392"></A>   */</FONT>
<FONT ID="LN">393 </FONT><A NAME="393"></A>  <FONT ID="Public">public</FONT> Subset eliteReducts(List&lt;Subset&gt;RedSet, <FONT ID="Int">int</FONT> numSubset)
<FONT ID="LN">394 </FONT><A NAME="394"></A>  <FONT ID="Throws">throws</FONT> Exception{
<FONT ID="LN">395 </FONT><A NAME="395"></A>
<FONT ID="LN">396 </FONT><A NAME="396"></A>    <FONT ID="If">if</FONT>(numSubset &lt;= <FONT ID="IntegerLiteral">0</FONT>)
<FONT ID="LN">397 </FONT><A NAME="397"></A>      <FONT ID="Return">return</FONT> <FONT ID="Null">null</FONT>;
<FONT ID="LN">398 </FONT><A NAME="398"></A>
<FONT ID="LN">399 </FONT><A NAME="399"></A>    List&lt;Subset&gt;orderedRedSet = bubbleSubsetSort (RedSet);
<FONT ID="LN">400 </FONT><A NAME="400"></A>    <FONT ID="Int">int</FONT> numAttribsOfBest = m_Sbest.cardinality ();
<FONT ID="LN">401 </FONT><A NAME="401"></A>
<FONT ID="LN">402 </FONT><A NAME="402"></A>    BitSet result =<FONT ID="New">new</FONT> BitSet(m_numAttribs);
<FONT ID="LN">403 </FONT><A NAME="403"></A>    result.set (<FONT ID="IntegerLiteral">0</FONT>,m_numAttribs-<FONT ID="IntegerLiteral">1</FONT>,<FONT ID="True">true</FONT>);
<FONT ID="LN">404 </FONT><A NAME="404"></A>
<FONT ID="LN">405 </FONT><A NAME="405"></A>    BitSet aux;
<FONT ID="LN">406 </FONT><A NAME="406"></A>
<FONT ID="LN">407 </FONT><A NAME="407"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; numSubset; i++) {
<FONT ID="LN">408 </FONT><A NAME="408"></A>      aux = ((Subset)orderedRedSet.get (i)).subset;
<FONT ID="LN">409 </FONT><A NAME="409"></A>      result.and (aux);
<FONT ID="LN">410 </FONT><A NAME="410"></A>    }
<FONT ID="LN">411 </FONT><A NAME="411"></A>
<FONT ID="LN">412 </FONT><A NAME="412"></A>    <FONT ID="Int">int</FONT> diff = numAttribsOfBest - result.cardinality ();
<FONT ID="LN">413 </FONT><A NAME="413"></A>
<FONT ID="LN">414 </FONT><A NAME="414"></A>    Subset resultSet = GenerateInitialSolution (<FONT ID="New">new</FONT> Subset(result,ASEvaluator.evaluateSubset (result)),result.cardinality () + diff-<FONT ID="IntegerLiteral">1</FONT>);
<FONT ID="LN">415 </FONT><A NAME="415"></A>    m_totalEvals ++;
<FONT ID="LN">416 </FONT><A NAME="416"></A>
<FONT ID="LN">417 </FONT><A NAME="417"></A>    <FONT ID="If">if</FONT>(resultSet == <FONT ID="Null">null</FONT>)
<FONT ID="LN">418 </FONT><A NAME="418"></A>      <FONT ID="Return">return</FONT> <FONT ID="Null">null</FONT>;
<FONT ID="LN">419 </FONT><A NAME="419"></A>
<FONT ID="LN">420 </FONT><A NAME="420"></A>    <FONT ID="Return">return</FONT> resultSet;
<FONT ID="LN">421 </FONT><A NAME="421"></A>  }
<FONT ID="LN">422 </FONT><A NAME="422"></A>
<FONT ID="LN">423 </FONT><A NAME="423"></A>
<FONT ID="LN">424 </FONT><A NAME="424"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">425 </FONT><A NAME="425"></A>   * Generate an initial solution based in a Sequential Forward Selection (SFS)
<FONT ID="LN">426 </FONT><A NAME="426"></A>   *
<FONT ID="LN">427 </FONT><A NAME="427"></A>   * @param size number of posible attributes in the initial Solution
<FONT ID="LN">428 </FONT><A NAME="428"></A>   * @return an initial Subset containing the initial Solution
<FONT ID="LN">429 </FONT><A NAME="429"></A>   * @exception Exception if the evaluation can not be completed
<FONT ID="LN">430 </FONT><A NAME="430"></A>   */</FONT>
<FONT ID="LN">431 </FONT><A NAME="431"></A>  <FONT ID="Public">public</FONT> Subset GenerateInitialSolution(Subset initial, <FONT ID="Int">int</FONT> size)
<FONT ID="LN">432 </FONT><A NAME="432"></A>  <FONT ID="Throws">throws</FONT> Exception{
<FONT ID="LN">433 </FONT><A NAME="433"></A>
<FONT ID="LN">434 </FONT><A NAME="434"></A>    List&lt;Subset&gt; rankedAttribsCopy = <FONT ID="New">new</FONT> ArrayList&lt;Subset&gt;();
<FONT ID="LN">435 </FONT><A NAME="435"></A>
<FONT ID="LN">436 </FONT><A NAME="436"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i&lt;m_rankedAttribs.size (); i++)
<FONT ID="LN">437 </FONT><A NAME="437"></A>      rankedAttribsCopy.add (m_rankedAttribs.get (i));
<FONT ID="LN">438 </FONT><A NAME="438"></A>
<FONT ID="LN">439 </FONT><A NAME="439"></A>    Subset solution = initial.clone ();
<FONT ID="LN">440 </FONT><A NAME="440"></A>
<FONT ID="LN">441 </FONT><A NAME="441"></A>    <FONT ID="While">while</FONT>(solution.cardinality () &lt; size) {
<FONT ID="LN">442 </FONT><A NAME="442"></A>
<FONT ID="LN">443 </FONT><A NAME="443"></A>      Subset tempSubset =<FONT ID="New">new</FONT> Subset();
<FONT ID="LN">444 </FONT><A NAME="444"></A>      <FONT ID="Double">double</FONT> bestMerit =solution.merit;
<FONT ID="LN">445 </FONT><A NAME="445"></A>      <FONT ID="Int">int</FONT> bestIndex =-<FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">446 </FONT><A NAME="446"></A>
<FONT ID="LN">447 </FONT><A NAME="447"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i&lt;rankedAttribsCopy.size (); i++) {
<FONT ID="LN">448 </FONT><A NAME="448"></A>        Subset candidate = ((Subset)rankedAttribsCopy.get (i)).clone ();
<FONT ID="LN">449 </FONT><A NAME="449"></A>        <FONT ID="If">if</FONT>(solution.subset.get (candidate.subset.nextSetBit (<FONT ID="IntegerLiteral">0</FONT>)))
<FONT ID="LN">450 </FONT><A NAME="450"></A>          <FONT ID="Continue">continue</FONT>;
<FONT ID="LN">451 </FONT><A NAME="451"></A>
<FONT ID="LN">452 </FONT><A NAME="452"></A>        tempSubset =joinSubsets(solution, rankedAttribsCopy.get (i));
<FONT ID="LN">453 </FONT><A NAME="453"></A>
<FONT ID="LN">454 </FONT><A NAME="454"></A>        <FONT ID="If">if</FONT>(tempSubset.merit &gt; bestMerit){
<FONT ID="LN">455 </FONT><A NAME="455"></A>          bestMerit = tempSubset.merit;
<FONT ID="LN">456 </FONT><A NAME="456"></A>          bestIndex = i;
<FONT ID="LN">457 </FONT><A NAME="457"></A>        }
<FONT ID="LN">458 </FONT><A NAME="458"></A>      }
<FONT ID="LN">459 </FONT><A NAME="459"></A>
<FONT ID="LN">460 </FONT><A NAME="460"></A>      <FONT ID="If">if</FONT>(bestIndex == -<FONT ID="IntegerLiteral">1</FONT>) <FONT ID="Break">break</FONT>;
<FONT ID="LN">461 </FONT><A NAME="461"></A>
<FONT ID="LN">462 </FONT><A NAME="462"></A>      solution =joinSubsets (solution, rankedAttribsCopy.get (bestIndex));
<FONT ID="LN">463 </FONT><A NAME="463"></A>      rankedAttribsCopy.remove (bestIndex);
<FONT ID="LN">464 </FONT><A NAME="464"></A>    }
<FONT ID="LN">465 </FONT><A NAME="465"></A>
<FONT ID="LN">466 </FONT><A NAME="466"></A>    <FONT ID="Return">return</FONT> solution;
<FONT ID="LN">467 </FONT><A NAME="467"></A>  }
<FONT ID="LN">468 </FONT><A NAME="468"></A>
<FONT ID="LN">469 </FONT><A NAME="469"></A>
<FONT ID="LN">470 </FONT><A NAME="470"></A>
<FONT ID="LN">471 </FONT><A NAME="471"></A>  <FONT ID="SingleLineComment">//--------Auxiliar methods****
<FONT ID="LN">472 </FONT><A NAME="472"></A></FONT>
<FONT ID="LN">473 </FONT><A NAME="473"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">474 </FONT><A NAME="474"></A>   * get the importance of an individual attribute according to his position in m_rankedAttribs List.
<FONT ID="LN">475 </FONT><A NAME="475"></A>   *
<FONT ID="LN">476 </FONT><A NAME="476"></A>   * @param idAttrib the index attribute of the attribute that we want to get the doubleRank
<FONT ID="LN">477 </FONT><A NAME="477"></A>   * @return a double giving the result. If is a good attribute the result will be a number near of 0(inclusive),
<FONT ID="LN">478 </FONT><A NAME="478"></A>   *                                     If is a bad one the result will be near of 1(exclusive).
<FONT ID="LN">479 </FONT><A NAME="479"></A>   */</FONT>
<FONT ID="LN">480 </FONT><A NAME="480"></A>  <FONT ID="Private">private</FONT> <FONT ID="Double">double</FONT> doubleRank(<FONT ID="Int">int</FONT> idAttrib){
<FONT ID="LN">481 </FONT><A NAME="481"></A>    <FONT ID="Int">int</FONT> rankSize = m_rankedAttribs.size ();
<FONT ID="LN">482 </FONT><A NAME="482"></A>    <FONT ID="Int">int</FONT> rankAttribute = -<FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">483 </FONT><A NAME="483"></A>
<FONT ID="LN">484 </FONT><A NAME="484"></A>    <FONT ID="If">if</FONT>(idAttrib == m_classIndex) <FONT ID="Return">return</FONT> -<FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">485 </FONT><A NAME="485"></A>
<FONT ID="LN">486 </FONT><A NAME="486"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; rankSize; i++) {
<FONT ID="LN">487 </FONT><A NAME="487"></A>      <FONT ID="If">if</FONT>(((Subset)m_rankedAttribs.get (i)).subset.nextSetBit (<FONT ID="IntegerLiteral">0</FONT>) == idAttrib){
<FONT ID="LN">488 </FONT><A NAME="488"></A>        rankAttribute = i;
<FONT ID="LN">489 </FONT><A NAME="489"></A>        <FONT ID="Break">break</FONT>;
<FONT ID="LN">490 </FONT><A NAME="490"></A>      }
<FONT ID="LN">491 </FONT><A NAME="491"></A>    }
<FONT ID="LN">492 </FONT><A NAME="492"></A>
<FONT ID="LN">493 </FONT><A NAME="493"></A>    <FONT ID="Return">return</FONT> rankAttribute/(<FONT ID="Double">double</FONT>)rankSize;
<FONT ID="LN">494 </FONT><A NAME="494"></A>  }
<FONT ID="LN">495 </FONT><A NAME="495"></A>
<FONT ID="LN">496 </FONT><A NAME="496"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">497 </FONT><A NAME="497"></A>   * Rank all the attributes individually acording to their merits
<FONT ID="LN">498 </FONT><A NAME="498"></A>   *
<FONT ID="LN">499 </FONT><A NAME="499"></A>   * @return an ordered List  of Subsets with just one attribute
<FONT ID="LN">500 </FONT><A NAME="500"></A>   * @exception Exception if the evaluation can not be completed
<FONT ID="LN">501 </FONT><A NAME="501"></A>   */</FONT>
<FONT ID="LN">502 </FONT><A NAME="502"></A>  <FONT ID="Private">private</FONT> List&lt;Subset&gt; RankEachAttribute()
<FONT ID="LN">503 </FONT><A NAME="503"></A>  <FONT ID="Throws">throws</FONT> Exception{
<FONT ID="LN">504 </FONT><A NAME="504"></A>
<FONT ID="LN">505 </FONT><A NAME="505"></A>    List&lt;Subset&gt; result =<FONT ID="New">new</FONT> ArrayList&lt;Subset&gt;();
<FONT ID="LN">506 </FONT><A NAME="506"></A>
<FONT ID="LN">507 </FONT><A NAME="507"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i&lt;m_numAttribs; i++) {
<FONT ID="LN">508 </FONT><A NAME="508"></A>      <FONT ID="If">if</FONT>(i==m_classIndex)<FONT ID="Continue">continue</FONT>;
<FONT ID="LN">509 </FONT><A NAME="509"></A>
<FONT ID="LN">510 </FONT><A NAME="510"></A>      BitSet an_Attribute =<FONT ID="New">new</FONT> BitSet(m_numAttribs);
<FONT ID="LN">511 </FONT><A NAME="511"></A>      an_Attribute.set (i);
<FONT ID="LN">512 </FONT><A NAME="512"></A>
<FONT ID="LN">513 </FONT><A NAME="513"></A>      <FONT ID="Double">double</FONT> merit =ASEvaluator.evaluateSubset (an_Attribute);
<FONT ID="LN">514 </FONT><A NAME="514"></A>      m_totalEvals++;
<FONT ID="LN">515 </FONT><A NAME="515"></A>
<FONT ID="LN">516 </FONT><A NAME="516"></A>      result.add (<FONT ID="New">new</FONT> Subset(an_Attribute, merit));
<FONT ID="LN">517 </FONT><A NAME="517"></A>    }
<FONT ID="LN">518 </FONT><A NAME="518"></A>
<FONT ID="LN">519 </FONT><A NAME="519"></A>    <FONT ID="Return">return</FONT> bubbleSubsetSort(result);
<FONT ID="LN">520 </FONT><A NAME="520"></A>  }
<FONT ID="LN">521 </FONT><A NAME="521"></A>
<FONT ID="LN">522 </FONT><A NAME="522"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">523 </FONT><A NAME="523"></A>   * Sort a List of subsets according to their merits
<FONT ID="LN">524 </FONT><A NAME="524"></A>   *
<FONT ID="LN">525 </FONT><A NAME="525"></A>   * @param subsetList the subsetList to be ordered
<FONT ID="LN">526 </FONT><A NAME="526"></A>   * @return a List with ordered subsets
<FONT ID="LN">527 </FONT><A NAME="527"></A>   */</FONT>
<FONT ID="LN">528 </FONT><A NAME="528"></A>  <FONT ID="Public">public</FONT> List&lt;Subset&gt; bubbleSubsetSort(List&lt;Subset&gt; subsetList){
<FONT ID="LN">529 </FONT><A NAME="529"></A>    List&lt;Subset&gt; result =<FONT ID="New">new</FONT> ArrayList&lt;Subset&gt;();
<FONT ID="LN">530 </FONT><A NAME="530"></A>
<FONT ID="LN">531 </FONT><A NAME="531"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i&lt;subsetList.size ()-<FONT ID="IntegerLiteral">1</FONT>; i++) {
<FONT ID="LN">532 </FONT><A NAME="532"></A>      Subset subset1 =subsetList.get (i);
<FONT ID="LN">533 </FONT><A NAME="533"></A>      <FONT ID="Double">double</FONT> merit1 =subset1.merit;
<FONT ID="LN">534 </FONT><A NAME="534"></A>
<FONT ID="LN">535 </FONT><A NAME="535"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = i+<FONT ID="IntegerLiteral">1</FONT>; j&lt;subsetList.size (); j++) {
<FONT ID="LN">536 </FONT><A NAME="536"></A>        Subset subset2 =subsetList.get (j);
<FONT ID="LN">537 </FONT><A NAME="537"></A>        <FONT ID="Double">double</FONT> merit2 =subset2.merit;
<FONT ID="LN">538 </FONT><A NAME="538"></A>
<FONT ID="LN">539 </FONT><A NAME="539"></A>        <FONT ID="If">if</FONT>(merit2 &gt; merit1){
<FONT ID="LN">540 </FONT><A NAME="540"></A>          Subset temp =subset1;
<FONT ID="LN">541 </FONT><A NAME="541"></A>
<FONT ID="LN">542 </FONT><A NAME="542"></A>          subsetList.set (i,subset2);
<FONT ID="LN">543 </FONT><A NAME="543"></A>          subsetList.set (j,temp);
<FONT ID="LN">544 </FONT><A NAME="544"></A>
<FONT ID="LN">545 </FONT><A NAME="545"></A>          subset1 =subset2;
<FONT ID="LN">546 </FONT><A NAME="546"></A>          merit1 =subset1.merit;
<FONT ID="LN">547 </FONT><A NAME="547"></A>        }
<FONT ID="LN">548 </FONT><A NAME="548"></A>      }
<FONT ID="LN">549 </FONT><A NAME="549"></A>    }
<FONT ID="LN">550 </FONT><A NAME="550"></A>    <FONT ID="Return">return</FONT> subsetList;
<FONT ID="LN">551 </FONT><A NAME="551"></A>  }
<FONT ID="LN">552 </FONT><A NAME="552"></A>
<FONT ID="LN">553 </FONT><A NAME="553"></A>
<FONT ID="LN">554 </FONT><A NAME="554"></A>
<FONT ID="LN">555 </FONT><A NAME="555"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">556 </FONT><A NAME="556"></A>   * Join two subsets
<FONT ID="LN">557 </FONT><A NAME="557"></A>   *
<FONT ID="LN">558 </FONT><A NAME="558"></A>   * @param subset1 one of the subsets
<FONT ID="LN">559 </FONT><A NAME="559"></A>   * @param subset2 the other subset
<FONT ID="LN">560 </FONT><A NAME="560"></A>   * @return a new Subset that is te result of the Join
<FONT ID="LN">561 </FONT><A NAME="561"></A>   * @exception Exception if the evaluation of the subsets can not be completed
<FONT ID="LN">562 </FONT><A NAME="562"></A>   */</FONT>
<FONT ID="LN">563 </FONT><A NAME="563"></A>  <FONT ID="Public">public</FONT> Subset joinSubsets(Subset subset1, Subset subset2)
<FONT ID="LN">564 </FONT><A NAME="564"></A>  <FONT ID="Throws">throws</FONT> Exception{
<FONT ID="LN">565 </FONT><A NAME="565"></A>    BitSet b1 =(BitSet)subset1.subset.clone ();
<FONT ID="LN">566 </FONT><A NAME="566"></A>    BitSet b2 =(BitSet)subset2.subset.clone ();
<FONT ID="LN">567 </FONT><A NAME="567"></A>
<FONT ID="LN">568 </FONT><A NAME="568"></A>    b1.or (b2);
<FONT ID="LN">569 </FONT><A NAME="569"></A>
<FONT ID="LN">570 </FONT><A NAME="570"></A>    <FONT ID="Double">double</FONT> newMerit =ASEvaluator.evaluateSubset (b1);
<FONT ID="LN">571 </FONT><A NAME="571"></A>    m_totalEvals++;
<FONT ID="LN">572 </FONT><A NAME="572"></A>
<FONT ID="LN">573 </FONT><A NAME="573"></A>    <FONT ID="Return">return</FONT> <FONT ID="New">new</FONT> Subset((BitSet)b1, newMerit);
<FONT ID="LN">574 </FONT><A NAME="574"></A>  }
<FONT ID="LN">575 </FONT><A NAME="575"></A>
<FONT ID="LN">576 </FONT><A NAME="576"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">577 </FONT><A NAME="577"></A>   * converts a BitSet into a list of attribute indexes
<FONT ID="LN">578 </FONT><A NAME="578"></A>   *
<FONT ID="LN">579 </FONT><A NAME="579"></A>   * @param group the BitSet to convert
<FONT ID="LN">580 </FONT><A NAME="580"></A>   * @return an array of attribute indexes
<FONT ID="LN">581 </FONT><A NAME="581"></A>   */</FONT>
<FONT ID="LN">582 </FONT><A NAME="582"></A>  <FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT>[] attributeList (BitSet group) {
<FONT ID="LN">583 </FONT><A NAME="583"></A>    <FONT ID="Int">int</FONT> count = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">584 </FONT><A NAME="584"></A>
<FONT ID="LN">585 </FONT><A NAME="585"></A>    <FONT ID="SingleLineComment">// count how many were selected
<FONT ID="LN">586 </FONT><A NAME="586"></A></FONT>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; m_numAttribs; i++) {
<FONT ID="LN">587 </FONT><A NAME="587"></A>      <FONT ID="If">if</FONT> (group.get(i)) {
<FONT ID="LN">588 </FONT><A NAME="588"></A>        count++;
<FONT ID="LN">589 </FONT><A NAME="589"></A>      }
<FONT ID="LN">590 </FONT><A NAME="590"></A>    }
<FONT ID="LN">591 </FONT><A NAME="591"></A>
<FONT ID="LN">592 </FONT><A NAME="592"></A>    <FONT ID="Int">int</FONT>[] list = <FONT ID="New">new</FONT> <FONT ID="Int">int</FONT>[count];
<FONT ID="LN">593 </FONT><A NAME="593"></A>    count = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">594 </FONT><A NAME="594"></A>
<FONT ID="LN">595 </FONT><A NAME="595"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; m_numAttribs; i++) {
<FONT ID="LN">596 </FONT><A NAME="596"></A>      <FONT ID="If">if</FONT> (group.get(i)) {
<FONT ID="LN">597 </FONT><A NAME="597"></A>        list[count++] = i;
<FONT ID="LN">598 </FONT><A NAME="598"></A>      }
<FONT ID="LN">599 </FONT><A NAME="599"></A>    }
<FONT ID="LN">600 </FONT><A NAME="600"></A>
<FONT ID="LN">601 </FONT><A NAME="601"></A>    <FONT ID="Return">return</FONT>  list;
<FONT ID="LN">602 </FONT><A NAME="602"></A>  }
<FONT ID="LN">603 </FONT><A NAME="603"></A>
<FONT ID="LN">604 </FONT><A NAME="604"></A>
<FONT ID="LN">605 </FONT><A NAME="605"></A>  <FONT ID="SingleLineComment">// Auxiliar Class for handling solutions and its respective merit
<FONT ID="LN">606 </FONT><A NAME="606"></A></FONT>  <FONT ID="Public">public</FONT> <FONT ID="Class">class</FONT> Subset <FONT ID="Implements">implements</FONT> Serializable{
<FONT ID="LN">607 </FONT><A NAME="607"></A>
<FONT ID="LN">608 </FONT><A NAME="608"></A>    <FONT ID="Double">double</FONT> merit;
<FONT ID="LN">609 </FONT><A NAME="609"></A>    BitSet subset;
<FONT ID="LN">610 </FONT><A NAME="610"></A>
<FONT ID="LN">611 </FONT><A NAME="611"></A>    <FONT ID="Public">public</FONT> Subset(BitSet subset, <FONT ID="Double">double</FONT> merit){
<FONT ID="LN">612 </FONT><A NAME="612"></A>      <FONT ID="This">this</FONT>.subset = (BitSet)subset.clone ();
<FONT ID="LN">613 </FONT><A NAME="613"></A>      <FONT ID="This">this</FONT>.merit = merit;
<FONT ID="LN">614 </FONT><A NAME="614"></A>    }
<FONT ID="LN">615 </FONT><A NAME="615"></A>
<FONT ID="LN">616 </FONT><A NAME="616"></A>    <FONT ID="Public">public</FONT> Subset(){
<FONT ID="LN">617 </FONT><A NAME="617"></A>      <FONT ID="This">this</FONT>.subset =<FONT ID="Null">null</FONT>;
<FONT ID="LN">618 </FONT><A NAME="618"></A>      <FONT ID="This">this</FONT>.merit =-<FONT ID="FloatPointLiteral">1.0</FONT>;
<FONT ID="LN">619 </FONT><A NAME="619"></A>    }
<FONT ID="LN">620 </FONT><A NAME="620"></A>
<FONT ID="LN">621 </FONT><A NAME="621"></A>    <FONT ID="Public">public</FONT> <FONT ID="Boolean">boolean</FONT> isEqual(Subset otherSubset){
<FONT ID="LN">622 </FONT><A NAME="622"></A>      <FONT ID="If">if</FONT>(subset.equals (otherSubset.subset))<FONT ID="Return">return</FONT> <FONT ID="True">true</FONT>;
<FONT ID="LN">623 </FONT><A NAME="623"></A>      <FONT ID="Return">return</FONT> <FONT ID="False">false</FONT>;
<FONT ID="LN">624 </FONT><A NAME="624"></A>    }
<FONT ID="LN">625 </FONT><A NAME="625"></A>
<FONT ID="LN">626 </FONT><A NAME="626"></A>    <FONT ID="Public">public</FONT> Subset clone(){
<FONT ID="LN">627 </FONT><A NAME="627"></A>      <FONT ID="Return">return</FONT> <FONT ID="New">new</FONT> Subset((BitSet)subset.clone (), <FONT ID="This">this</FONT>.merit);
<FONT ID="LN">628 </FONT><A NAME="628"></A>    }
<FONT ID="LN">629 </FONT><A NAME="629"></A>
<FONT ID="LN">630 </FONT><A NAME="630"></A>    <FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> cardinality(){
<FONT ID="LN">631 </FONT><A NAME="631"></A>      <FONT ID="If">if</FONT>(subset == <FONT ID="Null">null</FONT>) <FONT ID="Return">return</FONT> <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">632 </FONT><A NAME="632"></A>      <FONT ID="Return">return</FONT> subset.cardinality ();
<FONT ID="LN">633 </FONT><A NAME="633"></A>    }
<FONT ID="LN">634 </FONT><A NAME="634"></A>
<FONT ID="LN">635 </FONT><A NAME="635"></A>    <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> flip(<FONT ID="Int">int</FONT> index)
<FONT ID="LN">636 </FONT><A NAME="636"></A>    <FONT ID="Throws">throws</FONT> Exception{
<FONT ID="LN">637 </FONT><A NAME="637"></A>
<FONT ID="LN">638 </FONT><A NAME="638"></A>      subset.flip (index);
<FONT ID="LN">639 </FONT><A NAME="639"></A>      merit = ASEvaluator.evaluateSubset (subset);
<FONT ID="LN">640 </FONT><A NAME="640"></A>      m_totalEvals ++;
<FONT ID="LN">641 </FONT><A NAME="641"></A>    }
<FONT ID="LN">642 </FONT><A NAME="642"></A>
<FONT ID="LN">643 </FONT><A NAME="643"></A>    <FONT ID="Public">public</FONT> <FONT ID="Boolean">boolean</FONT> contains(<FONT ID="Int">int</FONT> indexAttribute){
<FONT ID="LN">644 </FONT><A NAME="644"></A>      <FONT ID="Return">return</FONT> subset.get (indexAttribute);
<FONT ID="LN">645 </FONT><A NAME="645"></A>    }
<FONT ID="LN">646 </FONT><A NAME="646"></A>  }
<FONT ID="LN">647 </FONT><A NAME="647"></A>  <FONT ID="SingleLineComment">//..........
<FONT ID="LN">648 </FONT><A NAME="648"></A></FONT>
<FONT ID="LN">649 </FONT><A NAME="649"></A>
<FONT ID="LN">650 </FONT><A NAME="650"></A>  <FONT ID="SingleLineComment">// Test Methods
<FONT ID="LN">651 </FONT><A NAME="651"></A></FONT>
<FONT ID="LN">652 </FONT><A NAME="652"></A>  <FONT ID="Public">public</FONT> String printSubset(Subset subset){
<FONT ID="LN">653 </FONT><A NAME="653"></A>    StringBuffer bufferString = <FONT ID="New">new</FONT> StringBuffer();
<FONT ID="LN">654 </FONT><A NAME="654"></A>
<FONT ID="LN">655 </FONT><A NAME="655"></A>    <FONT ID="If">if</FONT>(subset == <FONT ID="Null">null</FONT>){
<FONT ID="LN">656 </FONT><A NAME="656"></A>      <FONT ID="SingleLineComment">//System.out.println ("null");
<FONT ID="LN">657 </FONT><A NAME="657"></A></FONT>      <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">""</FONT>;
<FONT ID="LN">658 </FONT><A NAME="658"></A>    }
<FONT ID="LN">659 </FONT><A NAME="659"></A>
<FONT ID="LN">660 </FONT><A NAME="660"></A>    BitSet bits =subset.subset;
<FONT ID="LN">661 </FONT><A NAME="661"></A>    <FONT ID="Double">double</FONT> merit =subset.merit;
<FONT ID="LN">662 </FONT><A NAME="662"></A>    List&lt;Integer&gt; indexes =<FONT ID="New">new</FONT> ArrayList&lt;Integer&gt;();
<FONT ID="LN">663 </FONT><A NAME="663"></A>
<FONT ID="LN">664 </FONT><A NAME="664"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i&lt;m_numAttribs; i++) {
<FONT ID="LN">665 </FONT><A NAME="665"></A>      <FONT ID="If">if</FONT>(bits.get (i)){
<FONT ID="LN">666 </FONT><A NAME="666"></A>        <FONT ID="SingleLineComment">//System.out.print ("1");
<FONT ID="LN">667 </FONT><A NAME="667"></A></FONT>        indexes.add (i+<FONT ID="IntegerLiteral">1</FONT>);
<FONT ID="LN">668 </FONT><A NAME="668"></A>      }
<FONT ID="LN">669 </FONT><A NAME="669"></A>      <FONT ID="SingleLineComment">//else System.out.print ("0");
<FONT ID="LN">670 </FONT><A NAME="670"></A></FONT>    }
<FONT ID="LN">671 </FONT><A NAME="671"></A>    bufferString.append (Utils.doubleToString (merit,<FONT ID="IntegerLiteral">8</FONT>,<FONT ID="IntegerLiteral">5</FONT>)+<FONT ID="StringLiteral">"\t "</FONT>+indexes.toString ()+<FONT ID="StringLiteral">"\n"</FONT>);
<FONT ID="LN">672 </FONT><A NAME="672"></A>    <FONT ID="SingleLineComment">//System.out.print (" with a merit of: "+merit);
<FONT ID="LN">673 </FONT><A NAME="673"></A></FONT>
<FONT ID="LN">674 </FONT><A NAME="674"></A>    <FONT ID="Return">return</FONT> bufferString.toString ();
<FONT ID="LN">675 </FONT><A NAME="675"></A>  }
<FONT ID="LN">676 </FONT><A NAME="676"></A>
<FONT ID="LN">677 </FONT><A NAME="677"></A>  <FONT ID="SingleLineComment">//........
<FONT ID="LN">678 </FONT><A NAME="678"></A></FONT>
<FONT ID="LN">679 </FONT><A NAME="679"></A>
<FONT ID="LN">680 </FONT><A NAME="680"></A>
<FONT ID="LN">681 </FONT><A NAME="681"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">682 </FONT><A NAME="682"></A>   * Returns a string describing this search method
<FONT ID="LN">683 </FONT><A NAME="683"></A>   * @return a description of the search suitable for
<FONT ID="LN">684 </FONT><A NAME="684"></A>   * displaying in the explorer/experimenter gui
<FONT ID="LN">685 </FONT><A NAME="685"></A>   */</FONT>
<FONT ID="LN">686 </FONT><A NAME="686"></A>  <FONT ID="Public">public</FONT> String globalInfo() {
<FONT ID="LN">687 </FONT><A NAME="687"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"Tabu Search :\n\nPerforms a search  "</FONT>
<FONT ID="LN">688 </FONT><A NAME="688"></A>    +<FONT ID="StringLiteral">"through "</FONT>
<FONT ID="LN">689 </FONT><A NAME="689"></A>    +<FONT ID="StringLiteral">"the space of attribute subsets. Evading local maximums by accepting bad and diverse solutions "</FONT>
<FONT ID="LN">690 </FONT><A NAME="690"></A>    +<FONT ID="StringLiteral">"and make further search in the best soluions."</FONT>
<FONT ID="LN">691 </FONT><A NAME="691"></A>    +<FONT ID="StringLiteral">" Stops when there's not more improvement in n iterations\n;"</FONT>
<FONT ID="LN">692 </FONT><A NAME="692"></A>    + <FONT ID="StringLiteral">"For more information see:\n\n"</FONT>
<FONT ID="LN">693 </FONT><A NAME="693"></A>    + getTechnicalInformation().toString();
<FONT ID="LN">694 </FONT><A NAME="694"></A>  }
<FONT ID="LN">695 </FONT><A NAME="695"></A>
<FONT ID="LN">696 </FONT><A NAME="696"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">697 </FONT><A NAME="697"></A>   * Returns an instance of a TechnicalInformation object, containing
<FONT ID="LN">698 </FONT><A NAME="698"></A>   * detailed information about the technical background of this class,
<FONT ID="LN">699 </FONT><A NAME="699"></A>   * e.g., paper reference or book this class is based on.
<FONT ID="LN">700 </FONT><A NAME="700"></A>   *
<FONT ID="LN">701 </FONT><A NAME="701"></A>   * @return the technical information about this class
<FONT ID="LN">702 </FONT><A NAME="702"></A>   */</FONT>
<FONT ID="LN">703 </FONT><A NAME="703"></A>  <FONT ID="Public">public</FONT> <A HREF="../../weka/core/TechnicalInformation.java.html">TechnicalInformation</A> getTechnicalInformation() {
<FONT ID="LN">704 </FONT><A NAME="704"></A>    <A HREF="../../weka/core/TechnicalInformation.java.html">TechnicalInformation</A>        result;
<FONT ID="LN">705 </FONT><A NAME="705"></A>
<FONT ID="LN">706 </FONT><A NAME="706"></A>    result = <FONT ID="New">new</FONT> <A HREF="../../weka/core/TechnicalInformation.java.html">TechnicalInformation</A>(Type.BOOK);
<FONT ID="LN">707 </FONT><A NAME="707"></A>    result.setValue(Field.AUTHOR, <FONT ID="StringLiteral">"Abdel-Rahman Hedar, Jue Wangy, and Masao Fukushima"</FONT>);
<FONT ID="LN">708 </FONT><A NAME="708"></A>    result.setValue(Field.MONTH, <FONT ID="StringLiteral">"July"</FONT>);
<FONT ID="LN">709 </FONT><A NAME="709"></A>    result.setValue(Field.YEAR, <FONT ID="StringLiteral">"2006"</FONT>);
<FONT ID="LN">710 </FONT><A NAME="710"></A>    result.setValue(Field.TITLE, <FONT ID="StringLiteral">"Tabu Search for Attribute Reduction in Rough Set Theory"</FONT>);
<FONT ID="LN">711 </FONT><A NAME="711"></A>    result.setValue(Field.LANGUAGE, <FONT ID="StringLiteral">"English"</FONT>);
<FONT ID="LN">712 </FONT><A NAME="712"></A>
<FONT ID="LN">713 </FONT><A NAME="713"></A>    <FONT ID="Return">return</FONT> result;
<FONT ID="LN">714 </FONT><A NAME="714"></A>  }
<FONT ID="LN">715 </FONT><A NAME="715"></A>
<FONT ID="LN">716 </FONT><A NAME="716"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">717 </FONT><A NAME="717"></A>   * Returns the revision string.
<FONT ID="LN">718 </FONT><A NAME="718"></A>   *
<FONT ID="LN">719 </FONT><A NAME="719"></A>   * @return the revision
<FONT ID="LN">720 </FONT><A NAME="720"></A>   */</FONT>
<FONT ID="LN">721 </FONT><A NAME="721"></A>  <FONT ID="Public">public</FONT> String getRevision() {
<FONT ID="LN">722 </FONT><A NAME="722"></A>    <FONT ID="Return">return</FONT> RevisionUtils.extract(<FONT ID="StringLiteral">"$Revision: 4976 $"</FONT>);
<FONT ID="LN">723 </FONT><A NAME="723"></A>  }
<FONT ID="LN">724 </FONT><A NAME="724"></A>
<FONT ID="LN">725 </FONT><A NAME="725"></A>  <FONT ID="Public">public</FONT> TabuSearch() {
<FONT ID="LN">726 </FONT><A NAME="726"></A>    resetOptions();
<FONT ID="LN">727 </FONT><A NAME="727"></A>  }
<FONT ID="LN">728 </FONT><A NAME="728"></A>
<FONT ID="LN">729 </FONT><A NAME="729"></A>
<FONT ID="LN">730 </FONT><A NAME="730"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">731 </FONT><A NAME="731"></A>   * Returns the tip text for this property
<FONT ID="LN">732 </FONT><A NAME="732"></A>   * @return tip text for this property suitable for
<FONT ID="LN">733 </FONT><A NAME="733"></A>   * displaying in the explorer/experimenter gui
<FONT ID="LN">734 </FONT><A NAME="734"></A>   */</FONT>
<FONT ID="LN">735 </FONT><A NAME="735"></A>  <FONT ID="Public">public</FONT> String seedTipText() {
<FONT ID="LN">736 </FONT><A NAME="736"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"Set the random seed."</FONT>;
<FONT ID="LN">737 </FONT><A NAME="737"></A>  }
<FONT ID="LN">738 </FONT><A NAME="738"></A>
<FONT ID="LN">739 </FONT><A NAME="739"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">740 </FONT><A NAME="740"></A>   * set the seed for random number generation
<FONT ID="LN">741 </FONT><A NAME="741"></A>   * @param s seed value
<FONT ID="LN">742 </FONT><A NAME="742"></A>   */</FONT>
<FONT ID="LN">743 </FONT><A NAME="743"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setSeed(<FONT ID="Int">int</FONT> s) {
<FONT ID="LN">744 </FONT><A NAME="744"></A>    m_seed = s;
<FONT ID="LN">745 </FONT><A NAME="745"></A>  }
<FONT ID="LN">746 </FONT><A NAME="746"></A>
<FONT ID="LN">747 </FONT><A NAME="747"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">748 </FONT><A NAME="748"></A>   * get the value of the random number generator's seed
<FONT ID="LN">749 </FONT><A NAME="749"></A>   * @return the seed for random number generation
<FONT ID="LN">750 </FONT><A NAME="750"></A>   */</FONT>
<FONT ID="LN">751 </FONT><A NAME="751"></A>  <FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> getSeed() {
<FONT ID="LN">752 </FONT><A NAME="752"></A>    <FONT ID="Return">return</FONT> m_seed;
<FONT ID="LN">753 </FONT><A NAME="753"></A>  }
<FONT ID="LN">754 </FONT><A NAME="754"></A>
<FONT ID="LN">755 </FONT><A NAME="755"></A>
<FONT ID="LN">756 </FONT><A NAME="756"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">757 </FONT><A NAME="757"></A>   * Returns the tip text for this property
<FONT ID="LN">758 </FONT><A NAME="758"></A>   * @return tip text for this property suitable for
<FONT ID="LN">759 </FONT><A NAME="759"></A>   * displaying in the explorer/experimenter gui
<FONT ID="LN">760 </FONT><A NAME="760"></A>   */</FONT>
<FONT ID="LN">761 </FONT><A NAME="761"></A>  <FONT ID="Public">public</FONT> String diversificationProbTipText() {
<FONT ID="LN">762 </FONT><A NAME="762"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"Set the probability of diversification. This is the probability of "</FONT>
<FONT ID="LN">763 </FONT><A NAME="763"></A>    +<FONT ID="StringLiteral">"change of search subspace in an abrupt way"</FONT>;
<FONT ID="LN">764 </FONT><A NAME="764"></A>  }
<FONT ID="LN">765 </FONT><A NAME="765"></A>
<FONT ID="LN">766 </FONT><A NAME="766"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">767 </FONT><A NAME="767"></A>   * set the probability of diverification
<FONT ID="LN">768 </FONT><A NAME="768"></A>   * @param p the probability of change of search subspace in an abrupt way
<FONT ID="LN">769 </FONT><A NAME="769"></A>   */</FONT>
<FONT ID="LN">770 </FONT><A NAME="770"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setDiversificationProb(<FONT ID="Double">double</FONT> p) {
<FONT ID="LN">771 </FONT><A NAME="771"></A>    m_diversificationProb = p;
<FONT ID="LN">772 </FONT><A NAME="772"></A>  }
<FONT ID="LN">773 </FONT><A NAME="773"></A>
<FONT ID="LN">774 </FONT><A NAME="774"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">775 </FONT><A NAME="775"></A>   * get the probability of diversification
<FONT ID="LN">776 </FONT><A NAME="776"></A>   * @return the probability of diversification
<FONT ID="LN">777 </FONT><A NAME="777"></A>   */</FONT>
<FONT ID="LN">778 </FONT><A NAME="778"></A>  <FONT ID="Public">public</FONT> <FONT ID="Double">double</FONT> getDiversificationProb() {
<FONT ID="LN">779 </FONT><A NAME="779"></A>    <FONT ID="Return">return</FONT> m_diversificationProb;
<FONT ID="LN">780 </FONT><A NAME="780"></A>  }
<FONT ID="LN">781 </FONT><A NAME="781"></A>
<FONT ID="LN">782 </FONT><A NAME="782"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">783 </FONT><A NAME="783"></A>   * Returns the tip text for this property
<FONT ID="LN">784 </FONT><A NAME="784"></A>   * @return tip text for this property suitable for
<FONT ID="LN">785 </FONT><A NAME="785"></A>   * displaying in the explorer/experimenter gui
<FONT ID="LN">786 </FONT><A NAME="786"></A>   */</FONT>
<FONT ID="LN">787 </FONT><A NAME="787"></A>  <FONT ID="Public">public</FONT> String numNeighborhoodTipText() {
<FONT ID="LN">788 </FONT><A NAME="788"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"Set the number of current solution's neighborhood"</FONT>+
<FONT ID="LN">789 </FONT><A NAME="789"></A>    <FONT ID="StringLiteral">" to generate for looking for a better solution"</FONT>;
<FONT ID="LN">790 </FONT><A NAME="790"></A>  }
<FONT ID="LN">791 </FONT><A NAME="791"></A>
<FONT ID="LN">792 </FONT><A NAME="792"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">793 </FONT><A NAME="793"></A>   * set the number of neighborhood
<FONT ID="LN">794 </FONT><A NAME="794"></A>   * @param n the number of neighborhood
<FONT ID="LN">795 </FONT><A NAME="795"></A>   */</FONT>
<FONT ID="LN">796 </FONT><A NAME="796"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setNumNeighborhood(<FONT ID="Int">int</FONT> n) {
<FONT ID="LN">797 </FONT><A NAME="797"></A>    m_numNeighborhood = n;
<FONT ID="LN">798 </FONT><A NAME="798"></A>  }
<FONT ID="LN">799 </FONT><A NAME="799"></A>
<FONT ID="LN">800 </FONT><A NAME="800"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">801 </FONT><A NAME="801"></A>   * get the number of neighborhood
<FONT ID="LN">802 </FONT><A NAME="802"></A>   * @return the number of neighborhood
<FONT ID="LN">803 </FONT><A NAME="803"></A>   */</FONT>
<FONT ID="LN">804 </FONT><A NAME="804"></A>  <FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> getNumNeighborhood() {
<FONT ID="LN">805 </FONT><A NAME="805"></A>    <FONT ID="Return">return</FONT> m_numNeighborhood;
<FONT ID="LN">806 </FONT><A NAME="806"></A>  }
<FONT ID="LN">807 </FONT><A NAME="807"></A>
<FONT ID="LN">808 </FONT><A NAME="808"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">809 </FONT><A NAME="809"></A>   * Returns the tip text for this property
<FONT ID="LN">810 </FONT><A NAME="810"></A>   * @return tip text for this property suitable for
<FONT ID="LN">811 </FONT><A NAME="811"></A>   * displaying in the explorer/experimenter gui
<FONT ID="LN">812 </FONT><A NAME="812"></A>   */</FONT>
<FONT ID="LN">813 </FONT><A NAME="813"></A>  <FONT ID="Public">public</FONT> String initialSizeTipText() {
<FONT ID="LN">814 </FONT><A NAME="814"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"Set the number of attributes that are going to be in the initial Solution"</FONT>;
<FONT ID="LN">815 </FONT><A NAME="815"></A>  }
<FONT ID="LN">816 </FONT><A NAME="816"></A>
<FONT ID="LN">817 </FONT><A NAME="817"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">818 </FONT><A NAME="818"></A>   * set the number of attributes that are going to be in the initial Solution
<FONT ID="LN">819 </FONT><A NAME="819"></A>   * @param n the number of attributes
<FONT ID="LN">820 </FONT><A NAME="820"></A>   */</FONT>
<FONT ID="LN">821 </FONT><A NAME="821"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setInitialSize(<FONT ID="Int">int</FONT> n) {
<FONT ID="LN">822 </FONT><A NAME="822"></A>    m_initialSize = n;
<FONT ID="LN">823 </FONT><A NAME="823"></A>  }
<FONT ID="LN">824 </FONT><A NAME="824"></A>
<FONT ID="LN">825 </FONT><A NAME="825"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">826 </FONT><A NAME="826"></A>   * get the number of of attributes that are going to be in the initial Solution
<FONT ID="LN">827 </FONT><A NAME="827"></A>   * @return the number of attributes
<FONT ID="LN">828 </FONT><A NAME="828"></A>   */</FONT>
<FONT ID="LN">829 </FONT><A NAME="829"></A>  <FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> getInitialSize() {
<FONT ID="LN">830 </FONT><A NAME="830"></A>    <FONT ID="Return">return</FONT> m_initialSize;
<FONT ID="LN">831 </FONT><A NAME="831"></A>  }
<FONT ID="LN">832 </FONT><A NAME="832"></A>
<FONT ID="LN">833 </FONT><A NAME="833"></A>
<FONT ID="LN">834 </FONT><A NAME="834"></A>  <FONT ID="Public">public</FONT> Enumeration listOptions () {
<FONT ID="LN">835 </FONT><A NAME="835"></A>    Vector newVector = <FONT ID="New">new</FONT> Vector(<FONT ID="IntegerLiteral">4</FONT>);
<FONT ID="LN">836 </FONT><A NAME="836"></A>
<FONT ID="LN">837 </FONT><A NAME="837"></A>    newVector.addElement(<FONT ID="New">new</FONT> <A HREF="../../weka/core/Option.java.html">Option</A>(<FONT ID="StringLiteral">"\tSpecify the number of attributes "</FONT>
<FONT ID="LN">838 </FONT><A NAME="838"></A>        + <FONT ID="StringLiteral">"\n\tin the initial Solution.."</FONT>
<FONT ID="LN">839 </FONT><A NAME="839"></A>        ,<FONT ID="StringLiteral">"Z"</FONT>,<FONT ID="IntegerLiteral">1</FONT>
<FONT ID="LN">840 </FONT><A NAME="840"></A>        , <FONT ID="StringLiteral">"-Z &lt;numInitialSolution&gt;"</FONT>));
<FONT ID="LN">841 </FONT><A NAME="841"></A>    newVector.addElement(<FONT ID="New">new</FONT> <A HREF="../../weka/core/Option.java.html">Option</A>(<FONT ID="StringLiteral">"\tSpecify the diversification probabilities,"</FONT>
<FONT ID="LN">842 </FONT><A NAME="842"></A>        + <FONT ID="StringLiteral">"\n\tif this value is near to 0 then the best attributes"</FONT>
<FONT ID="LN">843 </FONT><A NAME="843"></A>        + <FONT ID="StringLiteral">"\n\t will have more probabilities of keeping in the new diverse solution"</FONT>
<FONT ID="LN">844 </FONT><A NAME="844"></A>        , <FONT ID="StringLiteral">"P"</FONT>, <FONT ID="IntegerLiteral">1</FONT>
<FONT ID="LN">845 </FONT><A NAME="845"></A>        , <FONT ID="StringLiteral">"-P &lt;diversificationProb&gt;"</FONT>));
<FONT ID="LN">846 </FONT><A NAME="846"></A>    newVector.addElement(<FONT ID="New">new</FONT> <A HREF="../../weka/core/Option.java.html">Option</A>(<FONT ID="StringLiteral">"\tSet the random number seed."</FONT>
<FONT ID="LN">847 </FONT><A NAME="847"></A>        +<FONT ID="StringLiteral">"\n\t(default = 1)"</FONT>
<FONT ID="LN">848 </FONT><A NAME="848"></A>        , <FONT ID="StringLiteral">"S"</FONT>, <FONT ID="IntegerLiteral">1</FONT>, <FONT ID="StringLiteral">"-S &lt;seed&gt;"</FONT>));
<FONT ID="LN">849 </FONT><A NAME="849"></A>    newVector.addElement(<FONT ID="New">new</FONT> <A HREF="../../weka/core/Option.java.html">Option</A>(<FONT ID="StringLiteral">"\tSet the number of neighbors to generate."</FONT>
<FONT ID="LN">850 </FONT><A NAME="850"></A>        , <FONT ID="StringLiteral">"N"</FONT>, <FONT ID="IntegerLiteral">1</FONT>, <FONT ID="StringLiteral">"-N &lt;number of neighbors&gt;"</FONT>));
<FONT ID="LN">851 </FONT><A NAME="851"></A>
<FONT ID="LN">852 </FONT><A NAME="852"></A>    <FONT ID="Return">return</FONT>  newVector.elements();
<FONT ID="LN">853 </FONT><A NAME="853"></A>  }
<FONT ID="LN">854 </FONT><A NAME="854"></A>
<FONT ID="LN">855 </FONT><A NAME="855"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">856 </FONT><A NAME="856"></A>   * 
<FONT ID="LN">857 </FONT><A NAME="857"></A>   &lt;!-- options-start --&gt;
<FONT ID="LN">858 </FONT><A NAME="858"></A>   * Valid options are: &lt;p/&gt;
<FONT ID="LN">859 </FONT><A NAME="859"></A>   * 
<FONT ID="LN">860 </FONT><A NAME="860"></A>   * &lt;pre&gt; -Z &amp;lt;numInitialSolution&amp;gt;
<FONT ID="LN">861 </FONT><A NAME="861"></A>   *  Specify the number of attributes 
<FONT ID="LN">862 </FONT><A NAME="862"></A>   *  in the initial Solution..&lt;/pre&gt;
<FONT ID="LN">863 </FONT><A NAME="863"></A>   * 
<FONT ID="LN">864 </FONT><A NAME="864"></A>   * &lt;pre&gt; -P &amp;lt;diversificationProb&amp;gt;
<FONT ID="LN">865 </FONT><A NAME="865"></A>   *  Specify the diversification probabilities,
<FONT ID="LN">866 </FONT><A NAME="866"></A>   *  if this value is near to 0 then the best attributes
<FONT ID="LN">867 </FONT><A NAME="867"></A>   *   will have more probabilities of keeping in the new diverse solution&lt;/pre&gt;
<FONT ID="LN">868 </FONT><A NAME="868"></A>   * 
<FONT ID="LN">869 </FONT><A NAME="869"></A>   * &lt;pre&gt; -S &amp;lt;seed&amp;gt;
<FONT ID="LN">870 </FONT><A NAME="870"></A>   *  Set the random number seed.
<FONT ID="LN">871 </FONT><A NAME="871"></A>   *  (default = 1)&lt;/pre&gt;
<FONT ID="LN">872 </FONT><A NAME="872"></A>   * 
<FONT ID="LN">873 </FONT><A NAME="873"></A>   * &lt;pre&gt; -N &amp;lt;number of neighbors&amp;gt;
<FONT ID="LN">874 </FONT><A NAME="874"></A>   *  Set the number of neighbors to generate.&lt;/pre&gt;
<FONT ID="LN">875 </FONT><A NAME="875"></A>   * 
<FONT ID="LN">876 </FONT><A NAME="876"></A>   &lt;!-- options-end --&gt;
<FONT ID="LN">877 </FONT><A NAME="877"></A>   *
<FONT ID="LN">878 </FONT><A NAME="878"></A>   * @param options the list of options as an array of strings
<FONT ID="LN">879 </FONT><A NAME="879"></A>   * @exception Exception if an option is not supported
<FONT ID="LN">880 </FONT><A NAME="880"></A>   *
<FONT ID="LN">881 </FONT><A NAME="881"></A>   **/</FONT>
<FONT ID="LN">882 </FONT><A NAME="882"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setOptions (String[] options)
<FONT ID="LN">883 </FONT><A NAME="883"></A>  <FONT ID="Throws">throws</FONT> Exception {
<FONT ID="LN">884 </FONT><A NAME="884"></A>    String optionString;
<FONT ID="LN">885 </FONT><A NAME="885"></A>    resetOptions();
<FONT ID="LN">886 </FONT><A NAME="886"></A>
<FONT ID="LN">887 </FONT><A NAME="887"></A>
<FONT ID="LN">888 </FONT><A NAME="888"></A>    optionString = Utils.getOption(<FONT ID="CharacerLiteral">'Z'</FONT>, options);
<FONT ID="LN">889 </FONT><A NAME="889"></A>    <FONT ID="If">if</FONT> (optionString.length() != <FONT ID="IntegerLiteral">0</FONT>) {
<FONT ID="LN">890 </FONT><A NAME="890"></A>      setInitialSize (Integer.parseInt(optionString));
<FONT ID="LN">891 </FONT><A NAME="891"></A>    }
<FONT ID="LN">892 </FONT><A NAME="892"></A>
<FONT ID="LN">893 </FONT><A NAME="893"></A>    optionString = Utils.getOption(<FONT ID="CharacerLiteral">'P'</FONT>, options);
<FONT ID="LN">894 </FONT><A NAME="894"></A>    <FONT ID="If">if</FONT> (optionString.length() != <FONT ID="IntegerLiteral">0</FONT>) {
<FONT ID="LN">895 </FONT><A NAME="895"></A>      setDiversificationProb (Double.parseDouble(optionString));
<FONT ID="LN">896 </FONT><A NAME="896"></A>    }
<FONT ID="LN">897 </FONT><A NAME="897"></A>
<FONT ID="LN">898 </FONT><A NAME="898"></A>    optionString = Utils.getOption(<FONT ID="CharacerLiteral">'S'</FONT>, options);
<FONT ID="LN">899 </FONT><A NAME="899"></A>    <FONT ID="If">if</FONT> (optionString.length() != <FONT ID="IntegerLiteral">0</FONT>) {
<FONT ID="LN">900 </FONT><A NAME="900"></A>      setSeed(Integer.parseInt(optionString));
<FONT ID="LN">901 </FONT><A NAME="901"></A>    }
<FONT ID="LN">902 </FONT><A NAME="902"></A>
<FONT ID="LN">903 </FONT><A NAME="903"></A>    optionString = Utils.getOption(<FONT ID="CharacerLiteral">'N'</FONT>, options);
<FONT ID="LN">904 </FONT><A NAME="904"></A>    <FONT ID="If">if</FONT> (optionString.length() != <FONT ID="IntegerLiteral">0</FONT>) {
<FONT ID="LN">905 </FONT><A NAME="905"></A>      setNumNeighborhood (Integer.parseInt(optionString));
<FONT ID="LN">906 </FONT><A NAME="906"></A>    }
<FONT ID="LN">907 </FONT><A NAME="907"></A>
<FONT ID="LN">908 </FONT><A NAME="908"></A>  }
<FONT ID="LN">909 </FONT><A NAME="909"></A>
<FONT ID="LN">910 </FONT><A NAME="910"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">911 </FONT><A NAME="911"></A>   * Gets the current settings of TabuSearch.
<FONT ID="LN">912 </FONT><A NAME="912"></A>   *
<FONT ID="LN">913 </FONT><A NAME="913"></A>   * @return an array of strings suitable for passing to setOptions()
<FONT ID="LN">914 </FONT><A NAME="914"></A>   */</FONT>
<FONT ID="LN">915 </FONT><A NAME="915"></A>  <FONT ID="Public">public</FONT> String[] getOptions () {
<FONT ID="LN">916 </FONT><A NAME="916"></A>    String[] options = <FONT ID="New">new</FONT> String[<FONT ID="IntegerLiteral">8</FONT>];
<FONT ID="LN">917 </FONT><A NAME="917"></A>    <FONT ID="Int">int</FONT> current = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">918 </FONT><A NAME="918"></A>
<FONT ID="LN">919 </FONT><A NAME="919"></A>    options[current++] = <FONT ID="StringLiteral">"-Z"</FONT>;
<FONT ID="LN">920 </FONT><A NAME="920"></A>    options[current++] = <FONT ID="StringLiteral">""</FONT> + getInitialSize ();
<FONT ID="LN">921 </FONT><A NAME="921"></A>
<FONT ID="LN">922 </FONT><A NAME="922"></A>    options[current++] = <FONT ID="StringLiteral">"-P"</FONT>;
<FONT ID="LN">923 </FONT><A NAME="923"></A>    options[current++] = <FONT ID="StringLiteral">""</FONT>+getDiversificationProb ();
<FONT ID="LN">924 </FONT><A NAME="924"></A>
<FONT ID="LN">925 </FONT><A NAME="925"></A>    options[current++] = <FONT ID="StringLiteral">"-S"</FONT>;
<FONT ID="LN">926 </FONT><A NAME="926"></A>    options[current++] = <FONT ID="StringLiteral">""</FONT> + getSeed();
<FONT ID="LN">927 </FONT><A NAME="927"></A>
<FONT ID="LN">928 </FONT><A NAME="928"></A>    options[current++] = <FONT ID="StringLiteral">"-N"</FONT>;
<FONT ID="LN">929 </FONT><A NAME="929"></A>    options[current++] = <FONT ID="StringLiteral">""</FONT> + getNumNeighborhood ();
<FONT ID="LN">930 </FONT><A NAME="930"></A>
<FONT ID="LN">931 </FONT><A NAME="931"></A>
<FONT ID="LN">932 </FONT><A NAME="932"></A>    <FONT ID="While">while</FONT> (current &lt; options.length)
<FONT ID="LN">933 </FONT><A NAME="933"></A>      options[current++] = <FONT ID="StringLiteral">""</FONT>;
<FONT ID="LN">934 </FONT><A NAME="934"></A>
<FONT ID="LN">935 </FONT><A NAME="935"></A>    <FONT ID="Return">return</FONT>  options;
<FONT ID="LN">936 </FONT><A NAME="936"></A>  }
<FONT ID="LN">937 </FONT><A NAME="937"></A>
<FONT ID="LN">938 </FONT><A NAME="938"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">939 </FONT><A NAME="939"></A>   * returns a description of the search.
<FONT ID="LN">940 </FONT><A NAME="940"></A>   * @return a description of the search as a String.
<FONT ID="LN">941 </FONT><A NAME="941"></A>   */</FONT>
<FONT ID="LN">942 </FONT><A NAME="942"></A>  <FONT ID="Public">public</FONT> String toString() {
<FONT ID="LN">943 </FONT><A NAME="943"></A>    StringBuffer FString = <FONT ID="New">new</FONT> StringBuffer();
<FONT ID="LN">944 </FONT><A NAME="944"></A>
<FONT ID="LN">945 </FONT><A NAME="945"></A>    FString.append(<FONT ID="StringLiteral">"\nTabu Search "</FONT>
<FONT ID="LN">946 </FONT><A NAME="946"></A>        + <FONT ID="StringLiteral">"\n\tInitial Size: "</FONT>+getInitialSize ());
<FONT ID="LN">947 </FONT><A NAME="947"></A>
<FONT ID="LN">948 </FONT><A NAME="948"></A>
<FONT ID="LN">949 </FONT><A NAME="949"></A>    <FONT ID="If">if</FONT>(getInitialSize () &gt; <FONT ID="IntegerLiteral">0</FONT>){
<FONT ID="LN">950 </FONT><A NAME="950"></A>      FString.append(<FONT ID="StringLiteral">"\n\tInitial Solution (Generated by SFS):"</FONT>);
<FONT ID="LN">951 </FONT><A NAME="951"></A>      FString.append(<FONT ID="StringLiteral">"\n\tmerit:"</FONT>+<FONT ID="StringLiteral">"\t\t"</FONT>+<FONT ID="StringLiteral">" subset"</FONT>);
<FONT ID="LN">952 </FONT><A NAME="952"></A>      FString.append(<FONT ID="StringLiteral">"\n\t"</FONT>+ printSubset (m_initialSolution));
<FONT ID="LN">953 </FONT><A NAME="953"></A>
<FONT ID="LN">954 </FONT><A NAME="954"></A>    }
<FONT ID="LN">955 </FONT><A NAME="955"></A>    FString.append(<FONT ID="StringLiteral">"\tdiversificationProb: "</FONT>
<FONT ID="LN">956 </FONT><A NAME="956"></A>        +Utils.doubleToString(Math.abs(getDiversificationProb ()),<FONT ID="IntegerLiteral">8</FONT>,<FONT ID="IntegerLiteral">3</FONT>)+<FONT ID="StringLiteral">"\n"</FONT>);
<FONT ID="LN">957 </FONT><A NAME="957"></A>
<FONT ID="LN">958 </FONT><A NAME="958"></A>    FString.append(<FONT ID="StringLiteral">"\tTotal number of subsets evaluated: "</FONT>
<FONT ID="LN">959 </FONT><A NAME="959"></A>        + m_totalEvals + <FONT ID="StringLiteral">"\n"</FONT>);
<FONT ID="LN">960 </FONT><A NAME="960"></A>
<FONT ID="LN">961 </FONT><A NAME="961"></A>    FString.append(<FONT ID="StringLiteral">"\tMerit of best subset found: "</FONT>
<FONT ID="LN">962 </FONT><A NAME="962"></A>        +Utils.doubleToString(Math.abs(m_Sbest.merit),<FONT ID="IntegerLiteral">8</FONT>,<FONT ID="IntegerLiteral">3</FONT>)+<FONT ID="StringLiteral">"\n"</FONT>);
<FONT ID="LN">963 </FONT><A NAME="963"></A>
<FONT ID="LN">964 </FONT><A NAME="964"></A>    <FONT ID="MultiLineComment">/*FString.append("\tTime procesing the search space: "
<FONT ID="LN">965 </FONT><A NAME="965"></A>        +(double)m_processinTime/1000+" seconds\n"); */</FONT>
<FONT ID="LN">966 </FONT><A NAME="966"></A>
<FONT ID="LN">967 </FONT><A NAME="967"></A>    <FONT ID="Return">return</FONT> FString.toString();
<FONT ID="LN">968 </FONT><A NAME="968"></A>  }
<FONT ID="LN">969 </FONT><A NAME="969"></A>
<FONT ID="LN">970 </FONT><A NAME="970"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Void">void</FONT> resetOptions () {
<FONT ID="LN">971 </FONT><A NAME="971"></A>    m_initialSize = -<FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">972 </FONT><A NAME="972"></A>    m_numNeighborhood = -<FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">973 </FONT><A NAME="973"></A>    m_seed = <FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">974 </FONT><A NAME="974"></A>    m_diversificationProb = <FONT ID="FloatPointLiteral">1.0</FONT>;
<FONT ID="LN">975 </FONT><A NAME="975"></A>    m_totalEvals = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">976 </FONT><A NAME="976"></A>    m_processinTime = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">977 </FONT><A NAME="977"></A>  }
<FONT ID="LN">978 </FONT><A NAME="978"></A>
<FONT ID="LN">979 </FONT><A NAME="979"></A>}
<FONT ID="LN">980 </FONT><A NAME="980"></A>
<FONT ID="LN">981 </FONT><A NAME="981"></A></pre><TABLE id="Header" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td colspan="2" width="33%">&nbsp;</td>
<td align="center" colspan="2" width="33%">
<font size="4">TabuSearch.java</font>
</td>
<td align="right" colspan="2" width="33%">&nbsp;</td>
</tr>
</TABLE>

</BODY>
</HTML>