<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<HTML>
<HEAD>
<LINK REL=STYLESHEET TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">
<META NAME="GENERATOR" CONTENT="Java2HTML Version 1.5">
<TITLE>weka.classifiers.meta.RandomSubSpace (Java2HTML)</TITLE>
</HEAD>
<BODY><TABLE id="Header" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td colspan="2" width="33%">&nbsp;</td>
<td align="center" colspan="2" width="33%">
<font size="4">RandomSubSpace.java</font>
</td>
<td align="right" colspan="2" width="33%">&nbsp;</td>
</tr>
</TABLE>
<pre ID="Classes">
<FONT ID="LN">1   </FONT><A NAME="1"></A><FONT ID="MultiLineComment">/*
<FONT ID="LN">2   </FONT><A NAME="2"></A> *    This program is free software; you can redistribute it and/or modify
<FONT ID="LN">3   </FONT><A NAME="3"></A> *    it under the terms of the GNU General Public License as published by
<FONT ID="LN">4   </FONT><A NAME="4"></A> *    the Free Software Foundation; either version 2 of the License, or
<FONT ID="LN">5   </FONT><A NAME="5"></A> *    (at your option) any later version.
<FONT ID="LN">6   </FONT><A NAME="6"></A> *
<FONT ID="LN">7   </FONT><A NAME="7"></A> *    This program is distributed in the hope that it will be useful,
<FONT ID="LN">8   </FONT><A NAME="8"></A> *    but WITHOUT ANY WARRANTY; without even the implied warranty of
<FONT ID="LN">9   </FONT><A NAME="9"></A> *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
<FONT ID="LN">10  </FONT><A NAME="10"></A> *    GNU General Public License for more details.
<FONT ID="LN">11  </FONT><A NAME="11"></A> *
<FONT ID="LN">12  </FONT><A NAME="12"></A> *    You should have received a copy of the GNU General Public License
<FONT ID="LN">13  </FONT><A NAME="13"></A> *    along with this program; if not, write to the Free Software
<FONT ID="LN">14  </FONT><A NAME="14"></A> *    Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
<FONT ID="LN">15  </FONT><A NAME="15"></A> */</FONT>
<FONT ID="LN">16  </FONT><A NAME="16"></A>
<FONT ID="LN">17  </FONT><A NAME="17"></A><FONT ID="MultiLineComment">/*
<FONT ID="LN">18  </FONT><A NAME="18"></A> *    RandomSubSpace.java
<FONT ID="LN">19  </FONT><A NAME="19"></A> *    Copyright (C) 2006 University of Waikato, Hamilton, New Zealand
<FONT ID="LN">20  </FONT><A NAME="20"></A> *
<FONT ID="LN">21  </FONT><A NAME="21"></A> */</FONT>
<FONT ID="LN">22  </FONT><A NAME="22"></A>
<FONT ID="LN">23  </FONT><A NAME="23"></A><FONT ID="Package">package</FONT> weka.classifiers.meta;
<FONT ID="LN">24  </FONT><A NAME="24"></A>
<FONT ID="LN">25  </FONT><A NAME="25"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/filters/unsupervised/attribute/Remove.java.html">weka.filters.unsupervised.attribute.Remove</A>;
<FONT ID="LN">26  </FONT><A NAME="26"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/classifiers/Classifier.java.html">weka.classifiers.Classifier</A>;
<FONT ID="LN">27  </FONT><A NAME="27"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/classifiers/AbstractClassifier.java.html">weka.classifiers.AbstractClassifier</A>;
<FONT ID="LN">28  </FONT><A NAME="28"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/classifiers/RandomizableIteratedSingleClassifierEnhancer.java.html">weka.classifiers.RandomizableIteratedSingleClassifierEnhancer</A>;
<FONT ID="LN">29  </FONT><A NAME="29"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/classifiers/RandomizableParallelIteratedSingleClassifierEnhancer.java.html">weka.classifiers.RandomizableParallelIteratedSingleClassifierEnhancer</A>;
<FONT ID="LN">30  </FONT><A NAME="30"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/Instance.java.html">weka.core.Instance</A>;
<FONT ID="LN">31  </FONT><A NAME="31"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/Instances.java.html">weka.core.Instances</A>;
<FONT ID="LN">32  </FONT><A NAME="32"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/Option.java.html">weka.core.Option</A>;
<FONT ID="LN">33  </FONT><A NAME="33"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/Randomizable.java.html">weka.core.Randomizable</A>;
<FONT ID="LN">34  </FONT><A NAME="34"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/RevisionUtils.java.html">weka.core.RevisionUtils</A>;
<FONT ID="LN">35  </FONT><A NAME="35"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/TechnicalInformation.java.html">weka.core.TechnicalInformation</A>;
<FONT ID="LN">36  </FONT><A NAME="36"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/TechnicalInformationHandler.java.html">weka.core.TechnicalInformationHandler</A>;
<FONT ID="LN">37  </FONT><A NAME="37"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/Utils.java.html">weka.core.Utils</A>;
<FONT ID="LN">38  </FONT><A NAME="38"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/WeightedInstancesHandler.java.html">weka.core.WeightedInstancesHandler</A>;
<FONT ID="LN">39  </FONT><A NAME="39"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/TechnicalInformation.java.html">weka.core.TechnicalInformation.Field</A>;
<FONT ID="LN">40  </FONT><A NAME="40"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/TechnicalInformation.java.html">weka.core.TechnicalInformation.Type</A>;
<FONT ID="LN">41  </FONT><A NAME="41"></A>
<FONT ID="LN">42  </FONT><A NAME="42"></A><FONT ID="Import">import</FONT> java.util.Enumeration;
<FONT ID="LN">43  </FONT><A NAME="43"></A><FONT ID="Import">import</FONT> java.util.Random;
<FONT ID="LN">44  </FONT><A NAME="44"></A><FONT ID="Import">import</FONT> java.util.Vector;
<FONT ID="LN">45  </FONT><A NAME="45"></A><FONT ID="Import">import</FONT> java.util.Arrays;
<FONT ID="LN">46  </FONT><A NAME="46"></A><FONT ID="Import">import</FONT> java.util.Collections;
<FONT ID="LN">47  </FONT><A NAME="47"></A>
<FONT ID="LN">48  </FONT><A NAME="48"></A><FONT ID="FormalComment">/**
<FONT ID="LN">49  </FONT><A NAME="49"></A> &lt;!-- globalinfo-start --&gt;
<FONT ID="LN">50  </FONT><A NAME="50"></A> * This method constructs a decision tree based classifier that maintains highest accuracy on training data and improves on generalization accuracy as it grows in complexity. The classifier consists of multiple trees constructed systematically by pseudorandomly selecting subsets of components of the feature vector, that is, trees constructed in randomly chosen subspaces.&lt;br/&gt;
<FONT ID="LN">51  </FONT><A NAME="51"></A> * &lt;br/&gt;
<FONT ID="LN">52  </FONT><A NAME="52"></A> * For more information, see&lt;br/&gt;
<FONT ID="LN">53  </FONT><A NAME="53"></A> * &lt;br/&gt;
<FONT ID="LN">54  </FONT><A NAME="54"></A> * Tin Kam Ho (1998). The Random Subspace Method for Constructing Decision Forests. IEEE Transactions on Pattern Analysis and Machine Intelligence. 20(8):832-844. URL http://citeseer.ist.psu.edu/ho98random.html.
<FONT ID="LN">55  </FONT><A NAME="55"></A> * &lt;p/&gt;
<FONT ID="LN">56  </FONT><A NAME="56"></A> &lt;!-- globalinfo-end --&gt;
<FONT ID="LN">57  </FONT><A NAME="57"></A> *
<FONT ID="LN">58  </FONT><A NAME="58"></A> &lt;!-- technical-bibtex-start --&gt;
<FONT ID="LN">59  </FONT><A NAME="59"></A> * BibTeX:
<FONT ID="LN">60  </FONT><A NAME="60"></A> * &lt;pre&gt;
<FONT ID="LN">61  </FONT><A NAME="61"></A> * &amp;#64;article{Ho1998,
<FONT ID="LN">62  </FONT><A NAME="62"></A> *    author = {Tin Kam Ho},
<FONT ID="LN">63  </FONT><A NAME="63"></A> *    journal = {IEEE Transactions on Pattern Analysis and Machine Intelligence},
<FONT ID="LN">64  </FONT><A NAME="64"></A> *    number = {8},
<FONT ID="LN">65  </FONT><A NAME="65"></A> *    pages = {832-844},
<FONT ID="LN">66  </FONT><A NAME="66"></A> *    title = {The Random Subspace Method for Constructing Decision Forests},
<FONT ID="LN">67  </FONT><A NAME="67"></A> *    volume = {20},
<FONT ID="LN">68  </FONT><A NAME="68"></A> *    year = {1998},
<FONT ID="LN">69  </FONT><A NAME="69"></A> *    ISSN = {0162-8828},
<FONT ID="LN">70  </FONT><A NAME="70"></A> *    URL = {http://citeseer.ist.psu.edu/ho98random.html}
<FONT ID="LN">71  </FONT><A NAME="71"></A> * }
<FONT ID="LN">72  </FONT><A NAME="72"></A> * &lt;/pre&gt;
<FONT ID="LN">73  </FONT><A NAME="73"></A> * &lt;p/&gt;
<FONT ID="LN">74  </FONT><A NAME="74"></A> &lt;!-- technical-bibtex-end --&gt;
<FONT ID="LN">75  </FONT><A NAME="75"></A> *
<FONT ID="LN">76  </FONT><A NAME="76"></A> &lt;!-- options-start --&gt;
<FONT ID="LN">77  </FONT><A NAME="77"></A> * Valid options are: &lt;p/&gt;
<FONT ID="LN">78  </FONT><A NAME="78"></A> * 
<FONT ID="LN">79  </FONT><A NAME="79"></A> * &lt;pre&gt; -P
<FONT ID="LN">80  </FONT><A NAME="80"></A> *  Size of each subspace:
<FONT ID="LN">81  </FONT><A NAME="81"></A> *   &amp;lt; 1: percentage of the number of attributes
<FONT ID="LN">82  </FONT><A NAME="82"></A> *   &amp;gt;=1: absolute number of attributes
<FONT ID="LN">83  </FONT><A NAME="83"></A> * &lt;/pre&gt;
<FONT ID="LN">84  </FONT><A NAME="84"></A> * 
<FONT ID="LN">85  </FONT><A NAME="85"></A> * &lt;pre&gt; -S &amp;lt;num&amp;gt;
<FONT ID="LN">86  </FONT><A NAME="86"></A> *  Random number seed.
<FONT ID="LN">87  </FONT><A NAME="87"></A> *  (default 1)&lt;/pre&gt;
<FONT ID="LN">88  </FONT><A NAME="88"></A> * 
<FONT ID="LN">89  </FONT><A NAME="89"></A> * &lt;pre&gt; -I &amp;lt;num&amp;gt;
<FONT ID="LN">90  </FONT><A NAME="90"></A> *  Number of iterations.
<FONT ID="LN">91  </FONT><A NAME="91"></A> *  (default 10)&lt;/pre&gt;
<FONT ID="LN">92  </FONT><A NAME="92"></A> * 
<FONT ID="LN">93  </FONT><A NAME="93"></A> * &lt;pre&gt; -D
<FONT ID="LN">94  </FONT><A NAME="94"></A> *  If set, classifier is run in debug mode and
<FONT ID="LN">95  </FONT><A NAME="95"></A> *  may output additional info to the console&lt;/pre&gt;
<FONT ID="LN">96  </FONT><A NAME="96"></A> * 
<FONT ID="LN">97  </FONT><A NAME="97"></A> * &lt;pre&gt; -W
<FONT ID="LN">98  </FONT><A NAME="98"></A> *  Full name of base classifier.
<FONT ID="LN">99  </FONT><A NAME="99"></A> *  (default: weka.classifiers.trees.REPTree)&lt;/pre&gt;
<FONT ID="LN">100 </FONT><A NAME="100"></A> * 
<FONT ID="LN">101 </FONT><A NAME="101"></A> * &lt;pre&gt; 
<FONT ID="LN">102 </FONT><A NAME="102"></A> * Options specific to classifier weka.classifiers.trees.REPTree:
<FONT ID="LN">103 </FONT><A NAME="103"></A> * &lt;/pre&gt;
<FONT ID="LN">104 </FONT><A NAME="104"></A> * 
<FONT ID="LN">105 </FONT><A NAME="105"></A> * &lt;pre&gt; -M &amp;lt;minimum number of instances&amp;gt;
<FONT ID="LN">106 </FONT><A NAME="106"></A> *  Set minimum number of instances per leaf (default 2).&lt;/pre&gt;
<FONT ID="LN">107 </FONT><A NAME="107"></A> * 
<FONT ID="LN">108 </FONT><A NAME="108"></A> * &lt;pre&gt; -V &amp;lt;minimum variance for split&amp;gt;
<FONT ID="LN">109 </FONT><A NAME="109"></A> *  Set minimum numeric class variance proportion
<FONT ID="LN">110 </FONT><A NAME="110"></A> *  of train variance for split (default 1e-3).&lt;/pre&gt;
<FONT ID="LN">111 </FONT><A NAME="111"></A> * 
<FONT ID="LN">112 </FONT><A NAME="112"></A> * &lt;pre&gt; -N &amp;lt;number of folds&amp;gt;
<FONT ID="LN">113 </FONT><A NAME="113"></A> *  Number of folds for reduced error pruning (default 3).&lt;/pre&gt;
<FONT ID="LN">114 </FONT><A NAME="114"></A> * 
<FONT ID="LN">115 </FONT><A NAME="115"></A> * &lt;pre&gt; -S &amp;lt;seed&amp;gt;
<FONT ID="LN">116 </FONT><A NAME="116"></A> *  Seed for random data shuffling (default 1).&lt;/pre&gt;
<FONT ID="LN">117 </FONT><A NAME="117"></A> * 
<FONT ID="LN">118 </FONT><A NAME="118"></A> * &lt;pre&gt; -P
<FONT ID="LN">119 </FONT><A NAME="119"></A> *  No pruning.&lt;/pre&gt;
<FONT ID="LN">120 </FONT><A NAME="120"></A> * 
<FONT ID="LN">121 </FONT><A NAME="121"></A> * &lt;pre&gt; -L
<FONT ID="LN">122 </FONT><A NAME="122"></A> *  Maximum tree depth (default -1, no maximum)&lt;/pre&gt;
<FONT ID="LN">123 </FONT><A NAME="123"></A> * 
<FONT ID="LN">124 </FONT><A NAME="124"></A> &lt;!-- options-end --&gt;
<FONT ID="LN">125 </FONT><A NAME="125"></A> *
<FONT ID="LN">126 </FONT><A NAME="126"></A> * Options after -- are passed to the designated classifier.&lt;p&gt;
<FONT ID="LN">127 </FONT><A NAME="127"></A> *
<FONT ID="LN">128 </FONT><A NAME="128"></A> * @author Bernhard Pfahringer (bernhard@cs.waikato.ac.nz)
<FONT ID="LN">129 </FONT><A NAME="129"></A> * @author Peter Reutemann (fracpete@cs.waikato.ac.nz)
<FONT ID="LN">130 </FONT><A NAME="130"></A> * @version $Revision: 5928 $
<FONT ID="LN">131 </FONT><A NAME="131"></A> */</FONT>
<FONT ID="LN">132 </FONT><A NAME="132"></A><FONT ID="Public">public</FONT> <FONT ID="Class">class</FONT> RandomSubSpace
<FONT ID="LN">133 </FONT><A NAME="133"></A>  <FONT ID="Extends">extends</FONT> <A HREF="../../../weka/classifiers/RandomizableParallelIteratedSingleClassifierEnhancer.java.html">RandomizableParallelIteratedSingleClassifierEnhancer</A> 
<FONT ID="LN">134 </FONT><A NAME="134"></A>  <FONT ID="Implements">implements</FONT> <A HREF="../../../weka/core/WeightedInstancesHandler.java.html">WeightedInstancesHandler</A>, <A HREF="../../../weka/core/TechnicalInformationHandler.java.html">TechnicalInformationHandler</A> {
<FONT ID="LN">135 </FONT><A NAME="135"></A>
<FONT ID="LN">136 </FONT><A NAME="136"></A>  <FONT ID="FormalComment">/** for serialization */</FONT>
<FONT ID="LN">137 </FONT><A NAME="137"></A>  <FONT ID="Private">private</FONT> <FONT ID="Static">static</FONT> <FONT ID="Final">final</FONT> <FONT ID="Long">long</FONT> serialVersionUID = <FONT ID="IntegerLiteral">1278172513912424947L</FONT>;
<FONT ID="LN">138 </FONT><A NAME="138"></A>  
<FONT ID="LN">139 </FONT><A NAME="139"></A>  <FONT ID="FormalComment">/** The size of each bag sample, as a percentage of the training size */</FONT>
<FONT ID="LN">140 </FONT><A NAME="140"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Double">double</FONT> m_SubSpaceSize = <FONT ID="FloatPointLiteral">0.5</FONT>;
<FONT ID="LN">141 </FONT><A NAME="141"></A>
<FONT ID="LN">142 </FONT><A NAME="142"></A>  <FONT ID="FormalComment">/** a ZeroR model in case no model can be built from the data */</FONT>
<FONT ID="LN">143 </FONT><A NAME="143"></A>  <FONT ID="Protected">protected</FONT> <A HREF="../../../weka/classifiers/Classifier.java.html">Classifier</A> m_ZeroR;
<FONT ID="LN">144 </FONT><A NAME="144"></A>  
<FONT ID="LN">145 </FONT><A NAME="145"></A>  <FONT ID="FormalComment">/** Training data */</FONT>
<FONT ID="LN">146 </FONT><A NAME="146"></A>  <FONT ID="Protected">protected</FONT> <A HREF="../../../weka/core/Instances.java.html">Instances</A> m_data;
<FONT ID="LN">147 </FONT><A NAME="147"></A>    
<FONT ID="LN">148 </FONT><A NAME="148"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">149 </FONT><A NAME="149"></A>   * Constructor.
<FONT ID="LN">150 </FONT><A NAME="150"></A>   */</FONT>
<FONT ID="LN">151 </FONT><A NAME="151"></A>  <FONT ID="Public">public</FONT> RandomSubSpace() {
<FONT ID="LN">152 </FONT><A NAME="152"></A>    <FONT ID="Super">super</FONT>();
<FONT ID="LN">153 </FONT><A NAME="153"></A>    
<FONT ID="LN">154 </FONT><A NAME="154"></A>    m_Classifier = <FONT ID="New">new</FONT> <A HREF="../../../weka/classifiers/trees/REPTree.java.html">weka.classifiers.trees.REPTree</A>();
<FONT ID="LN">155 </FONT><A NAME="155"></A>  }
<FONT ID="LN">156 </FONT><A NAME="156"></A>  
<FONT ID="LN">157 </FONT><A NAME="157"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">158 </FONT><A NAME="158"></A>   * Returns a string describing classifier
<FONT ID="LN">159 </FONT><A NAME="159"></A>   * 
<FONT ID="LN">160 </FONT><A NAME="160"></A>   * @return        a description suitable for
<FONT ID="LN">161 </FONT><A NAME="161"></A>   *            displaying in the explorer/experimenter gui
<FONT ID="LN">162 </FONT><A NAME="162"></A>   */</FONT>
<FONT ID="LN">163 </FONT><A NAME="163"></A>  <FONT ID="Public">public</FONT> String globalInfo() {
<FONT ID="LN">164 </FONT><A NAME="164"></A>    <FONT ID="Return">return</FONT> 
<FONT ID="LN">165 </FONT><A NAME="165"></A>        <FONT ID="StringLiteral">"This method constructs a decision tree based classifier that "</FONT>
<FONT ID="LN">166 </FONT><A NAME="166"></A>      + <FONT ID="StringLiteral">"maintains highest accuracy on training data and improves on "</FONT>
<FONT ID="LN">167 </FONT><A NAME="167"></A>      + <FONT ID="StringLiteral">"generalization accuracy as it grows in complexity. The classifier "</FONT>
<FONT ID="LN">168 </FONT><A NAME="168"></A>      + <FONT ID="StringLiteral">"consists of multiple trees constructed systematically by "</FONT>
<FONT ID="LN">169 </FONT><A NAME="169"></A>      + <FONT ID="StringLiteral">"pseudorandomly selecting subsets of components of the feature vector, "</FONT>
<FONT ID="LN">170 </FONT><A NAME="170"></A>      + <FONT ID="StringLiteral">"that is, trees constructed in randomly chosen subspaces.\n\n"</FONT>
<FONT ID="LN">171 </FONT><A NAME="171"></A>      + <FONT ID="StringLiteral">"For more information, see\n\n"</FONT>
<FONT ID="LN">172 </FONT><A NAME="172"></A>      + getTechnicalInformation().toString();
<FONT ID="LN">173 </FONT><A NAME="173"></A>  }
<FONT ID="LN">174 </FONT><A NAME="174"></A>
<FONT ID="LN">175 </FONT><A NAME="175"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">176 </FONT><A NAME="176"></A>   * Returns an instance of a TechnicalInformation object, containing 
<FONT ID="LN">177 </FONT><A NAME="177"></A>   * detailed information about the technical background of this class,
<FONT ID="LN">178 </FONT><A NAME="178"></A>   * e.g., paper reference or book this class is based on.
<FONT ID="LN">179 </FONT><A NAME="179"></A>   * 
<FONT ID="LN">180 </FONT><A NAME="180"></A>   * @return        the technical information about this class
<FONT ID="LN">181 </FONT><A NAME="181"></A>   */</FONT>
<FONT ID="LN">182 </FONT><A NAME="182"></A>  <FONT ID="Public">public</FONT> <A HREF="../../../weka/core/TechnicalInformation.java.html">TechnicalInformation</A> getTechnicalInformation() {
<FONT ID="LN">183 </FONT><A NAME="183"></A>    <A HREF="../../../weka/core/TechnicalInformation.java.html">TechnicalInformation</A>    result;
<FONT ID="LN">184 </FONT><A NAME="184"></A>    
<FONT ID="LN">185 </FONT><A NAME="185"></A>    result = <FONT ID="New">new</FONT> <A HREF="../../../weka/core/TechnicalInformation.java.html">TechnicalInformation</A>(Type.ARTICLE);
<FONT ID="LN">186 </FONT><A NAME="186"></A>    result.setValue(Field.AUTHOR, <FONT ID="StringLiteral">"Tin Kam Ho"</FONT>);
<FONT ID="LN">187 </FONT><A NAME="187"></A>    result.setValue(Field.YEAR, <FONT ID="StringLiteral">"1998"</FONT>);
<FONT ID="LN">188 </FONT><A NAME="188"></A>    result.setValue(Field.TITLE, <FONT ID="StringLiteral">"The Random Subspace Method for Constructing Decision Forests"</FONT>);
<FONT ID="LN">189 </FONT><A NAME="189"></A>    result.setValue(Field.JOURNAL, <FONT ID="StringLiteral">"IEEE Transactions on Pattern Analysis and Machine Intelligence"</FONT>);
<FONT ID="LN">190 </FONT><A NAME="190"></A>    result.setValue(Field.VOLUME, <FONT ID="StringLiteral">"20"</FONT>);
<FONT ID="LN">191 </FONT><A NAME="191"></A>    result.setValue(Field.NUMBER, <FONT ID="StringLiteral">"8"</FONT>);
<FONT ID="LN">192 </FONT><A NAME="192"></A>    result.setValue(Field.PAGES, <FONT ID="StringLiteral">"832-844"</FONT>);
<FONT ID="LN">193 </FONT><A NAME="193"></A>    result.setValue(Field.URL, <FONT ID="StringLiteral">"http://citeseer.ist.psu.edu/ho98random.html"</FONT>);
<FONT ID="LN">194 </FONT><A NAME="194"></A>    result.setValue(Field.ISSN, <FONT ID="StringLiteral">"0162-8828"</FONT>);
<FONT ID="LN">195 </FONT><A NAME="195"></A>    
<FONT ID="LN">196 </FONT><A NAME="196"></A>    <FONT ID="Return">return</FONT> result;
<FONT ID="LN">197 </FONT><A NAME="197"></A>  }
<FONT ID="LN">198 </FONT><A NAME="198"></A>
<FONT ID="LN">199 </FONT><A NAME="199"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">200 </FONT><A NAME="200"></A>   * String describing default classifier.
<FONT ID="LN">201 </FONT><A NAME="201"></A>   * 
<FONT ID="LN">202 </FONT><A NAME="202"></A>   * @return        the default classifier classname
<FONT ID="LN">203 </FONT><A NAME="203"></A>   */</FONT>
<FONT ID="LN">204 </FONT><A NAME="204"></A>  <FONT ID="Protected">protected</FONT> String defaultClassifierString() {
<FONT ID="LN">205 </FONT><A NAME="205"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"weka.classifiers.trees.REPTree"</FONT>;
<FONT ID="LN">206 </FONT><A NAME="206"></A>  }
<FONT ID="LN">207 </FONT><A NAME="207"></A>
<FONT ID="LN">208 </FONT><A NAME="208"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">209 </FONT><A NAME="209"></A>   * Returns an enumeration describing the available options.
<FONT ID="LN">210 </FONT><A NAME="210"></A>   *
<FONT ID="LN">211 </FONT><A NAME="211"></A>   * @return        an enumeration of all the available options.
<FONT ID="LN">212 </FONT><A NAME="212"></A>   */</FONT>
<FONT ID="LN">213 </FONT><A NAME="213"></A>  <FONT ID="Public">public</FONT> Enumeration listOptions() {
<FONT ID="LN">214 </FONT><A NAME="214"></A>    Vector result = <FONT ID="New">new</FONT> Vector();
<FONT ID="LN">215 </FONT><A NAME="215"></A>
<FONT ID="LN">216 </FONT><A NAME="216"></A>    result.addElement(<FONT ID="New">new</FONT> <A HREF="../../../weka/core/Option.java.html">Option</A>(
<FONT ID="LN">217 </FONT><A NAME="217"></A>    <FONT ID="StringLiteral">"\tSize of each subspace:\n"</FONT>
<FONT ID="LN">218 </FONT><A NAME="218"></A>    + <FONT ID="StringLiteral">"\t\t&lt; 1: percentage of the number of attributes\n"</FONT>
<FONT ID="LN">219 </FONT><A NAME="219"></A>    + <FONT ID="StringLiteral">"\t\t&gt;=1: absolute number of attributes\n"</FONT>,
<FONT ID="LN">220 </FONT><A NAME="220"></A>    <FONT ID="StringLiteral">"P"</FONT>, <FONT ID="IntegerLiteral">1</FONT>, <FONT ID="StringLiteral">"-P"</FONT>));
<FONT ID="LN">221 </FONT><A NAME="221"></A>
<FONT ID="LN">222 </FONT><A NAME="222"></A>    Enumeration enu = <FONT ID="Super">super</FONT>.listOptions();
<FONT ID="LN">223 </FONT><A NAME="223"></A>    <FONT ID="While">while</FONT> (enu.hasMoreElements()) {
<FONT ID="LN">224 </FONT><A NAME="224"></A>      result.addElement(enu.nextElement());
<FONT ID="LN">225 </FONT><A NAME="225"></A>    }
<FONT ID="LN">226 </FONT><A NAME="226"></A>    
<FONT ID="LN">227 </FONT><A NAME="227"></A>    <FONT ID="Return">return</FONT> result.elements();
<FONT ID="LN">228 </FONT><A NAME="228"></A>  }
<FONT ID="LN">229 </FONT><A NAME="229"></A>
<FONT ID="LN">230 </FONT><A NAME="230"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">231 </FONT><A NAME="231"></A>   * Parses a given list of options. &lt;p/&gt;
<FONT ID="LN">232 </FONT><A NAME="232"></A>   *
<FONT ID="LN">233 </FONT><A NAME="233"></A>   &lt;!-- options-start --&gt;
<FONT ID="LN">234 </FONT><A NAME="234"></A>   * Valid options are: &lt;p/&gt;
<FONT ID="LN">235 </FONT><A NAME="235"></A>   * 
<FONT ID="LN">236 </FONT><A NAME="236"></A>   * &lt;pre&gt; -P
<FONT ID="LN">237 </FONT><A NAME="237"></A>   *  Size of each subspace:
<FONT ID="LN">238 </FONT><A NAME="238"></A>   *   &amp;lt; 1: percentage of the number of attributes
<FONT ID="LN">239 </FONT><A NAME="239"></A>   *   &amp;gt;=1: absolute number of attributes
<FONT ID="LN">240 </FONT><A NAME="240"></A>   * &lt;/pre&gt;
<FONT ID="LN">241 </FONT><A NAME="241"></A>   * 
<FONT ID="LN">242 </FONT><A NAME="242"></A>   * &lt;pre&gt; -S &amp;lt;num&amp;gt;
<FONT ID="LN">243 </FONT><A NAME="243"></A>   *  Random number seed.
<FONT ID="LN">244 </FONT><A NAME="244"></A>   *  (default 1)&lt;/pre&gt;
<FONT ID="LN">245 </FONT><A NAME="245"></A>   * 
<FONT ID="LN">246 </FONT><A NAME="246"></A>   * &lt;pre&gt; -I &amp;lt;num&amp;gt;
<FONT ID="LN">247 </FONT><A NAME="247"></A>   *  Number of iterations.
<FONT ID="LN">248 </FONT><A NAME="248"></A>   *  (default 10)&lt;/pre&gt;
<FONT ID="LN">249 </FONT><A NAME="249"></A>   * 
<FONT ID="LN">250 </FONT><A NAME="250"></A>   * &lt;pre&gt; -D
<FONT ID="LN">251 </FONT><A NAME="251"></A>   *  If set, classifier is run in debug mode and
<FONT ID="LN">252 </FONT><A NAME="252"></A>   *  may output additional info to the console&lt;/pre&gt;
<FONT ID="LN">253 </FONT><A NAME="253"></A>   * 
<FONT ID="LN">254 </FONT><A NAME="254"></A>   * &lt;pre&gt; -W
<FONT ID="LN">255 </FONT><A NAME="255"></A>   *  Full name of base classifier.
<FONT ID="LN">256 </FONT><A NAME="256"></A>   *  (default: weka.classifiers.trees.REPTree)&lt;/pre&gt;
<FONT ID="LN">257 </FONT><A NAME="257"></A>   * 
<FONT ID="LN">258 </FONT><A NAME="258"></A>   * &lt;pre&gt; 
<FONT ID="LN">259 </FONT><A NAME="259"></A>   * Options specific to classifier weka.classifiers.trees.REPTree:
<FONT ID="LN">260 </FONT><A NAME="260"></A>   * &lt;/pre&gt;
<FONT ID="LN">261 </FONT><A NAME="261"></A>   * 
<FONT ID="LN">262 </FONT><A NAME="262"></A>   * &lt;pre&gt; -M &amp;lt;minimum number of instances&amp;gt;
<FONT ID="LN">263 </FONT><A NAME="263"></A>   *  Set minimum number of instances per leaf (default 2).&lt;/pre&gt;
<FONT ID="LN">264 </FONT><A NAME="264"></A>   * 
<FONT ID="LN">265 </FONT><A NAME="265"></A>   * &lt;pre&gt; -V &amp;lt;minimum variance for split&amp;gt;
<FONT ID="LN">266 </FONT><A NAME="266"></A>   *  Set minimum numeric class variance proportion
<FONT ID="LN">267 </FONT><A NAME="267"></A>   *  of train variance for split (default 1e-3).&lt;/pre&gt;
<FONT ID="LN">268 </FONT><A NAME="268"></A>   * 
<FONT ID="LN">269 </FONT><A NAME="269"></A>   * &lt;pre&gt; -N &amp;lt;number of folds&amp;gt;
<FONT ID="LN">270 </FONT><A NAME="270"></A>   *  Number of folds for reduced error pruning (default 3).&lt;/pre&gt;
<FONT ID="LN">271 </FONT><A NAME="271"></A>   * 
<FONT ID="LN">272 </FONT><A NAME="272"></A>   * &lt;pre&gt; -S &amp;lt;seed&amp;gt;
<FONT ID="LN">273 </FONT><A NAME="273"></A>   *  Seed for random data shuffling (default 1).&lt;/pre&gt;
<FONT ID="LN">274 </FONT><A NAME="274"></A>   * 
<FONT ID="LN">275 </FONT><A NAME="275"></A>   * &lt;pre&gt; -P
<FONT ID="LN">276 </FONT><A NAME="276"></A>   *  No pruning.&lt;/pre&gt;
<FONT ID="LN">277 </FONT><A NAME="277"></A>   * 
<FONT ID="LN">278 </FONT><A NAME="278"></A>   * &lt;pre&gt; -L
<FONT ID="LN">279 </FONT><A NAME="279"></A>   *  Maximum tree depth (default -1, no maximum)&lt;/pre&gt;
<FONT ID="LN">280 </FONT><A NAME="280"></A>   * 
<FONT ID="LN">281 </FONT><A NAME="281"></A>   &lt;!-- options-end --&gt;
<FONT ID="LN">282 </FONT><A NAME="282"></A>   *
<FONT ID="LN">283 </FONT><A NAME="283"></A>   * Options after -- are passed to the designated classifier.&lt;p&gt;
<FONT ID="LN">284 </FONT><A NAME="284"></A>   *
<FONT ID="LN">285 </FONT><A NAME="285"></A>   * @param options     the list of options as an array of strings
<FONT ID="LN">286 </FONT><A NAME="286"></A>   * @throws Exception  if an option is not supported
<FONT ID="LN">287 </FONT><A NAME="287"></A>   */</FONT>
<FONT ID="LN">288 </FONT><A NAME="288"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setOptions(String[] options) <FONT ID="Throws">throws</FONT> Exception {
<FONT ID="LN">289 </FONT><A NAME="289"></A>    String tmpStr;
<FONT ID="LN">290 </FONT><A NAME="290"></A>    
<FONT ID="LN">291 </FONT><A NAME="291"></A>    tmpStr = Utils.getOption(<FONT ID="CharacerLiteral">'P'</FONT>, options);
<FONT ID="LN">292 </FONT><A NAME="292"></A>    <FONT ID="If">if</FONT> (tmpStr.length() != <FONT ID="IntegerLiteral">0</FONT>)
<FONT ID="LN">293 </FONT><A NAME="293"></A>      setSubSpaceSize(Double.parseDouble(tmpStr));
<FONT ID="LN">294 </FONT><A NAME="294"></A>    <FONT ID="Else">else</FONT>
<FONT ID="LN">295 </FONT><A NAME="295"></A>      setSubSpaceSize(<FONT ID="FloatPointLiteral">0.5</FONT>);
<FONT ID="LN">296 </FONT><A NAME="296"></A>
<FONT ID="LN">297 </FONT><A NAME="297"></A>    <FONT ID="Super">super</FONT>.setOptions(options);
<FONT ID="LN">298 </FONT><A NAME="298"></A>  }
<FONT ID="LN">299 </FONT><A NAME="299"></A>
<FONT ID="LN">300 </FONT><A NAME="300"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">301 </FONT><A NAME="301"></A>   * Gets the current settings of the Classifier.
<FONT ID="LN">302 </FONT><A NAME="302"></A>   *
<FONT ID="LN">303 </FONT><A NAME="303"></A>   * @return        an array of strings suitable for passing to setOptions
<FONT ID="LN">304 </FONT><A NAME="304"></A>   */</FONT>
<FONT ID="LN">305 </FONT><A NAME="305"></A>  <FONT ID="Public">public</FONT> String [] getOptions() {
<FONT ID="LN">306 </FONT><A NAME="306"></A>    Vector        result;
<FONT ID="LN">307 </FONT><A NAME="307"></A>    String[]      options;
<FONT ID="LN">308 </FONT><A NAME="308"></A>    <FONT ID="Int">int</FONT>           i;
<FONT ID="LN">309 </FONT><A NAME="309"></A>    
<FONT ID="LN">310 </FONT><A NAME="310"></A>    result  = <FONT ID="New">new</FONT> Vector();
<FONT ID="LN">311 </FONT><A NAME="311"></A>
<FONT ID="LN">312 </FONT><A NAME="312"></A>    result.add(<FONT ID="StringLiteral">"-P"</FONT>);
<FONT ID="LN">313 </FONT><A NAME="313"></A>    result.add(<FONT ID="StringLiteral">""</FONT> + getSubSpaceSize());
<FONT ID="LN">314 </FONT><A NAME="314"></A>    
<FONT ID="LN">315 </FONT><A NAME="315"></A>    options = <FONT ID="Super">super</FONT>.getOptions();
<FONT ID="LN">316 </FONT><A NAME="316"></A>    <FONT ID="For">for</FONT> (i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; options.length; i++)
<FONT ID="LN">317 </FONT><A NAME="317"></A>      result.add(options[i]);
<FONT ID="LN">318 </FONT><A NAME="318"></A>
<FONT ID="LN">319 </FONT><A NAME="319"></A>    <FONT ID="Return">return</FONT> (String[]) result.toArray(<FONT ID="New">new</FONT> String[result.size()]);
<FONT ID="LN">320 </FONT><A NAME="320"></A>  }
<FONT ID="LN">321 </FONT><A NAME="321"></A>
<FONT ID="LN">322 </FONT><A NAME="322"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">323 </FONT><A NAME="323"></A>   * Returns the tip text for this property
<FONT ID="LN">324 </FONT><A NAME="324"></A>   * 
<FONT ID="LN">325 </FONT><A NAME="325"></A>   * @return        tip text for this property suitable for
<FONT ID="LN">326 </FONT><A NAME="326"></A>   *            displaying in the explorer/experimenter gui
<FONT ID="LN">327 </FONT><A NAME="327"></A>   */</FONT>
<FONT ID="LN">328 </FONT><A NAME="328"></A>  <FONT ID="Public">public</FONT> String subSpaceSizeTipText() {
<FONT ID="LN">329 </FONT><A NAME="329"></A>    <FONT ID="Return">return</FONT> 
<FONT ID="LN">330 </FONT><A NAME="330"></A>        <FONT ID="StringLiteral">"Size of each subSpace: if less than 1 as a percentage of the "</FONT>
<FONT ID="LN">331 </FONT><A NAME="331"></A>      + <FONT ID="StringLiteral">"number of attributes, otherwise the absolute number of attributes."</FONT>;
<FONT ID="LN">332 </FONT><A NAME="332"></A>  }
<FONT ID="LN">333 </FONT><A NAME="333"></A>
<FONT ID="LN">334 </FONT><A NAME="334"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">335 </FONT><A NAME="335"></A>   * Gets the size of each subSpace, as a percentage of the training set size.
<FONT ID="LN">336 </FONT><A NAME="336"></A>   *
<FONT ID="LN">337 </FONT><A NAME="337"></A>   * @return        the subSpace size, as a percentage.
<FONT ID="LN">338 </FONT><A NAME="338"></A>   */</FONT>
<FONT ID="LN">339 </FONT><A NAME="339"></A>  <FONT ID="Public">public</FONT> <FONT ID="Double">double</FONT> getSubSpaceSize() {
<FONT ID="LN">340 </FONT><A NAME="340"></A>    <FONT ID="Return">return</FONT> m_SubSpaceSize;
<FONT ID="LN">341 </FONT><A NAME="341"></A>  }
<FONT ID="LN">342 </FONT><A NAME="342"></A>  
<FONT ID="LN">343 </FONT><A NAME="343"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">344 </FONT><A NAME="344"></A>   * Sets the size of each subSpace, as a percentage of the training set size.
<FONT ID="LN">345 </FONT><A NAME="345"></A>   *
<FONT ID="LN">346 </FONT><A NAME="346"></A>   * @param value   the subSpace size, as a percentage.
<FONT ID="LN">347 </FONT><A NAME="347"></A>   */</FONT>
<FONT ID="LN">348 </FONT><A NAME="348"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setSubSpaceSize(<FONT ID="Double">double</FONT> value) {
<FONT ID="LN">349 </FONT><A NAME="349"></A>    m_SubSpaceSize = value;
<FONT ID="LN">350 </FONT><A NAME="350"></A>  }
<FONT ID="LN">351 </FONT><A NAME="351"></A>
<FONT ID="LN">352 </FONT><A NAME="352"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">353 </FONT><A NAME="353"></A>   * calculates the number of attributes
<FONT ID="LN">354 </FONT><A NAME="354"></A>   * 
<FONT ID="LN">355 </FONT><A NAME="355"></A>   * @param total   the available number of attributes
<FONT ID="LN">356 </FONT><A NAME="356"></A>   * @param fraction    the fraction - if less than 1 it represents the
<FONT ID="LN">357 </FONT><A NAME="357"></A>   *            percentage, otherwise the absolute number of attributes
<FONT ID="LN">358 </FONT><A NAME="358"></A>   * @return        the number of attributes to use
<FONT ID="LN">359 </FONT><A NAME="359"></A>   */</FONT>
<FONT ID="LN">360 </FONT><A NAME="360"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Int">int</FONT> numberOfAttributes(<FONT ID="Int">int</FONT> total, <FONT ID="Double">double</FONT> fraction) {
<FONT ID="LN">361 </FONT><A NAME="361"></A>    <FONT ID="Int">int</FONT> k = (<FONT ID="Int">int</FONT>) Math.round((fraction &lt; <FONT ID="FloatPointLiteral">1.0</FONT>) ? total*fraction : fraction);
<FONT ID="LN">362 </FONT><A NAME="362"></A>    
<FONT ID="LN">363 </FONT><A NAME="363"></A>    <FONT ID="If">if</FONT> (k &gt; total)
<FONT ID="LN">364 </FONT><A NAME="364"></A>      k = total;
<FONT ID="LN">365 </FONT><A NAME="365"></A>    <FONT ID="If">if</FONT> (k &lt; <FONT ID="IntegerLiteral">1</FONT>)
<FONT ID="LN">366 </FONT><A NAME="366"></A>      k = <FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">367 </FONT><A NAME="367"></A>
<FONT ID="LN">368 </FONT><A NAME="368"></A>    <FONT ID="Return">return</FONT> k;
<FONT ID="LN">369 </FONT><A NAME="369"></A>  }
<FONT ID="LN">370 </FONT><A NAME="370"></A>
<FONT ID="LN">371 </FONT><A NAME="371"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">372 </FONT><A NAME="372"></A>   * generates an index string describing a random subspace, suitable for
<FONT ID="LN">373 </FONT><A NAME="373"></A>   * the Remove filter.
<FONT ID="LN">374 </FONT><A NAME="374"></A>   * 
<FONT ID="LN">375 </FONT><A NAME="375"></A>   * @param indices     the attribute indices
<FONT ID="LN">376 </FONT><A NAME="376"></A>   * @param subSpaceSize    the size of the subspace
<FONT ID="LN">377 </FONT><A NAME="377"></A>   * @param classIndex      the class index
<FONT ID="LN">378 </FONT><A NAME="378"></A>   * @param random      the random number generator
<FONT ID="LN">379 </FONT><A NAME="379"></A>   * @return            the generated string describing the subspace
<FONT ID="LN">380 </FONT><A NAME="380"></A>   */</FONT>
<FONT ID="LN">381 </FONT><A NAME="381"></A>  <FONT ID="Protected">protected</FONT> String randomSubSpace(Integer[] indices, <FONT ID="Int">int</FONT> subSpaceSize, <FONT ID="Int">int</FONT> classIndex, Random random) {
<FONT ID="LN">382 </FONT><A NAME="382"></A>    Collections.shuffle(Arrays.asList(indices), random);
<FONT ID="LN">383 </FONT><A NAME="383"></A>    StringBuffer sb = <FONT ID="New">new</FONT> StringBuffer(<FONT ID="StringLiteral">""</FONT>);
<FONT ID="LN">384 </FONT><A NAME="384"></A>    <FONT ID="For">for</FONT>(<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; subSpaceSize; i++) {
<FONT ID="LN">385 </FONT><A NAME="385"></A>      sb.append(indices[i]+<FONT ID="StringLiteral">","</FONT>);
<FONT ID="LN">386 </FONT><A NAME="386"></A>    }
<FONT ID="LN">387 </FONT><A NAME="387"></A>    sb.append(classIndex);
<FONT ID="LN">388 </FONT><A NAME="388"></A>    
<FONT ID="LN">389 </FONT><A NAME="389"></A>    <FONT ID="If">if</FONT> (getDebug())
<FONT ID="LN">390 </FONT><A NAME="390"></A>      System.out.println(<FONT ID="StringLiteral">"subSPACE = "</FONT> + sb);
<FONT ID="LN">391 </FONT><A NAME="391"></A>
<FONT ID="LN">392 </FONT><A NAME="392"></A>    <FONT ID="Return">return</FONT> sb.toString();
<FONT ID="LN">393 </FONT><A NAME="393"></A>  }
<FONT ID="LN">394 </FONT><A NAME="394"></A>
<FONT ID="LN">395 </FONT><A NAME="395"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">396 </FONT><A NAME="396"></A>   * builds the classifier.
<FONT ID="LN">397 </FONT><A NAME="397"></A>   *
<FONT ID="LN">398 </FONT><A NAME="398"></A>   * @param data    the training data to be used for generating the
<FONT ID="LN">399 </FONT><A NAME="399"></A>   *            classifier.
<FONT ID="LN">400 </FONT><A NAME="400"></A>   * @throws Exception  if the classifier could not be built successfully
<FONT ID="LN">401 </FONT><A NAME="401"></A>   */</FONT>
<FONT ID="LN">402 </FONT><A NAME="402"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> buildClassifier(<A HREF="../../../weka/core/Instances.java.html">Instances</A> data) <FONT ID="Throws">throws</FONT> Exception {
<FONT ID="LN">403 </FONT><A NAME="403"></A>
<FONT ID="LN">404 </FONT><A NAME="404"></A>    <FONT ID="SingleLineComment">// can classifier handle the data?
<FONT ID="LN">405 </FONT><A NAME="405"></A></FONT>    getCapabilities().testWithFail(data);
<FONT ID="LN">406 </FONT><A NAME="406"></A>
<FONT ID="LN">407 </FONT><A NAME="407"></A>    <FONT ID="SingleLineComment">// remove instances with missing class
<FONT ID="LN">408 </FONT><A NAME="408"></A></FONT>    m_data = <FONT ID="New">new</FONT> <A HREF="../../../weka/core/Instances.java.html">Instances</A>(data);
<FONT ID="LN">409 </FONT><A NAME="409"></A>    m_data.deleteWithMissingClass();
<FONT ID="LN">410 </FONT><A NAME="410"></A>    
<FONT ID="LN">411 </FONT><A NAME="411"></A>    <FONT ID="SingleLineComment">// only class? -&gt; build ZeroR model
<FONT ID="LN">412 </FONT><A NAME="412"></A></FONT>    <FONT ID="If">if</FONT> (m_data.numAttributes() == <FONT ID="IntegerLiteral">1</FONT>) {
<FONT ID="LN">413 </FONT><A NAME="413"></A>      System.err.println(
<FONT ID="LN">414 </FONT><A NAME="414"></A>      <FONT ID="StringLiteral">"Cannot build model (only class attribute present in data!), "</FONT>
<FONT ID="LN">415 </FONT><A NAME="415"></A>      + <FONT ID="StringLiteral">"using ZeroR model instead!"</FONT>);
<FONT ID="LN">416 </FONT><A NAME="416"></A>      m_ZeroR = <FONT ID="New">new</FONT> <A HREF="../../../weka/classifiers/rules/ZeroR.java.html">weka.classifiers.rules.ZeroR</A>();
<FONT ID="LN">417 </FONT><A NAME="417"></A>      m_ZeroR.buildClassifier(m_data);
<FONT ID="LN">418 </FONT><A NAME="418"></A>      <FONT ID="Return">return</FONT>;
<FONT ID="LN">419 </FONT><A NAME="419"></A>    }
<FONT ID="LN">420 </FONT><A NAME="420"></A>    <FONT ID="Else">else</FONT> {
<FONT ID="LN">421 </FONT><A NAME="421"></A>      m_ZeroR = <FONT ID="Null">null</FONT>;
<FONT ID="LN">422 </FONT><A NAME="422"></A>    }
<FONT ID="LN">423 </FONT><A NAME="423"></A>    
<FONT ID="LN">424 </FONT><A NAME="424"></A>    <FONT ID="Super">super</FONT>.buildClassifier(data);
<FONT ID="LN">425 </FONT><A NAME="425"></A>
<FONT ID="LN">426 </FONT><A NAME="426"></A>    Integer[] indices = <FONT ID="New">new</FONT> Integer[data.numAttributes()-<FONT ID="IntegerLiteral">1</FONT>];
<FONT ID="LN">427 </FONT><A NAME="427"></A>    <FONT ID="Int">int</FONT> classIndex = data.classIndex();
<FONT ID="LN">428 </FONT><A NAME="428"></A>    <FONT ID="Int">int</FONT> offset = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">429 </FONT><A NAME="429"></A>    <FONT ID="For">for</FONT>(<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; indices.length+<FONT ID="IntegerLiteral">1</FONT>; i++) {
<FONT ID="LN">430 </FONT><A NAME="430"></A>      <FONT ID="If">if</FONT> (i != classIndex) {
<FONT ID="LN">431 </FONT><A NAME="431"></A>    indices[offset++] = i+<FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">432 </FONT><A NAME="432"></A>      }
<FONT ID="LN">433 </FONT><A NAME="433"></A>    }
<FONT ID="LN">434 </FONT><A NAME="434"></A>    <FONT ID="Int">int</FONT> subSpaceSize = numberOfAttributes(indices.length, getSubSpaceSize());
<FONT ID="LN">435 </FONT><A NAME="435"></A>    Random random = data.getRandomNumberGenerator(m_Seed);
<FONT ID="LN">436 </FONT><A NAME="436"></A>    
<FONT ID="LN">437 </FONT><A NAME="437"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = <FONT ID="IntegerLiteral">0</FONT>; j &lt; m_Classifiers.length; j++) {
<FONT ID="LN">438 </FONT><A NAME="438"></A>      <FONT ID="If">if</FONT> (m_Classifier <FONT ID="InstanceOf">instanceof</FONT> <A HREF="../../../weka/core/Randomizable.java.html">Randomizable</A>) {
<FONT ID="LN">439 </FONT><A NAME="439"></A>    ((<A HREF="../../../weka/core/Randomizable.java.html">Randomizable</A>) m_Classifiers[j]).setSeed(random.nextInt());
<FONT ID="LN">440 </FONT><A NAME="440"></A>      }
<FONT ID="LN">441 </FONT><A NAME="441"></A>      <A HREF="../../../weka/classifiers/meta/FilteredClassifier.java.html">FilteredClassifier</A> fc = <FONT ID="New">new</FONT> <A HREF="../../../weka/classifiers/meta/FilteredClassifier.java.html">FilteredClassifier</A>();
<FONT ID="LN">442 </FONT><A NAME="442"></A>      fc.setClassifier(m_Classifiers[j]);
<FONT ID="LN">443 </FONT><A NAME="443"></A>      m_Classifiers[j] = fc;
<FONT ID="LN">444 </FONT><A NAME="444"></A>      <A HREF="../../../weka/filters/unsupervised/attribute/Remove.java.html">Remove</A> rm = <FONT ID="New">new</FONT> <A HREF="../../../weka/filters/unsupervised/attribute/Remove.java.html">Remove</A>();
<FONT ID="LN">445 </FONT><A NAME="445"></A>      rm.setOptions(<FONT ID="New">new</FONT> String[]{<FONT ID="StringLiteral">"-V"</FONT>, <FONT ID="StringLiteral">"-R"</FONT>, randomSubSpace(indices,subSpaceSize,classIndex+<FONT ID="IntegerLiteral">1</FONT>,random)});
<FONT ID="LN">446 </FONT><A NAME="446"></A>      fc.setFilter(rm);
<FONT ID="LN">447 </FONT><A NAME="447"></A>
<FONT ID="LN">448 </FONT><A NAME="448"></A>      <FONT ID="SingleLineComment">// build the classifier
<FONT ID="LN">449 </FONT><A NAME="449"></A></FONT>      <FONT ID="SingleLineComment">//m_Classifiers[j].buildClassifier(m_data);
<FONT ID="LN">450 </FONT><A NAME="450"></A></FONT>    }
<FONT ID="LN">451 </FONT><A NAME="451"></A>    
<FONT ID="LN">452 </FONT><A NAME="452"></A>    buildClassifiers();
<FONT ID="LN">453 </FONT><A NAME="453"></A>    
<FONT ID="LN">454 </FONT><A NAME="454"></A>    <FONT ID="SingleLineComment">// save memory
<FONT ID="LN">455 </FONT><A NAME="455"></A></FONT>    m_data = <FONT ID="Null">null</FONT>;
<FONT ID="LN">456 </FONT><A NAME="456"></A>  }
<FONT ID="LN">457 </FONT><A NAME="457"></A>  
<FONT ID="LN">458 </FONT><A NAME="458"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">459 </FONT><A NAME="459"></A>   * Returns a training set for a particular iteration.
<FONT ID="LN">460 </FONT><A NAME="460"></A>   * 
<FONT ID="LN">461 </FONT><A NAME="461"></A>   * @param iteration the number of the iteration for the requested training set.
<FONT ID="LN">462 </FONT><A NAME="462"></A>   * @return the training set for the supplied iteration number
<FONT ID="LN">463 </FONT><A NAME="463"></A>   * @throws Exception if something goes wrong when generating a training set.
<FONT ID="LN">464 </FONT><A NAME="464"></A>   */</FONT>
<FONT ID="LN">465 </FONT><A NAME="465"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Synchronized">synchronized</FONT> <A HREF="../../../weka/core/Instances.java.html">Instances</A> getTrainingSet(<FONT ID="Int">int</FONT> iteration) <FONT ID="Throws">throws</FONT> Exception {
<FONT ID="LN">466 </FONT><A NAME="466"></A>    
<FONT ID="LN">467 </FONT><A NAME="467"></A>    <FONT ID="SingleLineComment">// We don't manipulate the training data in any way. The FilteredClassifiers
<FONT ID="LN">468 </FONT><A NAME="468"></A></FONT>    <FONT ID="SingleLineComment">// take care of generating the sub-spaces.
<FONT ID="LN">469 </FONT><A NAME="469"></A></FONT>    <FONT ID="Return">return</FONT> m_data;
<FONT ID="LN">470 </FONT><A NAME="470"></A>  }
<FONT ID="LN">471 </FONT><A NAME="471"></A>
<FONT ID="LN">472 </FONT><A NAME="472"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">473 </FONT><A NAME="473"></A>   * Calculates the class membership probabilities for the given test
<FONT ID="LN">474 </FONT><A NAME="474"></A>   * instance.
<FONT ID="LN">475 </FONT><A NAME="475"></A>   *
<FONT ID="LN">476 </FONT><A NAME="476"></A>   * @param instance    the instance to be classified
<FONT ID="LN">477 </FONT><A NAME="477"></A>   * @return        preedicted class probability distribution
<FONT ID="LN">478 </FONT><A NAME="478"></A>   * @throws Exception  if distribution can't be computed successfully 
<FONT ID="LN">479 </FONT><A NAME="479"></A>   */</FONT>
<FONT ID="LN">480 </FONT><A NAME="480"></A>  <FONT ID="Public">public</FONT> <FONT ID="Double">double</FONT>[] distributionForInstance(<A HREF="../../../weka/core/Instance.java.html">Instance</A> instance) <FONT ID="Throws">throws</FONT> Exception {
<FONT ID="LN">481 </FONT><A NAME="481"></A>
<FONT ID="LN">482 </FONT><A NAME="482"></A>    <FONT ID="SingleLineComment">// default model?
<FONT ID="LN">483 </FONT><A NAME="483"></A></FONT>    <FONT ID="If">if</FONT> (m_ZeroR != <FONT ID="Null">null</FONT>) {
<FONT ID="LN">484 </FONT><A NAME="484"></A>      <FONT ID="Return">return</FONT> m_ZeroR.distributionForInstance(instance);
<FONT ID="LN">485 </FONT><A NAME="485"></A>    }
<FONT ID="LN">486 </FONT><A NAME="486"></A>    
<FONT ID="LN">487 </FONT><A NAME="487"></A>    <FONT ID="Double">double</FONT>[] sums = <FONT ID="New">new</FONT> <FONT ID="Double">double</FONT> [instance.numClasses()], newProbs; 
<FONT ID="LN">488 </FONT><A NAME="488"></A>    
<FONT ID="LN">489 </FONT><A NAME="489"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; m_NumIterations; i++) {
<FONT ID="LN">490 </FONT><A NAME="490"></A>      <FONT ID="If">if</FONT> (instance.classAttribute().isNumeric() == <FONT ID="True">true</FONT>) {
<FONT ID="LN">491 </FONT><A NAME="491"></A>    sums[<FONT ID="IntegerLiteral">0</FONT>] += m_Classifiers[i].classifyInstance(instance);
<FONT ID="LN">492 </FONT><A NAME="492"></A>      } <FONT ID="Else">else</FONT> {
<FONT ID="LN">493 </FONT><A NAME="493"></A>    newProbs = m_Classifiers[i].distributionForInstance(instance);
<FONT ID="LN">494 </FONT><A NAME="494"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = <FONT ID="IntegerLiteral">0</FONT>; j &lt; newProbs.length; j++)
<FONT ID="LN">495 </FONT><A NAME="495"></A>      sums[j] += newProbs[j];
<FONT ID="LN">496 </FONT><A NAME="496"></A>      }
<FONT ID="LN">497 </FONT><A NAME="497"></A>    }
<FONT ID="LN">498 </FONT><A NAME="498"></A>    <FONT ID="If">if</FONT> (instance.classAttribute().isNumeric() == <FONT ID="True">true</FONT>) {
<FONT ID="LN">499 </FONT><A NAME="499"></A>      sums[<FONT ID="IntegerLiteral">0</FONT>] /= (<FONT ID="Double">double</FONT>)m_NumIterations;
<FONT ID="LN">500 </FONT><A NAME="500"></A>      <FONT ID="Return">return</FONT> sums;
<FONT ID="LN">501 </FONT><A NAME="501"></A>    } <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (Utils.eq(Utils.sum(sums), <FONT ID="IntegerLiteral">0</FONT>)) {
<FONT ID="LN">502 </FONT><A NAME="502"></A>      <FONT ID="Return">return</FONT> sums;
<FONT ID="LN">503 </FONT><A NAME="503"></A>    } <FONT ID="Else">else</FONT> {
<FONT ID="LN">504 </FONT><A NAME="504"></A>      Utils.normalize(sums);
<FONT ID="LN">505 </FONT><A NAME="505"></A>      <FONT ID="Return">return</FONT> sums;
<FONT ID="LN">506 </FONT><A NAME="506"></A>    }
<FONT ID="LN">507 </FONT><A NAME="507"></A>  }
<FONT ID="LN">508 </FONT><A NAME="508"></A>
<FONT ID="LN">509 </FONT><A NAME="509"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">510 </FONT><A NAME="510"></A>   * Returns description of the bagged classifier.
<FONT ID="LN">511 </FONT><A NAME="511"></A>   *
<FONT ID="LN">512 </FONT><A NAME="512"></A>   * @return        description of the bagged classifier as a string
<FONT ID="LN">513 </FONT><A NAME="513"></A>   */</FONT>
<FONT ID="LN">514 </FONT><A NAME="514"></A>  <FONT ID="Public">public</FONT> String toString() {
<FONT ID="LN">515 </FONT><A NAME="515"></A>    
<FONT ID="LN">516 </FONT><A NAME="516"></A>    <FONT ID="SingleLineComment">// only ZeroR model?
<FONT ID="LN">517 </FONT><A NAME="517"></A></FONT>    <FONT ID="If">if</FONT> (m_ZeroR != <FONT ID="Null">null</FONT>) {
<FONT ID="LN">518 </FONT><A NAME="518"></A>      StringBuffer buf = <FONT ID="New">new</FONT> StringBuffer();
<FONT ID="LN">519 </FONT><A NAME="519"></A>      buf.append(<FONT ID="This">this</FONT>.getClass().getName().replaceAll(<FONT ID="StringLiteral">".*\\."</FONT>, <FONT ID="StringLiteral">""</FONT>) + <FONT ID="StringLiteral">"\n"</FONT>);
<FONT ID="LN">520 </FONT><A NAME="520"></A>      buf.append(<FONT ID="This">this</FONT>.getClass().getName().replaceAll(<FONT ID="StringLiteral">".*\\."</FONT>, <FONT ID="StringLiteral">""</FONT>).replaceAll(<FONT ID="StringLiteral">"."</FONT>, <FONT ID="StringLiteral">"="</FONT>) + <FONT ID="StringLiteral">"\n\n"</FONT>);
<FONT ID="LN">521 </FONT><A NAME="521"></A>      buf.append(<FONT ID="StringLiteral">"Warning: No model could be built, hence ZeroR model is used:\n\n"</FONT>);
<FONT ID="LN">522 </FONT><A NAME="522"></A>      buf.append(m_ZeroR.toString());
<FONT ID="LN">523 </FONT><A NAME="523"></A>      <FONT ID="Return">return</FONT> buf.toString();
<FONT ID="LN">524 </FONT><A NAME="524"></A>    }
<FONT ID="LN">525 </FONT><A NAME="525"></A>    
<FONT ID="LN">526 </FONT><A NAME="526"></A>    <FONT ID="If">if</FONT> (m_Classifiers == <FONT ID="Null">null</FONT>) {
<FONT ID="LN">527 </FONT><A NAME="527"></A>      <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"RandomSubSpace: No model built yet."</FONT>;
<FONT ID="LN">528 </FONT><A NAME="528"></A>    }
<FONT ID="LN">529 </FONT><A NAME="529"></A>    StringBuffer text = <FONT ID="New">new</FONT> StringBuffer();
<FONT ID="LN">530 </FONT><A NAME="530"></A>    text.append(<FONT ID="StringLiteral">"All the base classifiers: \n\n"</FONT>);
<FONT ID="LN">531 </FONT><A NAME="531"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; m_Classifiers.length; i++)
<FONT ID="LN">532 </FONT><A NAME="532"></A>      text.append(m_Classifiers[i].toString() + <FONT ID="StringLiteral">"\n\n"</FONT>);
<FONT ID="LN">533 </FONT><A NAME="533"></A>
<FONT ID="LN">534 </FONT><A NAME="534"></A>    <FONT ID="Return">return</FONT> text.toString();
<FONT ID="LN">535 </FONT><A NAME="535"></A>  }
<FONT ID="LN">536 </FONT><A NAME="536"></A>  
<FONT ID="LN">537 </FONT><A NAME="537"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">538 </FONT><A NAME="538"></A>   * Returns the revision string.
<FONT ID="LN">539 </FONT><A NAME="539"></A>   * 
<FONT ID="LN">540 </FONT><A NAME="540"></A>   * @return        the revision
<FONT ID="LN">541 </FONT><A NAME="541"></A>   */</FONT>
<FONT ID="LN">542 </FONT><A NAME="542"></A>  <FONT ID="Public">public</FONT> String getRevision() {
<FONT ID="LN">543 </FONT><A NAME="543"></A>    <FONT ID="Return">return</FONT> RevisionUtils.extract(<FONT ID="StringLiteral">"$Revision: 5928 $"</FONT>);
<FONT ID="LN">544 </FONT><A NAME="544"></A>  }
<FONT ID="LN">545 </FONT><A NAME="545"></A>
<FONT ID="LN">546 </FONT><A NAME="546"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">547 </FONT><A NAME="547"></A>   * Main method for testing this class.
<FONT ID="LN">548 </FONT><A NAME="548"></A>   *
<FONT ID="LN">549 </FONT><A NAME="549"></A>   * @param args    the options
<FONT ID="LN">550 </FONT><A NAME="550"></A>   */</FONT>
<FONT ID="LN">551 </FONT><A NAME="551"></A>  <FONT ID="Public">public</FONT> <FONT ID="Static">static</FONT> <FONT ID="Void">void</FONT> main(String[] args) {
<FONT ID="LN">552 </FONT><A NAME="552"></A>    runClassifier(<FONT ID="New">new</FONT> <A HREF="../../../weka/classifiers/meta/RandomSubSpace.java.html">RandomSubSpace</A>(), args);
<FONT ID="LN">553 </FONT><A NAME="553"></A>  }
<FONT ID="LN">554 </FONT><A NAME="554"></A>}
<FONT ID="LN">555 </FONT><A NAME="555"></A></pre><TABLE id="Header" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td colspan="2" width="33%">&nbsp;</td>
<td align="center" colspan="2" width="33%">
<font size="4">RandomSubSpace.java</font>
</td>
<td align="right" colspan="2" width="33%">&nbsp;</td>
</tr>
</TABLE>

</BODY>
</HTML>