<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<HTML>
<HEAD>
<LINK REL=STYLESHEET TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">
<META NAME="GENERATOR" CONTENT="Java2HTML Version 1.5">
<TITLE>weka.classifiers.mi.MISMO (Java2HTML)</TITLE>
</HEAD>
<BODY><TABLE id="Header" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td colspan="2" width="33%">&nbsp;</td>
<td align="center" colspan="2" width="33%">
<font size="4">MISMO.java</font>
</td>
<td align="right" colspan="2" width="33%">&nbsp;</td>
</tr>
</TABLE>
<pre ID="Classes">
<FONT ID="LN">1   </FONT><A NAME="1"></A><FONT ID="MultiLineComment">/*
<FONT ID="LN">2   </FONT><A NAME="2"></A> *    This program is free software; you can redistribute it and/or modify
<FONT ID="LN">3   </FONT><A NAME="3"></A> *    it under the terms of the GNU General Public License as published by
<FONT ID="LN">4   </FONT><A NAME="4"></A> *    the Free Software Foundation; either version 2 of the License, or
<FONT ID="LN">5   </FONT><A NAME="5"></A> *    (at your option) any later version.
<FONT ID="LN">6   </FONT><A NAME="6"></A> *
<FONT ID="LN">7   </FONT><A NAME="7"></A> *    This program is distributed in the hope that it will be useful,
<FONT ID="LN">8   </FONT><A NAME="8"></A> *    but WITHOUT ANY WARRANTY; without even the implied warranty of
<FONT ID="LN">9   </FONT><A NAME="9"></A> *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
<FONT ID="LN">10  </FONT><A NAME="10"></A> *    GNU General Public License for more details.
<FONT ID="LN">11  </FONT><A NAME="11"></A> *
<FONT ID="LN">12  </FONT><A NAME="12"></A> *    You should have received a copy of the GNU General Public License
<FONT ID="LN">13  </FONT><A NAME="13"></A> *    along with this program; if not, write to the Free Software
<FONT ID="LN">14  </FONT><A NAME="14"></A> *    Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
<FONT ID="LN">15  </FONT><A NAME="15"></A> */</FONT>
<FONT ID="LN">16  </FONT><A NAME="16"></A>
<FONT ID="LN">17  </FONT><A NAME="17"></A><FONT ID="MultiLineComment">/*
<FONT ID="LN">18  </FONT><A NAME="18"></A> * MISMO.java
<FONT ID="LN">19  </FONT><A NAME="19"></A> * Copyright (C) 2005 University of Waikato, Hamilton, New Zealand
<FONT ID="LN">20  </FONT><A NAME="20"></A> *
<FONT ID="LN">21  </FONT><A NAME="21"></A> */</FONT>
<FONT ID="LN">22  </FONT><A NAME="22"></A>
<FONT ID="LN">23  </FONT><A NAME="23"></A><FONT ID="Package">package</FONT> weka.classifiers.mi;
<FONT ID="LN">24  </FONT><A NAME="24"></A>
<FONT ID="LN">25  </FONT><A NAME="25"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/classifiers/Classifier.java.html">weka.classifiers.Classifier</A>;
<FONT ID="LN">26  </FONT><A NAME="26"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/classifiers/AbstractClassifier.java.html">weka.classifiers.AbstractClassifier</A>;
<FONT ID="LN">27  </FONT><A NAME="27"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/classifiers/functions/Logistic.java.html">weka.classifiers.functions.Logistic</A>;
<FONT ID="LN">28  </FONT><A NAME="28"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/classifiers/functions/supportVector/Kernel.java.html">weka.classifiers.functions.supportVector.Kernel</A>;
<FONT ID="LN">29  </FONT><A NAME="29"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/classifiers/functions/supportVector/SMOset.java.html">weka.classifiers.functions.supportVector.SMOset</A>;
<FONT ID="LN">30  </FONT><A NAME="30"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/classifiers/mi/supportVector/MIPolyKernel.java.html">weka.classifiers.mi.supportVector.MIPolyKernel</A>;
<FONT ID="LN">31  </FONT><A NAME="31"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/Attribute.java.html">weka.core.Attribute</A>;
<FONT ID="LN">32  </FONT><A NAME="32"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/Capabilities.java.html">weka.core.Capabilities</A>;
<FONT ID="LN">33  </FONT><A NAME="33"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/FastVector.java.html">weka.core.FastVector</A>;
<FONT ID="LN">34  </FONT><A NAME="34"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/Instance.java.html">weka.core.Instance</A>;
<FONT ID="LN">35  </FONT><A NAME="35"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/DenseInstance.java.html">weka.core.DenseInstance</A>;
<FONT ID="LN">36  </FONT><A NAME="36"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/Instances.java.html">weka.core.Instances</A>;
<FONT ID="LN">37  </FONT><A NAME="37"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/MultiInstanceCapabilitiesHandler.java.html">weka.core.MultiInstanceCapabilitiesHandler</A>;
<FONT ID="LN">38  </FONT><A NAME="38"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/Option.java.html">weka.core.Option</A>;
<FONT ID="LN">39  </FONT><A NAME="39"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/OptionHandler.java.html">weka.core.OptionHandler</A>;
<FONT ID="LN">40  </FONT><A NAME="40"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/RevisionHandler.java.html">weka.core.RevisionHandler</A>;
<FONT ID="LN">41  </FONT><A NAME="41"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/RevisionUtils.java.html">weka.core.RevisionUtils</A>;
<FONT ID="LN">42  </FONT><A NAME="42"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/SelectedTag.java.html">weka.core.SelectedTag</A>;
<FONT ID="LN">43  </FONT><A NAME="43"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/SerializedObject.java.html">weka.core.SerializedObject</A>;
<FONT ID="LN">44  </FONT><A NAME="44"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/Tag.java.html">weka.core.Tag</A>;
<FONT ID="LN">45  </FONT><A NAME="45"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/TechnicalInformation.java.html">weka.core.TechnicalInformation</A>;
<FONT ID="LN">46  </FONT><A NAME="46"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/TechnicalInformationHandler.java.html">weka.core.TechnicalInformationHandler</A>;
<FONT ID="LN">47  </FONT><A NAME="47"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/Utils.java.html">weka.core.Utils</A>;
<FONT ID="LN">48  </FONT><A NAME="48"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/WeightedInstancesHandler.java.html">weka.core.WeightedInstancesHandler</A>;
<FONT ID="LN">49  </FONT><A NAME="49"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/Capabilities.java.html">weka.core.Capabilities.Capability</A>;
<FONT ID="LN">50  </FONT><A NAME="50"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/TechnicalInformation.java.html">weka.core.TechnicalInformation.Field</A>;
<FONT ID="LN">51  </FONT><A NAME="51"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/core/TechnicalInformation.java.html">weka.core.TechnicalInformation.Type</A>;
<FONT ID="LN">52  </FONT><A NAME="52"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/filters/Filter.java.html">weka.filters.Filter</A>;
<FONT ID="LN">53  </FONT><A NAME="53"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/filters/unsupervised/attribute/MultiInstanceToPropositional.java.html">weka.filters.unsupervised.attribute.MultiInstanceToPropositional</A>;
<FONT ID="LN">54  </FONT><A NAME="54"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/filters/unsupervised/attribute/NominalToBinary.java.html">weka.filters.unsupervised.attribute.NominalToBinary</A>;
<FONT ID="LN">55  </FONT><A NAME="55"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/filters/unsupervised/attribute/Normalize.java.html">weka.filters.unsupervised.attribute.Normalize</A>;
<FONT ID="LN">56  </FONT><A NAME="56"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/filters/unsupervised/attribute/PropositionalToMultiInstance.java.html">weka.filters.unsupervised.attribute.PropositionalToMultiInstance</A>;
<FONT ID="LN">57  </FONT><A NAME="57"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/filters/unsupervised/attribute/ReplaceMissingValues.java.html">weka.filters.unsupervised.attribute.ReplaceMissingValues</A>;
<FONT ID="LN">58  </FONT><A NAME="58"></A><FONT ID="Import">import</FONT> <A HREF="../../../weka/filters/unsupervised/attribute/Standardize.java.html">weka.filters.unsupervised.attribute.Standardize</A>;
<FONT ID="LN">59  </FONT><A NAME="59"></A>
<FONT ID="LN">60  </FONT><A NAME="60"></A><FONT ID="Import">import</FONT> java.io.Serializable;
<FONT ID="LN">61  </FONT><A NAME="61"></A><FONT ID="Import">import</FONT> java.util.Enumeration;
<FONT ID="LN">62  </FONT><A NAME="62"></A><FONT ID="Import">import</FONT> java.util.Random;
<FONT ID="LN">63  </FONT><A NAME="63"></A><FONT ID="Import">import</FONT> java.util.Vector;
<FONT ID="LN">64  </FONT><A NAME="64"></A>
<FONT ID="LN">65  </FONT><A NAME="65"></A><FONT ID="FormalComment">/**
<FONT ID="LN">66  </FONT><A NAME="66"></A> &lt;!-- globalinfo-start --&gt;
<FONT ID="LN">67  </FONT><A NAME="67"></A> * Implements John Platt's sequential minimal optimization algorithm for training a support vector classifier.&lt;br/&gt;
<FONT ID="LN">68  </FONT><A NAME="68"></A> * &lt;br/&gt;
<FONT ID="LN">69  </FONT><A NAME="69"></A> * This implementation globally replaces all missing values and transforms nominal attributes into binary ones. It also normalizes all attributes by default. (In that case the coefficients in the output are based on the normalized data, not the original data --- this is important for interpreting the classifier.)&lt;br/&gt;
<FONT ID="LN">70  </FONT><A NAME="70"></A> * &lt;br/&gt;
<FONT ID="LN">71  </FONT><A NAME="71"></A> * Multi-class problems are solved using pairwise classification.&lt;br/&gt;
<FONT ID="LN">72  </FONT><A NAME="72"></A> * &lt;br/&gt;
<FONT ID="LN">73  </FONT><A NAME="73"></A> * To obtain proper probability estimates, use the option that fits logistic regression models to the outputs of the support vector machine. In the multi-class case the predicted probabilities are coupled using Hastie and Tibshirani's pairwise coupling method.&lt;br/&gt;
<FONT ID="LN">74  </FONT><A NAME="74"></A> * &lt;br/&gt;
<FONT ID="LN">75  </FONT><A NAME="75"></A> * Note: for improved speed normalization should be turned off when operating on SparseInstances.&lt;br/&gt;
<FONT ID="LN">76  </FONT><A NAME="76"></A> * &lt;br/&gt;
<FONT ID="LN">77  </FONT><A NAME="77"></A> * For more information on the SMO algorithm, see&lt;br/&gt;
<FONT ID="LN">78  </FONT><A NAME="78"></A> * &lt;br/&gt;
<FONT ID="LN">79  </FONT><A NAME="79"></A> * J. Platt: Machines using Sequential Minimal Optimization. In B. Schoelkopf and C. Burges and A. Smola, editors, Advances in Kernel Methods - Support Vector Learning, 1998.&lt;br/&gt;
<FONT ID="LN">80  </FONT><A NAME="80"></A> * &lt;br/&gt;
<FONT ID="LN">81  </FONT><A NAME="81"></A> * S.S. Keerthi, S.K. Shevade, C. Bhattacharyya, K.R.K. Murthy (2001). Improvements to Platt's SMO Algorithm for SVM Classifier Design. Neural Computation. 13(3):637-649.
<FONT ID="LN">82  </FONT><A NAME="82"></A> * &lt;p/&gt;
<FONT ID="LN">83  </FONT><A NAME="83"></A> &lt;!-- globalinfo-end --&gt;
<FONT ID="LN">84  </FONT><A NAME="84"></A> *
<FONT ID="LN">85  </FONT><A NAME="85"></A> &lt;!-- technical-bibtex-start --&gt;
<FONT ID="LN">86  </FONT><A NAME="86"></A> * BibTeX:
<FONT ID="LN">87  </FONT><A NAME="87"></A> * &lt;pre&gt;
<FONT ID="LN">88  </FONT><A NAME="88"></A> * &amp;#64;incollection{Platt1998,
<FONT ID="LN">89  </FONT><A NAME="89"></A> *    author = {J. Platt},
<FONT ID="LN">90  </FONT><A NAME="90"></A> *    booktitle = {Advances in Kernel Methods - Support Vector Learning},
<FONT ID="LN">91  </FONT><A NAME="91"></A> *    editor = {B. Schoelkopf and C. Burges and A. Smola},
<FONT ID="LN">92  </FONT><A NAME="92"></A> *    publisher = {MIT Press},
<FONT ID="LN">93  </FONT><A NAME="93"></A> *    title = {Machines using Sequential Minimal Optimization},
<FONT ID="LN">94  </FONT><A NAME="94"></A> *    year = {1998}
<FONT ID="LN">95  </FONT><A NAME="95"></A> * }
<FONT ID="LN">96  </FONT><A NAME="96"></A> * 
<FONT ID="LN">97  </FONT><A NAME="97"></A> * &amp;#64;article{Keerthi2001,
<FONT ID="LN">98  </FONT><A NAME="98"></A> *    author = {S.S. Keerthi and S.K. Shevade and C. Bhattacharyya and K.R.K. Murthy},
<FONT ID="LN">99  </FONT><A NAME="99"></A> *    journal = {Neural Computation},
<FONT ID="LN">100 </FONT><A NAME="100"></A> *    number = {3},
<FONT ID="LN">101 </FONT><A NAME="101"></A> *    pages = {637-649},
<FONT ID="LN">102 </FONT><A NAME="102"></A> *    title = {Improvements to Platt's SMO Algorithm for SVM Classifier Design},
<FONT ID="LN">103 </FONT><A NAME="103"></A> *    volume = {13},
<FONT ID="LN">104 </FONT><A NAME="104"></A> *    year = {2001}
<FONT ID="LN">105 </FONT><A NAME="105"></A> * }
<FONT ID="LN">106 </FONT><A NAME="106"></A> * &lt;/pre&gt;
<FONT ID="LN">107 </FONT><A NAME="107"></A> * &lt;p/&gt;
<FONT ID="LN">108 </FONT><A NAME="108"></A> &lt;!-- technical-bibtex-end --&gt;
<FONT ID="LN">109 </FONT><A NAME="109"></A> *
<FONT ID="LN">110 </FONT><A NAME="110"></A> &lt;!-- options-start --&gt;
<FONT ID="LN">111 </FONT><A NAME="111"></A> * Valid options are: &lt;p/&gt;
<FONT ID="LN">112 </FONT><A NAME="112"></A> * 
<FONT ID="LN">113 </FONT><A NAME="113"></A> * &lt;pre&gt; -D
<FONT ID="LN">114 </FONT><A NAME="114"></A> *  If set, classifier is run in debug mode and
<FONT ID="LN">115 </FONT><A NAME="115"></A> *  may output additional info to the console&lt;/pre&gt;
<FONT ID="LN">116 </FONT><A NAME="116"></A> * 
<FONT ID="LN">117 </FONT><A NAME="117"></A> * &lt;pre&gt; -no-checks
<FONT ID="LN">118 </FONT><A NAME="118"></A> *  Turns off all checks - use with caution!
<FONT ID="LN">119 </FONT><A NAME="119"></A> *  Turning them off assumes that data is purely numeric, doesn't
<FONT ID="LN">120 </FONT><A NAME="120"></A> *  contain any missing values, and has a nominal class. Turning them
<FONT ID="LN">121 </FONT><A NAME="121"></A> *  off also means that no header information will be stored if the
<FONT ID="LN">122 </FONT><A NAME="122"></A> *  machine is linear. Finally, it also assumes that no instance has
<FONT ID="LN">123 </FONT><A NAME="123"></A> *  a weight equal to 0.
<FONT ID="LN">124 </FONT><A NAME="124"></A> *  (default: checks on)&lt;/pre&gt;
<FONT ID="LN">125 </FONT><A NAME="125"></A> * 
<FONT ID="LN">126 </FONT><A NAME="126"></A> * &lt;pre&gt; -C &amp;lt;double&amp;gt;
<FONT ID="LN">127 </FONT><A NAME="127"></A> *  The complexity constant C. (default 1)&lt;/pre&gt;
<FONT ID="LN">128 </FONT><A NAME="128"></A> * 
<FONT ID="LN">129 </FONT><A NAME="129"></A> * &lt;pre&gt; -N
<FONT ID="LN">130 </FONT><A NAME="130"></A> *  Whether to 0=normalize/1=standardize/2=neither.
<FONT ID="LN">131 </FONT><A NAME="131"></A> *  (default 0=normalize)&lt;/pre&gt;
<FONT ID="LN">132 </FONT><A NAME="132"></A> * 
<FONT ID="LN">133 </FONT><A NAME="133"></A> * &lt;pre&gt; -I
<FONT ID="LN">134 </FONT><A NAME="134"></A> *  Use MIminimax feature space. &lt;/pre&gt;
<FONT ID="LN">135 </FONT><A NAME="135"></A> * 
<FONT ID="LN">136 </FONT><A NAME="136"></A> * &lt;pre&gt; -L &amp;lt;double&amp;gt;
<FONT ID="LN">137 </FONT><A NAME="137"></A> *  The tolerance parameter. (default 1.0e-3)&lt;/pre&gt;
<FONT ID="LN">138 </FONT><A NAME="138"></A> * 
<FONT ID="LN">139 </FONT><A NAME="139"></A> * &lt;pre&gt; -P &amp;lt;double&amp;gt;
<FONT ID="LN">140 </FONT><A NAME="140"></A> *  The epsilon for round-off error. (default 1.0e-12)&lt;/pre&gt;
<FONT ID="LN">141 </FONT><A NAME="141"></A> * 
<FONT ID="LN">142 </FONT><A NAME="142"></A> * &lt;pre&gt; -M
<FONT ID="LN">143 </FONT><A NAME="143"></A> *  Fit logistic models to SVM outputs. &lt;/pre&gt;
<FONT ID="LN">144 </FONT><A NAME="144"></A> * 
<FONT ID="LN">145 </FONT><A NAME="145"></A> * &lt;pre&gt; -V &amp;lt;double&amp;gt;
<FONT ID="LN">146 </FONT><A NAME="146"></A> *  The number of folds for the internal cross-validation. 
<FONT ID="LN">147 </FONT><A NAME="147"></A> *  (default -1, use training data)&lt;/pre&gt;
<FONT ID="LN">148 </FONT><A NAME="148"></A> * 
<FONT ID="LN">149 </FONT><A NAME="149"></A> * &lt;pre&gt; -W &amp;lt;double&amp;gt;
<FONT ID="LN">150 </FONT><A NAME="150"></A> *  The random number seed. (default 1)&lt;/pre&gt;
<FONT ID="LN">151 </FONT><A NAME="151"></A> * 
<FONT ID="LN">152 </FONT><A NAME="152"></A> * &lt;pre&gt; -K &amp;lt;classname and parameters&amp;gt;
<FONT ID="LN">153 </FONT><A NAME="153"></A> *  The Kernel to use.
<FONT ID="LN">154 </FONT><A NAME="154"></A> *  (default: weka.classifiers.functions.supportVector.PolyKernel)&lt;/pre&gt;
<FONT ID="LN">155 </FONT><A NAME="155"></A> * 
<FONT ID="LN">156 </FONT><A NAME="156"></A> * &lt;pre&gt; 
<FONT ID="LN">157 </FONT><A NAME="157"></A> * Options specific to kernel weka.classifiers.mi.supportVector.MIPolyKernel:
<FONT ID="LN">158 </FONT><A NAME="158"></A> * &lt;/pre&gt;
<FONT ID="LN">159 </FONT><A NAME="159"></A> * 
<FONT ID="LN">160 </FONT><A NAME="160"></A> * &lt;pre&gt; -D
<FONT ID="LN">161 </FONT><A NAME="161"></A> *  Enables debugging output (if available) to be printed.
<FONT ID="LN">162 </FONT><A NAME="162"></A> *  (default: off)&lt;/pre&gt;
<FONT ID="LN">163 </FONT><A NAME="163"></A> * 
<FONT ID="LN">164 </FONT><A NAME="164"></A> * &lt;pre&gt; -no-checks
<FONT ID="LN">165 </FONT><A NAME="165"></A> *  Turns off all checks - use with caution!
<FONT ID="LN">166 </FONT><A NAME="166"></A> *  (default: checks on)&lt;/pre&gt;
<FONT ID="LN">167 </FONT><A NAME="167"></A> * 
<FONT ID="LN">168 </FONT><A NAME="168"></A> * &lt;pre&gt; -C &amp;lt;num&amp;gt;
<FONT ID="LN">169 </FONT><A NAME="169"></A> *  The size of the cache (a prime number), 0 for full cache and 
<FONT ID="LN">170 </FONT><A NAME="170"></A> *  -1 to turn it off.
<FONT ID="LN">171 </FONT><A NAME="171"></A> *  (default: 250007)&lt;/pre&gt;
<FONT ID="LN">172 </FONT><A NAME="172"></A> * 
<FONT ID="LN">173 </FONT><A NAME="173"></A> * &lt;pre&gt; -E &amp;lt;num&amp;gt;
<FONT ID="LN">174 </FONT><A NAME="174"></A> *  The Exponent to use.
<FONT ID="LN">175 </FONT><A NAME="175"></A> *  (default: 1.0)&lt;/pre&gt;
<FONT ID="LN">176 </FONT><A NAME="176"></A> * 
<FONT ID="LN">177 </FONT><A NAME="177"></A> * &lt;pre&gt; -L
<FONT ID="LN">178 </FONT><A NAME="178"></A> *  Use lower-order terms.
<FONT ID="LN">179 </FONT><A NAME="179"></A> *  (default: no)&lt;/pre&gt;
<FONT ID="LN">180 </FONT><A NAME="180"></A> * 
<FONT ID="LN">181 </FONT><A NAME="181"></A> &lt;!-- options-end --&gt;
<FONT ID="LN">182 </FONT><A NAME="182"></A> *
<FONT ID="LN">183 </FONT><A NAME="183"></A> * @author Eibe Frank (eibe@cs.waikato.ac.nz)
<FONT ID="LN">184 </FONT><A NAME="184"></A> * @author Shane Legg (shane@intelligenesis.net) (sparse vector code)
<FONT ID="LN">185 </FONT><A NAME="185"></A> * @author Stuart Inglis (stuart@reeltwo.com) (sparse vector code)
<FONT ID="LN">186 </FONT><A NAME="186"></A> * @author Lin Dong (ld21@cs.waikato.ac.nz) (code for adapting to MI data)
<FONT ID="LN">187 </FONT><A NAME="187"></A> * @version $Revision: 5987 $ 
<FONT ID="LN">188 </FONT><A NAME="188"></A> */</FONT>
<FONT ID="LN">189 </FONT><A NAME="189"></A><FONT ID="Public">public</FONT> <FONT ID="Class">class</FONT> MISMO 
<FONT ID="LN">190 </FONT><A NAME="190"></A>  <FONT ID="Extends">extends</FONT> <A HREF="../../../weka/classifiers/AbstractClassifier.java.html">AbstractClassifier</A> 
<FONT ID="LN">191 </FONT><A NAME="191"></A>  <FONT ID="Implements">implements</FONT> <A HREF="../../../weka/core/WeightedInstancesHandler.java.html">WeightedInstancesHandler</A>, <A HREF="../../../weka/core/MultiInstanceCapabilitiesHandler.java.html">MultiInstanceCapabilitiesHandler</A>,
<FONT ID="LN">192 </FONT><A NAME="192"></A>             <A HREF="../../../weka/core/TechnicalInformationHandler.java.html">TechnicalInformationHandler</A> {
<FONT ID="LN">193 </FONT><A NAME="193"></A>
<FONT ID="LN">194 </FONT><A NAME="194"></A>  <FONT ID="FormalComment">/** for serialization */</FONT>
<FONT ID="LN">195 </FONT><A NAME="195"></A>  <FONT ID="Static">static</FONT> <FONT ID="Final">final</FONT> <FONT ID="Long">long</FONT> serialVersionUID = -<FONT ID="IntegerLiteral">5834036950143719712L</FONT>;
<FONT ID="LN">196 </FONT><A NAME="196"></A>  
<FONT ID="LN">197 </FONT><A NAME="197"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">198 </FONT><A NAME="198"></A>   * Returns a string describing classifier
<FONT ID="LN">199 </FONT><A NAME="199"></A>   * @return a description suitable for
<FONT ID="LN">200 </FONT><A NAME="200"></A>   * displaying in the explorer/experimenter gui
<FONT ID="LN">201 </FONT><A NAME="201"></A>   */</FONT>
<FONT ID="LN">202 </FONT><A NAME="202"></A>  <FONT ID="Public">public</FONT> String globalInfo() {
<FONT ID="LN">203 </FONT><A NAME="203"></A>
<FONT ID="LN">204 </FONT><A NAME="204"></A>    <FONT ID="Return">return</FONT>  <FONT ID="StringLiteral">"Implements John Platt's sequential minimal optimization "</FONT>
<FONT ID="LN">205 </FONT><A NAME="205"></A>      + <FONT ID="StringLiteral">"algorithm for training a support vector classifier.\n\n"</FONT>
<FONT ID="LN">206 </FONT><A NAME="206"></A>      + <FONT ID="StringLiteral">"This implementation globally replaces all missing values and "</FONT>
<FONT ID="LN">207 </FONT><A NAME="207"></A>      + <FONT ID="StringLiteral">"transforms nominal attributes into binary ones. It also "</FONT>
<FONT ID="LN">208 </FONT><A NAME="208"></A>      + <FONT ID="StringLiteral">"normalizes all attributes by default. (In that case the coefficients "</FONT>
<FONT ID="LN">209 </FONT><A NAME="209"></A>      + <FONT ID="StringLiteral">"in the output are based on the normalized data, not the "</FONT>
<FONT ID="LN">210 </FONT><A NAME="210"></A>      + <FONT ID="StringLiteral">"original data --- this is important for interpreting the classifier.)\n\n"</FONT>
<FONT ID="LN">211 </FONT><A NAME="211"></A>      + <FONT ID="StringLiteral">"Multi-class problems are solved using pairwise classification.\n\n"</FONT>
<FONT ID="LN">212 </FONT><A NAME="212"></A>      + <FONT ID="StringLiteral">"To obtain proper probability estimates, use the option that fits "</FONT>
<FONT ID="LN">213 </FONT><A NAME="213"></A>      + <FONT ID="StringLiteral">"logistic regression models to the outputs of the support vector "</FONT>
<FONT ID="LN">214 </FONT><A NAME="214"></A>      + <FONT ID="StringLiteral">"machine. In the multi-class case the predicted probabilities "</FONT>
<FONT ID="LN">215 </FONT><A NAME="215"></A>      + <FONT ID="StringLiteral">"are coupled using Hastie and Tibshirani's pairwise coupling "</FONT>
<FONT ID="LN">216 </FONT><A NAME="216"></A>      + <FONT ID="StringLiteral">"method.\n\n"</FONT>
<FONT ID="LN">217 </FONT><A NAME="217"></A>      + <FONT ID="StringLiteral">"Note: for improved speed normalization should be turned off when "</FONT>
<FONT ID="LN">218 </FONT><A NAME="218"></A>      + <FONT ID="StringLiteral">"operating on SparseInstances.\n\n"</FONT>
<FONT ID="LN">219 </FONT><A NAME="219"></A>      + <FONT ID="StringLiteral">"For more information on the SMO algorithm, see\n\n"</FONT>
<FONT ID="LN">220 </FONT><A NAME="220"></A>      + getTechnicalInformation().toString();
<FONT ID="LN">221 </FONT><A NAME="221"></A>  }
<FONT ID="LN">222 </FONT><A NAME="222"></A>
<FONT ID="LN">223 </FONT><A NAME="223"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">224 </FONT><A NAME="224"></A>   * Returns an instance of a TechnicalInformation object, containing 
<FONT ID="LN">225 </FONT><A NAME="225"></A>   * detailed information about the technical background of this class,
<FONT ID="LN">226 </FONT><A NAME="226"></A>   * e.g., paper reference or book this class is based on.
<FONT ID="LN">227 </FONT><A NAME="227"></A>   * 
<FONT ID="LN">228 </FONT><A NAME="228"></A>   * @return the technical information about this class
<FONT ID="LN">229 </FONT><A NAME="229"></A>   */</FONT>
<FONT ID="LN">230 </FONT><A NAME="230"></A>  <FONT ID="Public">public</FONT> <A HREF="../../../weka/core/TechnicalInformation.java.html">TechnicalInformation</A> getTechnicalInformation() {
<FONT ID="LN">231 </FONT><A NAME="231"></A>    <A HREF="../../../weka/core/TechnicalInformation.java.html">TechnicalInformation</A>    result;
<FONT ID="LN">232 </FONT><A NAME="232"></A>    <A HREF="../../../weka/core/TechnicalInformation.java.html">TechnicalInformation</A>    additional;
<FONT ID="LN">233 </FONT><A NAME="233"></A>    
<FONT ID="LN">234 </FONT><A NAME="234"></A>    result = <FONT ID="New">new</FONT> <A HREF="../../../weka/core/TechnicalInformation.java.html">TechnicalInformation</A>(Type.INCOLLECTION);
<FONT ID="LN">235 </FONT><A NAME="235"></A>    result.setValue(Field.AUTHOR, <FONT ID="StringLiteral">"J. Platt"</FONT>);
<FONT ID="LN">236 </FONT><A NAME="236"></A>    result.setValue(Field.YEAR, <FONT ID="StringLiteral">"1998"</FONT>);
<FONT ID="LN">237 </FONT><A NAME="237"></A>    result.setValue(Field.TITLE, <FONT ID="StringLiteral">"Machines using Sequential Minimal Optimization"</FONT>);
<FONT ID="LN">238 </FONT><A NAME="238"></A>    result.setValue(Field.BOOKTITLE, <FONT ID="StringLiteral">"Advances in Kernel Methods - Support Vector Learning"</FONT>);
<FONT ID="LN">239 </FONT><A NAME="239"></A>    result.setValue(Field.EDITOR, <FONT ID="StringLiteral">"B. Schoelkopf and C. Burges and A. Smola"</FONT>);
<FONT ID="LN">240 </FONT><A NAME="240"></A>    result.setValue(Field.PUBLISHER, <FONT ID="StringLiteral">"MIT Press"</FONT>);
<FONT ID="LN">241 </FONT><A NAME="241"></A>    
<FONT ID="LN">242 </FONT><A NAME="242"></A>    additional = result.add(Type.ARTICLE);
<FONT ID="LN">243 </FONT><A NAME="243"></A>    additional.setValue(Field.AUTHOR, <FONT ID="StringLiteral">"S.S. Keerthi and S.K. Shevade and C. Bhattacharyya and K.R.K. Murthy"</FONT>);
<FONT ID="LN">244 </FONT><A NAME="244"></A>    additional.setValue(Field.YEAR, <FONT ID="StringLiteral">"2001"</FONT>);
<FONT ID="LN">245 </FONT><A NAME="245"></A>    additional.setValue(Field.TITLE, <FONT ID="StringLiteral">"Improvements to Platt's SMO Algorithm for SVM Classifier Design"</FONT>);
<FONT ID="LN">246 </FONT><A NAME="246"></A>    additional.setValue(Field.JOURNAL, <FONT ID="StringLiteral">"Neural Computation"</FONT>);
<FONT ID="LN">247 </FONT><A NAME="247"></A>    additional.setValue(Field.VOLUME, <FONT ID="StringLiteral">"13"</FONT>);
<FONT ID="LN">248 </FONT><A NAME="248"></A>    additional.setValue(Field.NUMBER, <FONT ID="StringLiteral">"3"</FONT>);
<FONT ID="LN">249 </FONT><A NAME="249"></A>    additional.setValue(Field.PAGES, <FONT ID="StringLiteral">"637-649"</FONT>);
<FONT ID="LN">250 </FONT><A NAME="250"></A>    
<FONT ID="LN">251 </FONT><A NAME="251"></A>    <FONT ID="Return">return</FONT> result;
<FONT ID="LN">252 </FONT><A NAME="252"></A>  }
<FONT ID="LN">253 </FONT><A NAME="253"></A>
<FONT ID="LN">254 </FONT><A NAME="254"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">255 </FONT><A NAME="255"></A>   * Class for building a binary support vector machine.
<FONT ID="LN">256 </FONT><A NAME="256"></A>   */</FONT>
<FONT ID="LN">257 </FONT><A NAME="257"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Class">class</FONT> BinaryMISMO 
<FONT ID="LN">258 </FONT><A NAME="258"></A>    <FONT ID="Implements">implements</FONT> Serializable, <A HREF="../../../weka/core/RevisionHandler.java.html">RevisionHandler</A> {
<FONT ID="LN">259 </FONT><A NAME="259"></A>
<FONT ID="LN">260 </FONT><A NAME="260"></A>    <FONT ID="FormalComment">/** for serialization */</FONT>
<FONT ID="LN">261 </FONT><A NAME="261"></A>    <FONT ID="Static">static</FONT> <FONT ID="Final">final</FONT> <FONT ID="Long">long</FONT> serialVersionUID = -<FONT ID="IntegerLiteral">7107082483475433531L</FONT>;
<FONT ID="LN">262 </FONT><A NAME="262"></A>    
<FONT ID="LN">263 </FONT><A NAME="263"></A>    <FONT ID="FormalComment">/** The Lagrange multipliers. */</FONT>
<FONT ID="LN">264 </FONT><A NAME="264"></A>    <FONT ID="Protected">protected</FONT> <FONT ID="Double">double</FONT>[] m_alpha;
<FONT ID="LN">265 </FONT><A NAME="265"></A>
<FONT ID="LN">266 </FONT><A NAME="266"></A>    <FONT ID="FormalComment">/** The thresholds. */</FONT>
<FONT ID="LN">267 </FONT><A NAME="267"></A>    <FONT ID="Protected">protected</FONT> <FONT ID="Double">double</FONT> m_b, m_bLow, m_bUp;
<FONT ID="LN">268 </FONT><A NAME="268"></A>
<FONT ID="LN">269 </FONT><A NAME="269"></A>    <FONT ID="FormalComment">/** The indices for m_bLow and m_bUp */</FONT>
<FONT ID="LN">270 </FONT><A NAME="270"></A>    <FONT ID="Protected">protected</FONT> <FONT ID="Int">int</FONT> m_iLow, m_iUp;
<FONT ID="LN">271 </FONT><A NAME="271"></A>
<FONT ID="LN">272 </FONT><A NAME="272"></A>    <FONT ID="FormalComment">/** The training data. */</FONT>
<FONT ID="LN">273 </FONT><A NAME="273"></A>    <FONT ID="Protected">protected</FONT> <A HREF="../../../weka/core/Instances.java.html">Instances</A> m_data;
<FONT ID="LN">274 </FONT><A NAME="274"></A>
<FONT ID="LN">275 </FONT><A NAME="275"></A>    <FONT ID="FormalComment">/** Weight vector for linear machine. */</FONT>
<FONT ID="LN">276 </FONT><A NAME="276"></A>    <FONT ID="Protected">protected</FONT> <FONT ID="Double">double</FONT>[] m_weights;
<FONT ID="LN">277 </FONT><A NAME="277"></A>
<FONT ID="LN">278 </FONT><A NAME="278"></A>    <FONT ID="FormalComment">/** Variables to hold weight vector in sparse form.
<FONT ID="LN">279 </FONT><A NAME="279"></A>      (To reduce storage requirements.) */</FONT>
<FONT ID="LN">280 </FONT><A NAME="280"></A>    <FONT ID="Protected">protected</FONT> <FONT ID="Double">double</FONT>[] m_sparseWeights;
<FONT ID="LN">281 </FONT><A NAME="281"></A>    <FONT ID="Protected">protected</FONT> <FONT ID="Int">int</FONT>[] m_sparseIndices;
<FONT ID="LN">282 </FONT><A NAME="282"></A>
<FONT ID="LN">283 </FONT><A NAME="283"></A>    <FONT ID="FormalComment">/** Kernel to use **/</FONT>
<FONT ID="LN">284 </FONT><A NAME="284"></A>    <FONT ID="Protected">protected</FONT> <A HREF="../../../weka/classifiers/functions/supportVector/Kernel.java.html">Kernel</A> m_kernel;
<FONT ID="LN">285 </FONT><A NAME="285"></A>
<FONT ID="LN">286 </FONT><A NAME="286"></A>    <FONT ID="FormalComment">/** The transformed class values. */</FONT>
<FONT ID="LN">287 </FONT><A NAME="287"></A>    <FONT ID="Protected">protected</FONT> <FONT ID="Double">double</FONT>[] m_class;
<FONT ID="LN">288 </FONT><A NAME="288"></A>
<FONT ID="LN">289 </FONT><A NAME="289"></A>    <FONT ID="FormalComment">/** The current set of errors for all non-bound examples. */</FONT>
<FONT ID="LN">290 </FONT><A NAME="290"></A>    <FONT ID="Protected">protected</FONT> <FONT ID="Double">double</FONT>[] m_errors;
<FONT ID="LN">291 </FONT><A NAME="291"></A>
<FONT ID="LN">292 </FONT><A NAME="292"></A>    <FONT ID="MultiLineComment">/* The five different sets used by the algorithm. */</FONT>
<FONT ID="LN">293 </FONT><A NAME="293"></A>    <FONT ID="FormalComment">/** {i: 0 &lt; m_alpha[i] &lt; C} */</FONT>
<FONT ID="LN">294 </FONT><A NAME="294"></A>    <FONT ID="Protected">protected</FONT> <A HREF="../../../weka/classifiers/functions/supportVector/SMOset.java.html">SMOset</A> m_I0;
<FONT ID="LN">295 </FONT><A NAME="295"></A>    <FONT ID="FormalComment">/** {i: m_class[i] = 1, m_alpha[i] = 0} */</FONT>
<FONT ID="LN">296 </FONT><A NAME="296"></A>    <FONT ID="Protected">protected</FONT> <A HREF="../../../weka/classifiers/functions/supportVector/SMOset.java.html">SMOset</A> m_I1; 
<FONT ID="LN">297 </FONT><A NAME="297"></A>    <FONT ID="FormalComment">/** {i: m_class[i] = -1, m_alpha[i] = C} */</FONT>
<FONT ID="LN">298 </FONT><A NAME="298"></A>    <FONT ID="Protected">protected</FONT> <A HREF="../../../weka/classifiers/functions/supportVector/SMOset.java.html">SMOset</A> m_I2; 
<FONT ID="LN">299 </FONT><A NAME="299"></A>    <FONT ID="FormalComment">/** {i: m_class[i] = 1, m_alpha[i] = C} */</FONT>
<FONT ID="LN">300 </FONT><A NAME="300"></A>    <FONT ID="Protected">protected</FONT> <A HREF="../../../weka/classifiers/functions/supportVector/SMOset.java.html">SMOset</A> m_I3; 
<FONT ID="LN">301 </FONT><A NAME="301"></A>    <FONT ID="FormalComment">/** {i: m_class[i] = -1, m_alpha[i] = 0} */</FONT>
<FONT ID="LN">302 </FONT><A NAME="302"></A>    <FONT ID="Protected">protected</FONT> <A HREF="../../../weka/classifiers/functions/supportVector/SMOset.java.html">SMOset</A> m_I4; 
<FONT ID="LN">303 </FONT><A NAME="303"></A>
<FONT ID="LN">304 </FONT><A NAME="304"></A>    <FONT ID="FormalComment">/** The set of support vectors {i: 0 &lt; m_alpha[i]} */</FONT>
<FONT ID="LN">305 </FONT><A NAME="305"></A>    <FONT ID="Protected">protected</FONT> <A HREF="../../../weka/classifiers/functions/supportVector/SMOset.java.html">SMOset</A> m_supportVectors;
<FONT ID="LN">306 </FONT><A NAME="306"></A>
<FONT ID="LN">307 </FONT><A NAME="307"></A>    <FONT ID="FormalComment">/** Stores logistic regression model for probability estimate */</FONT>
<FONT ID="LN">308 </FONT><A NAME="308"></A>    <FONT ID="Protected">protected</FONT> <A HREF="../../../weka/classifiers/functions/Logistic.java.html">Logistic</A> m_logistic = <FONT ID="Null">null</FONT>;
<FONT ID="LN">309 </FONT><A NAME="309"></A>
<FONT ID="LN">310 </FONT><A NAME="310"></A>    <FONT ID="FormalComment">/** Stores the weight of the training instances */</FONT>
<FONT ID="LN">311 </FONT><A NAME="311"></A>    <FONT ID="Protected">protected</FONT> <FONT ID="Double">double</FONT> m_sumOfWeights = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">312 </FONT><A NAME="312"></A>
<FONT ID="LN">313 </FONT><A NAME="313"></A>    <FONT ID="FormalComment">/**
<FONT ID="LN">314 </FONT><A NAME="314"></A>     * Fits logistic regression model to SVM outputs analogue
<FONT ID="LN">315 </FONT><A NAME="315"></A>     * to John Platt's method.  
<FONT ID="LN">316 </FONT><A NAME="316"></A>     *
<FONT ID="LN">317 </FONT><A NAME="317"></A>     * @param insts the set of training instances
<FONT ID="LN">318 </FONT><A NAME="318"></A>     * @param cl1 the first class' index
<FONT ID="LN">319 </FONT><A NAME="319"></A>     * @param cl2 the second class' index
<FONT ID="LN">320 </FONT><A NAME="320"></A>     * @param numFolds the number of folds for cross-validation
<FONT ID="LN">321 </FONT><A NAME="321"></A>     * @param random the random number generator for cross-validation
<FONT ID="LN">322 </FONT><A NAME="322"></A>     * @throws Exception if the sigmoid can't be fit successfully
<FONT ID="LN">323 </FONT><A NAME="323"></A>     */</FONT>
<FONT ID="LN">324 </FONT><A NAME="324"></A>    <FONT ID="Protected">protected</FONT> <FONT ID="Void">void</FONT> fitLogistic(<A HREF="../../../weka/core/Instances.java.html">Instances</A> insts, <FONT ID="Int">int</FONT> cl1, <FONT ID="Int">int</FONT> cl2,
<FONT ID="LN">325 </FONT><A NAME="325"></A>        <FONT ID="Int">int</FONT> numFolds, Random random) 
<FONT ID="LN">326 </FONT><A NAME="326"></A>      <FONT ID="Throws">throws</FONT> Exception {
<FONT ID="LN">327 </FONT><A NAME="327"></A>
<FONT ID="LN">328 </FONT><A NAME="328"></A>      <FONT ID="SingleLineComment">// Create header of instances object
<FONT ID="LN">329 </FONT><A NAME="329"></A></FONT>      <A HREF="../../../weka/core/FastVector.java.html">FastVector</A> atts = <FONT ID="New">new</FONT> <A HREF="../../../weka/core/FastVector.java.html">FastVector</A>(<FONT ID="IntegerLiteral">2</FONT>);
<FONT ID="LN">330 </FONT><A NAME="330"></A>      atts.addElement(<FONT ID="New">new</FONT> <A HREF="../../../weka/core/Attribute.java.html">Attribute</A>(<FONT ID="StringLiteral">"pred"</FONT>));
<FONT ID="LN">331 </FONT><A NAME="331"></A>      <A HREF="../../../weka/core/FastVector.java.html">FastVector</A> attVals = <FONT ID="New">new</FONT> <A HREF="../../../weka/core/FastVector.java.html">FastVector</A>(<FONT ID="IntegerLiteral">2</FONT>);
<FONT ID="LN">332 </FONT><A NAME="332"></A>      attVals.addElement(insts.classAttribute().value(cl1));
<FONT ID="LN">333 </FONT><A NAME="333"></A>      attVals.addElement(insts.classAttribute().value(cl2));
<FONT ID="LN">334 </FONT><A NAME="334"></A>      atts.addElement(<FONT ID="New">new</FONT> <A HREF="../../../weka/core/Attribute.java.html">Attribute</A>(<FONT ID="StringLiteral">"class"</FONT>, attVals));
<FONT ID="LN">335 </FONT><A NAME="335"></A>      <A HREF="../../../weka/core/Instances.java.html">Instances</A> data = <FONT ID="New">new</FONT> <A HREF="../../../weka/core/Instances.java.html">Instances</A>(<FONT ID="StringLiteral">"data"</FONT>, atts, insts.numInstances());
<FONT ID="LN">336 </FONT><A NAME="336"></A>      data.setClassIndex(<FONT ID="IntegerLiteral">1</FONT>);
<FONT ID="LN">337 </FONT><A NAME="337"></A>
<FONT ID="LN">338 </FONT><A NAME="338"></A>      <FONT ID="SingleLineComment">// Collect data for fitting the logistic model
<FONT ID="LN">339 </FONT><A NAME="339"></A></FONT>      <FONT ID="If">if</FONT> (numFolds &lt;= <FONT ID="IntegerLiteral">0</FONT>) {
<FONT ID="LN">340 </FONT><A NAME="340"></A>
<FONT ID="LN">341 </FONT><A NAME="341"></A>        <FONT ID="SingleLineComment">// Use training data
<FONT ID="LN">342 </FONT><A NAME="342"></A></FONT>        <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = <FONT ID="IntegerLiteral">0</FONT>; j &lt; insts.numInstances(); j++) {
<FONT ID="LN">343 </FONT><A NAME="343"></A>          <A HREF="../../../weka/core/Instance.java.html">Instance</A> inst = insts.instance(j);
<FONT ID="LN">344 </FONT><A NAME="344"></A>          <FONT ID="Double">double</FONT>[] vals = <FONT ID="New">new</FONT> <FONT ID="Double">double</FONT>[<FONT ID="IntegerLiteral">2</FONT>];
<FONT ID="LN">345 </FONT><A NAME="345"></A>          vals[<FONT ID="IntegerLiteral">0</FONT>] = SVMOutput(-<FONT ID="IntegerLiteral">1</FONT>, inst);
<FONT ID="LN">346 </FONT><A NAME="346"></A>          <FONT ID="If">if</FONT> (inst.classValue() == cl2) {
<FONT ID="LN">347 </FONT><A NAME="347"></A>            vals[<FONT ID="IntegerLiteral">1</FONT>] = <FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">348 </FONT><A NAME="348"></A>          }
<FONT ID="LN">349 </FONT><A NAME="349"></A>          data.add(<FONT ID="New">new</FONT> <A HREF="../../../weka/core/DenseInstance.java.html">DenseInstance</A>(inst.weight(), vals));
<FONT ID="LN">350 </FONT><A NAME="350"></A>        }
<FONT ID="LN">351 </FONT><A NAME="351"></A>      } <FONT ID="Else">else</FONT> {
<FONT ID="LN">352 </FONT><A NAME="352"></A>
<FONT ID="LN">353 </FONT><A NAME="353"></A>        <FONT ID="SingleLineComment">// Check whether number of folds too large
<FONT ID="LN">354 </FONT><A NAME="354"></A></FONT>        <FONT ID="If">if</FONT> (numFolds &gt; insts.numInstances()) {
<FONT ID="LN">355 </FONT><A NAME="355"></A>          numFolds = insts.numInstances();
<FONT ID="LN">356 </FONT><A NAME="356"></A>        }
<FONT ID="LN">357 </FONT><A NAME="357"></A>
<FONT ID="LN">358 </FONT><A NAME="358"></A>        <FONT ID="SingleLineComment">// Make copy of instances because we will shuffle them around
<FONT ID="LN">359 </FONT><A NAME="359"></A></FONT>        insts = <FONT ID="New">new</FONT> <A HREF="../../../weka/core/Instances.java.html">Instances</A>(insts);
<FONT ID="LN">360 </FONT><A NAME="360"></A>
<FONT ID="LN">361 </FONT><A NAME="361"></A>        <FONT ID="SingleLineComment">// Perform three-fold cross-validation to collect
<FONT ID="LN">362 </FONT><A NAME="362"></A></FONT>        <FONT ID="SingleLineComment">// unbiased predictions
<FONT ID="LN">363 </FONT><A NAME="363"></A></FONT>        insts.randomize(random);
<FONT ID="LN">364 </FONT><A NAME="364"></A>        insts.stratify(numFolds);
<FONT ID="LN">365 </FONT><A NAME="365"></A>        <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; numFolds; i++) {
<FONT ID="LN">366 </FONT><A NAME="366"></A>          <A HREF="../../../weka/core/Instances.java.html">Instances</A> train = insts.trainCV(numFolds, i, random);
<FONT ID="LN">367 </FONT><A NAME="367"></A>          <A HREF="../../../weka/core/SerializedObject.java.html">SerializedObject</A> so = <FONT ID="New">new</FONT> <A HREF="../../../weka/core/SerializedObject.java.html">SerializedObject</A>(<FONT ID="This">this</FONT>);
<FONT ID="LN">368 </FONT><A NAME="368"></A>          BinaryMISMO smo = (BinaryMISMO)so.getObject();
<FONT ID="LN">369 </FONT><A NAME="369"></A>          smo.buildClassifier(train, cl1, cl2, <FONT ID="False">false</FONT>, -<FONT ID="IntegerLiteral">1</FONT>, -<FONT ID="IntegerLiteral">1</FONT>);
<FONT ID="LN">370 </FONT><A NAME="370"></A>          <A HREF="../../../weka/core/Instances.java.html">Instances</A> test = insts.testCV(numFolds, i);
<FONT ID="LN">371 </FONT><A NAME="371"></A>          <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = <FONT ID="IntegerLiteral">0</FONT>; j &lt; test.numInstances(); j++) {
<FONT ID="LN">372 </FONT><A NAME="372"></A>            <FONT ID="Double">double</FONT>[] vals = <FONT ID="New">new</FONT> <FONT ID="Double">double</FONT>[<FONT ID="IntegerLiteral">2</FONT>];
<FONT ID="LN">373 </FONT><A NAME="373"></A>            vals[<FONT ID="IntegerLiteral">0</FONT>] = smo.SVMOutput(-<FONT ID="IntegerLiteral">1</FONT>, test.instance(j));
<FONT ID="LN">374 </FONT><A NAME="374"></A>            <FONT ID="If">if</FONT> (test.instance(j).classValue() == cl2) {
<FONT ID="LN">375 </FONT><A NAME="375"></A>              vals[<FONT ID="IntegerLiteral">1</FONT>] = <FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">376 </FONT><A NAME="376"></A>            }
<FONT ID="LN">377 </FONT><A NAME="377"></A>            data.add(<FONT ID="New">new</FONT> <A HREF="../../../weka/core/DenseInstance.java.html">DenseInstance</A>(test.instance(j).weight(), vals));
<FONT ID="LN">378 </FONT><A NAME="378"></A>          }
<FONT ID="LN">379 </FONT><A NAME="379"></A>        }
<FONT ID="LN">380 </FONT><A NAME="380"></A>      }
<FONT ID="LN">381 </FONT><A NAME="381"></A>
<FONT ID="LN">382 </FONT><A NAME="382"></A>      <FONT ID="SingleLineComment">// Build logistic regression model
<FONT ID="LN">383 </FONT><A NAME="383"></A></FONT>      m_logistic = <FONT ID="New">new</FONT> <A HREF="../../../weka/classifiers/functions/Logistic.java.html">Logistic</A>();
<FONT ID="LN">384 </FONT><A NAME="384"></A>      m_logistic.buildClassifier(data);
<FONT ID="LN">385 </FONT><A NAME="385"></A>    }
<FONT ID="LN">386 </FONT><A NAME="386"></A>    
<FONT ID="LN">387 </FONT><A NAME="387"></A>    <FONT ID="FormalComment">/**
<FONT ID="LN">388 </FONT><A NAME="388"></A>     * sets the kernel to use
<FONT ID="LN">389 </FONT><A NAME="389"></A>     * 
<FONT ID="LN">390 </FONT><A NAME="390"></A>     * @param value the kernel to use
<FONT ID="LN">391 </FONT><A NAME="391"></A>     */</FONT>
<FONT ID="LN">392 </FONT><A NAME="392"></A>    <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setKernel(<A HREF="../../../weka/classifiers/functions/supportVector/Kernel.java.html">Kernel</A> value) {
<FONT ID="LN">393 </FONT><A NAME="393"></A>      m_kernel = value;
<FONT ID="LN">394 </FONT><A NAME="394"></A>    }
<FONT ID="LN">395 </FONT><A NAME="395"></A>    
<FONT ID="LN">396 </FONT><A NAME="396"></A>    <FONT ID="FormalComment">/**
<FONT ID="LN">397 </FONT><A NAME="397"></A>     * Returns the kernel to use
<FONT ID="LN">398 </FONT><A NAME="398"></A>     * 
<FONT ID="LN">399 </FONT><A NAME="399"></A>     * @return      the current kernel
<FONT ID="LN">400 </FONT><A NAME="400"></A>     */</FONT>
<FONT ID="LN">401 </FONT><A NAME="401"></A>    <FONT ID="Public">public</FONT> <A HREF="../../../weka/classifiers/functions/supportVector/Kernel.java.html">Kernel</A> getKernel() {
<FONT ID="LN">402 </FONT><A NAME="402"></A>      <FONT ID="Return">return</FONT> m_kernel;
<FONT ID="LN">403 </FONT><A NAME="403"></A>    }
<FONT ID="LN">404 </FONT><A NAME="404"></A>
<FONT ID="LN">405 </FONT><A NAME="405"></A>    <FONT ID="FormalComment">/**
<FONT ID="LN">406 </FONT><A NAME="406"></A>     * Method for building the binary classifier.
<FONT ID="LN">407 </FONT><A NAME="407"></A>     *
<FONT ID="LN">408 </FONT><A NAME="408"></A>     * @param insts the set of training instances
<FONT ID="LN">409 </FONT><A NAME="409"></A>     * @param cl1 the first class' index
<FONT ID="LN">410 </FONT><A NAME="410"></A>     * @param cl2 the second class' index
<FONT ID="LN">411 </FONT><A NAME="411"></A>     * @param fitLogistic true if logistic model is to be fit
<FONT ID="LN">412 </FONT><A NAME="412"></A>     * @param numFolds number of folds for internal cross-validation
<FONT ID="LN">413 </FONT><A NAME="413"></A>     * @param randomSeed seed value for random number generator for cross-validation
<FONT ID="LN">414 </FONT><A NAME="414"></A>     * @throws Exception if the classifier can't be built successfully
<FONT ID="LN">415 </FONT><A NAME="415"></A>     */</FONT>
<FONT ID="LN">416 </FONT><A NAME="416"></A>    <FONT ID="Protected">protected</FONT> <FONT ID="Void">void</FONT> buildClassifier(<A HREF="../../../weka/core/Instances.java.html">Instances</A> insts, <FONT ID="Int">int</FONT> cl1, <FONT ID="Int">int</FONT> cl2,
<FONT ID="LN">417 </FONT><A NAME="417"></A>        <FONT ID="Boolean">boolean</FONT> fitLogistic, <FONT ID="Int">int</FONT> numFolds,
<FONT ID="LN">418 </FONT><A NAME="418"></A>        <FONT ID="Int">int</FONT> randomSeed) <FONT ID="Throws">throws</FONT> Exception {
<FONT ID="LN">419 </FONT><A NAME="419"></A>
<FONT ID="LN">420 </FONT><A NAME="420"></A>      <FONT ID="SingleLineComment">// Initialize some variables
<FONT ID="LN">421 </FONT><A NAME="421"></A></FONT>      m_bUp = -<FONT ID="IntegerLiteral">1</FONT>; m_bLow = <FONT ID="IntegerLiteral">1</FONT>; m_b = <FONT ID="IntegerLiteral">0</FONT>; 
<FONT ID="LN">422 </FONT><A NAME="422"></A>      m_alpha = <FONT ID="Null">null</FONT>; m_data = <FONT ID="Null">null</FONT>; m_weights = <FONT ID="Null">null</FONT>; m_errors = <FONT ID="Null">null</FONT>;
<FONT ID="LN">423 </FONT><A NAME="423"></A>      m_logistic = <FONT ID="Null">null</FONT>; m_I0 = <FONT ID="Null">null</FONT>; m_I1 = <FONT ID="Null">null</FONT>; m_I2 = <FONT ID="Null">null</FONT>;
<FONT ID="LN">424 </FONT><A NAME="424"></A>      m_I3 = <FONT ID="Null">null</FONT>; m_I4 = <FONT ID="Null">null</FONT>; m_sparseWeights = <FONT ID="Null">null</FONT>; m_sparseIndices = <FONT ID="Null">null</FONT>;
<FONT ID="LN">425 </FONT><A NAME="425"></A>
<FONT ID="LN">426 </FONT><A NAME="426"></A>      <FONT ID="SingleLineComment">// Store the sum of weights
<FONT ID="LN">427 </FONT><A NAME="427"></A></FONT>      m_sumOfWeights = insts.sumOfWeights();
<FONT ID="LN">428 </FONT><A NAME="428"></A>
<FONT ID="LN">429 </FONT><A NAME="429"></A>      <FONT ID="SingleLineComment">// Set class values
<FONT ID="LN">430 </FONT><A NAME="430"></A></FONT>      m_class = <FONT ID="New">new</FONT> <FONT ID="Double">double</FONT>[insts.numInstances()];
<FONT ID="LN">431 </FONT><A NAME="431"></A>      m_iUp = -<FONT ID="IntegerLiteral">1</FONT>; m_iLow = -<FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">432 </FONT><A NAME="432"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; m_class.length; i++) {
<FONT ID="LN">433 </FONT><A NAME="433"></A>        <FONT ID="If">if</FONT> ((<FONT ID="Int">int</FONT>) insts.instance(i).classValue() == cl1) {
<FONT ID="LN">434 </FONT><A NAME="434"></A>          m_class[i] = -<FONT ID="IntegerLiteral">1</FONT>; m_iLow = i;
<FONT ID="LN">435 </FONT><A NAME="435"></A>        } <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> ((<FONT ID="Int">int</FONT>) insts.instance(i).classValue() == cl2) {
<FONT ID="LN">436 </FONT><A NAME="436"></A>          m_class[i] = <FONT ID="IntegerLiteral">1</FONT>; m_iUp = i;
<FONT ID="LN">437 </FONT><A NAME="437"></A>        } <FONT ID="Else">else</FONT> {
<FONT ID="LN">438 </FONT><A NAME="438"></A>          <FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> Exception (<FONT ID="StringLiteral">"This should never happen!"</FONT>);
<FONT ID="LN">439 </FONT><A NAME="439"></A>        }
<FONT ID="LN">440 </FONT><A NAME="440"></A>      }
<FONT ID="LN">441 </FONT><A NAME="441"></A>
<FONT ID="LN">442 </FONT><A NAME="442"></A>      <FONT ID="SingleLineComment">// Check whether one or both classes are missing
<FONT ID="LN">443 </FONT><A NAME="443"></A></FONT>      <FONT ID="If">if</FONT> ((m_iUp == -<FONT ID="IntegerLiteral">1</FONT>) || (m_iLow == -<FONT ID="IntegerLiteral">1</FONT>)) {
<FONT ID="LN">444 </FONT><A NAME="444"></A>        <FONT ID="If">if</FONT> (m_iUp != -<FONT ID="IntegerLiteral">1</FONT>) {
<FONT ID="LN">445 </FONT><A NAME="445"></A>          m_b = -<FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">446 </FONT><A NAME="446"></A>        } <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (m_iLow != -<FONT ID="IntegerLiteral">1</FONT>) {
<FONT ID="LN">447 </FONT><A NAME="447"></A>          m_b = <FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">448 </FONT><A NAME="448"></A>        } <FONT ID="Else">else</FONT> {
<FONT ID="LN">449 </FONT><A NAME="449"></A>          m_class = <FONT ID="Null">null</FONT>;
<FONT ID="LN">450 </FONT><A NAME="450"></A>          <FONT ID="Return">return</FONT>;
<FONT ID="LN">451 </FONT><A NAME="451"></A>        }
<FONT ID="LN">452 </FONT><A NAME="452"></A>        m_supportVectors = <FONT ID="New">new</FONT> <A HREF="../../../weka/classifiers/functions/supportVector/SMOset.java.html">SMOset</A>(<FONT ID="IntegerLiteral">0</FONT>);
<FONT ID="LN">453 </FONT><A NAME="453"></A>        m_alpha = <FONT ID="New">new</FONT> <FONT ID="Double">double</FONT>[<FONT ID="IntegerLiteral">0</FONT>];
<FONT ID="LN">454 </FONT><A NAME="454"></A>        m_class = <FONT ID="New">new</FONT> <FONT ID="Double">double</FONT>[<FONT ID="IntegerLiteral">0</FONT>];
<FONT ID="LN">455 </FONT><A NAME="455"></A>
<FONT ID="LN">456 </FONT><A NAME="456"></A>        <FONT ID="SingleLineComment">// Fit sigmoid if requested
<FONT ID="LN">457 </FONT><A NAME="457"></A></FONT>        <FONT ID="If">if</FONT> (fitLogistic) {
<FONT ID="LN">458 </FONT><A NAME="458"></A>          fitLogistic(insts, cl1, cl2, numFolds, <FONT ID="New">new</FONT> Random(randomSeed));
<FONT ID="LN">459 </FONT><A NAME="459"></A>        }
<FONT ID="LN">460 </FONT><A NAME="460"></A>        <FONT ID="Return">return</FONT>;
<FONT ID="LN">461 </FONT><A NAME="461"></A>      }
<FONT ID="LN">462 </FONT><A NAME="462"></A>
<FONT ID="LN">463 </FONT><A NAME="463"></A>      <FONT ID="SingleLineComment">// Set the reference to the data
<FONT ID="LN">464 </FONT><A NAME="464"></A></FONT>      m_data = insts;
<FONT ID="LN">465 </FONT><A NAME="465"></A>      m_weights = <FONT ID="Null">null</FONT>;
<FONT ID="LN">466 </FONT><A NAME="466"></A>
<FONT ID="LN">467 </FONT><A NAME="467"></A>      <FONT ID="SingleLineComment">// Initialize alpha array to zero
<FONT ID="LN">468 </FONT><A NAME="468"></A></FONT>      m_alpha = <FONT ID="New">new</FONT> <FONT ID="Double">double</FONT>[m_data.numInstances()];
<FONT ID="LN">469 </FONT><A NAME="469"></A>
<FONT ID="LN">470 </FONT><A NAME="470"></A>      <FONT ID="SingleLineComment">// Initialize sets
<FONT ID="LN">471 </FONT><A NAME="471"></A></FONT>      m_supportVectors = <FONT ID="New">new</FONT> <A HREF="../../../weka/classifiers/functions/supportVector/SMOset.java.html">SMOset</A>(m_data.numInstances());
<FONT ID="LN">472 </FONT><A NAME="472"></A>      m_I0 = <FONT ID="New">new</FONT> <A HREF="../../../weka/classifiers/functions/supportVector/SMOset.java.html">SMOset</A>(m_data.numInstances());
<FONT ID="LN">473 </FONT><A NAME="473"></A>      m_I1 = <FONT ID="New">new</FONT> <A HREF="../../../weka/classifiers/functions/supportVector/SMOset.java.html">SMOset</A>(m_data.numInstances());
<FONT ID="LN">474 </FONT><A NAME="474"></A>      m_I2 = <FONT ID="New">new</FONT> <A HREF="../../../weka/classifiers/functions/supportVector/SMOset.java.html">SMOset</A>(m_data.numInstances());
<FONT ID="LN">475 </FONT><A NAME="475"></A>      m_I3 = <FONT ID="New">new</FONT> <A HREF="../../../weka/classifiers/functions/supportVector/SMOset.java.html">SMOset</A>(m_data.numInstances());
<FONT ID="LN">476 </FONT><A NAME="476"></A>      m_I4 = <FONT ID="New">new</FONT> <A HREF="../../../weka/classifiers/functions/supportVector/SMOset.java.html">SMOset</A>(m_data.numInstances());
<FONT ID="LN">477 </FONT><A NAME="477"></A>
<FONT ID="LN">478 </FONT><A NAME="478"></A>      <FONT ID="SingleLineComment">// Clean out some instance variables
<FONT ID="LN">479 </FONT><A NAME="479"></A></FONT>      m_sparseWeights = <FONT ID="Null">null</FONT>;
<FONT ID="LN">480 </FONT><A NAME="480"></A>      m_sparseIndices = <FONT ID="Null">null</FONT>;
<FONT ID="LN">481 </FONT><A NAME="481"></A>
<FONT ID="LN">482 </FONT><A NAME="482"></A>      <FONT ID="SingleLineComment">// Initialize error cache
<FONT ID="LN">483 </FONT><A NAME="483"></A></FONT>      m_errors = <FONT ID="New">new</FONT> <FONT ID="Double">double</FONT>[m_data.numInstances()];
<FONT ID="LN">484 </FONT><A NAME="484"></A>      m_errors[m_iLow] = <FONT ID="IntegerLiteral">1</FONT>; m_errors[m_iUp] = -<FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">485 </FONT><A NAME="485"></A>
<FONT ID="LN">486 </FONT><A NAME="486"></A>      <FONT ID="SingleLineComment">// Initialize kernel
<FONT ID="LN">487 </FONT><A NAME="487"></A></FONT>      m_kernel.buildKernel(m_data);
<FONT ID="LN">488 </FONT><A NAME="488"></A>
<FONT ID="LN">489 </FONT><A NAME="489"></A>      <FONT ID="SingleLineComment">// Build up I1 and I4
<FONT ID="LN">490 </FONT><A NAME="490"></A></FONT>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; m_class.length; i++ ) {
<FONT ID="LN">491 </FONT><A NAME="491"></A>        <FONT ID="If">if</FONT> (m_class[i] == <FONT ID="IntegerLiteral">1</FONT>) {
<FONT ID="LN">492 </FONT><A NAME="492"></A>          m_I1.insert(i);
<FONT ID="LN">493 </FONT><A NAME="493"></A>        } <FONT ID="Else">else</FONT> {
<FONT ID="LN">494 </FONT><A NAME="494"></A>          m_I4.insert(i);
<FONT ID="LN">495 </FONT><A NAME="495"></A>        }
<FONT ID="LN">496 </FONT><A NAME="496"></A>      }
<FONT ID="LN">497 </FONT><A NAME="497"></A>
<FONT ID="LN">498 </FONT><A NAME="498"></A>      <FONT ID="SingleLineComment">// Loop to find all the support vectors
<FONT ID="LN">499 </FONT><A NAME="499"></A></FONT>      <FONT ID="Int">int</FONT> numChanged = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">500 </FONT><A NAME="500"></A>      <FONT ID="Boolean">boolean</FONT> examineAll = <FONT ID="True">true</FONT>;
<FONT ID="LN">501 </FONT><A NAME="501"></A>      <FONT ID="While">while</FONT> ((numChanged &gt; <FONT ID="IntegerLiteral">0</FONT>) || examineAll) {
<FONT ID="LN">502 </FONT><A NAME="502"></A>        numChanged = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">503 </FONT><A NAME="503"></A>        <FONT ID="If">if</FONT> (examineAll) {
<FONT ID="LN">504 </FONT><A NAME="504"></A>          <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; m_alpha.length; i++) {
<FONT ID="LN">505 </FONT><A NAME="505"></A>            <FONT ID="If">if</FONT> (examineExample(i)) {
<FONT ID="LN">506 </FONT><A NAME="506"></A>              numChanged++;
<FONT ID="LN">507 </FONT><A NAME="507"></A>            }
<FONT ID="LN">508 </FONT><A NAME="508"></A>          }
<FONT ID="LN">509 </FONT><A NAME="509"></A>        } <FONT ID="Else">else</FONT> {
<FONT ID="LN">510 </FONT><A NAME="510"></A>
<FONT ID="LN">511 </FONT><A NAME="511"></A>          <FONT ID="SingleLineComment">// This code implements Modification 1 from Keerthi et al.'s paper
<FONT ID="LN">512 </FONT><A NAME="512"></A></FONT>          <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; m_alpha.length; i++) {
<FONT ID="LN">513 </FONT><A NAME="513"></A>            <FONT ID="If">if</FONT> ((m_alpha[i] &gt; <FONT ID="IntegerLiteral">0</FONT>) &amp;&amp;  
<FONT ID="LN">514 </FONT><A NAME="514"></A>                (m_alpha[i] &lt; m_C * m_data.instance(i).weight())) {
<FONT ID="LN">515 </FONT><A NAME="515"></A>              <FONT ID="If">if</FONT> (examineExample(i)) {
<FONT ID="LN">516 </FONT><A NAME="516"></A>                numChanged++;
<FONT ID="LN">517 </FONT><A NAME="517"></A>              }
<FONT ID="LN">518 </FONT><A NAME="518"></A>
<FONT ID="LN">519 </FONT><A NAME="519"></A>              <FONT ID="SingleLineComment">// Is optimality on unbound vectors obtained?
<FONT ID="LN">520 </FONT><A NAME="520"></A></FONT>              <FONT ID="If">if</FONT> (m_bUp &gt; m_bLow - <FONT ID="IntegerLiteral">2</FONT> * m_tol) {
<FONT ID="LN">521 </FONT><A NAME="521"></A>                numChanged = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">522 </FONT><A NAME="522"></A>                <FONT ID="Break">break</FONT>;
<FONT ID="LN">523 </FONT><A NAME="523"></A>              }
<FONT ID="LN">524 </FONT><A NAME="524"></A>                }
<FONT ID="LN">525 </FONT><A NAME="525"></A>          }
<FONT ID="LN">526 </FONT><A NAME="526"></A>
<FONT ID="LN">527 </FONT><A NAME="527"></A>          <FONT ID="SingleLineComment">//This is the code for Modification 2 from Keerthi et al.'s paper
<FONT ID="LN">528 </FONT><A NAME="528"></A></FONT>          <FONT ID="MultiLineComment">/*boolean innerLoopSuccess = true; 
<FONT ID="LN">529 </FONT><A NAME="529"></A>            numChanged = 0;
<FONT ID="LN">530 </FONT><A NAME="530"></A>            while ((m_bUp &lt; m_bLow - 2 * m_tol) &amp;&amp; (innerLoopSuccess == true)) {
<FONT ID="LN">531 </FONT><A NAME="531"></A>            innerLoopSuccess = takeStep(m_iUp, m_iLow, m_errors[m_iLow]);
<FONT ID="LN">532 </FONT><A NAME="532"></A>            }*/</FONT>
<FONT ID="LN">533 </FONT><A NAME="533"></A>        }
<FONT ID="LN">534 </FONT><A NAME="534"></A>
<FONT ID="LN">535 </FONT><A NAME="535"></A>        <FONT ID="If">if</FONT> (examineAll) {
<FONT ID="LN">536 </FONT><A NAME="536"></A>          examineAll = <FONT ID="False">false</FONT>;
<FONT ID="LN">537 </FONT><A NAME="537"></A>        } <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (numChanged == <FONT ID="IntegerLiteral">0</FONT>) {
<FONT ID="LN">538 </FONT><A NAME="538"></A>          examineAll = <FONT ID="True">true</FONT>;
<FONT ID="LN">539 </FONT><A NAME="539"></A>        }
<FONT ID="LN">540 </FONT><A NAME="540"></A>      }
<FONT ID="LN">541 </FONT><A NAME="541"></A>
<FONT ID="LN">542 </FONT><A NAME="542"></A>      <FONT ID="SingleLineComment">// Set threshold
<FONT ID="LN">543 </FONT><A NAME="543"></A></FONT>      m_b = (m_bLow + m_bUp) / <FONT ID="FloatPointLiteral">2.0</FONT>;
<FONT ID="LN">544 </FONT><A NAME="544"></A>
<FONT ID="LN">545 </FONT><A NAME="545"></A>      <FONT ID="SingleLineComment">// Save memory
<FONT ID="LN">546 </FONT><A NAME="546"></A></FONT>      m_kernel.clean(); 
<FONT ID="LN">547 </FONT><A NAME="547"></A>
<FONT ID="LN">548 </FONT><A NAME="548"></A>      m_errors = <FONT ID="Null">null</FONT>;
<FONT ID="LN">549 </FONT><A NAME="549"></A>      m_I0 = m_I1 = m_I2 = m_I3 = m_I4 = <FONT ID="Null">null</FONT>;
<FONT ID="LN">550 </FONT><A NAME="550"></A>
<FONT ID="LN">551 </FONT><A NAME="551"></A>      <FONT ID="SingleLineComment">// Fit sigmoid if requested
<FONT ID="LN">552 </FONT><A NAME="552"></A></FONT>      <FONT ID="If">if</FONT> (fitLogistic) {
<FONT ID="LN">553 </FONT><A NAME="553"></A>        fitLogistic(insts, cl1, cl2, numFolds, <FONT ID="New">new</FONT> Random(randomSeed));
<FONT ID="LN">554 </FONT><A NAME="554"></A>      }
<FONT ID="LN">555 </FONT><A NAME="555"></A>
<FONT ID="LN">556 </FONT><A NAME="556"></A>    }
<FONT ID="LN">557 </FONT><A NAME="557"></A>
<FONT ID="LN">558 </FONT><A NAME="558"></A>    <FONT ID="FormalComment">/**
<FONT ID="LN">559 </FONT><A NAME="559"></A>     * Computes SVM output for given instance.
<FONT ID="LN">560 </FONT><A NAME="560"></A>     *
<FONT ID="LN">561 </FONT><A NAME="561"></A>     * @param index the instance for which output is to be computed
<FONT ID="LN">562 </FONT><A NAME="562"></A>     * @param inst the instance 
<FONT ID="LN">563 </FONT><A NAME="563"></A>     * @return the output of the SVM for the given instance
<FONT ID="LN">564 </FONT><A NAME="564"></A>     * @throws Exception if something goes wrong
<FONT ID="LN">565 </FONT><A NAME="565"></A>     */</FONT>
<FONT ID="LN">566 </FONT><A NAME="566"></A>    <FONT ID="Protected">protected</FONT> <FONT ID="Double">double</FONT> SVMOutput(<FONT ID="Int">int</FONT> index, <A HREF="../../../weka/core/Instance.java.html">Instance</A> inst) <FONT ID="Throws">throws</FONT> Exception {
<FONT ID="LN">567 </FONT><A NAME="567"></A>
<FONT ID="LN">568 </FONT><A NAME="568"></A>      <FONT ID="Double">double</FONT> result = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">569 </FONT><A NAME="569"></A>
<FONT ID="LN">570 </FONT><A NAME="570"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = m_supportVectors.getNext(-<FONT ID="IntegerLiteral">1</FONT>); i != -<FONT ID="IntegerLiteral">1</FONT>; 
<FONT ID="LN">571 </FONT><A NAME="571"></A>          i = m_supportVectors.getNext(i)) {
<FONT ID="LN">572 </FONT><A NAME="572"></A>        result += m_class[i] * m_alpha[i] * m_kernel.eval(index, i, inst);
<FONT ID="LN">573 </FONT><A NAME="573"></A>      }
<FONT ID="LN">574 </FONT><A NAME="574"></A>      result -= m_b;
<FONT ID="LN">575 </FONT><A NAME="575"></A>
<FONT ID="LN">576 </FONT><A NAME="576"></A>      <FONT ID="Return">return</FONT> result;
<FONT ID="LN">577 </FONT><A NAME="577"></A>    }
<FONT ID="LN">578 </FONT><A NAME="578"></A>
<FONT ID="LN">579 </FONT><A NAME="579"></A>    <FONT ID="FormalComment">/**
<FONT ID="LN">580 </FONT><A NAME="580"></A>     * Prints out the classifier.
<FONT ID="LN">581 </FONT><A NAME="581"></A>     *
<FONT ID="LN">582 </FONT><A NAME="582"></A>     * @return a description of the classifier as a string
<FONT ID="LN">583 </FONT><A NAME="583"></A>     */</FONT>
<FONT ID="LN">584 </FONT><A NAME="584"></A>    <FONT ID="Public">public</FONT> String toString() {
<FONT ID="LN">585 </FONT><A NAME="585"></A>
<FONT ID="LN">586 </FONT><A NAME="586"></A>      StringBuffer text = <FONT ID="New">new</FONT> StringBuffer();
<FONT ID="LN">587 </FONT><A NAME="587"></A>      <FONT ID="Int">int</FONT> printed = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">588 </FONT><A NAME="588"></A>
<FONT ID="LN">589 </FONT><A NAME="589"></A>      <FONT ID="If">if</FONT> ((m_alpha == <FONT ID="Null">null</FONT>) &amp;&amp; (m_sparseWeights == <FONT ID="Null">null</FONT>)) {
<FONT ID="LN">590 </FONT><A NAME="590"></A>        <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"BinaryMISMO: No model built yet.\n"</FONT>;
<FONT ID="LN">591 </FONT><A NAME="591"></A>      }
<FONT ID="LN">592 </FONT><A NAME="592"></A>      <FONT ID="Try">try</FONT> {
<FONT ID="LN">593 </FONT><A NAME="593"></A>        text.append(<FONT ID="StringLiteral">"BinaryMISMO\n\n"</FONT>);
<FONT ID="LN">594 </FONT><A NAME="594"></A>
<FONT ID="LN">595 </FONT><A NAME="595"></A>        <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; m_alpha.length; i++) {
<FONT ID="LN">596 </FONT><A NAME="596"></A>          <FONT ID="If">if</FONT> (m_supportVectors.contains(i)) {
<FONT ID="LN">597 </FONT><A NAME="597"></A>            <FONT ID="Double">double</FONT> val = m_alpha[i];
<FONT ID="LN">598 </FONT><A NAME="598"></A>            <FONT ID="If">if</FONT> (m_class[i] == <FONT ID="IntegerLiteral">1</FONT>) {
<FONT ID="LN">599 </FONT><A NAME="599"></A>              <FONT ID="If">if</FONT> (printed &gt; <FONT ID="IntegerLiteral">0</FONT>) {
<FONT ID="LN">600 </FONT><A NAME="600"></A>                text.append(<FONT ID="StringLiteral">" + "</FONT>);
<FONT ID="LN">601 </FONT><A NAME="601"></A>              }
<FONT ID="LN">602 </FONT><A NAME="602"></A>            } <FONT ID="Else">else</FONT> {
<FONT ID="LN">603 </FONT><A NAME="603"></A>              text.append(<FONT ID="StringLiteral">" - "</FONT>);
<FONT ID="LN">604 </FONT><A NAME="604"></A>            }
<FONT ID="LN">605 </FONT><A NAME="605"></A>            text.append(Utils.doubleToString(val, <FONT ID="IntegerLiteral">12</FONT>, <FONT ID="IntegerLiteral">4</FONT>) 
<FONT ID="LN">606 </FONT><A NAME="606"></A>                + <FONT ID="StringLiteral">" * &lt;"</FONT>);
<FONT ID="LN">607 </FONT><A NAME="607"></A>            <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = <FONT ID="IntegerLiteral">0</FONT>; j &lt; m_data.numAttributes(); j++) {
<FONT ID="LN">608 </FONT><A NAME="608"></A>              <FONT ID="If">if</FONT> (j != m_data.classIndex()) {
<FONT ID="LN">609 </FONT><A NAME="609"></A>                text.append(m_data.instance(i).toString(j));
<FONT ID="LN">610 </FONT><A NAME="610"></A>              }
<FONT ID="LN">611 </FONT><A NAME="611"></A>              <FONT ID="If">if</FONT> (j != m_data.numAttributes() - <FONT ID="IntegerLiteral">1</FONT>) {
<FONT ID="LN">612 </FONT><A NAME="612"></A>                text.append(<FONT ID="StringLiteral">" "</FONT>);
<FONT ID="LN">613 </FONT><A NAME="613"></A>              }
<FONT ID="LN">614 </FONT><A NAME="614"></A>            }
<FONT ID="LN">615 </FONT><A NAME="615"></A>            text.append(<FONT ID="StringLiteral">"&gt; * X]\n"</FONT>);
<FONT ID="LN">616 </FONT><A NAME="616"></A>            printed++;
<FONT ID="LN">617 </FONT><A NAME="617"></A>          }
<FONT ID="LN">618 </FONT><A NAME="618"></A>        }
<FONT ID="LN">619 </FONT><A NAME="619"></A>
<FONT ID="LN">620 </FONT><A NAME="620"></A>        <FONT ID="If">if</FONT> (m_b &gt; <FONT ID="IntegerLiteral">0</FONT>) {
<FONT ID="LN">621 </FONT><A NAME="621"></A>          text.append(<FONT ID="StringLiteral">" - "</FONT> + Utils.doubleToString(m_b, <FONT ID="IntegerLiteral">12</FONT>, <FONT ID="IntegerLiteral">4</FONT>));
<FONT ID="LN">622 </FONT><A NAME="622"></A>        } <FONT ID="Else">else</FONT> {
<FONT ID="LN">623 </FONT><A NAME="623"></A>          text.append(<FONT ID="StringLiteral">" + "</FONT> + Utils.doubleToString(-m_b, <FONT ID="IntegerLiteral">12</FONT>, <FONT ID="IntegerLiteral">4</FONT>));
<FONT ID="LN">624 </FONT><A NAME="624"></A>        }
<FONT ID="LN">625 </FONT><A NAME="625"></A>
<FONT ID="LN">626 </FONT><A NAME="626"></A>        text.append(<FONT ID="StringLiteral">"\n\nNumber of support vectors: "</FONT> + 
<FONT ID="LN">627 </FONT><A NAME="627"></A>            m_supportVectors.numElements());
<FONT ID="LN">628 </FONT><A NAME="628"></A>        <FONT ID="Int">int</FONT> numEval = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">629 </FONT><A NAME="629"></A>        <FONT ID="Int">int</FONT> numCacheHits = -<FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">630 </FONT><A NAME="630"></A>        <FONT ID="If">if</FONT>(m_kernel != <FONT ID="Null">null</FONT>)
<FONT ID="LN">631 </FONT><A NAME="631"></A>        {
<FONT ID="LN">632 </FONT><A NAME="632"></A>          numEval = m_kernel.numEvals();
<FONT ID="LN">633 </FONT><A NAME="633"></A>          numCacheHits = m_kernel.numCacheHits();
<FONT ID="LN">634 </FONT><A NAME="634"></A>        }
<FONT ID="LN">635 </FONT><A NAME="635"></A>        text.append(<FONT ID="StringLiteral">"\n\nNumber of kernel evaluations: "</FONT> + numEval);
<FONT ID="LN">636 </FONT><A NAME="636"></A>        <FONT ID="If">if</FONT> (numCacheHits &gt;= <FONT ID="IntegerLiteral">0</FONT> &amp;&amp; numEval &gt; <FONT ID="IntegerLiteral">0</FONT>)
<FONT ID="LN">637 </FONT><A NAME="637"></A>        {
<FONT ID="LN">638 </FONT><A NAME="638"></A>          <FONT ID="Double">double</FONT> hitRatio = <FONT ID="IntegerLiteral">1</FONT> - numEval*<FONT ID="FloatPointLiteral">1.0</FONT>/(numCacheHits+numEval);
<FONT ID="LN">639 </FONT><A NAME="639"></A>          text.append(<FONT ID="StringLiteral">" ("</FONT> + Utils.doubleToString(hitRatio*<FONT ID="IntegerLiteral">100</FONT>, <FONT ID="IntegerLiteral">7</FONT>, <FONT ID="IntegerLiteral">3</FONT>).trim() + <FONT ID="StringLiteral">"% cached)"</FONT>);
<FONT ID="LN">640 </FONT><A NAME="640"></A>        }
<FONT ID="LN">641 </FONT><A NAME="641"></A>
<FONT ID="LN">642 </FONT><A NAME="642"></A>      } <FONT ID="Catch">catch</FONT> (Exception e) {
<FONT ID="LN">643 </FONT><A NAME="643"></A>        e.printStackTrace();
<FONT ID="LN">644 </FONT><A NAME="644"></A>
<FONT ID="LN">645 </FONT><A NAME="645"></A>        <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"Can't print BinaryMISMO classifier."</FONT>;
<FONT ID="LN">646 </FONT><A NAME="646"></A>      }
<FONT ID="LN">647 </FONT><A NAME="647"></A>
<FONT ID="LN">648 </FONT><A NAME="648"></A>      <FONT ID="Return">return</FONT> text.toString();
<FONT ID="LN">649 </FONT><A NAME="649"></A>    }
<FONT ID="LN">650 </FONT><A NAME="650"></A>
<FONT ID="LN">651 </FONT><A NAME="651"></A>    <FONT ID="FormalComment">/**
<FONT ID="LN">652 </FONT><A NAME="652"></A>     * Examines instance.
<FONT ID="LN">653 </FONT><A NAME="653"></A>     *
<FONT ID="LN">654 </FONT><A NAME="654"></A>     * @param i2 index of instance to examine
<FONT ID="LN">655 </FONT><A NAME="655"></A>     * @return true if examination was successfull
<FONT ID="LN">656 </FONT><A NAME="656"></A>     * @throws Exception if something goes wrong
<FONT ID="LN">657 </FONT><A NAME="657"></A>     */</FONT>
<FONT ID="LN">658 </FONT><A NAME="658"></A>    <FONT ID="Protected">protected</FONT> <FONT ID="Boolean">boolean</FONT> examineExample(<FONT ID="Int">int</FONT> i2) <FONT ID="Throws">throws</FONT> Exception {
<FONT ID="LN">659 </FONT><A NAME="659"></A>
<FONT ID="LN">660 </FONT><A NAME="660"></A>      <FONT ID="Double">double</FONT> y2, F2;
<FONT ID="LN">661 </FONT><A NAME="661"></A>      <FONT ID="Int">int</FONT> i1 = -<FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">662 </FONT><A NAME="662"></A>
<FONT ID="LN">663 </FONT><A NAME="663"></A>      y2 = m_class[i2];
<FONT ID="LN">664 </FONT><A NAME="664"></A>      <FONT ID="If">if</FONT> (m_I0.contains(i2)) {
<FONT ID="LN">665 </FONT><A NAME="665"></A>        F2 = m_errors[i2];
<FONT ID="LN">666 </FONT><A NAME="666"></A>      } <FONT ID="Else">else</FONT> { 
<FONT ID="LN">667 </FONT><A NAME="667"></A>        F2 = SVMOutput(i2, m_data.instance(i2)) + m_b - y2;
<FONT ID="LN">668 </FONT><A NAME="668"></A>        m_errors[i2] = F2;
<FONT ID="LN">669 </FONT><A NAME="669"></A>
<FONT ID="LN">670 </FONT><A NAME="670"></A>        <FONT ID="SingleLineComment">// Update thresholds
<FONT ID="LN">671 </FONT><A NAME="671"></A></FONT>        <FONT ID="If">if</FONT> ((m_I1.contains(i2) || m_I2.contains(i2)) &amp;&amp; (F2 &lt; m_bUp)) {
<FONT ID="LN">672 </FONT><A NAME="672"></A>          m_bUp = F2; m_iUp = i2;
<FONT ID="LN">673 </FONT><A NAME="673"></A>        } <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> ((m_I3.contains(i2) || m_I4.contains(i2)) &amp;&amp; (F2 &gt; m_bLow)) {
<FONT ID="LN">674 </FONT><A NAME="674"></A>          m_bLow = F2; m_iLow = i2;
<FONT ID="LN">675 </FONT><A NAME="675"></A>        }
<FONT ID="LN">676 </FONT><A NAME="676"></A>      }
<FONT ID="LN">677 </FONT><A NAME="677"></A>
<FONT ID="LN">678 </FONT><A NAME="678"></A>      <FONT ID="SingleLineComment">// Check optimality using current bLow and bUp and, if
<FONT ID="LN">679 </FONT><A NAME="679"></A></FONT>      <FONT ID="SingleLineComment">// violated, find an index i1 to do joint optimization
<FONT ID="LN">680 </FONT><A NAME="680"></A></FONT>      <FONT ID="SingleLineComment">// with i2...
<FONT ID="LN">681 </FONT><A NAME="681"></A></FONT>      <FONT ID="Boolean">boolean</FONT> optimal = <FONT ID="True">true</FONT>;
<FONT ID="LN">682 </FONT><A NAME="682"></A>      <FONT ID="If">if</FONT> (m_I0.contains(i2) || m_I1.contains(i2) || m_I2.contains(i2)) {
<FONT ID="LN">683 </FONT><A NAME="683"></A>        <FONT ID="If">if</FONT> (m_bLow - F2 &gt; <FONT ID="IntegerLiteral">2</FONT> * m_tol) {
<FONT ID="LN">684 </FONT><A NAME="684"></A>          optimal = <FONT ID="False">false</FONT>; i1 = m_iLow;
<FONT ID="LN">685 </FONT><A NAME="685"></A>        }
<FONT ID="LN">686 </FONT><A NAME="686"></A>      }
<FONT ID="LN">687 </FONT><A NAME="687"></A>      <FONT ID="If">if</FONT> (m_I0.contains(i2) || m_I3.contains(i2) || m_I4.contains(i2)) {
<FONT ID="LN">688 </FONT><A NAME="688"></A>        <FONT ID="If">if</FONT> (F2 - m_bUp &gt; <FONT ID="IntegerLiteral">2</FONT> * m_tol) {
<FONT ID="LN">689 </FONT><A NAME="689"></A>          optimal = <FONT ID="False">false</FONT>; i1 = m_iUp;
<FONT ID="LN">690 </FONT><A NAME="690"></A>        }
<FONT ID="LN">691 </FONT><A NAME="691"></A>      }
<FONT ID="LN">692 </FONT><A NAME="692"></A>      <FONT ID="If">if</FONT> (optimal) {
<FONT ID="LN">693 </FONT><A NAME="693"></A>        <FONT ID="Return">return</FONT> <FONT ID="False">false</FONT>;
<FONT ID="LN">694 </FONT><A NAME="694"></A>      }
<FONT ID="LN">695 </FONT><A NAME="695"></A>
<FONT ID="LN">696 </FONT><A NAME="696"></A>      <FONT ID="SingleLineComment">// For i2 unbound choose the better i1...
<FONT ID="LN">697 </FONT><A NAME="697"></A></FONT>      <FONT ID="If">if</FONT> (m_I0.contains(i2)) {
<FONT ID="LN">698 </FONT><A NAME="698"></A>        <FONT ID="If">if</FONT> (m_bLow - F2 &gt; F2 - m_bUp) {
<FONT ID="LN">699 </FONT><A NAME="699"></A>          i1 = m_iLow;
<FONT ID="LN">700 </FONT><A NAME="700"></A>        } <FONT ID="Else">else</FONT> {
<FONT ID="LN">701 </FONT><A NAME="701"></A>          i1 = m_iUp;
<FONT ID="LN">702 </FONT><A NAME="702"></A>        }
<FONT ID="LN">703 </FONT><A NAME="703"></A>      }
<FONT ID="LN">704 </FONT><A NAME="704"></A>      <FONT ID="If">if</FONT> (i1 == -<FONT ID="IntegerLiteral">1</FONT>) {
<FONT ID="LN">705 </FONT><A NAME="705"></A>        <FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> Exception(<FONT ID="StringLiteral">"This should never happen!"</FONT>);
<FONT ID="LN">706 </FONT><A NAME="706"></A>      }
<FONT ID="LN">707 </FONT><A NAME="707"></A>      <FONT ID="Return">return</FONT> takeStep(i1, i2, F2);
<FONT ID="LN">708 </FONT><A NAME="708"></A>    }
<FONT ID="LN">709 </FONT><A NAME="709"></A>
<FONT ID="LN">710 </FONT><A NAME="710"></A>    <FONT ID="FormalComment">/**
<FONT ID="LN">711 </FONT><A NAME="711"></A>     * Method solving for the Lagrange multipliers for
<FONT ID="LN">712 </FONT><A NAME="712"></A>     * two instances.
<FONT ID="LN">713 </FONT><A NAME="713"></A>     *
<FONT ID="LN">714 </FONT><A NAME="714"></A>     * @param i1 index of the first instance
<FONT ID="LN">715 </FONT><A NAME="715"></A>     * @param i2 index of the second instance
<FONT ID="LN">716 </FONT><A NAME="716"></A>     * @param F2
<FONT ID="LN">717 </FONT><A NAME="717"></A>     * @return true if multipliers could be found
<FONT ID="LN">718 </FONT><A NAME="718"></A>     * @throws Exception if something goes wrong
<FONT ID="LN">719 </FONT><A NAME="719"></A>     */</FONT>
<FONT ID="LN">720 </FONT><A NAME="720"></A>    <FONT ID="Protected">protected</FONT> <FONT ID="Boolean">boolean</FONT> takeStep(<FONT ID="Int">int</FONT> i1, <FONT ID="Int">int</FONT> i2, <FONT ID="Double">double</FONT> F2) <FONT ID="Throws">throws</FONT> Exception {
<FONT ID="LN">721 </FONT><A NAME="721"></A>
<FONT ID="LN">722 </FONT><A NAME="722"></A>      <FONT ID="Double">double</FONT> alph1, alph2, y1, y2, F1, s, L, H, k11, k12, k22, eta,
<FONT ID="LN">723 </FONT><A NAME="723"></A>             a1, a2, f1, f2, v1, v2, Lobj, Hobj;
<FONT ID="LN">724 </FONT><A NAME="724"></A>      <FONT ID="Double">double</FONT> C1 = m_C * m_data.instance(i1).weight();
<FONT ID="LN">725 </FONT><A NAME="725"></A>      <FONT ID="Double">double</FONT> C2 = m_C * m_data.instance(i2).weight();
<FONT ID="LN">726 </FONT><A NAME="726"></A>
<FONT ID="LN">727 </FONT><A NAME="727"></A>      <FONT ID="SingleLineComment">// Don't do anything if the two instances are the same
<FONT ID="LN">728 </FONT><A NAME="728"></A></FONT>      <FONT ID="If">if</FONT> (i1 == i2) {
<FONT ID="LN">729 </FONT><A NAME="729"></A>        <FONT ID="Return">return</FONT> <FONT ID="False">false</FONT>;
<FONT ID="LN">730 </FONT><A NAME="730"></A>      }
<FONT ID="LN">731 </FONT><A NAME="731"></A>
<FONT ID="LN">732 </FONT><A NAME="732"></A>      <FONT ID="SingleLineComment">// Initialize variables
<FONT ID="LN">733 </FONT><A NAME="733"></A></FONT>      alph1 = m_alpha[i1]; alph2 = m_alpha[i2];
<FONT ID="LN">734 </FONT><A NAME="734"></A>      y1 = m_class[i1]; y2 = m_class[i2];
<FONT ID="LN">735 </FONT><A NAME="735"></A>      F1 = m_errors[i1];
<FONT ID="LN">736 </FONT><A NAME="736"></A>      s = y1 * y2;
<FONT ID="LN">737 </FONT><A NAME="737"></A>
<FONT ID="LN">738 </FONT><A NAME="738"></A>      <FONT ID="SingleLineComment">// Find the constraints on a2
<FONT ID="LN">739 </FONT><A NAME="739"></A></FONT>      <FONT ID="If">if</FONT> (y1 != y2) {
<FONT ID="LN">740 </FONT><A NAME="740"></A>        L = Math.max(<FONT ID="IntegerLiteral">0</FONT>, alph2 - alph1); 
<FONT ID="LN">741 </FONT><A NAME="741"></A>        H = Math.min(C2, C1 + alph2 - alph1);
<FONT ID="LN">742 </FONT><A NAME="742"></A>      } <FONT ID="Else">else</FONT> {
<FONT ID="LN">743 </FONT><A NAME="743"></A>        L = Math.max(<FONT ID="IntegerLiteral">0</FONT>, alph1 + alph2 - C1);
<FONT ID="LN">744 </FONT><A NAME="744"></A>        H = Math.min(C2, alph1 + alph2);
<FONT ID="LN">745 </FONT><A NAME="745"></A>      }
<FONT ID="LN">746 </FONT><A NAME="746"></A>      <FONT ID="If">if</FONT> (L &gt;= H) {
<FONT ID="LN">747 </FONT><A NAME="747"></A>        <FONT ID="Return">return</FONT> <FONT ID="False">false</FONT>;
<FONT ID="LN">748 </FONT><A NAME="748"></A>      }
<FONT ID="LN">749 </FONT><A NAME="749"></A>
<FONT ID="LN">750 </FONT><A NAME="750"></A>      <FONT ID="SingleLineComment">// Compute second derivative of objective function
<FONT ID="LN">751 </FONT><A NAME="751"></A></FONT>      k11 = m_kernel.eval(i1, i1, m_data.instance(i1));
<FONT ID="LN">752 </FONT><A NAME="752"></A>      k12 = m_kernel.eval(i1, i2, m_data.instance(i1));
<FONT ID="LN">753 </FONT><A NAME="753"></A>      k22 = m_kernel.eval(i2, i2, m_data.instance(i2));
<FONT ID="LN">754 </FONT><A NAME="754"></A>      eta = <FONT ID="IntegerLiteral">2</FONT> * k12 - k11 - k22;
<FONT ID="LN">755 </FONT><A NAME="755"></A>
<FONT ID="LN">756 </FONT><A NAME="756"></A>      <FONT ID="SingleLineComment">// Check if second derivative is negative
<FONT ID="LN">757 </FONT><A NAME="757"></A></FONT>      <FONT ID="If">if</FONT> (eta &lt; <FONT ID="IntegerLiteral">0</FONT>) {
<FONT ID="LN">758 </FONT><A NAME="758"></A>
<FONT ID="LN">759 </FONT><A NAME="759"></A>        <FONT ID="SingleLineComment">// Compute unconstrained maximum
<FONT ID="LN">760 </FONT><A NAME="760"></A></FONT>        a2 = alph2 - y2 * (F1 - F2) / eta;
<FONT ID="LN">761 </FONT><A NAME="761"></A>
<FONT ID="LN">762 </FONT><A NAME="762"></A>        <FONT ID="SingleLineComment">// Compute constrained maximum
<FONT ID="LN">763 </FONT><A NAME="763"></A></FONT>        <FONT ID="If">if</FONT> (a2 &lt; L) {
<FONT ID="LN">764 </FONT><A NAME="764"></A>          a2 = L;
<FONT ID="LN">765 </FONT><A NAME="765"></A>        } <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (a2 &gt; H) {
<FONT ID="LN">766 </FONT><A NAME="766"></A>          a2 = H;
<FONT ID="LN">767 </FONT><A NAME="767"></A>        }
<FONT ID="LN">768 </FONT><A NAME="768"></A>      } <FONT ID="Else">else</FONT> {
<FONT ID="LN">769 </FONT><A NAME="769"></A>
<FONT ID="LN">770 </FONT><A NAME="770"></A>        <FONT ID="SingleLineComment">// Look at endpoints of diagonal
<FONT ID="LN">771 </FONT><A NAME="771"></A></FONT>        f1 = SVMOutput(i1, m_data.instance(i1));
<FONT ID="LN">772 </FONT><A NAME="772"></A>        f2 = SVMOutput(i2, m_data.instance(i2));
<FONT ID="LN">773 </FONT><A NAME="773"></A>        v1 = f1 + m_b - y1 * alph1 * k11 - y2 * alph2 * k12; 
<FONT ID="LN">774 </FONT><A NAME="774"></A>        v2 = f2 + m_b - y1 * alph1 * k12 - y2 * alph2 * k22; 
<FONT ID="LN">775 </FONT><A NAME="775"></A>        <FONT ID="Double">double</FONT> gamma = alph1 + s * alph2;
<FONT ID="LN">776 </FONT><A NAME="776"></A>        Lobj = (gamma - s * L) + L - <FONT ID="FloatPointLiteral">0.5</FONT> * k11 * (gamma - s * L) * (gamma - s * L) - 
<FONT ID="LN">777 </FONT><A NAME="777"></A>          <FONT ID="FloatPointLiteral">0.5</FONT> * k22 * L * L - s * k12 * (gamma - s * L) * L - 
<FONT ID="LN">778 </FONT><A NAME="778"></A>          y1 * (gamma - s * L) * v1 - y2 * L * v2;
<FONT ID="LN">779 </FONT><A NAME="779"></A>        Hobj = (gamma - s * H) + H - <FONT ID="FloatPointLiteral">0.5</FONT> * k11 * (gamma - s * H) * (gamma - s * H) - 
<FONT ID="LN">780 </FONT><A NAME="780"></A>          <FONT ID="FloatPointLiteral">0.5</FONT> * k22 * H * H - s * k12 * (gamma - s * H) * H - 
<FONT ID="LN">781 </FONT><A NAME="781"></A>          y1 * (gamma - s * H) * v1 - y2 * H * v2;
<FONT ID="LN">782 </FONT><A NAME="782"></A>        <FONT ID="If">if</FONT> (Lobj &gt; Hobj + m_eps) {
<FONT ID="LN">783 </FONT><A NAME="783"></A>          a2 = L;
<FONT ID="LN">784 </FONT><A NAME="784"></A>        } <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (Lobj &lt; Hobj - m_eps) {
<FONT ID="LN">785 </FONT><A NAME="785"></A>          a2 = H;
<FONT ID="LN">786 </FONT><A NAME="786"></A>        } <FONT ID="Else">else</FONT> {
<FONT ID="LN">787 </FONT><A NAME="787"></A>          a2 = alph2;
<FONT ID="LN">788 </FONT><A NAME="788"></A>        }
<FONT ID="LN">789 </FONT><A NAME="789"></A>      }
<FONT ID="LN">790 </FONT><A NAME="790"></A>      <FONT ID="If">if</FONT> (Math.abs(a2 - alph2) &lt; m_eps * (a2 + alph2 + m_eps)) {
<FONT ID="LN">791 </FONT><A NAME="791"></A>        <FONT ID="Return">return</FONT> <FONT ID="False">false</FONT>;
<FONT ID="LN">792 </FONT><A NAME="792"></A>      }
<FONT ID="LN">793 </FONT><A NAME="793"></A>
<FONT ID="LN">794 </FONT><A NAME="794"></A>      <FONT ID="SingleLineComment">// To prevent precision problems
<FONT ID="LN">795 </FONT><A NAME="795"></A></FONT>      <FONT ID="If">if</FONT> (a2 &gt; C2 - m_Del * C2) {
<FONT ID="LN">796 </FONT><A NAME="796"></A>        a2 = C2;
<FONT ID="LN">797 </FONT><A NAME="797"></A>      } <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (a2 &lt;= m_Del * C2) {
<FONT ID="LN">798 </FONT><A NAME="798"></A>        a2 = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">799 </FONT><A NAME="799"></A>      }
<FONT ID="LN">800 </FONT><A NAME="800"></A>
<FONT ID="LN">801 </FONT><A NAME="801"></A>      <FONT ID="SingleLineComment">// Recompute a1
<FONT ID="LN">802 </FONT><A NAME="802"></A></FONT>      a1 = alph1 + s * (alph2 - a2);
<FONT ID="LN">803 </FONT><A NAME="803"></A>
<FONT ID="LN">804 </FONT><A NAME="804"></A>      <FONT ID="SingleLineComment">// To prevent precision problems
<FONT ID="LN">805 </FONT><A NAME="805"></A></FONT>      <FONT ID="If">if</FONT> (a1 &gt; C1 - m_Del * C1) {
<FONT ID="LN">806 </FONT><A NAME="806"></A>        a1 = C1;
<FONT ID="LN">807 </FONT><A NAME="807"></A>      } <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (a1 &lt;= m_Del * C1) {
<FONT ID="LN">808 </FONT><A NAME="808"></A>        a1 = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">809 </FONT><A NAME="809"></A>      }
<FONT ID="LN">810 </FONT><A NAME="810"></A>
<FONT ID="LN">811 </FONT><A NAME="811"></A>      <FONT ID="SingleLineComment">// Update sets
<FONT ID="LN">812 </FONT><A NAME="812"></A></FONT>      <FONT ID="If">if</FONT> (a1 &gt; <FONT ID="IntegerLiteral">0</FONT>) {
<FONT ID="LN">813 </FONT><A NAME="813"></A>        m_supportVectors.insert(i1);
<FONT ID="LN">814 </FONT><A NAME="814"></A>      } <FONT ID="Else">else</FONT> {
<FONT ID="LN">815 </FONT><A NAME="815"></A>        m_supportVectors.delete(i1);
<FONT ID="LN">816 </FONT><A NAME="816"></A>      }
<FONT ID="LN">817 </FONT><A NAME="817"></A>      <FONT ID="If">if</FONT> ((a1 &gt; <FONT ID="IntegerLiteral">0</FONT>) &amp;&amp; (a1 &lt; C1)) {
<FONT ID="LN">818 </FONT><A NAME="818"></A>        m_I0.insert(i1);
<FONT ID="LN">819 </FONT><A NAME="819"></A>      } <FONT ID="Else">else</FONT> {
<FONT ID="LN">820 </FONT><A NAME="820"></A>        m_I0.delete(i1);
<FONT ID="LN">821 </FONT><A NAME="821"></A>      }
<FONT ID="LN">822 </FONT><A NAME="822"></A>      <FONT ID="If">if</FONT> ((y1 == <FONT ID="IntegerLiteral">1</FONT>) &amp;&amp; (a1 == <FONT ID="IntegerLiteral">0</FONT>)) {
<FONT ID="LN">823 </FONT><A NAME="823"></A>        m_I1.insert(i1);
<FONT ID="LN">824 </FONT><A NAME="824"></A>      } <FONT ID="Else">else</FONT> {
<FONT ID="LN">825 </FONT><A NAME="825"></A>        m_I1.delete(i1);
<FONT ID="LN">826 </FONT><A NAME="826"></A>      }
<FONT ID="LN">827 </FONT><A NAME="827"></A>      <FONT ID="If">if</FONT> ((y1 == -<FONT ID="IntegerLiteral">1</FONT>) &amp;&amp; (a1 == C1)) {
<FONT ID="LN">828 </FONT><A NAME="828"></A>        m_I2.insert(i1);
<FONT ID="LN">829 </FONT><A NAME="829"></A>      } <FONT ID="Else">else</FONT> {
<FONT ID="LN">830 </FONT><A NAME="830"></A>        m_I2.delete(i1);
<FONT ID="LN">831 </FONT><A NAME="831"></A>      }
<FONT ID="LN">832 </FONT><A NAME="832"></A>      <FONT ID="If">if</FONT> ((y1 == <FONT ID="IntegerLiteral">1</FONT>) &amp;&amp; (a1 == C1)) {
<FONT ID="LN">833 </FONT><A NAME="833"></A>        m_I3.insert(i1);
<FONT ID="LN">834 </FONT><A NAME="834"></A>      } <FONT ID="Else">else</FONT> {
<FONT ID="LN">835 </FONT><A NAME="835"></A>        m_I3.delete(i1);
<FONT ID="LN">836 </FONT><A NAME="836"></A>      }
<FONT ID="LN">837 </FONT><A NAME="837"></A>      <FONT ID="If">if</FONT> ((y1 == -<FONT ID="IntegerLiteral">1</FONT>) &amp;&amp; (a1 == <FONT ID="IntegerLiteral">0</FONT>)) {
<FONT ID="LN">838 </FONT><A NAME="838"></A>        m_I4.insert(i1);
<FONT ID="LN">839 </FONT><A NAME="839"></A>      } <FONT ID="Else">else</FONT> {
<FONT ID="LN">840 </FONT><A NAME="840"></A>        m_I4.delete(i1);
<FONT ID="LN">841 </FONT><A NAME="841"></A>      }
<FONT ID="LN">842 </FONT><A NAME="842"></A>      <FONT ID="If">if</FONT> (a2 &gt; <FONT ID="IntegerLiteral">0</FONT>) {
<FONT ID="LN">843 </FONT><A NAME="843"></A>        m_supportVectors.insert(i2);
<FONT ID="LN">844 </FONT><A NAME="844"></A>      } <FONT ID="Else">else</FONT> {
<FONT ID="LN">845 </FONT><A NAME="845"></A>        m_supportVectors.delete(i2);
<FONT ID="LN">846 </FONT><A NAME="846"></A>      }
<FONT ID="LN">847 </FONT><A NAME="847"></A>      <FONT ID="If">if</FONT> ((a2 &gt; <FONT ID="IntegerLiteral">0</FONT>) &amp;&amp; (a2 &lt; C2)) {
<FONT ID="LN">848 </FONT><A NAME="848"></A>        m_I0.insert(i2);
<FONT ID="LN">849 </FONT><A NAME="849"></A>      } <FONT ID="Else">else</FONT> {
<FONT ID="LN">850 </FONT><A NAME="850"></A>        m_I0.delete(i2);
<FONT ID="LN">851 </FONT><A NAME="851"></A>      }
<FONT ID="LN">852 </FONT><A NAME="852"></A>      <FONT ID="If">if</FONT> ((y2 == <FONT ID="IntegerLiteral">1</FONT>) &amp;&amp; (a2 == <FONT ID="IntegerLiteral">0</FONT>)) {
<FONT ID="LN">853 </FONT><A NAME="853"></A>        m_I1.insert(i2);
<FONT ID="LN">854 </FONT><A NAME="854"></A>      } <FONT ID="Else">else</FONT> {
<FONT ID="LN">855 </FONT><A NAME="855"></A>        m_I1.delete(i2);
<FONT ID="LN">856 </FONT><A NAME="856"></A>      }
<FONT ID="LN">857 </FONT><A NAME="857"></A>      <FONT ID="If">if</FONT> ((y2 == -<FONT ID="IntegerLiteral">1</FONT>) &amp;&amp; (a2 == C2)) {
<FONT ID="LN">858 </FONT><A NAME="858"></A>        m_I2.insert(i2);
<FONT ID="LN">859 </FONT><A NAME="859"></A>      } <FONT ID="Else">else</FONT> {
<FONT ID="LN">860 </FONT><A NAME="860"></A>        m_I2.delete(i2);
<FONT ID="LN">861 </FONT><A NAME="861"></A>      }
<FONT ID="LN">862 </FONT><A NAME="862"></A>      <FONT ID="If">if</FONT> ((y2 == <FONT ID="IntegerLiteral">1</FONT>) &amp;&amp; (a2 == C2)) {
<FONT ID="LN">863 </FONT><A NAME="863"></A>        m_I3.insert(i2);
<FONT ID="LN">864 </FONT><A NAME="864"></A>      } <FONT ID="Else">else</FONT> {
<FONT ID="LN">865 </FONT><A NAME="865"></A>        m_I3.delete(i2);
<FONT ID="LN">866 </FONT><A NAME="866"></A>      }
<FONT ID="LN">867 </FONT><A NAME="867"></A>      <FONT ID="If">if</FONT> ((y2 == -<FONT ID="IntegerLiteral">1</FONT>) &amp;&amp; (a2 == <FONT ID="IntegerLiteral">0</FONT>)) {
<FONT ID="LN">868 </FONT><A NAME="868"></A>        m_I4.insert(i2);
<FONT ID="LN">869 </FONT><A NAME="869"></A>      } <FONT ID="Else">else</FONT> {
<FONT ID="LN">870 </FONT><A NAME="870"></A>        m_I4.delete(i2);
<FONT ID="LN">871 </FONT><A NAME="871"></A>      }
<FONT ID="LN">872 </FONT><A NAME="872"></A>
<FONT ID="LN">873 </FONT><A NAME="873"></A>      <FONT ID="SingleLineComment">// Update error cache using new Lagrange multipliers
<FONT ID="LN">874 </FONT><A NAME="874"></A></FONT>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = m_I0.getNext(-<FONT ID="IntegerLiteral">1</FONT>); j != -<FONT ID="IntegerLiteral">1</FONT>; j = m_I0.getNext(j)) {
<FONT ID="LN">875 </FONT><A NAME="875"></A>        <FONT ID="If">if</FONT> ((j != i1) &amp;&amp; (j != i2)) {
<FONT ID="LN">876 </FONT><A NAME="876"></A>          m_errors[j] += 
<FONT ID="LN">877 </FONT><A NAME="877"></A>            y1 * (a1 - alph1) * m_kernel.eval(i1, j, m_data.instance(i1)) + 
<FONT ID="LN">878 </FONT><A NAME="878"></A>            y2 * (a2 - alph2) * m_kernel.eval(i2, j, m_data.instance(i2));
<FONT ID="LN">879 </FONT><A NAME="879"></A>        }
<FONT ID="LN">880 </FONT><A NAME="880"></A>      }
<FONT ID="LN">881 </FONT><A NAME="881"></A>
<FONT ID="LN">882 </FONT><A NAME="882"></A>      <FONT ID="SingleLineComment">// Update error cache for i1 and i2
<FONT ID="LN">883 </FONT><A NAME="883"></A></FONT>      m_errors[i1] += y1 * (a1 - alph1) * k11 + y2 * (a2 - alph2) * k12;
<FONT ID="LN">884 </FONT><A NAME="884"></A>      m_errors[i2] += y1 * (a1 - alph1) * k12 + y2 * (a2 - alph2) * k22;
<FONT ID="LN">885 </FONT><A NAME="885"></A>
<FONT ID="LN">886 </FONT><A NAME="886"></A>      <FONT ID="SingleLineComment">// Update array with Lagrange multipliers
<FONT ID="LN">887 </FONT><A NAME="887"></A></FONT>      m_alpha[i1] = a1;
<FONT ID="LN">888 </FONT><A NAME="888"></A>      m_alpha[i2] = a2;
<FONT ID="LN">889 </FONT><A NAME="889"></A>
<FONT ID="LN">890 </FONT><A NAME="890"></A>      <FONT ID="SingleLineComment">// Update thresholds
<FONT ID="LN">891 </FONT><A NAME="891"></A></FONT>      m_bLow = -Double.MAX_VALUE; m_bUp = Double.MAX_VALUE;
<FONT ID="LN">892 </FONT><A NAME="892"></A>      m_iLow = -<FONT ID="IntegerLiteral">1</FONT>; m_iUp = -<FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">893 </FONT><A NAME="893"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = m_I0.getNext(-<FONT ID="IntegerLiteral">1</FONT>); j != -<FONT ID="IntegerLiteral">1</FONT>; j = m_I0.getNext(j)) {
<FONT ID="LN">894 </FONT><A NAME="894"></A>        <FONT ID="If">if</FONT> (m_errors[j] &lt; m_bUp) {
<FONT ID="LN">895 </FONT><A NAME="895"></A>          m_bUp = m_errors[j]; m_iUp = j;
<FONT ID="LN">896 </FONT><A NAME="896"></A>        }
<FONT ID="LN">897 </FONT><A NAME="897"></A>        <FONT ID="If">if</FONT> (m_errors[j] &gt; m_bLow) {
<FONT ID="LN">898 </FONT><A NAME="898"></A>          m_bLow = m_errors[j]; m_iLow = j;
<FONT ID="LN">899 </FONT><A NAME="899"></A>        }
<FONT ID="LN">900 </FONT><A NAME="900"></A>      }
<FONT ID="LN">901 </FONT><A NAME="901"></A>      <FONT ID="If">if</FONT> (!m_I0.contains(i1)) {
<FONT ID="LN">902 </FONT><A NAME="902"></A>        <FONT ID="If">if</FONT> (m_I3.contains(i1) || m_I4.contains(i1)) {
<FONT ID="LN">903 </FONT><A NAME="903"></A>          <FONT ID="If">if</FONT> (m_errors[i1] &gt; m_bLow) {
<FONT ID="LN">904 </FONT><A NAME="904"></A>            m_bLow = m_errors[i1]; m_iLow = i1;
<FONT ID="LN">905 </FONT><A NAME="905"></A>          } 
<FONT ID="LN">906 </FONT><A NAME="906"></A>        } <FONT ID="Else">else</FONT> {
<FONT ID="LN">907 </FONT><A NAME="907"></A>          <FONT ID="If">if</FONT> (m_errors[i1] &lt; m_bUp) {
<FONT ID="LN">908 </FONT><A NAME="908"></A>            m_bUp = m_errors[i1]; m_iUp = i1;
<FONT ID="LN">909 </FONT><A NAME="909"></A>          }
<FONT ID="LN">910 </FONT><A NAME="910"></A>        }
<FONT ID="LN">911 </FONT><A NAME="911"></A>      }
<FONT ID="LN">912 </FONT><A NAME="912"></A>      <FONT ID="If">if</FONT> (!m_I0.contains(i2)) {
<FONT ID="LN">913 </FONT><A NAME="913"></A>        <FONT ID="If">if</FONT> (m_I3.contains(i2) || m_I4.contains(i2)) {
<FONT ID="LN">914 </FONT><A NAME="914"></A>          <FONT ID="If">if</FONT> (m_errors[i2] &gt; m_bLow) {
<FONT ID="LN">915 </FONT><A NAME="915"></A>            m_bLow = m_errors[i2]; m_iLow = i2;
<FONT ID="LN">916 </FONT><A NAME="916"></A>          }
<FONT ID="LN">917 </FONT><A NAME="917"></A>        } <FONT ID="Else">else</FONT> {
<FONT ID="LN">918 </FONT><A NAME="918"></A>          <FONT ID="If">if</FONT> (m_errors[i2] &lt; m_bUp) {
<FONT ID="LN">919 </FONT><A NAME="919"></A>            m_bUp = m_errors[i2]; m_iUp = i2;
<FONT ID="LN">920 </FONT><A NAME="920"></A>          }
<FONT ID="LN">921 </FONT><A NAME="921"></A>        }
<FONT ID="LN">922 </FONT><A NAME="922"></A>      }
<FONT ID="LN">923 </FONT><A NAME="923"></A>      <FONT ID="If">if</FONT> ((m_iLow == -<FONT ID="IntegerLiteral">1</FONT>) || (m_iUp == -<FONT ID="IntegerLiteral">1</FONT>)) {
<FONT ID="LN">924 </FONT><A NAME="924"></A>        <FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> Exception(<FONT ID="StringLiteral">"This should never happen!"</FONT>);
<FONT ID="LN">925 </FONT><A NAME="925"></A>      }
<FONT ID="LN">926 </FONT><A NAME="926"></A>
<FONT ID="LN">927 </FONT><A NAME="927"></A>      <FONT ID="SingleLineComment">// Made some progress.
<FONT ID="LN">928 </FONT><A NAME="928"></A></FONT>      <FONT ID="Return">return</FONT> <FONT ID="True">true</FONT>;
<FONT ID="LN">929 </FONT><A NAME="929"></A>    }
<FONT ID="LN">930 </FONT><A NAME="930"></A>
<FONT ID="LN">931 </FONT><A NAME="931"></A>    <FONT ID="FormalComment">/**
<FONT ID="LN">932 </FONT><A NAME="932"></A>     * Quick and dirty check whether the quadratic programming problem is solved.
<FONT ID="LN">933 </FONT><A NAME="933"></A>     * 
<FONT ID="LN">934 </FONT><A NAME="934"></A>     * @throws Exception if something goes wrong
<FONT ID="LN">935 </FONT><A NAME="935"></A>     */</FONT>
<FONT ID="LN">936 </FONT><A NAME="936"></A>    <FONT ID="Protected">protected</FONT> <FONT ID="Void">void</FONT> checkClassifier() <FONT ID="Throws">throws</FONT> Exception {
<FONT ID="LN">937 </FONT><A NAME="937"></A>
<FONT ID="LN">938 </FONT><A NAME="938"></A>      <FONT ID="Double">double</FONT> sum = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">939 </FONT><A NAME="939"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; m_alpha.length; i++) {
<FONT ID="LN">940 </FONT><A NAME="940"></A>        <FONT ID="If">if</FONT> (m_alpha[i] &gt; <FONT ID="IntegerLiteral">0</FONT>) {
<FONT ID="LN">941 </FONT><A NAME="941"></A>          sum += m_class[i] * m_alpha[i];
<FONT ID="LN">942 </FONT><A NAME="942"></A>        }
<FONT ID="LN">943 </FONT><A NAME="943"></A>      }
<FONT ID="LN">944 </FONT><A NAME="944"></A>      System.err.println(<FONT ID="StringLiteral">"Sum of y(i) * alpha(i): "</FONT> + sum);
<FONT ID="LN">945 </FONT><A NAME="945"></A>
<FONT ID="LN">946 </FONT><A NAME="946"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; m_alpha.length; i++) {
<FONT ID="LN">947 </FONT><A NAME="947"></A>        <FONT ID="Double">double</FONT> output = SVMOutput(i, m_data.instance(i));
<FONT ID="LN">948 </FONT><A NAME="948"></A>        <FONT ID="If">if</FONT> (Utils.eq(m_alpha[i], <FONT ID="IntegerLiteral">0</FONT>)) {
<FONT ID="LN">949 </FONT><A NAME="949"></A>          <FONT ID="If">if</FONT> (Utils.sm(m_class[i] * output, <FONT ID="IntegerLiteral">1</FONT>)) {
<FONT ID="LN">950 </FONT><A NAME="950"></A>            System.err.println(<FONT ID="StringLiteral">"KKT condition 1 violated: "</FONT> + m_class[i] * output);
<FONT ID="LN">951 </FONT><A NAME="951"></A>          }
<FONT ID="LN">952 </FONT><A NAME="952"></A>        } 
<FONT ID="LN">953 </FONT><A NAME="953"></A>        <FONT ID="If">if</FONT> (Utils.gr(m_alpha[i], <FONT ID="IntegerLiteral">0</FONT>) &amp;&amp; 
<FONT ID="LN">954 </FONT><A NAME="954"></A>            Utils.sm(m_alpha[i], m_C * m_data.instance(i).weight())) {
<FONT ID="LN">955 </FONT><A NAME="955"></A>          <FONT ID="If">if</FONT> (!Utils.eq(m_class[i] * output, <FONT ID="IntegerLiteral">1</FONT>)) {
<FONT ID="LN">956 </FONT><A NAME="956"></A>            System.err.println(<FONT ID="StringLiteral">"KKT condition 2 violated: "</FONT> + m_class[i] * output);
<FONT ID="LN">957 </FONT><A NAME="957"></A>          }
<FONT ID="LN">958 </FONT><A NAME="958"></A>            } 
<FONT ID="LN">959 </FONT><A NAME="959"></A>        <FONT ID="If">if</FONT> (Utils.eq(m_alpha[i], m_C * m_data.instance(i).weight())) {
<FONT ID="LN">960 </FONT><A NAME="960"></A>          <FONT ID="If">if</FONT> (Utils.gr(m_class[i] * output, <FONT ID="IntegerLiteral">1</FONT>)) {
<FONT ID="LN">961 </FONT><A NAME="961"></A>            System.err.println(<FONT ID="StringLiteral">"KKT condition 3 violated: "</FONT> + m_class[i] * output);
<FONT ID="LN">962 </FONT><A NAME="962"></A>          }
<FONT ID="LN">963 </FONT><A NAME="963"></A>        } 
<FONT ID="LN">964 </FONT><A NAME="964"></A>      }
<FONT ID="LN">965 </FONT><A NAME="965"></A>    }  
<FONT ID="LN">966 </FONT><A NAME="966"></A>    
<FONT ID="LN">967 </FONT><A NAME="967"></A>    <FONT ID="FormalComment">/**
<FONT ID="LN">968 </FONT><A NAME="968"></A>     * Returns the revision string.
<FONT ID="LN">969 </FONT><A NAME="969"></A>     * 
<FONT ID="LN">970 </FONT><A NAME="970"></A>     * @return      the revision
<FONT ID="LN">971 </FONT><A NAME="971"></A>     */</FONT>
<FONT ID="LN">972 </FONT><A NAME="972"></A>    <FONT ID="Public">public</FONT> String getRevision() {
<FONT ID="LN">973 </FONT><A NAME="973"></A>      <FONT ID="Return">return</FONT> RevisionUtils.extract(<FONT ID="StringLiteral">"$Revision: 5987 $"</FONT>);
<FONT ID="LN">974 </FONT><A NAME="974"></A>    }
<FONT ID="LN">975 </FONT><A NAME="975"></A>  }
<FONT ID="LN">976 </FONT><A NAME="976"></A>
<FONT ID="LN">977 </FONT><A NAME="977"></A>  <FONT ID="FormalComment">/** Normalize training data */</FONT>
<FONT ID="LN">978 </FONT><A NAME="978"></A>  <FONT ID="Public">public</FONT> <FONT ID="Static">static</FONT> <FONT ID="Final">final</FONT> <FONT ID="Int">int</FONT> FILTER_NORMALIZE = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">979 </FONT><A NAME="979"></A>  <FONT ID="FormalComment">/** Standardize training data */</FONT>
<FONT ID="LN">980 </FONT><A NAME="980"></A>  <FONT ID="Public">public</FONT> <FONT ID="Static">static</FONT> <FONT ID="Final">final</FONT> <FONT ID="Int">int</FONT> FILTER_STANDARDIZE = <FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">981 </FONT><A NAME="981"></A>  <FONT ID="FormalComment">/** No normalization/standardization */</FONT>
<FONT ID="LN">982 </FONT><A NAME="982"></A>  <FONT ID="Public">public</FONT> <FONT ID="Static">static</FONT> <FONT ID="Final">final</FONT> <FONT ID="Int">int</FONT> FILTER_NONE = <FONT ID="IntegerLiteral">2</FONT>;
<FONT ID="LN">983 </FONT><A NAME="983"></A>  <FONT ID="FormalComment">/** The filter to apply to the training data */</FONT>
<FONT ID="LN">984 </FONT><A NAME="984"></A>  <FONT ID="Public">public</FONT> <FONT ID="Static">static</FONT> <FONT ID="Final">final</FONT> <A HREF="../../../weka/core/SelectedTag.java.html">Tag</A> [] TAGS_FILTER = {
<FONT ID="LN">985 </FONT><A NAME="985"></A>    <FONT ID="New">new</FONT> <A HREF="../../../weka/core/SelectedTag.java.html">Tag</A>(FILTER_NORMALIZE, <FONT ID="StringLiteral">"Normalize training data"</FONT>),
<FONT ID="LN">986 </FONT><A NAME="986"></A>    <FONT ID="New">new</FONT> <A HREF="../../../weka/core/SelectedTag.java.html">Tag</A>(FILTER_STANDARDIZE, <FONT ID="StringLiteral">"Standardize training data"</FONT>),
<FONT ID="LN">987 </FONT><A NAME="987"></A>    <FONT ID="New">new</FONT> <A HREF="../../../weka/core/SelectedTag.java.html">Tag</A>(FILTER_NONE, <FONT ID="StringLiteral">"No normalization/standardization"</FONT>),
<FONT ID="LN">988 </FONT><A NAME="988"></A>  };
<FONT ID="LN">989 </FONT><A NAME="989"></A>
<FONT ID="LN">990 </FONT><A NAME="990"></A>  <FONT ID="FormalComment">/** The binary classifier(s) */</FONT>
<FONT ID="LN">991 </FONT><A NAME="991"></A>  <FONT ID="Protected">protected</FONT> BinaryMISMO[][] m_classifiers = <FONT ID="Null">null</FONT>;
<FONT ID="LN">992 </FONT><A NAME="992"></A>
<FONT ID="LN">993 </FONT><A NAME="993"></A>  <FONT ID="FormalComment">/** The complexity parameter. */</FONT>
<FONT ID="LN">994 </FONT><A NAME="994"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Double">double</FONT> m_C = <FONT ID="FloatPointLiteral">1.0</FONT>;
<FONT ID="LN">995 </FONT><A NAME="995"></A>
<FONT ID="LN">996 </FONT><A NAME="996"></A>  <FONT ID="FormalComment">/** Epsilon for rounding. */</FONT>
<FONT ID="LN">997 </FONT><A NAME="997"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Double">double</FONT> m_eps = <FONT ID="FloatPointLiteral">1.0e-12</FONT>;
<FONT ID="LN">998 </FONT><A NAME="998"></A>
<FONT ID="LN">999 </FONT><A NAME="999"></A>  <FONT ID="FormalComment">/** Tolerance for accuracy of result. */</FONT>
<FONT ID="LN">1000</FONT><A NAME="1000"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Double">double</FONT> m_tol = <FONT ID="FloatPointLiteral">1.0e-3</FONT>;
<FONT ID="LN">1001</FONT><A NAME="1001"></A>
<FONT ID="LN">1002</FONT><A NAME="1002"></A>  <FONT ID="FormalComment">/** Whether to normalize/standardize/neither */</FONT>
<FONT ID="LN">1003</FONT><A NAME="1003"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Int">int</FONT> m_filterType = FILTER_NORMALIZE;
<FONT ID="LN">1004</FONT><A NAME="1004"></A>
<FONT ID="LN">1005</FONT><A NAME="1005"></A>  <FONT ID="FormalComment">/** Use MIMinimax feature space?  */</FONT>
<FONT ID="LN">1006</FONT><A NAME="1006"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Boolean">boolean</FONT> m_minimax = <FONT ID="False">false</FONT>;   
<FONT ID="LN">1007</FONT><A NAME="1007"></A>
<FONT ID="LN">1008</FONT><A NAME="1008"></A>  <FONT ID="FormalComment">/** The filter used to make attributes numeric. */</FONT>
<FONT ID="LN">1009</FONT><A NAME="1009"></A>  <FONT ID="Protected">protected</FONT> <A HREF="../../../weka/filters/unsupervised/attribute/NominalToBinary.java.html">NominalToBinary</A> m_NominalToBinary;
<FONT ID="LN">1010</FONT><A NAME="1010"></A>
<FONT ID="LN">1011</FONT><A NAME="1011"></A>  <FONT ID="FormalComment">/** The filter used to standardize/normalize all values. */</FONT>
<FONT ID="LN">1012</FONT><A NAME="1012"></A>  <FONT ID="Protected">protected</FONT> <A HREF="../../../weka/filters/Filter.java.html">Filter</A> m_Filter = <FONT ID="Null">null</FONT>;
<FONT ID="LN">1013</FONT><A NAME="1013"></A>
<FONT ID="LN">1014</FONT><A NAME="1014"></A>  <FONT ID="FormalComment">/** The filter used to get rid of missing values. */</FONT>
<FONT ID="LN">1015</FONT><A NAME="1015"></A>  <FONT ID="Protected">protected</FONT> <A HREF="../../../weka/filters/unsupervised/attribute/ReplaceMissingValues.java.html">ReplaceMissingValues</A> m_Missing;
<FONT ID="LN">1016</FONT><A NAME="1016"></A>
<FONT ID="LN">1017</FONT><A NAME="1017"></A>  <FONT ID="FormalComment">/** The class index from the training data */</FONT>
<FONT ID="LN">1018</FONT><A NAME="1018"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Int">int</FONT> m_classIndex = -<FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">1019</FONT><A NAME="1019"></A>
<FONT ID="LN">1020</FONT><A NAME="1020"></A>  <FONT ID="FormalComment">/** The class attribute */</FONT>
<FONT ID="LN">1021</FONT><A NAME="1021"></A>  <FONT ID="Protected">protected</FONT> <A HREF="../../../weka/core/Attribute.java.html">Attribute</A> m_classAttribute;
<FONT ID="LN">1022</FONT><A NAME="1022"></A>  
<FONT ID="LN">1023</FONT><A NAME="1023"></A>  <FONT ID="FormalComment">/** Kernel to use **/</FONT>
<FONT ID="LN">1024</FONT><A NAME="1024"></A>  <FONT ID="Protected">protected</FONT> <A HREF="../../../weka/classifiers/functions/supportVector/Kernel.java.html">Kernel</A> m_kernel = <FONT ID="New">new</FONT> <A HREF="../../../weka/classifiers/mi/supportVector/MIPolyKernel.java.html">MIPolyKernel</A>();
<FONT ID="LN">1025</FONT><A NAME="1025"></A>
<FONT ID="LN">1026</FONT><A NAME="1026"></A>  <FONT ID="FormalComment">/** Turn off all checks and conversions? Turning them off assumes
<FONT ID="LN">1027</FONT><A NAME="1027"></A>    that data is purely numeric, doesn't contain any missing values,
<FONT ID="LN">1028</FONT><A NAME="1028"></A>    and has a nominal class. Turning them off also means that
<FONT ID="LN">1029</FONT><A NAME="1029"></A>    no header information will be stored if the machine is linear. 
<FONT ID="LN">1030</FONT><A NAME="1030"></A>    Finally, it also assumes that no instance has a weight equal to 0.*/</FONT>
<FONT ID="LN">1031</FONT><A NAME="1031"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Boolean">boolean</FONT> m_checksTurnedOff;
<FONT ID="LN">1032</FONT><A NAME="1032"></A>
<FONT ID="LN">1033</FONT><A NAME="1033"></A>  <FONT ID="FormalComment">/** Precision constant for updating sets */</FONT>
<FONT ID="LN">1034</FONT><A NAME="1034"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Static">static</FONT> <FONT ID="Double">double</FONT> m_Del = <FONT ID="IntegerLiteral">1000</FONT> * Double.MIN_VALUE;
<FONT ID="LN">1035</FONT><A NAME="1035"></A>
<FONT ID="LN">1036</FONT><A NAME="1036"></A>  <FONT ID="FormalComment">/** Whether logistic models are to be fit */</FONT>
<FONT ID="LN">1037</FONT><A NAME="1037"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Boolean">boolean</FONT> m_fitLogisticModels = <FONT ID="False">false</FONT>;
<FONT ID="LN">1038</FONT><A NAME="1038"></A>
<FONT ID="LN">1039</FONT><A NAME="1039"></A>  <FONT ID="FormalComment">/** The number of folds for the internal cross-validation */</FONT>
<FONT ID="LN">1040</FONT><A NAME="1040"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Int">int</FONT> m_numFolds = -<FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">1041</FONT><A NAME="1041"></A>
<FONT ID="LN">1042</FONT><A NAME="1042"></A>  <FONT ID="FormalComment">/** The random number seed  */</FONT>
<FONT ID="LN">1043</FONT><A NAME="1043"></A>  <FONT ID="Protected">protected</FONT> <FONT ID="Int">int</FONT> m_randomSeed = <FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">1044</FONT><A NAME="1044"></A>
<FONT ID="LN">1045</FONT><A NAME="1045"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1046</FONT><A NAME="1046"></A>   * Turns off checks for missing values, etc. Use with caution.
<FONT ID="LN">1047</FONT><A NAME="1047"></A>   */</FONT>
<FONT ID="LN">1048</FONT><A NAME="1048"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> turnChecksOff() {
<FONT ID="LN">1049</FONT><A NAME="1049"></A>
<FONT ID="LN">1050</FONT><A NAME="1050"></A>    m_checksTurnedOff = <FONT ID="True">true</FONT>;
<FONT ID="LN">1051</FONT><A NAME="1051"></A>  }
<FONT ID="LN">1052</FONT><A NAME="1052"></A>
<FONT ID="LN">1053</FONT><A NAME="1053"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1054</FONT><A NAME="1054"></A>   * Turns on checks for missing values, etc.
<FONT ID="LN">1055</FONT><A NAME="1055"></A>   */</FONT>
<FONT ID="LN">1056</FONT><A NAME="1056"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> turnChecksOn() {
<FONT ID="LN">1057</FONT><A NAME="1057"></A>
<FONT ID="LN">1058</FONT><A NAME="1058"></A>    m_checksTurnedOff = <FONT ID="False">false</FONT>;
<FONT ID="LN">1059</FONT><A NAME="1059"></A>  }
<FONT ID="LN">1060</FONT><A NAME="1060"></A>
<FONT ID="LN">1061</FONT><A NAME="1061"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1062</FONT><A NAME="1062"></A>   * Returns default capabilities of the classifier.
<FONT ID="LN">1063</FONT><A NAME="1063"></A>   *
<FONT ID="LN">1064</FONT><A NAME="1064"></A>   * @return      the capabilities of this classifier
<FONT ID="LN">1065</FONT><A NAME="1065"></A>   */</FONT>
<FONT ID="LN">1066</FONT><A NAME="1066"></A>  <FONT ID="Public">public</FONT> <A HREF="../../../weka/core/Capabilities.java.html">Capabilities</A> getCapabilities() {
<FONT ID="LN">1067</FONT><A NAME="1067"></A>    <A HREF="../../../weka/core/Capabilities.java.html">Capabilities</A> result = getKernel().getCapabilities();
<FONT ID="LN">1068</FONT><A NAME="1068"></A>    result.setOwner(<FONT ID="This">this</FONT>);
<FONT ID="LN">1069</FONT><A NAME="1069"></A>
<FONT ID="LN">1070</FONT><A NAME="1070"></A>    <FONT ID="SingleLineComment">// attributes
<FONT ID="LN">1071</FONT><A NAME="1071"></A></FONT>    result.enable(Capability.NOMINAL_ATTRIBUTES);
<FONT ID="LN">1072</FONT><A NAME="1072"></A>    result.enable(Capability.RELATIONAL_ATTRIBUTES);
<FONT ID="LN">1073</FONT><A NAME="1073"></A>    result.enable(Capability.MISSING_VALUES);
<FONT ID="LN">1074</FONT><A NAME="1074"></A>
<FONT ID="LN">1075</FONT><A NAME="1075"></A>    <FONT ID="SingleLineComment">// class
<FONT ID="LN">1076</FONT><A NAME="1076"></A></FONT>    result.disableAllClasses();
<FONT ID="LN">1077</FONT><A NAME="1077"></A>    result.disableAllClassDependencies();
<FONT ID="LN">1078</FONT><A NAME="1078"></A>    result.enable(Capability.NOMINAL_CLASS);
<FONT ID="LN">1079</FONT><A NAME="1079"></A>    result.enable(Capability.MISSING_CLASS_VALUES);
<FONT ID="LN">1080</FONT><A NAME="1080"></A>    
<FONT ID="LN">1081</FONT><A NAME="1081"></A>    <FONT ID="SingleLineComment">// other
<FONT ID="LN">1082</FONT><A NAME="1082"></A></FONT>    result.enable(Capability.ONLY_MULTIINSTANCE);
<FONT ID="LN">1083</FONT><A NAME="1083"></A>    
<FONT ID="LN">1084</FONT><A NAME="1084"></A>    <FONT ID="Return">return</FONT> result;
<FONT ID="LN">1085</FONT><A NAME="1085"></A>  }
<FONT ID="LN">1086</FONT><A NAME="1086"></A>
<FONT ID="LN">1087</FONT><A NAME="1087"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1088</FONT><A NAME="1088"></A>   * Returns the capabilities of this multi-instance classifier for the
<FONT ID="LN">1089</FONT><A NAME="1089"></A>   * relational data.
<FONT ID="LN">1090</FONT><A NAME="1090"></A>   *
<FONT ID="LN">1091</FONT><A NAME="1091"></A>   * @return            the capabilities of this object
<FONT ID="LN">1092</FONT><A NAME="1092"></A>   * @see               Capabilities
<FONT ID="LN">1093</FONT><A NAME="1093"></A>   */</FONT>
<FONT ID="LN">1094</FONT><A NAME="1094"></A>  <FONT ID="Public">public</FONT> <A HREF="../../../weka/core/Capabilities.java.html">Capabilities</A> getMultiInstanceCapabilities() {
<FONT ID="LN">1095</FONT><A NAME="1095"></A>    <A HREF="../../../weka/core/Capabilities.java.html">Capabilities</A> result = ((<A HREF="../../../weka/core/MultiInstanceCapabilitiesHandler.java.html">MultiInstanceCapabilitiesHandler</A>) getKernel()).getMultiInstanceCapabilities();
<FONT ID="LN">1096</FONT><A NAME="1096"></A>    result.setOwner(<FONT ID="This">this</FONT>);
<FONT ID="LN">1097</FONT><A NAME="1097"></A>
<FONT ID="LN">1098</FONT><A NAME="1098"></A>    <FONT ID="SingleLineComment">// attribute
<FONT ID="LN">1099</FONT><A NAME="1099"></A></FONT>    result.enableAllAttributeDependencies();
<FONT ID="LN">1100</FONT><A NAME="1100"></A>    <FONT ID="SingleLineComment">// with NominalToBinary we can also handle nominal attributes, but only
<FONT ID="LN">1101</FONT><A NAME="1101"></A></FONT>    <FONT ID="SingleLineComment">// if the kernel can handle numeric attributes
<FONT ID="LN">1102</FONT><A NAME="1102"></A></FONT>    <FONT ID="If">if</FONT> (result.handles(Capability.NUMERIC_ATTRIBUTES))
<FONT ID="LN">1103</FONT><A NAME="1103"></A>      result.enable(Capability.NOMINAL_ATTRIBUTES);
<FONT ID="LN">1104</FONT><A NAME="1104"></A>    result.enable(Capability.MISSING_VALUES);
<FONT ID="LN">1105</FONT><A NAME="1105"></A>    
<FONT ID="LN">1106</FONT><A NAME="1106"></A>    <FONT ID="Return">return</FONT> result;
<FONT ID="LN">1107</FONT><A NAME="1107"></A>  }
<FONT ID="LN">1108</FONT><A NAME="1108"></A>
<FONT ID="LN">1109</FONT><A NAME="1109"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1110</FONT><A NAME="1110"></A>   * Method for building the classifier. Implements a one-against-one
<FONT ID="LN">1111</FONT><A NAME="1111"></A>   * wrapper for multi-class problems.
<FONT ID="LN">1112</FONT><A NAME="1112"></A>   *
<FONT ID="LN">1113</FONT><A NAME="1113"></A>   * @param insts the set of training instances
<FONT ID="LN">1114</FONT><A NAME="1114"></A>   * @throws Exception if the classifier can't be built successfully
<FONT ID="LN">1115</FONT><A NAME="1115"></A>   */</FONT>
<FONT ID="LN">1116</FONT><A NAME="1116"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> buildClassifier(<A HREF="../../../weka/core/Instances.java.html">Instances</A> insts) <FONT ID="Throws">throws</FONT> Exception {
<FONT ID="LN">1117</FONT><A NAME="1117"></A>    <FONT ID="If">if</FONT> (!m_checksTurnedOff) {
<FONT ID="LN">1118</FONT><A NAME="1118"></A>      <FONT ID="SingleLineComment">// can classifier handle the data?
<FONT ID="LN">1119</FONT><A NAME="1119"></A></FONT>      getCapabilities().testWithFail(insts);
<FONT ID="LN">1120</FONT><A NAME="1120"></A>
<FONT ID="LN">1121</FONT><A NAME="1121"></A>      <FONT ID="SingleLineComment">// remove instances with missing class
<FONT ID="LN">1122</FONT><A NAME="1122"></A></FONT>      insts = <FONT ID="New">new</FONT> <A HREF="../../../weka/core/Instances.java.html">Instances</A>(insts);
<FONT ID="LN">1123</FONT><A NAME="1123"></A>      insts.deleteWithMissingClass();
<FONT ID="LN">1124</FONT><A NAME="1124"></A>
<FONT ID="LN">1125</FONT><A NAME="1125"></A>      <FONT ID="MultiLineComment">/* Removes all the instances with weight equal to 0.
<FONT ID="LN">1126</FONT><A NAME="1126"></A>         MUST be done since condition (8) of Keerthi's paper 
<FONT ID="LN">1127</FONT><A NAME="1127"></A>         is made with the assertion Ci &gt; 0 (See equation (3a). */</FONT>
<FONT ID="LN">1128</FONT><A NAME="1128"></A>      <A HREF="../../../weka/core/Instances.java.html">Instances</A> data = <FONT ID="New">new</FONT> <A HREF="../../../weka/core/Instances.java.html">Instances</A>(insts, insts.numInstances());
<FONT ID="LN">1129</FONT><A NAME="1129"></A>      <FONT ID="For">for</FONT>(<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; insts.numInstances(); i++){
<FONT ID="LN">1130</FONT><A NAME="1130"></A>        <FONT ID="If">if</FONT>(insts.instance(i).weight() &gt; <FONT ID="IntegerLiteral">0</FONT>)
<FONT ID="LN">1131</FONT><A NAME="1131"></A>          data.add(insts.instance(i));
<FONT ID="LN">1132</FONT><A NAME="1132"></A>      }
<FONT ID="LN">1133</FONT><A NAME="1133"></A>      <FONT ID="If">if</FONT> (data.numInstances() == <FONT ID="IntegerLiteral">0</FONT>) {
<FONT ID="LN">1134</FONT><A NAME="1134"></A>        <FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> Exception(<FONT ID="StringLiteral">"No training instances left after removing "</FONT> + 
<FONT ID="LN">1135</FONT><A NAME="1135"></A>            <FONT ID="StringLiteral">"instance with either a weight null or a missing class!"</FONT>);
<FONT ID="LN">1136</FONT><A NAME="1136"></A>      }
<FONT ID="LN">1137</FONT><A NAME="1137"></A>      insts = data;     
<FONT ID="LN">1138</FONT><A NAME="1138"></A>    }
<FONT ID="LN">1139</FONT><A NAME="1139"></A>
<FONT ID="LN">1140</FONT><A NAME="1140"></A>    <FONT ID="SingleLineComment">// filter data
<FONT ID="LN">1141</FONT><A NAME="1141"></A></FONT>    <FONT ID="If">if</FONT> (!m_checksTurnedOff) 
<FONT ID="LN">1142</FONT><A NAME="1142"></A>      m_Missing = <FONT ID="New">new</FONT> <A HREF="../../../weka/filters/unsupervised/attribute/ReplaceMissingValues.java.html">ReplaceMissingValues</A>();
<FONT ID="LN">1143</FONT><A NAME="1143"></A>    <FONT ID="Else">else</FONT> 
<FONT ID="LN">1144</FONT><A NAME="1144"></A>      m_Missing = <FONT ID="Null">null</FONT>;
<FONT ID="LN">1145</FONT><A NAME="1145"></A>
<FONT ID="LN">1146</FONT><A NAME="1146"></A>    <FONT ID="If">if</FONT> (getCapabilities().handles(Capability.NUMERIC_ATTRIBUTES)) {
<FONT ID="LN">1147</FONT><A NAME="1147"></A>      <FONT ID="Boolean">boolean</FONT> onlyNumeric = <FONT ID="True">true</FONT>;
<FONT ID="LN">1148</FONT><A NAME="1148"></A>      <FONT ID="If">if</FONT> (!m_checksTurnedOff) {
<FONT ID="LN">1149</FONT><A NAME="1149"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; insts.numAttributes(); i++) {
<FONT ID="LN">1150</FONT><A NAME="1150"></A>      <FONT ID="If">if</FONT> (i != insts.classIndex()) {
<FONT ID="LN">1151</FONT><A NAME="1151"></A>        <FONT ID="If">if</FONT> (!insts.attribute(i).isNumeric()) {
<FONT ID="LN">1152</FONT><A NAME="1152"></A>          onlyNumeric = <FONT ID="False">false</FONT>;
<FONT ID="LN">1153</FONT><A NAME="1153"></A>          <FONT ID="Break">break</FONT>;
<FONT ID="LN">1154</FONT><A NAME="1154"></A>        }
<FONT ID="LN">1155</FONT><A NAME="1155"></A>      }
<FONT ID="LN">1156</FONT><A NAME="1156"></A>    }
<FONT ID="LN">1157</FONT><A NAME="1157"></A>      }
<FONT ID="LN">1158</FONT><A NAME="1158"></A>      
<FONT ID="LN">1159</FONT><A NAME="1159"></A>      <FONT ID="If">if</FONT> (!onlyNumeric) {
<FONT ID="LN">1160</FONT><A NAME="1160"></A>    m_NominalToBinary = <FONT ID="New">new</FONT> <A HREF="../../../weka/filters/unsupervised/attribute/NominalToBinary.java.html">NominalToBinary</A>();
<FONT ID="LN">1161</FONT><A NAME="1161"></A>    <FONT ID="SingleLineComment">// exclude the bag attribute
<FONT ID="LN">1162</FONT><A NAME="1162"></A></FONT>    m_NominalToBinary.setAttributeIndices(<FONT ID="StringLiteral">"2-last"</FONT>);
<FONT ID="LN">1163</FONT><A NAME="1163"></A>      }
<FONT ID="LN">1164</FONT><A NAME="1164"></A>      <FONT ID="Else">else</FONT> {
<FONT ID="LN">1165</FONT><A NAME="1165"></A>    m_NominalToBinary = <FONT ID="Null">null</FONT>;
<FONT ID="LN">1166</FONT><A NAME="1166"></A>      }
<FONT ID="LN">1167</FONT><A NAME="1167"></A>    }
<FONT ID="LN">1168</FONT><A NAME="1168"></A>    <FONT ID="Else">else</FONT> {
<FONT ID="LN">1169</FONT><A NAME="1169"></A>      m_NominalToBinary = <FONT ID="Null">null</FONT>;
<FONT ID="LN">1170</FONT><A NAME="1170"></A>    }
<FONT ID="LN">1171</FONT><A NAME="1171"></A>
<FONT ID="LN">1172</FONT><A NAME="1172"></A>    <FONT ID="If">if</FONT> (m_filterType == FILTER_STANDARDIZE) 
<FONT ID="LN">1173</FONT><A NAME="1173"></A>      m_Filter = <FONT ID="New">new</FONT> <A HREF="../../../weka/filters/unsupervised/attribute/Standardize.java.html">Standardize</A>();
<FONT ID="LN">1174</FONT><A NAME="1174"></A>    <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (m_filterType == FILTER_NORMALIZE)
<FONT ID="LN">1175</FONT><A NAME="1175"></A>      m_Filter = <FONT ID="New">new</FONT> <A HREF="../../../weka/filters/unsupervised/attribute/Normalize.java.html">Normalize</A>();
<FONT ID="LN">1176</FONT><A NAME="1176"></A>    <FONT ID="Else">else</FONT> 
<FONT ID="LN">1177</FONT><A NAME="1177"></A>      m_Filter = <FONT ID="Null">null</FONT>;
<FONT ID="LN">1178</FONT><A NAME="1178"></A>
<FONT ID="LN">1179</FONT><A NAME="1179"></A>
<FONT ID="LN">1180</FONT><A NAME="1180"></A>    <A HREF="../../../weka/core/Instances.java.html">Instances</A> transformedInsts;
<FONT ID="LN">1181</FONT><A NAME="1181"></A>    <A HREF="../../../weka/filters/Filter.java.html">Filter</A> convertToProp = <FONT ID="New">new</FONT> <A HREF="../../../weka/filters/unsupervised/attribute/MultiInstanceToPropositional.java.html">MultiInstanceToPropositional</A>();
<FONT ID="LN">1182</FONT><A NAME="1182"></A>    <A HREF="../../../weka/filters/Filter.java.html">Filter</A> convertToMI = <FONT ID="New">new</FONT> <A HREF="../../../weka/filters/unsupervised/attribute/PropositionalToMultiInstance.java.html">PropositionalToMultiInstance</A>();
<FONT ID="LN">1183</FONT><A NAME="1183"></A>
<FONT ID="LN">1184</FONT><A NAME="1184"></A>    <FONT ID="SingleLineComment">//transform the data into single-instance format
<FONT ID="LN">1185</FONT><A NAME="1185"></A></FONT>    <FONT ID="If">if</FONT> (m_minimax){ 
<FONT ID="LN">1186</FONT><A NAME="1186"></A>      <FONT ID="MultiLineComment">/* using SimpleMI class minimax transform method. 
<FONT ID="LN">1187</FONT><A NAME="1187"></A>         this method transforms the multi-instance dataset into minmax feature space (single-instance) */</FONT>
<FONT ID="LN">1188</FONT><A NAME="1188"></A>      <A HREF="../../../weka/classifiers/mi/SimpleMI.java.html">SimpleMI</A> transMinimax = <FONT ID="New">new</FONT> <A HREF="../../../weka/classifiers/mi/SimpleMI.java.html">SimpleMI</A>();
<FONT ID="LN">1189</FONT><A NAME="1189"></A>      transMinimax.setTransformMethod(
<FONT ID="LN">1190</FONT><A NAME="1190"></A>          <FONT ID="New">new</FONT> <A HREF="../../../weka/core/SelectedTag.java.html">SelectedTag</A>(
<FONT ID="LN">1191</FONT><A NAME="1191"></A>            SimpleMI.TRANSFORMMETHOD_MINIMAX, SimpleMI.TAGS_TRANSFORMMETHOD));
<FONT ID="LN">1192</FONT><A NAME="1192"></A>      transformedInsts = transMinimax.transform(insts);
<FONT ID="LN">1193</FONT><A NAME="1193"></A>    }
<FONT ID="LN">1194</FONT><A NAME="1194"></A>    <FONT ID="Else">else</FONT> { 
<FONT ID="LN">1195</FONT><A NAME="1195"></A>      convertToProp.setInputFormat(insts);
<FONT ID="LN">1196</FONT><A NAME="1196"></A>      transformedInsts=Filter.useFilter(insts, convertToProp);
<FONT ID="LN">1197</FONT><A NAME="1197"></A>    }
<FONT ID="LN">1198</FONT><A NAME="1198"></A>
<FONT ID="LN">1199</FONT><A NAME="1199"></A>    <FONT ID="If">if</FONT> (m_Missing != <FONT ID="Null">null</FONT>) {
<FONT ID="LN">1200</FONT><A NAME="1200"></A>      m_Missing.setInputFormat(transformedInsts);
<FONT ID="LN">1201</FONT><A NAME="1201"></A>      transformedInsts = Filter.useFilter(transformedInsts, m_Missing); 
<FONT ID="LN">1202</FONT><A NAME="1202"></A>    }
<FONT ID="LN">1203</FONT><A NAME="1203"></A>
<FONT ID="LN">1204</FONT><A NAME="1204"></A>    <FONT ID="If">if</FONT> (m_NominalToBinary != <FONT ID="Null">null</FONT>) { 
<FONT ID="LN">1205</FONT><A NAME="1205"></A>      m_NominalToBinary.setInputFormat(transformedInsts);
<FONT ID="LN">1206</FONT><A NAME="1206"></A>      transformedInsts = Filter.useFilter(transformedInsts, m_NominalToBinary); 
<FONT ID="LN">1207</FONT><A NAME="1207"></A>    }
<FONT ID="LN">1208</FONT><A NAME="1208"></A>
<FONT ID="LN">1209</FONT><A NAME="1209"></A>    <FONT ID="If">if</FONT> (m_Filter != <FONT ID="Null">null</FONT>) {
<FONT ID="LN">1210</FONT><A NAME="1210"></A>      m_Filter.setInputFormat(transformedInsts);
<FONT ID="LN">1211</FONT><A NAME="1211"></A>      transformedInsts = Filter.useFilter(transformedInsts, m_Filter); 
<FONT ID="LN">1212</FONT><A NAME="1212"></A>    }
<FONT ID="LN">1213</FONT><A NAME="1213"></A>
<FONT ID="LN">1214</FONT><A NAME="1214"></A>    <FONT ID="SingleLineComment">// convert the single-instance format to multi-instance format
<FONT ID="LN">1215</FONT><A NAME="1215"></A></FONT>    convertToMI.setInputFormat(transformedInsts);
<FONT ID="LN">1216</FONT><A NAME="1216"></A>    insts = Filter.useFilter( transformedInsts, convertToMI);
<FONT ID="LN">1217</FONT><A NAME="1217"></A>
<FONT ID="LN">1218</FONT><A NAME="1218"></A>    m_classIndex = insts.classIndex();
<FONT ID="LN">1219</FONT><A NAME="1219"></A>    m_classAttribute = insts.classAttribute();
<FONT ID="LN">1220</FONT><A NAME="1220"></A>
<FONT ID="LN">1221</FONT><A NAME="1221"></A>    <FONT ID="SingleLineComment">// Generate subsets representing each class
<FONT ID="LN">1222</FONT><A NAME="1222"></A></FONT>    <A HREF="../../../weka/core/Instances.java.html">Instances</A>[] subsets = <FONT ID="New">new</FONT> <A HREF="../../../weka/core/Instances.java.html">Instances</A>[insts.numClasses()];
<FONT ID="LN">1223</FONT><A NAME="1223"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; insts.numClasses(); i++) {
<FONT ID="LN">1224</FONT><A NAME="1224"></A>      subsets[i] = <FONT ID="New">new</FONT> <A HREF="../../../weka/core/Instances.java.html">Instances</A>(insts, insts.numInstances());
<FONT ID="LN">1225</FONT><A NAME="1225"></A>    }
<FONT ID="LN">1226</FONT><A NAME="1226"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = <FONT ID="IntegerLiteral">0</FONT>; j &lt; insts.numInstances(); j++) {
<FONT ID="LN">1227</FONT><A NAME="1227"></A>      <A HREF="../../../weka/core/Instance.java.html">Instance</A> inst = insts.instance(j);
<FONT ID="LN">1228</FONT><A NAME="1228"></A>      subsets[(<FONT ID="Int">int</FONT>)inst.classValue()].add(inst);
<FONT ID="LN">1229</FONT><A NAME="1229"></A>    }
<FONT ID="LN">1230</FONT><A NAME="1230"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; insts.numClasses(); i++) {
<FONT ID="LN">1231</FONT><A NAME="1231"></A>      subsets[i].compactify();
<FONT ID="LN">1232</FONT><A NAME="1232"></A>    }
<FONT ID="LN">1233</FONT><A NAME="1233"></A>
<FONT ID="LN">1234</FONT><A NAME="1234"></A>    <FONT ID="SingleLineComment">// Build the binary classifiers
<FONT ID="LN">1235</FONT><A NAME="1235"></A></FONT>    Random rand = <FONT ID="New">new</FONT> Random(m_randomSeed);
<FONT ID="LN">1236</FONT><A NAME="1236"></A>    m_classifiers = <FONT ID="New">new</FONT> BinaryMISMO[insts.numClasses()][insts.numClasses()];
<FONT ID="LN">1237</FONT><A NAME="1237"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; insts.numClasses(); i++) {
<FONT ID="LN">1238</FONT><A NAME="1238"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = i + <FONT ID="IntegerLiteral">1</FONT>; j &lt; insts.numClasses(); j++) {
<FONT ID="LN">1239</FONT><A NAME="1239"></A>        m_classifiers[i][j] = <FONT ID="New">new</FONT> BinaryMISMO();  
<FONT ID="LN">1240</FONT><A NAME="1240"></A>        m_classifiers[i][j].setKernel(Kernel.makeCopy(getKernel()));
<FONT ID="LN">1241</FONT><A NAME="1241"></A>        <A HREF="../../../weka/core/Instances.java.html">Instances</A> data = <FONT ID="New">new</FONT> <A HREF="../../../weka/core/Instances.java.html">Instances</A>(insts, insts.numInstances());
<FONT ID="LN">1242</FONT><A NAME="1242"></A>        <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> k = <FONT ID="IntegerLiteral">0</FONT>; k &lt; subsets[i].numInstances(); k++) {
<FONT ID="LN">1243</FONT><A NAME="1243"></A>          data.add(subsets[i].instance(k));
<FONT ID="LN">1244</FONT><A NAME="1244"></A>        }
<FONT ID="LN">1245</FONT><A NAME="1245"></A>        <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> k = <FONT ID="IntegerLiteral">0</FONT>; k &lt; subsets[j].numInstances(); k++) {
<FONT ID="LN">1246</FONT><A NAME="1246"></A>          data.add(subsets[j].instance(k));
<FONT ID="LN">1247</FONT><A NAME="1247"></A>        }  
<FONT ID="LN">1248</FONT><A NAME="1248"></A>        data.compactify(); 
<FONT ID="LN">1249</FONT><A NAME="1249"></A>        data.randomize(rand);
<FONT ID="LN">1250</FONT><A NAME="1250"></A>        m_classifiers[i][j].buildClassifier(data, i, j, 
<FONT ID="LN">1251</FONT><A NAME="1251"></A>            m_fitLogisticModels,
<FONT ID="LN">1252</FONT><A NAME="1252"></A>            m_numFolds, m_randomSeed);
<FONT ID="LN">1253</FONT><A NAME="1253"></A>      }
<FONT ID="LN">1254</FONT><A NAME="1254"></A>    } 
<FONT ID="LN">1255</FONT><A NAME="1255"></A>
<FONT ID="LN">1256</FONT><A NAME="1256"></A>  }
<FONT ID="LN">1257</FONT><A NAME="1257"></A>
<FONT ID="LN">1258</FONT><A NAME="1258"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1259</FONT><A NAME="1259"></A>   * Estimates class probabilities for given instance.
<FONT ID="LN">1260</FONT><A NAME="1260"></A>   * 
<FONT ID="LN">1261</FONT><A NAME="1261"></A>   * @param inst the instance to compute the distribution for
<FONT ID="LN">1262</FONT><A NAME="1262"></A>   * @return the class probabilities
<FONT ID="LN">1263</FONT><A NAME="1263"></A>   * @throws Exception if computation fails
<FONT ID="LN">1264</FONT><A NAME="1264"></A>   */</FONT>
<FONT ID="LN">1265</FONT><A NAME="1265"></A>  <FONT ID="Public">public</FONT> <FONT ID="Double">double</FONT>[] distributionForInstance(<A HREF="../../../weka/core/Instance.java.html">Instance</A> inst) <FONT ID="Throws">throws</FONT> Exception { 
<FONT ID="LN">1266</FONT><A NAME="1266"></A>
<FONT ID="LN">1267</FONT><A NAME="1267"></A>    <FONT ID="SingleLineComment">//convert instance into instances
<FONT ID="LN">1268</FONT><A NAME="1268"></A></FONT>    <A HREF="../../../weka/core/Instances.java.html">Instances</A> insts = <FONT ID="New">new</FONT> <A HREF="../../../weka/core/Instances.java.html">Instances</A>(inst.dataset(), <FONT ID="IntegerLiteral">0</FONT>);
<FONT ID="LN">1269</FONT><A NAME="1269"></A>    insts.add(inst);
<FONT ID="LN">1270</FONT><A NAME="1270"></A>
<FONT ID="LN">1271</FONT><A NAME="1271"></A>    <FONT ID="SingleLineComment">//transform the data into single-instance format
<FONT ID="LN">1272</FONT><A NAME="1272"></A></FONT>    <A HREF="../../../weka/filters/Filter.java.html">Filter</A> convertToProp = <FONT ID="New">new</FONT> <A HREF="../../../weka/filters/unsupervised/attribute/MultiInstanceToPropositional.java.html">MultiInstanceToPropositional</A>();
<FONT ID="LN">1273</FONT><A NAME="1273"></A>    <A HREF="../../../weka/filters/Filter.java.html">Filter</A> convertToMI = <FONT ID="New">new</FONT> <A HREF="../../../weka/filters/unsupervised/attribute/PropositionalToMultiInstance.java.html">PropositionalToMultiInstance</A>();
<FONT ID="LN">1274</FONT><A NAME="1274"></A>
<FONT ID="LN">1275</FONT><A NAME="1275"></A>    <FONT ID="If">if</FONT> (m_minimax){ <FONT ID="SingleLineComment">// using minimax feature space
<FONT ID="LN">1276</FONT><A NAME="1276"></A></FONT>      <A HREF="../../../weka/classifiers/mi/SimpleMI.java.html">SimpleMI</A> transMinimax = <FONT ID="New">new</FONT> <A HREF="../../../weka/classifiers/mi/SimpleMI.java.html">SimpleMI</A>();
<FONT ID="LN">1277</FONT><A NAME="1277"></A>      transMinimax.setTransformMethod(
<FONT ID="LN">1278</FONT><A NAME="1278"></A>          <FONT ID="New">new</FONT> <A HREF="../../../weka/core/SelectedTag.java.html">SelectedTag</A>(
<FONT ID="LN">1279</FONT><A NAME="1279"></A>            SimpleMI.TRANSFORMMETHOD_MINIMAX, SimpleMI.TAGS_TRANSFORMMETHOD));
<FONT ID="LN">1280</FONT><A NAME="1280"></A>      insts = transMinimax.transform (insts);
<FONT ID="LN">1281</FONT><A NAME="1281"></A>    }
<FONT ID="LN">1282</FONT><A NAME="1282"></A>    <FONT ID="Else">else</FONT>{
<FONT ID="LN">1283</FONT><A NAME="1283"></A>      convertToProp.setInputFormat(insts);
<FONT ID="LN">1284</FONT><A NAME="1284"></A>      insts=Filter.useFilter( insts, convertToProp);
<FONT ID="LN">1285</FONT><A NAME="1285"></A>    }
<FONT ID="LN">1286</FONT><A NAME="1286"></A>
<FONT ID="LN">1287</FONT><A NAME="1287"></A>    <FONT ID="SingleLineComment">// Filter instances 
<FONT ID="LN">1288</FONT><A NAME="1288"></A></FONT>    <FONT ID="If">if</FONT> (m_Missing!=<FONT ID="Null">null</FONT>) 
<FONT ID="LN">1289</FONT><A NAME="1289"></A>      insts = Filter.useFilter(insts, m_Missing); 
<FONT ID="LN">1290</FONT><A NAME="1290"></A>
<FONT ID="LN">1291</FONT><A NAME="1291"></A>    <FONT ID="If">if</FONT> (m_Filter!=<FONT ID="Null">null</FONT>)
<FONT ID="LN">1292</FONT><A NAME="1292"></A>      insts = Filter.useFilter(insts, m_Filter);     
<FONT ID="LN">1293</FONT><A NAME="1293"></A>
<FONT ID="LN">1294</FONT><A NAME="1294"></A>    <FONT ID="SingleLineComment">// convert the single-instance format to multi-instance format
<FONT ID="LN">1295</FONT><A NAME="1295"></A></FONT>    convertToMI.setInputFormat(insts);
<FONT ID="LN">1296</FONT><A NAME="1296"></A>    insts=Filter.useFilter( insts, convertToMI);
<FONT ID="LN">1297</FONT><A NAME="1297"></A>
<FONT ID="LN">1298</FONT><A NAME="1298"></A>    inst = insts.instance(<FONT ID="IntegerLiteral">0</FONT>);  
<FONT ID="LN">1299</FONT><A NAME="1299"></A>
<FONT ID="LN">1300</FONT><A NAME="1300"></A>    <FONT ID="If">if</FONT> (!m_fitLogisticModels) {
<FONT ID="LN">1301</FONT><A NAME="1301"></A>      <FONT ID="Double">double</FONT>[] result = <FONT ID="New">new</FONT> <FONT ID="Double">double</FONT>[inst.numClasses()];
<FONT ID="LN">1302</FONT><A NAME="1302"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; inst.numClasses(); i++) {
<FONT ID="LN">1303</FONT><A NAME="1303"></A>        <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = i + <FONT ID="IntegerLiteral">1</FONT>; j &lt; inst.numClasses(); j++) {
<FONT ID="LN">1304</FONT><A NAME="1304"></A>          <FONT ID="If">if</FONT> ((m_classifiers[i][j].m_alpha != <FONT ID="Null">null</FONT>) || 
<FONT ID="LN">1305</FONT><A NAME="1305"></A>              (m_classifiers[i][j].m_sparseWeights != <FONT ID="Null">null</FONT>)) {
<FONT ID="LN">1306</FONT><A NAME="1306"></A>            <FONT ID="Double">double</FONT> output = m_classifiers[i][j].SVMOutput(-<FONT ID="IntegerLiteral">1</FONT>, inst);
<FONT ID="LN">1307</FONT><A NAME="1307"></A>            <FONT ID="If">if</FONT> (output &gt; <FONT ID="IntegerLiteral">0</FONT>) {
<FONT ID="LN">1308</FONT><A NAME="1308"></A>              result[j] += <FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">1309</FONT><A NAME="1309"></A>            } <FONT ID="Else">else</FONT> {
<FONT ID="LN">1310</FONT><A NAME="1310"></A>              result[i] += <FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">1311</FONT><A NAME="1311"></A>            }
<FONT ID="LN">1312</FONT><A NAME="1312"></A>              }
<FONT ID="LN">1313</FONT><A NAME="1313"></A>        } 
<FONT ID="LN">1314</FONT><A NAME="1314"></A>      }
<FONT ID="LN">1315</FONT><A NAME="1315"></A>      Utils.normalize(result);
<FONT ID="LN">1316</FONT><A NAME="1316"></A>      <FONT ID="Return">return</FONT> result;
<FONT ID="LN">1317</FONT><A NAME="1317"></A>    } <FONT ID="Else">else</FONT> {
<FONT ID="LN">1318</FONT><A NAME="1318"></A>
<FONT ID="LN">1319</FONT><A NAME="1319"></A>      <FONT ID="SingleLineComment">// We only need to do pairwise coupling if there are more
<FONT ID="LN">1320</FONT><A NAME="1320"></A></FONT>      <FONT ID="SingleLineComment">// then two classes.
<FONT ID="LN">1321</FONT><A NAME="1321"></A></FONT>      <FONT ID="If">if</FONT> (inst.numClasses() == <FONT ID="IntegerLiteral">2</FONT>) {
<FONT ID="LN">1322</FONT><A NAME="1322"></A>        <FONT ID="Double">double</FONT>[] newInst = <FONT ID="New">new</FONT> <FONT ID="Double">double</FONT>[<FONT ID="IntegerLiteral">2</FONT>];
<FONT ID="LN">1323</FONT><A NAME="1323"></A>        newInst[<FONT ID="IntegerLiteral">0</FONT>] = m_classifiers[<FONT ID="IntegerLiteral">0</FONT>][<FONT ID="IntegerLiteral">1</FONT>].SVMOutput(-<FONT ID="IntegerLiteral">1</FONT>, inst);
<FONT ID="LN">1324</FONT><A NAME="1324"></A>        newInst[<FONT ID="IntegerLiteral">1</FONT>] = Utils.missingValue();
<FONT ID="LN">1325</FONT><A NAME="1325"></A>        <FONT ID="Return">return</FONT> m_classifiers[<FONT ID="IntegerLiteral">0</FONT>][<FONT ID="IntegerLiteral">1</FONT>].m_logistic.
<FONT ID="LN">1326</FONT><A NAME="1326"></A>          distributionForInstance(<FONT ID="New">new</FONT> <A HREF="../../../weka/core/DenseInstance.java.html">DenseInstance</A>(<FONT ID="IntegerLiteral">1</FONT>, newInst));
<FONT ID="LN">1327</FONT><A NAME="1327"></A>      }
<FONT ID="LN">1328</FONT><A NAME="1328"></A>      <FONT ID="Double">double</FONT>[][] r = <FONT ID="New">new</FONT> <FONT ID="Double">double</FONT>[inst.numClasses()][inst.numClasses()];
<FONT ID="LN">1329</FONT><A NAME="1329"></A>      <FONT ID="Double">double</FONT>[][] n = <FONT ID="New">new</FONT> <FONT ID="Double">double</FONT>[inst.numClasses()][inst.numClasses()];
<FONT ID="LN">1330</FONT><A NAME="1330"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; inst.numClasses(); i++) {
<FONT ID="LN">1331</FONT><A NAME="1331"></A>        <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = i + <FONT ID="IntegerLiteral">1</FONT>; j &lt; inst.numClasses(); j++) {
<FONT ID="LN">1332</FONT><A NAME="1332"></A>          <FONT ID="If">if</FONT> ((m_classifiers[i][j].m_alpha != <FONT ID="Null">null</FONT>) || 
<FONT ID="LN">1333</FONT><A NAME="1333"></A>              (m_classifiers[i][j].m_sparseWeights != <FONT ID="Null">null</FONT>)) {
<FONT ID="LN">1334</FONT><A NAME="1334"></A>            <FONT ID="Double">double</FONT>[] newInst = <FONT ID="New">new</FONT> <FONT ID="Double">double</FONT>[<FONT ID="IntegerLiteral">2</FONT>];
<FONT ID="LN">1335</FONT><A NAME="1335"></A>            newInst[<FONT ID="IntegerLiteral">0</FONT>] = m_classifiers[i][j].SVMOutput(-<FONT ID="IntegerLiteral">1</FONT>, inst);
<FONT ID="LN">1336</FONT><A NAME="1336"></A>            newInst[<FONT ID="IntegerLiteral">1</FONT>] = Utils.missingValue();
<FONT ID="LN">1337</FONT><A NAME="1337"></A>            r[i][j] = m_classifiers[i][j].m_logistic.
<FONT ID="LN">1338</FONT><A NAME="1338"></A>              distributionForInstance(<FONT ID="New">new</FONT> <A HREF="../../../weka/core/DenseInstance.java.html">DenseInstance</A>(<FONT ID="IntegerLiteral">1</FONT>, newInst))[<FONT ID="IntegerLiteral">0</FONT>];
<FONT ID="LN">1339</FONT><A NAME="1339"></A>            n[i][j] = m_classifiers[i][j].m_sumOfWeights;
<FONT ID="LN">1340</FONT><A NAME="1340"></A>              }
<FONT ID="LN">1341</FONT><A NAME="1341"></A>        }
<FONT ID="LN">1342</FONT><A NAME="1342"></A>      }
<FONT ID="LN">1343</FONT><A NAME="1343"></A>      <FONT ID="Return">return</FONT> pairwiseCoupling(n, r);
<FONT ID="LN">1344</FONT><A NAME="1344"></A>    }
<FONT ID="LN">1345</FONT><A NAME="1345"></A>  }
<FONT ID="LN">1346</FONT><A NAME="1346"></A>
<FONT ID="LN">1347</FONT><A NAME="1347"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1348</FONT><A NAME="1348"></A>   * Implements pairwise coupling.
<FONT ID="LN">1349</FONT><A NAME="1349"></A>   *
<FONT ID="LN">1350</FONT><A NAME="1350"></A>   * @param n the sum of weights used to train each model
<FONT ID="LN">1351</FONT><A NAME="1351"></A>   * @param r the probability estimate from each model
<FONT ID="LN">1352</FONT><A NAME="1352"></A>   * @return the coupled estimates
<FONT ID="LN">1353</FONT><A NAME="1353"></A>   */</FONT>
<FONT ID="LN">1354</FONT><A NAME="1354"></A>  <FONT ID="Public">public</FONT> <FONT ID="Double">double</FONT>[] pairwiseCoupling(<FONT ID="Double">double</FONT>[][] n, <FONT ID="Double">double</FONT>[][] r) {
<FONT ID="LN">1355</FONT><A NAME="1355"></A>
<FONT ID="LN">1356</FONT><A NAME="1356"></A>    <FONT ID="SingleLineComment">// Initialize p and u array
<FONT ID="LN">1357</FONT><A NAME="1357"></A></FONT>    <FONT ID="Double">double</FONT>[] p = <FONT ID="New">new</FONT> <FONT ID="Double">double</FONT>[r.length];
<FONT ID="LN">1358</FONT><A NAME="1358"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i =<FONT ID="IntegerLiteral">0</FONT>; i &lt; p.length; i++) {
<FONT ID="LN">1359</FONT><A NAME="1359"></A>      p[i] = <FONT ID="FloatPointLiteral">1.0</FONT> / (<FONT ID="Double">double</FONT>)p.length;
<FONT ID="LN">1360</FONT><A NAME="1360"></A>    }
<FONT ID="LN">1361</FONT><A NAME="1361"></A>    <FONT ID="Double">double</FONT>[][] u = <FONT ID="New">new</FONT> <FONT ID="Double">double</FONT>[r.length][r.length];
<FONT ID="LN">1362</FONT><A NAME="1362"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; r.length; i++) {
<FONT ID="LN">1363</FONT><A NAME="1363"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = i + <FONT ID="IntegerLiteral">1</FONT>; j &lt; r.length; j++) {
<FONT ID="LN">1364</FONT><A NAME="1364"></A>        u[i][j] = <FONT ID="FloatPointLiteral">0.5</FONT>;
<FONT ID="LN">1365</FONT><A NAME="1365"></A>      }
<FONT ID="LN">1366</FONT><A NAME="1366"></A>    }
<FONT ID="LN">1367</FONT><A NAME="1367"></A>
<FONT ID="LN">1368</FONT><A NAME="1368"></A>    <FONT ID="SingleLineComment">// firstSum doesn't change
<FONT ID="LN">1369</FONT><A NAME="1369"></A></FONT>    <FONT ID="Double">double</FONT>[] firstSum = <FONT ID="New">new</FONT> <FONT ID="Double">double</FONT>[p.length];
<FONT ID="LN">1370</FONT><A NAME="1370"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; p.length; i++) {
<FONT ID="LN">1371</FONT><A NAME="1371"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = i + <FONT ID="IntegerLiteral">1</FONT>; j &lt; p.length; j++) {
<FONT ID="LN">1372</FONT><A NAME="1372"></A>        firstSum[i] += n[i][j] * r[i][j];
<FONT ID="LN">1373</FONT><A NAME="1373"></A>        firstSum[j] += n[i][j] * (<FONT ID="IntegerLiteral">1</FONT> - r[i][j]);
<FONT ID="LN">1374</FONT><A NAME="1374"></A>      }
<FONT ID="LN">1375</FONT><A NAME="1375"></A>    }
<FONT ID="LN">1376</FONT><A NAME="1376"></A>
<FONT ID="LN">1377</FONT><A NAME="1377"></A>    <FONT ID="SingleLineComment">// Iterate until convergence
<FONT ID="LN">1378</FONT><A NAME="1378"></A></FONT>    <FONT ID="Boolean">boolean</FONT> changed;
<FONT ID="LN">1379</FONT><A NAME="1379"></A>    <FONT ID="Do">do</FONT> {
<FONT ID="LN">1380</FONT><A NAME="1380"></A>      changed = <FONT ID="False">false</FONT>;
<FONT ID="LN">1381</FONT><A NAME="1381"></A>      <FONT ID="Double">double</FONT>[] secondSum = <FONT ID="New">new</FONT> <FONT ID="Double">double</FONT>[p.length];
<FONT ID="LN">1382</FONT><A NAME="1382"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; p.length; i++) {
<FONT ID="LN">1383</FONT><A NAME="1383"></A>        <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = i + <FONT ID="IntegerLiteral">1</FONT>; j &lt; p.length; j++) {
<FONT ID="LN">1384</FONT><A NAME="1384"></A>          secondSum[i] += n[i][j] * u[i][j];
<FONT ID="LN">1385</FONT><A NAME="1385"></A>          secondSum[j] += n[i][j] * (<FONT ID="IntegerLiteral">1</FONT> - u[i][j]);
<FONT ID="LN">1386</FONT><A NAME="1386"></A>        }
<FONT ID="LN">1387</FONT><A NAME="1387"></A>      }
<FONT ID="LN">1388</FONT><A NAME="1388"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; p.length; i++) {
<FONT ID="LN">1389</FONT><A NAME="1389"></A>        <FONT ID="If">if</FONT> ((firstSum[i] == <FONT ID="IntegerLiteral">0</FONT>) || (secondSum[i] == <FONT ID="IntegerLiteral">0</FONT>)) {
<FONT ID="LN">1390</FONT><A NAME="1390"></A>          <FONT ID="If">if</FONT> (p[i] &gt; <FONT ID="IntegerLiteral">0</FONT>) {
<FONT ID="LN">1391</FONT><A NAME="1391"></A>            changed = <FONT ID="True">true</FONT>;
<FONT ID="LN">1392</FONT><A NAME="1392"></A>          }
<FONT ID="LN">1393</FONT><A NAME="1393"></A>          p[i] = <FONT ID="IntegerLiteral">0</FONT>;
<FONT ID="LN">1394</FONT><A NAME="1394"></A>        } <FONT ID="Else">else</FONT> {
<FONT ID="LN">1395</FONT><A NAME="1395"></A>          <FONT ID="Double">double</FONT> factor = firstSum[i] / secondSum[i];
<FONT ID="LN">1396</FONT><A NAME="1396"></A>          <FONT ID="Double">double</FONT> pOld = p[i];
<FONT ID="LN">1397</FONT><A NAME="1397"></A>          p[i] *= factor;
<FONT ID="LN">1398</FONT><A NAME="1398"></A>          <FONT ID="If">if</FONT> (Math.abs(pOld - p[i]) &gt; <FONT ID="FloatPointLiteral">1.0e-3</FONT>) {
<FONT ID="LN">1399</FONT><A NAME="1399"></A>            changed = <FONT ID="True">true</FONT>;
<FONT ID="LN">1400</FONT><A NAME="1400"></A>          }
<FONT ID="LN">1401</FONT><A NAME="1401"></A>        }
<FONT ID="LN">1402</FONT><A NAME="1402"></A>      }
<FONT ID="LN">1403</FONT><A NAME="1403"></A>      Utils.normalize(p);
<FONT ID="LN">1404</FONT><A NAME="1404"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; r.length; i++) {
<FONT ID="LN">1405</FONT><A NAME="1405"></A>        <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = i + <FONT ID="IntegerLiteral">1</FONT>; j &lt; r.length; j++) {
<FONT ID="LN">1406</FONT><A NAME="1406"></A>          u[i][j] = p[i] / (p[i] + p[j]);
<FONT ID="LN">1407</FONT><A NAME="1407"></A>        }
<FONT ID="LN">1408</FONT><A NAME="1408"></A>      }
<FONT ID="LN">1409</FONT><A NAME="1409"></A>    } <FONT ID="While">while</FONT> (changed);
<FONT ID="LN">1410</FONT><A NAME="1410"></A>    <FONT ID="Return">return</FONT> p;
<FONT ID="LN">1411</FONT><A NAME="1411"></A>  }
<FONT ID="LN">1412</FONT><A NAME="1412"></A>
<FONT ID="LN">1413</FONT><A NAME="1413"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1414</FONT><A NAME="1414"></A>   * Returns the weights in sparse format.
<FONT ID="LN">1415</FONT><A NAME="1415"></A>   * 
<FONT ID="LN">1416</FONT><A NAME="1416"></A>   * @return the weights in sparse format
<FONT ID="LN">1417</FONT><A NAME="1417"></A>   */</FONT>
<FONT ID="LN">1418</FONT><A NAME="1418"></A>  <FONT ID="Public">public</FONT> <FONT ID="Double">double</FONT> [][][] sparseWeights() {
<FONT ID="LN">1419</FONT><A NAME="1419"></A>
<FONT ID="LN">1420</FONT><A NAME="1420"></A>    <FONT ID="Int">int</FONT> numValues = m_classAttribute.numValues();
<FONT ID="LN">1421</FONT><A NAME="1421"></A>    <FONT ID="Double">double</FONT> [][][] sparseWeights = <FONT ID="New">new</FONT> <FONT ID="Double">double</FONT>[numValues][numValues][];
<FONT ID="LN">1422</FONT><A NAME="1422"></A>
<FONT ID="LN">1423</FONT><A NAME="1423"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; numValues; i++) {
<FONT ID="LN">1424</FONT><A NAME="1424"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = i + <FONT ID="IntegerLiteral">1</FONT>; j &lt; numValues; j++) {
<FONT ID="LN">1425</FONT><A NAME="1425"></A>        sparseWeights[i][j] = m_classifiers[i][j].m_sparseWeights;
<FONT ID="LN">1426</FONT><A NAME="1426"></A>      }
<FONT ID="LN">1427</FONT><A NAME="1427"></A>    }
<FONT ID="LN">1428</FONT><A NAME="1428"></A>
<FONT ID="LN">1429</FONT><A NAME="1429"></A>    <FONT ID="Return">return</FONT> sparseWeights;
<FONT ID="LN">1430</FONT><A NAME="1430"></A>  }
<FONT ID="LN">1431</FONT><A NAME="1431"></A>
<FONT ID="LN">1432</FONT><A NAME="1432"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1433</FONT><A NAME="1433"></A>   * Returns the indices in sparse format.
<FONT ID="LN">1434</FONT><A NAME="1434"></A>   * 
<FONT ID="LN">1435</FONT><A NAME="1435"></A>   * @return the indices in sparse format
<FONT ID="LN">1436</FONT><A NAME="1436"></A>   */</FONT>
<FONT ID="LN">1437</FONT><A NAME="1437"></A>  <FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> [][][] sparseIndices() {
<FONT ID="LN">1438</FONT><A NAME="1438"></A>
<FONT ID="LN">1439</FONT><A NAME="1439"></A>    <FONT ID="Int">int</FONT> numValues = m_classAttribute.numValues();
<FONT ID="LN">1440</FONT><A NAME="1440"></A>    <FONT ID="Int">int</FONT> [][][] sparseIndices = <FONT ID="New">new</FONT> <FONT ID="Int">int</FONT>[numValues][numValues][];
<FONT ID="LN">1441</FONT><A NAME="1441"></A>
<FONT ID="LN">1442</FONT><A NAME="1442"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; numValues; i++) {
<FONT ID="LN">1443</FONT><A NAME="1443"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = i + <FONT ID="IntegerLiteral">1</FONT>; j &lt; numValues; j++) {
<FONT ID="LN">1444</FONT><A NAME="1444"></A>        sparseIndices[i][j] = m_classifiers[i][j].m_sparseIndices;
<FONT ID="LN">1445</FONT><A NAME="1445"></A>      }
<FONT ID="LN">1446</FONT><A NAME="1446"></A>    }
<FONT ID="LN">1447</FONT><A NAME="1447"></A>
<FONT ID="LN">1448</FONT><A NAME="1448"></A>    <FONT ID="Return">return</FONT> sparseIndices;
<FONT ID="LN">1449</FONT><A NAME="1449"></A>  }
<FONT ID="LN">1450</FONT><A NAME="1450"></A>
<FONT ID="LN">1451</FONT><A NAME="1451"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1452</FONT><A NAME="1452"></A>   * Returns the bias of each binary SMO.
<FONT ID="LN">1453</FONT><A NAME="1453"></A>   * 
<FONT ID="LN">1454</FONT><A NAME="1454"></A>   * @return the bias of each binary SMO
<FONT ID="LN">1455</FONT><A NAME="1455"></A>   */</FONT>
<FONT ID="LN">1456</FONT><A NAME="1456"></A>  <FONT ID="Public">public</FONT> <FONT ID="Double">double</FONT> [][] bias() {
<FONT ID="LN">1457</FONT><A NAME="1457"></A>
<FONT ID="LN">1458</FONT><A NAME="1458"></A>    <FONT ID="Int">int</FONT> numValues = m_classAttribute.numValues();
<FONT ID="LN">1459</FONT><A NAME="1459"></A>    <FONT ID="Double">double</FONT> [][] bias = <FONT ID="New">new</FONT> <FONT ID="Double">double</FONT>[numValues][numValues];
<FONT ID="LN">1460</FONT><A NAME="1460"></A>
<FONT ID="LN">1461</FONT><A NAME="1461"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; numValues; i++) {
<FONT ID="LN">1462</FONT><A NAME="1462"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = i + <FONT ID="IntegerLiteral">1</FONT>; j &lt; numValues; j++) {
<FONT ID="LN">1463</FONT><A NAME="1463"></A>        bias[i][j] = m_classifiers[i][j].m_b;
<FONT ID="LN">1464</FONT><A NAME="1464"></A>      }
<FONT ID="LN">1465</FONT><A NAME="1465"></A>    }
<FONT ID="LN">1466</FONT><A NAME="1466"></A>
<FONT ID="LN">1467</FONT><A NAME="1467"></A>    <FONT ID="Return">return</FONT> bias;
<FONT ID="LN">1468</FONT><A NAME="1468"></A>  }
<FONT ID="LN">1469</FONT><A NAME="1469"></A>
<FONT ID="LN">1470</FONT><A NAME="1470"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1471</FONT><A NAME="1471"></A>   * Returns the number of values of the class attribute.
<FONT ID="LN">1472</FONT><A NAME="1472"></A>   * 
<FONT ID="LN">1473</FONT><A NAME="1473"></A>   * @return the number values of the class attribute
<FONT ID="LN">1474</FONT><A NAME="1474"></A>   */</FONT>
<FONT ID="LN">1475</FONT><A NAME="1475"></A>  <FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> numClassAttributeValues() {
<FONT ID="LN">1476</FONT><A NAME="1476"></A>
<FONT ID="LN">1477</FONT><A NAME="1477"></A>    <FONT ID="Return">return</FONT> m_classAttribute.numValues();
<FONT ID="LN">1478</FONT><A NAME="1478"></A>  }
<FONT ID="LN">1479</FONT><A NAME="1479"></A>
<FONT ID="LN">1480</FONT><A NAME="1480"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1481</FONT><A NAME="1481"></A>   * Returns the names of the class attributes.
<FONT ID="LN">1482</FONT><A NAME="1482"></A>   * 
<FONT ID="LN">1483</FONT><A NAME="1483"></A>   * @return the names of the class attributes
<FONT ID="LN">1484</FONT><A NAME="1484"></A>   */</FONT>
<FONT ID="LN">1485</FONT><A NAME="1485"></A>  <FONT ID="Public">public</FONT> String[] classAttributeNames() {
<FONT ID="LN">1486</FONT><A NAME="1486"></A>
<FONT ID="LN">1487</FONT><A NAME="1487"></A>    <FONT ID="Int">int</FONT> numValues = m_classAttribute.numValues();
<FONT ID="LN">1488</FONT><A NAME="1488"></A>
<FONT ID="LN">1489</FONT><A NAME="1489"></A>    String[] classAttributeNames = <FONT ID="New">new</FONT> String[numValues];
<FONT ID="LN">1490</FONT><A NAME="1490"></A>
<FONT ID="LN">1491</FONT><A NAME="1491"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; numValues; i++) {
<FONT ID="LN">1492</FONT><A NAME="1492"></A>      classAttributeNames[i] = m_classAttribute.value(i);
<FONT ID="LN">1493</FONT><A NAME="1493"></A>    }
<FONT ID="LN">1494</FONT><A NAME="1494"></A>
<FONT ID="LN">1495</FONT><A NAME="1495"></A>    <FONT ID="Return">return</FONT> classAttributeNames;
<FONT ID="LN">1496</FONT><A NAME="1496"></A>  }
<FONT ID="LN">1497</FONT><A NAME="1497"></A>
<FONT ID="LN">1498</FONT><A NAME="1498"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1499</FONT><A NAME="1499"></A>   * Returns the attribute names.
<FONT ID="LN">1500</FONT><A NAME="1500"></A>   * 
<FONT ID="LN">1501</FONT><A NAME="1501"></A>   * @return the attribute names
<FONT ID="LN">1502</FONT><A NAME="1502"></A>   */</FONT>
<FONT ID="LN">1503</FONT><A NAME="1503"></A>  <FONT ID="Public">public</FONT> String[][][] attributeNames() {
<FONT ID="LN">1504</FONT><A NAME="1504"></A>
<FONT ID="LN">1505</FONT><A NAME="1505"></A>    <FONT ID="Int">int</FONT> numValues = m_classAttribute.numValues();
<FONT ID="LN">1506</FONT><A NAME="1506"></A>    String[][][] attributeNames = <FONT ID="New">new</FONT> String[numValues][numValues][];
<FONT ID="LN">1507</FONT><A NAME="1507"></A>
<FONT ID="LN">1508</FONT><A NAME="1508"></A>    <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; numValues; i++) {
<FONT ID="LN">1509</FONT><A NAME="1509"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = i + <FONT ID="IntegerLiteral">1</FONT>; j &lt; numValues; j++) {
<FONT ID="LN">1510</FONT><A NAME="1510"></A>        <FONT ID="Int">int</FONT> numAttributes = m_classifiers[i][j].m_data.numAttributes();
<FONT ID="LN">1511</FONT><A NAME="1511"></A>        String[] attrNames = <FONT ID="New">new</FONT> String[numAttributes];
<FONT ID="LN">1512</FONT><A NAME="1512"></A>        <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> k = <FONT ID="IntegerLiteral">0</FONT>; k &lt; numAttributes; k++) {
<FONT ID="LN">1513</FONT><A NAME="1513"></A>          attrNames[k] = m_classifiers[i][j].m_data.attribute(k).name();
<FONT ID="LN">1514</FONT><A NAME="1514"></A>        }
<FONT ID="LN">1515</FONT><A NAME="1515"></A>        attributeNames[i][j] = attrNames;          
<FONT ID="LN">1516</FONT><A NAME="1516"></A>      }
<FONT ID="LN">1517</FONT><A NAME="1517"></A>    }
<FONT ID="LN">1518</FONT><A NAME="1518"></A>    <FONT ID="Return">return</FONT> attributeNames;
<FONT ID="LN">1519</FONT><A NAME="1519"></A>  }
<FONT ID="LN">1520</FONT><A NAME="1520"></A>
<FONT ID="LN">1521</FONT><A NAME="1521"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1522</FONT><A NAME="1522"></A>   * Returns an enumeration describing the available options.
<FONT ID="LN">1523</FONT><A NAME="1523"></A>   *
<FONT ID="LN">1524</FONT><A NAME="1524"></A>   * @return an enumeration of all the available options.
<FONT ID="LN">1525</FONT><A NAME="1525"></A>   */</FONT>
<FONT ID="LN">1526</FONT><A NAME="1526"></A>  <FONT ID="Public">public</FONT> Enumeration listOptions() {
<FONT ID="LN">1527</FONT><A NAME="1527"></A>
<FONT ID="LN">1528</FONT><A NAME="1528"></A>    <A HREF="../../../weka/core/FastVector.java.html">Vector</A> result = <FONT ID="New">new</FONT> <A HREF="../../../weka/core/FastVector.java.html">Vector</A>();
<FONT ID="LN">1529</FONT><A NAME="1529"></A>
<FONT ID="LN">1530</FONT><A NAME="1530"></A>    Enumeration enm = <FONT ID="Super">super</FONT>.listOptions();
<FONT ID="LN">1531</FONT><A NAME="1531"></A>    <FONT ID="While">while</FONT> (enm.hasMoreElements())
<FONT ID="LN">1532</FONT><A NAME="1532"></A>      result.addElement(enm.nextElement());
<FONT ID="LN">1533</FONT><A NAME="1533"></A>
<FONT ID="LN">1534</FONT><A NAME="1534"></A>    result.addElement(<FONT ID="New">new</FONT> <A HREF="../../../weka/core/Option.java.html">Option</A>(
<FONT ID="LN">1535</FONT><A NAME="1535"></A>    <FONT ID="StringLiteral">"\tTurns off all checks - use with caution!\n"</FONT>
<FONT ID="LN">1536</FONT><A NAME="1536"></A>    + <FONT ID="StringLiteral">"\tTurning them off assumes that data is purely numeric, doesn't\n"</FONT>
<FONT ID="LN">1537</FONT><A NAME="1537"></A>    + <FONT ID="StringLiteral">"\tcontain any missing values, and has a nominal class. Turning them\n"</FONT>
<FONT ID="LN">1538</FONT><A NAME="1538"></A>    + <FONT ID="StringLiteral">"\toff also means that no header information will be stored if the\n"</FONT>
<FONT ID="LN">1539</FONT><A NAME="1539"></A>    + <FONT ID="StringLiteral">"\tmachine is linear. Finally, it also assumes that no instance has\n"</FONT>
<FONT ID="LN">1540</FONT><A NAME="1540"></A>    + <FONT ID="StringLiteral">"\ta weight equal to 0.\n"</FONT>
<FONT ID="LN">1541</FONT><A NAME="1541"></A>    + <FONT ID="StringLiteral">"\t(default: checks on)"</FONT>,
<FONT ID="LN">1542</FONT><A NAME="1542"></A>    <FONT ID="StringLiteral">"no-checks"</FONT>, <FONT ID="IntegerLiteral">0</FONT>, <FONT ID="StringLiteral">"-no-checks"</FONT>));
<FONT ID="LN">1543</FONT><A NAME="1543"></A>
<FONT ID="LN">1544</FONT><A NAME="1544"></A>    result.addElement(<FONT ID="New">new</FONT> <A HREF="../../../weka/core/Option.java.html">Option</A>(
<FONT ID="LN">1545</FONT><A NAME="1545"></A>          <FONT ID="StringLiteral">"\tThe complexity constant C. (default 1)"</FONT>,
<FONT ID="LN">1546</FONT><A NAME="1546"></A>          <FONT ID="StringLiteral">"C"</FONT>, <FONT ID="IntegerLiteral">1</FONT>, <FONT ID="StringLiteral">"-C &lt;double&gt;"</FONT>));
<FONT ID="LN">1547</FONT><A NAME="1547"></A>    
<FONT ID="LN">1548</FONT><A NAME="1548"></A>    result.addElement(<FONT ID="New">new</FONT> <A HREF="../../../weka/core/Option.java.html">Option</A>(
<FONT ID="LN">1549</FONT><A NAME="1549"></A>          <FONT ID="StringLiteral">"\tWhether to 0=normalize/1=standardize/2=neither.\n"</FONT> 
<FONT ID="LN">1550</FONT><A NAME="1550"></A>          + <FONT ID="StringLiteral">"\t(default 0=normalize)"</FONT>,
<FONT ID="LN">1551</FONT><A NAME="1551"></A>          <FONT ID="StringLiteral">"N"</FONT>, <FONT ID="IntegerLiteral">1</FONT>, <FONT ID="StringLiteral">"-N"</FONT>));
<FONT ID="LN">1552</FONT><A NAME="1552"></A>    
<FONT ID="LN">1553</FONT><A NAME="1553"></A>    result.addElement(<FONT ID="New">new</FONT> <A HREF="../../../weka/core/Option.java.html">Option</A>(
<FONT ID="LN">1554</FONT><A NAME="1554"></A>          <FONT ID="StringLiteral">"\tUse MIminimax feature space. "</FONT>,
<FONT ID="LN">1555</FONT><A NAME="1555"></A>          <FONT ID="StringLiteral">"I"</FONT>, <FONT ID="IntegerLiteral">0</FONT>, <FONT ID="StringLiteral">"-I"</FONT>));
<FONT ID="LN">1556</FONT><A NAME="1556"></A>    
<FONT ID="LN">1557</FONT><A NAME="1557"></A>    result.addElement(<FONT ID="New">new</FONT> <A HREF="../../../weka/core/Option.java.html">Option</A>(
<FONT ID="LN">1558</FONT><A NAME="1558"></A>          <FONT ID="StringLiteral">"\tThe tolerance parameter. (default 1.0e-3)"</FONT>,
<FONT ID="LN">1559</FONT><A NAME="1559"></A>          <FONT ID="StringLiteral">"L"</FONT>, <FONT ID="IntegerLiteral">1</FONT>, <FONT ID="StringLiteral">"-L &lt;double&gt;"</FONT>));
<FONT ID="LN">1560</FONT><A NAME="1560"></A>    
<FONT ID="LN">1561</FONT><A NAME="1561"></A>    result.addElement(<FONT ID="New">new</FONT> <A HREF="../../../weka/core/Option.java.html">Option</A>(
<FONT ID="LN">1562</FONT><A NAME="1562"></A>          <FONT ID="StringLiteral">"\tThe epsilon for round-off error. (default 1.0e-12)"</FONT>,
<FONT ID="LN">1563</FONT><A NAME="1563"></A>          <FONT ID="StringLiteral">"P"</FONT>, <FONT ID="IntegerLiteral">1</FONT>, <FONT ID="StringLiteral">"-P &lt;double&gt;"</FONT>));
<FONT ID="LN">1564</FONT><A NAME="1564"></A>    
<FONT ID="LN">1565</FONT><A NAME="1565"></A>    result.addElement(<FONT ID="New">new</FONT> <A HREF="../../../weka/core/Option.java.html">Option</A>(
<FONT ID="LN">1566</FONT><A NAME="1566"></A>          <FONT ID="StringLiteral">"\tFit logistic models to SVM outputs. "</FONT>,
<FONT ID="LN">1567</FONT><A NAME="1567"></A>          <FONT ID="StringLiteral">"M"</FONT>, <FONT ID="IntegerLiteral">0</FONT>, <FONT ID="StringLiteral">"-M"</FONT>));
<FONT ID="LN">1568</FONT><A NAME="1568"></A>    
<FONT ID="LN">1569</FONT><A NAME="1569"></A>    result.addElement(<FONT ID="New">new</FONT> <A HREF="../../../weka/core/Option.java.html">Option</A>(
<FONT ID="LN">1570</FONT><A NAME="1570"></A>          <FONT ID="StringLiteral">"\tThe number of folds for the internal cross-validation. \n"</FONT>
<FONT ID="LN">1571</FONT><A NAME="1571"></A>          + <FONT ID="StringLiteral">"\t(default -1, use training data)"</FONT>,
<FONT ID="LN">1572</FONT><A NAME="1572"></A>          <FONT ID="StringLiteral">"V"</FONT>, <FONT ID="IntegerLiteral">1</FONT>, <FONT ID="StringLiteral">"-V &lt;double&gt;"</FONT>));
<FONT ID="LN">1573</FONT><A NAME="1573"></A>    
<FONT ID="LN">1574</FONT><A NAME="1574"></A>    result.addElement(<FONT ID="New">new</FONT> <A HREF="../../../weka/core/Option.java.html">Option</A>(
<FONT ID="LN">1575</FONT><A NAME="1575"></A>          <FONT ID="StringLiteral">"\tThe random number seed. (default 1)"</FONT>,
<FONT ID="LN">1576</FONT><A NAME="1576"></A>          <FONT ID="StringLiteral">"W"</FONT>, <FONT ID="IntegerLiteral">1</FONT>, <FONT ID="StringLiteral">"-W &lt;double&gt;"</FONT>));
<FONT ID="LN">1577</FONT><A NAME="1577"></A>    
<FONT ID="LN">1578</FONT><A NAME="1578"></A>    result.addElement(<FONT ID="New">new</FONT> <A HREF="../../../weka/core/Option.java.html">Option</A>(
<FONT ID="LN">1579</FONT><A NAME="1579"></A>    <FONT ID="StringLiteral">"\tThe Kernel to use.\n"</FONT>
<FONT ID="LN">1580</FONT><A NAME="1580"></A>    + <FONT ID="StringLiteral">"\t(default: weka.classifiers.functions.supportVector.PolyKernel)"</FONT>,
<FONT ID="LN">1581</FONT><A NAME="1581"></A>    <FONT ID="StringLiteral">"K"</FONT>, <FONT ID="IntegerLiteral">1</FONT>, <FONT ID="StringLiteral">"-K &lt;classname and parameters&gt;"</FONT>));
<FONT ID="LN">1582</FONT><A NAME="1582"></A>
<FONT ID="LN">1583</FONT><A NAME="1583"></A>    result.addElement(<FONT ID="New">new</FONT> <A HREF="../../../weka/core/Option.java.html">Option</A>(
<FONT ID="LN">1584</FONT><A NAME="1584"></A>    <FONT ID="StringLiteral">""</FONT>,
<FONT ID="LN">1585</FONT><A NAME="1585"></A>    <FONT ID="StringLiteral">""</FONT>, <FONT ID="IntegerLiteral">0</FONT>, <FONT ID="StringLiteral">"\nOptions specific to kernel "</FONT>
<FONT ID="LN">1586</FONT><A NAME="1586"></A>    + getKernel().getClass().getName() + <FONT ID="StringLiteral">":"</FONT>));
<FONT ID="LN">1587</FONT><A NAME="1587"></A>    
<FONT ID="LN">1588</FONT><A NAME="1588"></A>    enm = ((<A HREF="../../../weka/core/OptionHandler.java.html">OptionHandler</A>) getKernel()).listOptions();
<FONT ID="LN">1589</FONT><A NAME="1589"></A>    <FONT ID="While">while</FONT> (enm.hasMoreElements())
<FONT ID="LN">1590</FONT><A NAME="1590"></A>      result.addElement(enm.nextElement());
<FONT ID="LN">1591</FONT><A NAME="1591"></A>
<FONT ID="LN">1592</FONT><A NAME="1592"></A>    <FONT ID="Return">return</FONT> result.elements();
<FONT ID="LN">1593</FONT><A NAME="1593"></A>  }
<FONT ID="LN">1594</FONT><A NAME="1594"></A>
<FONT ID="LN">1595</FONT><A NAME="1595"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1596</FONT><A NAME="1596"></A>   * Parses a given list of options. &lt;p/&gt;
<FONT ID="LN">1597</FONT><A NAME="1597"></A>   * 
<FONT ID="LN">1598</FONT><A NAME="1598"></A>   &lt;!-- options-start --&gt;
<FONT ID="LN">1599</FONT><A NAME="1599"></A>   * Valid options are: &lt;p/&gt;
<FONT ID="LN">1600</FONT><A NAME="1600"></A>   * 
<FONT ID="LN">1601</FONT><A NAME="1601"></A>   * &lt;pre&gt; -D
<FONT ID="LN">1602</FONT><A NAME="1602"></A>   *  If set, classifier is run in debug mode and
<FONT ID="LN">1603</FONT><A NAME="1603"></A>   *  may output additional info to the console&lt;/pre&gt;
<FONT ID="LN">1604</FONT><A NAME="1604"></A>   * 
<FONT ID="LN">1605</FONT><A NAME="1605"></A>   * &lt;pre&gt; -no-checks
<FONT ID="LN">1606</FONT><A NAME="1606"></A>   *  Turns off all checks - use with caution!
<FONT ID="LN">1607</FONT><A NAME="1607"></A>   *  Turning them off assumes that data is purely numeric, doesn't
<FONT ID="LN">1608</FONT><A NAME="1608"></A>   *  contain any missing values, and has a nominal class. Turning them
<FONT ID="LN">1609</FONT><A NAME="1609"></A>   *  off also means that no header information will be stored if the
<FONT ID="LN">1610</FONT><A NAME="1610"></A>   *  machine is linear. Finally, it also assumes that no instance has
<FONT ID="LN">1611</FONT><A NAME="1611"></A>   *  a weight equal to 0.
<FONT ID="LN">1612</FONT><A NAME="1612"></A>   *  (default: checks on)&lt;/pre&gt;
<FONT ID="LN">1613</FONT><A NAME="1613"></A>   * 
<FONT ID="LN">1614</FONT><A NAME="1614"></A>   * &lt;pre&gt; -C &amp;lt;double&amp;gt;
<FONT ID="LN">1615</FONT><A NAME="1615"></A>   *  The complexity constant C. (default 1)&lt;/pre&gt;
<FONT ID="LN">1616</FONT><A NAME="1616"></A>   * 
<FONT ID="LN">1617</FONT><A NAME="1617"></A>   * &lt;pre&gt; -N
<FONT ID="LN">1618</FONT><A NAME="1618"></A>   *  Whether to 0=normalize/1=standardize/2=neither.
<FONT ID="LN">1619</FONT><A NAME="1619"></A>   *  (default 0=normalize)&lt;/pre&gt;
<FONT ID="LN">1620</FONT><A NAME="1620"></A>   * 
<FONT ID="LN">1621</FONT><A NAME="1621"></A>   * &lt;pre&gt; -I
<FONT ID="LN">1622</FONT><A NAME="1622"></A>   *  Use MIminimax feature space. &lt;/pre&gt;
<FONT ID="LN">1623</FONT><A NAME="1623"></A>   * 
<FONT ID="LN">1624</FONT><A NAME="1624"></A>   * &lt;pre&gt; -L &amp;lt;double&amp;gt;
<FONT ID="LN">1625</FONT><A NAME="1625"></A>   *  The tolerance parameter. (default 1.0e-3)&lt;/pre&gt;
<FONT ID="LN">1626</FONT><A NAME="1626"></A>   * 
<FONT ID="LN">1627</FONT><A NAME="1627"></A>   * &lt;pre&gt; -P &amp;lt;double&amp;gt;
<FONT ID="LN">1628</FONT><A NAME="1628"></A>   *  The epsilon for round-off error. (default 1.0e-12)&lt;/pre&gt;
<FONT ID="LN">1629</FONT><A NAME="1629"></A>   * 
<FONT ID="LN">1630</FONT><A NAME="1630"></A>   * &lt;pre&gt; -M
<FONT ID="LN">1631</FONT><A NAME="1631"></A>   *  Fit logistic models to SVM outputs. &lt;/pre&gt;
<FONT ID="LN">1632</FONT><A NAME="1632"></A>   * 
<FONT ID="LN">1633</FONT><A NAME="1633"></A>   * &lt;pre&gt; -V &amp;lt;double&amp;gt;
<FONT ID="LN">1634</FONT><A NAME="1634"></A>   *  The number of folds for the internal cross-validation. 
<FONT ID="LN">1635</FONT><A NAME="1635"></A>   *  (default -1, use training data)&lt;/pre&gt;
<FONT ID="LN">1636</FONT><A NAME="1636"></A>   * 
<FONT ID="LN">1637</FONT><A NAME="1637"></A>   * &lt;pre&gt; -W &amp;lt;double&amp;gt;
<FONT ID="LN">1638</FONT><A NAME="1638"></A>   *  The random number seed. (default 1)&lt;/pre&gt;
<FONT ID="LN">1639</FONT><A NAME="1639"></A>   * 
<FONT ID="LN">1640</FONT><A NAME="1640"></A>   * &lt;pre&gt; -K &amp;lt;classname and parameters&amp;gt;
<FONT ID="LN">1641</FONT><A NAME="1641"></A>   *  The Kernel to use.
<FONT ID="LN">1642</FONT><A NAME="1642"></A>   *  (default: weka.classifiers.functions.supportVector.PolyKernel)&lt;/pre&gt;
<FONT ID="LN">1643</FONT><A NAME="1643"></A>   * 
<FONT ID="LN">1644</FONT><A NAME="1644"></A>   * &lt;pre&gt; 
<FONT ID="LN">1645</FONT><A NAME="1645"></A>   * Options specific to kernel weka.classifiers.mi.supportVector.MIPolyKernel:
<FONT ID="LN">1646</FONT><A NAME="1646"></A>   * &lt;/pre&gt;
<FONT ID="LN">1647</FONT><A NAME="1647"></A>   * 
<FONT ID="LN">1648</FONT><A NAME="1648"></A>   * &lt;pre&gt; -D
<FONT ID="LN">1649</FONT><A NAME="1649"></A>   *  Enables debugging output (if available) to be printed.
<FONT ID="LN">1650</FONT><A NAME="1650"></A>   *  (default: off)&lt;/pre&gt;
<FONT ID="LN">1651</FONT><A NAME="1651"></A>   * 
<FONT ID="LN">1652</FONT><A NAME="1652"></A>   * &lt;pre&gt; -no-checks
<FONT ID="LN">1653</FONT><A NAME="1653"></A>   *  Turns off all checks - use with caution!
<FONT ID="LN">1654</FONT><A NAME="1654"></A>   *  (default: checks on)&lt;/pre&gt;
<FONT ID="LN">1655</FONT><A NAME="1655"></A>   * 
<FONT ID="LN">1656</FONT><A NAME="1656"></A>   * &lt;pre&gt; -C &amp;lt;num&amp;gt;
<FONT ID="LN">1657</FONT><A NAME="1657"></A>   *  The size of the cache (a prime number), 0 for full cache and 
<FONT ID="LN">1658</FONT><A NAME="1658"></A>   *  -1 to turn it off.
<FONT ID="LN">1659</FONT><A NAME="1659"></A>   *  (default: 250007)&lt;/pre&gt;
<FONT ID="LN">1660</FONT><A NAME="1660"></A>   * 
<FONT ID="LN">1661</FONT><A NAME="1661"></A>   * &lt;pre&gt; -E &amp;lt;num&amp;gt;
<FONT ID="LN">1662</FONT><A NAME="1662"></A>   *  The Exponent to use.
<FONT ID="LN">1663</FONT><A NAME="1663"></A>   *  (default: 1.0)&lt;/pre&gt;
<FONT ID="LN">1664</FONT><A NAME="1664"></A>   * 
<FONT ID="LN">1665</FONT><A NAME="1665"></A>   * &lt;pre&gt; -L
<FONT ID="LN">1666</FONT><A NAME="1666"></A>   *  Use lower-order terms.
<FONT ID="LN">1667</FONT><A NAME="1667"></A>   *  (default: no)&lt;/pre&gt;
<FONT ID="LN">1668</FONT><A NAME="1668"></A>   * 
<FONT ID="LN">1669</FONT><A NAME="1669"></A>   &lt;!-- options-end --&gt;
<FONT ID="LN">1670</FONT><A NAME="1670"></A>   *
<FONT ID="LN">1671</FONT><A NAME="1671"></A>   * @param options the list of options as an array of strings
<FONT ID="LN">1672</FONT><A NAME="1672"></A>   * @throws Exception if an option is not supported 
<FONT ID="LN">1673</FONT><A NAME="1673"></A>   */</FONT>
<FONT ID="LN">1674</FONT><A NAME="1674"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setOptions(String[] options) <FONT ID="Throws">throws</FONT> Exception {
<FONT ID="LN">1675</FONT><A NAME="1675"></A>    String  tmpStr;
<FONT ID="LN">1676</FONT><A NAME="1676"></A>    String[]    tmpOptions;
<FONT ID="LN">1677</FONT><A NAME="1677"></A>    
<FONT ID="LN">1678</FONT><A NAME="1678"></A>    setChecksTurnedOff(Utils.getFlag(<FONT ID="StringLiteral">"no-checks"</FONT>, options));
<FONT ID="LN">1679</FONT><A NAME="1679"></A>
<FONT ID="LN">1680</FONT><A NAME="1680"></A>    tmpStr = Utils.getOption(<FONT ID="CharacerLiteral">'C'</FONT>, options);
<FONT ID="LN">1681</FONT><A NAME="1681"></A>    <FONT ID="If">if</FONT> (tmpStr.length() != <FONT ID="IntegerLiteral">0</FONT>)
<FONT ID="LN">1682</FONT><A NAME="1682"></A>      setC(Double.parseDouble(tmpStr));
<FONT ID="LN">1683</FONT><A NAME="1683"></A>    <FONT ID="Else">else</FONT>
<FONT ID="LN">1684</FONT><A NAME="1684"></A>      setC(<FONT ID="FloatPointLiteral">1.0</FONT>);
<FONT ID="LN">1685</FONT><A NAME="1685"></A>
<FONT ID="LN">1686</FONT><A NAME="1686"></A>    tmpStr = Utils.getOption(<FONT ID="CharacerLiteral">'L'</FONT>, options);
<FONT ID="LN">1687</FONT><A NAME="1687"></A>    <FONT ID="If">if</FONT> (tmpStr.length() != <FONT ID="IntegerLiteral">0</FONT>)
<FONT ID="LN">1688</FONT><A NAME="1688"></A>      setToleranceParameter(Double.parseDouble(tmpStr));
<FONT ID="LN">1689</FONT><A NAME="1689"></A>    <FONT ID="Else">else</FONT>
<FONT ID="LN">1690</FONT><A NAME="1690"></A>      setToleranceParameter(<FONT ID="FloatPointLiteral">1.0e-3</FONT>);
<FONT ID="LN">1691</FONT><A NAME="1691"></A>    
<FONT ID="LN">1692</FONT><A NAME="1692"></A>    tmpStr = Utils.getOption(<FONT ID="CharacerLiteral">'P'</FONT>, options);
<FONT ID="LN">1693</FONT><A NAME="1693"></A>    <FONT ID="If">if</FONT> (tmpStr.length() != <FONT ID="IntegerLiteral">0</FONT>)
<FONT ID="LN">1694</FONT><A NAME="1694"></A>      setEpsilon(<FONT ID="New">new</FONT> Double(tmpStr));
<FONT ID="LN">1695</FONT><A NAME="1695"></A>    <FONT ID="Else">else</FONT>
<FONT ID="LN">1696</FONT><A NAME="1696"></A>      setEpsilon(<FONT ID="FloatPointLiteral">1.0e-12</FONT>);
<FONT ID="LN">1697</FONT><A NAME="1697"></A>
<FONT ID="LN">1698</FONT><A NAME="1698"></A>    setMinimax(Utils.getFlag(<FONT ID="CharacerLiteral">'I'</FONT>, options));
<FONT ID="LN">1699</FONT><A NAME="1699"></A>
<FONT ID="LN">1700</FONT><A NAME="1700"></A>    tmpStr = Utils.getOption(<FONT ID="CharacerLiteral">'N'</FONT>, options);
<FONT ID="LN">1701</FONT><A NAME="1701"></A>    <FONT ID="If">if</FONT> (tmpStr.length() != <FONT ID="IntegerLiteral">0</FONT>)
<FONT ID="LN">1702</FONT><A NAME="1702"></A>      setFilterType(<FONT ID="New">new</FONT> <A HREF="../../../weka/core/SelectedTag.java.html">SelectedTag</A>(Integer.parseInt(tmpStr), TAGS_FILTER));
<FONT ID="LN">1703</FONT><A NAME="1703"></A>    <FONT ID="Else">else</FONT>
<FONT ID="LN">1704</FONT><A NAME="1704"></A>      setFilterType(<FONT ID="New">new</FONT> <A HREF="../../../weka/core/SelectedTag.java.html">SelectedTag</A>(FILTER_NORMALIZE, TAGS_FILTER));
<FONT ID="LN">1705</FONT><A NAME="1705"></A>    
<FONT ID="LN">1706</FONT><A NAME="1706"></A>    setBuildLogisticModels(Utils.getFlag(<FONT ID="CharacerLiteral">'M'</FONT>, options));
<FONT ID="LN">1707</FONT><A NAME="1707"></A>    
<FONT ID="LN">1708</FONT><A NAME="1708"></A>    tmpStr = Utils.getOption(<FONT ID="CharacerLiteral">'V'</FONT>, options);
<FONT ID="LN">1709</FONT><A NAME="1709"></A>    <FONT ID="If">if</FONT> (tmpStr.length() != <FONT ID="IntegerLiteral">0</FONT>)
<FONT ID="LN">1710</FONT><A NAME="1710"></A>      m_numFolds = Integer.parseInt(tmpStr);
<FONT ID="LN">1711</FONT><A NAME="1711"></A>    <FONT ID="Else">else</FONT>
<FONT ID="LN">1712</FONT><A NAME="1712"></A>      m_numFolds = -<FONT ID="IntegerLiteral">1</FONT>;
<FONT ID="LN">1713</FONT><A NAME="1713"></A>
<FONT ID="LN">1714</FONT><A NAME="1714"></A>    tmpStr = Utils.getOption(<FONT ID="CharacerLiteral">'W'</FONT>, options);
<FONT ID="LN">1715</FONT><A NAME="1715"></A>    <FONT ID="If">if</FONT> (tmpStr.length() != <FONT ID="IntegerLiteral">0</FONT>)
<FONT ID="LN">1716</FONT><A NAME="1716"></A>      setRandomSeed(Integer.parseInt(tmpStr));
<FONT ID="LN">1717</FONT><A NAME="1717"></A>    <FONT ID="Else">else</FONT>
<FONT ID="LN">1718</FONT><A NAME="1718"></A>      setRandomSeed(<FONT ID="IntegerLiteral">1</FONT>);
<FONT ID="LN">1719</FONT><A NAME="1719"></A>
<FONT ID="LN">1720</FONT><A NAME="1720"></A>    tmpStr     = Utils.getOption(<FONT ID="CharacerLiteral">'K'</FONT>, options);
<FONT ID="LN">1721</FONT><A NAME="1721"></A>    tmpOptions = Utils.splitOptions(tmpStr);
<FONT ID="LN">1722</FONT><A NAME="1722"></A>    <FONT ID="If">if</FONT> (tmpOptions.length != <FONT ID="IntegerLiteral">0</FONT>) {
<FONT ID="LN">1723</FONT><A NAME="1723"></A>      tmpStr        = tmpOptions[<FONT ID="IntegerLiteral">0</FONT>];
<FONT ID="LN">1724</FONT><A NAME="1724"></A>      tmpOptions[<FONT ID="IntegerLiteral">0</FONT>] = <FONT ID="StringLiteral">""</FONT>;
<FONT ID="LN">1725</FONT><A NAME="1725"></A>      setKernel(Kernel.forName(tmpStr, tmpOptions));
<FONT ID="LN">1726</FONT><A NAME="1726"></A>    }
<FONT ID="LN">1727</FONT><A NAME="1727"></A>    
<FONT ID="LN">1728</FONT><A NAME="1728"></A>    <FONT ID="Super">super</FONT>.setOptions(options);
<FONT ID="LN">1729</FONT><A NAME="1729"></A>  }
<FONT ID="LN">1730</FONT><A NAME="1730"></A>
<FONT ID="LN">1731</FONT><A NAME="1731"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1732</FONT><A NAME="1732"></A>   * Gets the current settings of the classifier.
<FONT ID="LN">1733</FONT><A NAME="1733"></A>   *
<FONT ID="LN">1734</FONT><A NAME="1734"></A>   * @return an array of strings suitable for passing to setOptions
<FONT ID="LN">1735</FONT><A NAME="1735"></A>   */</FONT>
<FONT ID="LN">1736</FONT><A NAME="1736"></A>  <FONT ID="Public">public</FONT> String[] getOptions() {
<FONT ID="LN">1737</FONT><A NAME="1737"></A>    <FONT ID="Int">int</FONT>       i;
<FONT ID="LN">1738</FONT><A NAME="1738"></A>    <A HREF="../../../weka/core/FastVector.java.html">Vector</A>    result;
<FONT ID="LN">1739</FONT><A NAME="1739"></A>    String[]  options;
<FONT ID="LN">1740</FONT><A NAME="1740"></A>
<FONT ID="LN">1741</FONT><A NAME="1741"></A>    result = <FONT ID="New">new</FONT> <A HREF="../../../weka/core/FastVector.java.html">Vector</A>();
<FONT ID="LN">1742</FONT><A NAME="1742"></A>    options = <FONT ID="Super">super</FONT>.getOptions();
<FONT ID="LN">1743</FONT><A NAME="1743"></A>    <FONT ID="For">for</FONT> (i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; options.length; i++)
<FONT ID="LN">1744</FONT><A NAME="1744"></A>      result.add(options[i]);
<FONT ID="LN">1745</FONT><A NAME="1745"></A>
<FONT ID="LN">1746</FONT><A NAME="1746"></A>    <FONT ID="If">if</FONT> (getChecksTurnedOff())
<FONT ID="LN">1747</FONT><A NAME="1747"></A>      result.add(<FONT ID="StringLiteral">"-no-checks"</FONT>);
<FONT ID="LN">1748</FONT><A NAME="1748"></A>
<FONT ID="LN">1749</FONT><A NAME="1749"></A>    result.add(<FONT ID="StringLiteral">"-C"</FONT>); 
<FONT ID="LN">1750</FONT><A NAME="1750"></A>    result.add(<FONT ID="StringLiteral">""</FONT> + getC());
<FONT ID="LN">1751</FONT><A NAME="1751"></A>    
<FONT ID="LN">1752</FONT><A NAME="1752"></A>    result.add(<FONT ID="StringLiteral">"-L"</FONT>);
<FONT ID="LN">1753</FONT><A NAME="1753"></A>    result.add(<FONT ID="StringLiteral">""</FONT> + getToleranceParameter());
<FONT ID="LN">1754</FONT><A NAME="1754"></A>    
<FONT ID="LN">1755</FONT><A NAME="1755"></A>    result.add(<FONT ID="StringLiteral">"-P"</FONT>);
<FONT ID="LN">1756</FONT><A NAME="1756"></A>    result.add(<FONT ID="StringLiteral">""</FONT> + getEpsilon());
<FONT ID="LN">1757</FONT><A NAME="1757"></A>    
<FONT ID="LN">1758</FONT><A NAME="1758"></A>    result.add(<FONT ID="StringLiteral">"-N"</FONT>);
<FONT ID="LN">1759</FONT><A NAME="1759"></A>    result.add(<FONT ID="StringLiteral">""</FONT> + m_filterType);
<FONT ID="LN">1760</FONT><A NAME="1760"></A>    
<FONT ID="LN">1761</FONT><A NAME="1761"></A>    <FONT ID="If">if</FONT> (getMinimax())
<FONT ID="LN">1762</FONT><A NAME="1762"></A>      result.add(<FONT ID="StringLiteral">"-I"</FONT>);
<FONT ID="LN">1763</FONT><A NAME="1763"></A>
<FONT ID="LN">1764</FONT><A NAME="1764"></A>    <FONT ID="If">if</FONT> (getBuildLogisticModels())
<FONT ID="LN">1765</FONT><A NAME="1765"></A>      result.add(<FONT ID="StringLiteral">"-M"</FONT>);
<FONT ID="LN">1766</FONT><A NAME="1766"></A>    
<FONT ID="LN">1767</FONT><A NAME="1767"></A>    result.add(<FONT ID="StringLiteral">"-V"</FONT>);
<FONT ID="LN">1768</FONT><A NAME="1768"></A>    result.add(<FONT ID="StringLiteral">""</FONT> + getNumFolds());
<FONT ID="LN">1769</FONT><A NAME="1769"></A>    
<FONT ID="LN">1770</FONT><A NAME="1770"></A>    result.add(<FONT ID="StringLiteral">"-W"</FONT>);
<FONT ID="LN">1771</FONT><A NAME="1771"></A>    result.add(<FONT ID="StringLiteral">""</FONT> + getRandomSeed());
<FONT ID="LN">1772</FONT><A NAME="1772"></A>    
<FONT ID="LN">1773</FONT><A NAME="1773"></A>    result.add(<FONT ID="StringLiteral">"-K"</FONT>);
<FONT ID="LN">1774</FONT><A NAME="1774"></A>    result.add(<FONT ID="StringLiteral">""</FONT> + getKernel().getClass().getName() + <FONT ID="StringLiteral">" "</FONT> + Utils.joinOptions(getKernel().getOptions()));
<FONT ID="LN">1775</FONT><A NAME="1775"></A>    
<FONT ID="LN">1776</FONT><A NAME="1776"></A>    <FONT ID="Return">return</FONT> (String[]) result.toArray(<FONT ID="New">new</FONT> String[result.size()]);      
<FONT ID="LN">1777</FONT><A NAME="1777"></A>  }
<FONT ID="LN">1778</FONT><A NAME="1778"></A>
<FONT ID="LN">1779</FONT><A NAME="1779"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1780</FONT><A NAME="1780"></A>   * Disables or enables the checks (which could be time-consuming). Use with
<FONT ID="LN">1781</FONT><A NAME="1781"></A>   * caution!
<FONT ID="LN">1782</FONT><A NAME="1782"></A>   * 
<FONT ID="LN">1783</FONT><A NAME="1783"></A>   * @param value   if true turns off all checks
<FONT ID="LN">1784</FONT><A NAME="1784"></A>   */</FONT>
<FONT ID="LN">1785</FONT><A NAME="1785"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setChecksTurnedOff(<FONT ID="Boolean">boolean</FONT> value) {
<FONT ID="LN">1786</FONT><A NAME="1786"></A>    <FONT ID="If">if</FONT> (value)
<FONT ID="LN">1787</FONT><A NAME="1787"></A>      turnChecksOff();
<FONT ID="LN">1788</FONT><A NAME="1788"></A>    <FONT ID="Else">else</FONT>
<FONT ID="LN">1789</FONT><A NAME="1789"></A>      turnChecksOn();
<FONT ID="LN">1790</FONT><A NAME="1790"></A>  }
<FONT ID="LN">1791</FONT><A NAME="1791"></A>  
<FONT ID="LN">1792</FONT><A NAME="1792"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1793</FONT><A NAME="1793"></A>   * Returns whether the checks are turned off or not.
<FONT ID="LN">1794</FONT><A NAME="1794"></A>   * 
<FONT ID="LN">1795</FONT><A NAME="1795"></A>   * @return        true if the checks are turned off
<FONT ID="LN">1796</FONT><A NAME="1796"></A>   */</FONT>
<FONT ID="LN">1797</FONT><A NAME="1797"></A>  <FONT ID="Public">public</FONT> <FONT ID="Boolean">boolean</FONT> getChecksTurnedOff() {
<FONT ID="LN">1798</FONT><A NAME="1798"></A>    <FONT ID="Return">return</FONT> m_checksTurnedOff;
<FONT ID="LN">1799</FONT><A NAME="1799"></A>  }
<FONT ID="LN">1800</FONT><A NAME="1800"></A>
<FONT ID="LN">1801</FONT><A NAME="1801"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1802</FONT><A NAME="1802"></A>   * Returns the tip text for this property
<FONT ID="LN">1803</FONT><A NAME="1803"></A>   * 
<FONT ID="LN">1804</FONT><A NAME="1804"></A>   * @return        tip text for this property suitable for
<FONT ID="LN">1805</FONT><A NAME="1805"></A>   *            displaying in the explorer/experimenter gui
<FONT ID="LN">1806</FONT><A NAME="1806"></A>   */</FONT>
<FONT ID="LN">1807</FONT><A NAME="1807"></A>  <FONT ID="Public">public</FONT> String checksTurnedOffTipText() {
<FONT ID="LN">1808</FONT><A NAME="1808"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"Turns time-consuming checks off - use with caution."</FONT>;
<FONT ID="LN">1809</FONT><A NAME="1809"></A>  }
<FONT ID="LN">1810</FONT><A NAME="1810"></A>  
<FONT ID="LN">1811</FONT><A NAME="1811"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1812</FONT><A NAME="1812"></A>   * Returns the tip text for this property
<FONT ID="LN">1813</FONT><A NAME="1813"></A>   * 
<FONT ID="LN">1814</FONT><A NAME="1814"></A>   * @return        tip text for this property suitable for
<FONT ID="LN">1815</FONT><A NAME="1815"></A>   *            displaying in the explorer/experimenter gui
<FONT ID="LN">1816</FONT><A NAME="1816"></A>   */</FONT>
<FONT ID="LN">1817</FONT><A NAME="1817"></A>  <FONT ID="Public">public</FONT> String kernelTipText() {
<FONT ID="LN">1818</FONT><A NAME="1818"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"The kernel to use."</FONT>;
<FONT ID="LN">1819</FONT><A NAME="1819"></A>  }
<FONT ID="LN">1820</FONT><A NAME="1820"></A>
<FONT ID="LN">1821</FONT><A NAME="1821"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1822</FONT><A NAME="1822"></A>   * Gets the kernel to use.
<FONT ID="LN">1823</FONT><A NAME="1823"></A>   *
<FONT ID="LN">1824</FONT><A NAME="1824"></A>   * @return        the kernel
<FONT ID="LN">1825</FONT><A NAME="1825"></A>   */</FONT>
<FONT ID="LN">1826</FONT><A NAME="1826"></A>  <FONT ID="Public">public</FONT> <A HREF="../../../weka/classifiers/functions/supportVector/Kernel.java.html">Kernel</A> getKernel() {
<FONT ID="LN">1827</FONT><A NAME="1827"></A>    <FONT ID="Return">return</FONT> m_kernel;
<FONT ID="LN">1828</FONT><A NAME="1828"></A>  }
<FONT ID="LN">1829</FONT><A NAME="1829"></A>    
<FONT ID="LN">1830</FONT><A NAME="1830"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1831</FONT><A NAME="1831"></A>   * Sets the kernel to use.
<FONT ID="LN">1832</FONT><A NAME="1832"></A>   *
<FONT ID="LN">1833</FONT><A NAME="1833"></A>   * @param value   the kernel
<FONT ID="LN">1834</FONT><A NAME="1834"></A>   */</FONT>
<FONT ID="LN">1835</FONT><A NAME="1835"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setKernel(<A HREF="../../../weka/classifiers/functions/supportVector/Kernel.java.html">Kernel</A> value) {
<FONT ID="LN">1836</FONT><A NAME="1836"></A>    <FONT ID="If">if</FONT> (!(value <FONT ID="InstanceOf">instanceof</FONT> <A HREF="../../../weka/core/MultiInstanceCapabilitiesHandler.java.html">MultiInstanceCapabilitiesHandler</A>))
<FONT ID="LN">1837</FONT><A NAME="1837"></A>      <FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> IllegalArgumentException(
<FONT ID="LN">1838</FONT><A NAME="1838"></A>      <FONT ID="StringLiteral">"Kernel must be able to handle multi-instance data!\n"</FONT>
<FONT ID="LN">1839</FONT><A NAME="1839"></A>      + <FONT ID="StringLiteral">"(This one does not implement "</FONT> + <A HREF="../../../weka/core/MultiInstanceCapabilitiesHandler.java.html">MultiInstanceCapabilitiesHandler</A>.<FONT ID="Class">class</FONT>.getName() + <FONT ID="StringLiteral">")"</FONT>);
<FONT ID="LN">1840</FONT><A NAME="1840"></A>    
<FONT ID="LN">1841</FONT><A NAME="1841"></A>    m_kernel = value;
<FONT ID="LN">1842</FONT><A NAME="1842"></A>  }
<FONT ID="LN">1843</FONT><A NAME="1843"></A>
<FONT ID="LN">1844</FONT><A NAME="1844"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1845</FONT><A NAME="1845"></A>   * Returns the tip text for this property
<FONT ID="LN">1846</FONT><A NAME="1846"></A>   * @return tip text for this property suitable for
<FONT ID="LN">1847</FONT><A NAME="1847"></A>   * displaying in the explorer/experimenter gui
<FONT ID="LN">1848</FONT><A NAME="1848"></A>   */</FONT>
<FONT ID="LN">1849</FONT><A NAME="1849"></A>  <FONT ID="Public">public</FONT> String cTipText() {
<FONT ID="LN">1850</FONT><A NAME="1850"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"The complexity parameter C."</FONT>;
<FONT ID="LN">1851</FONT><A NAME="1851"></A>  }
<FONT ID="LN">1852</FONT><A NAME="1852"></A>
<FONT ID="LN">1853</FONT><A NAME="1853"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1854</FONT><A NAME="1854"></A>   * Get the value of C.
<FONT ID="LN">1855</FONT><A NAME="1855"></A>   *
<FONT ID="LN">1856</FONT><A NAME="1856"></A>   * @return Value of C.
<FONT ID="LN">1857</FONT><A NAME="1857"></A>   */</FONT>
<FONT ID="LN">1858</FONT><A NAME="1858"></A>  <FONT ID="Public">public</FONT> <FONT ID="Double">double</FONT> getC() {
<FONT ID="LN">1859</FONT><A NAME="1859"></A>
<FONT ID="LN">1860</FONT><A NAME="1860"></A>    <FONT ID="Return">return</FONT> m_C;
<FONT ID="LN">1861</FONT><A NAME="1861"></A>  }
<FONT ID="LN">1862</FONT><A NAME="1862"></A>
<FONT ID="LN">1863</FONT><A NAME="1863"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1864</FONT><A NAME="1864"></A>   * Set the value of C.
<FONT ID="LN">1865</FONT><A NAME="1865"></A>   *
<FONT ID="LN">1866</FONT><A NAME="1866"></A>   * @param v  Value to assign to C.
<FONT ID="LN">1867</FONT><A NAME="1867"></A>   */</FONT>
<FONT ID="LN">1868</FONT><A NAME="1868"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setC(<FONT ID="Double">double</FONT> v) {
<FONT ID="LN">1869</FONT><A NAME="1869"></A>
<FONT ID="LN">1870</FONT><A NAME="1870"></A>    m_C = v;
<FONT ID="LN">1871</FONT><A NAME="1871"></A>  }
<FONT ID="LN">1872</FONT><A NAME="1872"></A>
<FONT ID="LN">1873</FONT><A NAME="1873"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1874</FONT><A NAME="1874"></A>   * Returns the tip text for this property
<FONT ID="LN">1875</FONT><A NAME="1875"></A>   * @return tip text for this property suitable for
<FONT ID="LN">1876</FONT><A NAME="1876"></A>   * displaying in the explorer/experimenter gui
<FONT ID="LN">1877</FONT><A NAME="1877"></A>   */</FONT>
<FONT ID="LN">1878</FONT><A NAME="1878"></A>  <FONT ID="Public">public</FONT> String toleranceParameterTipText() {
<FONT ID="LN">1879</FONT><A NAME="1879"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"The tolerance parameter (shouldn't be changed)."</FONT>;
<FONT ID="LN">1880</FONT><A NAME="1880"></A>  }
<FONT ID="LN">1881</FONT><A NAME="1881"></A>
<FONT ID="LN">1882</FONT><A NAME="1882"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1883</FONT><A NAME="1883"></A>   * Get the value of tolerance parameter.
<FONT ID="LN">1884</FONT><A NAME="1884"></A>   * @return Value of tolerance parameter.
<FONT ID="LN">1885</FONT><A NAME="1885"></A>   */</FONT>
<FONT ID="LN">1886</FONT><A NAME="1886"></A>  <FONT ID="Public">public</FONT> <FONT ID="Double">double</FONT> getToleranceParameter() {
<FONT ID="LN">1887</FONT><A NAME="1887"></A>
<FONT ID="LN">1888</FONT><A NAME="1888"></A>    <FONT ID="Return">return</FONT> m_tol;
<FONT ID="LN">1889</FONT><A NAME="1889"></A>  }
<FONT ID="LN">1890</FONT><A NAME="1890"></A>
<FONT ID="LN">1891</FONT><A NAME="1891"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1892</FONT><A NAME="1892"></A>   * Set the value of tolerance parameter.
<FONT ID="LN">1893</FONT><A NAME="1893"></A>   * @param v  Value to assign to tolerance parameter.
<FONT ID="LN">1894</FONT><A NAME="1894"></A>   */</FONT>
<FONT ID="LN">1895</FONT><A NAME="1895"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setToleranceParameter(<FONT ID="Double">double</FONT> v) {
<FONT ID="LN">1896</FONT><A NAME="1896"></A>
<FONT ID="LN">1897</FONT><A NAME="1897"></A>    m_tol = v;
<FONT ID="LN">1898</FONT><A NAME="1898"></A>  }
<FONT ID="LN">1899</FONT><A NAME="1899"></A>
<FONT ID="LN">1900</FONT><A NAME="1900"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1901</FONT><A NAME="1901"></A>   * Returns the tip text for this property
<FONT ID="LN">1902</FONT><A NAME="1902"></A>   * @return tip text for this property suitable for
<FONT ID="LN">1903</FONT><A NAME="1903"></A>   * displaying in the explorer/experimenter gui
<FONT ID="LN">1904</FONT><A NAME="1904"></A>   */</FONT>
<FONT ID="LN">1905</FONT><A NAME="1905"></A>  <FONT ID="Public">public</FONT> String epsilonTipText() {
<FONT ID="LN">1906</FONT><A NAME="1906"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"The epsilon for round-off error (shouldn't be changed)."</FONT>;
<FONT ID="LN">1907</FONT><A NAME="1907"></A>  }
<FONT ID="LN">1908</FONT><A NAME="1908"></A>
<FONT ID="LN">1909</FONT><A NAME="1909"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1910</FONT><A NAME="1910"></A>   * Get the value of epsilon.
<FONT ID="LN">1911</FONT><A NAME="1911"></A>   * @return Value of epsilon.
<FONT ID="LN">1912</FONT><A NAME="1912"></A>   */</FONT>
<FONT ID="LN">1913</FONT><A NAME="1913"></A>  <FONT ID="Public">public</FONT> <FONT ID="Double">double</FONT> getEpsilon() {
<FONT ID="LN">1914</FONT><A NAME="1914"></A>
<FONT ID="LN">1915</FONT><A NAME="1915"></A>    <FONT ID="Return">return</FONT> m_eps;
<FONT ID="LN">1916</FONT><A NAME="1916"></A>  }
<FONT ID="LN">1917</FONT><A NAME="1917"></A>
<FONT ID="LN">1918</FONT><A NAME="1918"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1919</FONT><A NAME="1919"></A>   * Set the value of epsilon.
<FONT ID="LN">1920</FONT><A NAME="1920"></A>   * @param v  Value to assign to epsilon.
<FONT ID="LN">1921</FONT><A NAME="1921"></A>   */</FONT>
<FONT ID="LN">1922</FONT><A NAME="1922"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setEpsilon(<FONT ID="Double">double</FONT> v) {
<FONT ID="LN">1923</FONT><A NAME="1923"></A>
<FONT ID="LN">1924</FONT><A NAME="1924"></A>    m_eps = v;
<FONT ID="LN">1925</FONT><A NAME="1925"></A>  }
<FONT ID="LN">1926</FONT><A NAME="1926"></A>
<FONT ID="LN">1927</FONT><A NAME="1927"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1928</FONT><A NAME="1928"></A>   * Returns the tip text for this property
<FONT ID="LN">1929</FONT><A NAME="1929"></A>   * @return tip text for this property suitable for
<FONT ID="LN">1930</FONT><A NAME="1930"></A>   * displaying in the explorer/experimenter gui
<FONT ID="LN">1931</FONT><A NAME="1931"></A>   */</FONT>
<FONT ID="LN">1932</FONT><A NAME="1932"></A>  <FONT ID="Public">public</FONT> String filterTypeTipText() {
<FONT ID="LN">1933</FONT><A NAME="1933"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"Determines how/if the data will be transformed."</FONT>;
<FONT ID="LN">1934</FONT><A NAME="1934"></A>  }
<FONT ID="LN">1935</FONT><A NAME="1935"></A>
<FONT ID="LN">1936</FONT><A NAME="1936"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1937</FONT><A NAME="1937"></A>   * Gets how the training data will be transformed. Will be one of
<FONT ID="LN">1938</FONT><A NAME="1938"></A>   * FILTER_NORMALIZE, FILTER_STANDARDIZE, FILTER_NONE.
<FONT ID="LN">1939</FONT><A NAME="1939"></A>   *
<FONT ID="LN">1940</FONT><A NAME="1940"></A>   * @return the filtering mode
<FONT ID="LN">1941</FONT><A NAME="1941"></A>   */</FONT>
<FONT ID="LN">1942</FONT><A NAME="1942"></A>  <FONT ID="Public">public</FONT> <A HREF="../../../weka/core/SelectedTag.java.html">SelectedTag</A> getFilterType() {
<FONT ID="LN">1943</FONT><A NAME="1943"></A>
<FONT ID="LN">1944</FONT><A NAME="1944"></A>    <FONT ID="Return">return</FONT> <FONT ID="New">new</FONT> <A HREF="../../../weka/core/SelectedTag.java.html">SelectedTag</A>(m_filterType, TAGS_FILTER);
<FONT ID="LN">1945</FONT><A NAME="1945"></A>  }
<FONT ID="LN">1946</FONT><A NAME="1946"></A>
<FONT ID="LN">1947</FONT><A NAME="1947"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1948</FONT><A NAME="1948"></A>   * Sets how the training data will be transformed. Should be one of
<FONT ID="LN">1949</FONT><A NAME="1949"></A>   * FILTER_NORMALIZE, FILTER_STANDARDIZE, FILTER_NONE.
<FONT ID="LN">1950</FONT><A NAME="1950"></A>   *
<FONT ID="LN">1951</FONT><A NAME="1951"></A>   * @param newType the new filtering mode
<FONT ID="LN">1952</FONT><A NAME="1952"></A>   */</FONT>
<FONT ID="LN">1953</FONT><A NAME="1953"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setFilterType(<A HREF="../../../weka/core/SelectedTag.java.html">SelectedTag</A> newType) {
<FONT ID="LN">1954</FONT><A NAME="1954"></A>
<FONT ID="LN">1955</FONT><A NAME="1955"></A>    <FONT ID="If">if</FONT> (newType.getTags() == TAGS_FILTER) {
<FONT ID="LN">1956</FONT><A NAME="1956"></A>      m_filterType = newType.getSelectedTag().getID();
<FONT ID="LN">1957</FONT><A NAME="1957"></A>    }
<FONT ID="LN">1958</FONT><A NAME="1958"></A>  }
<FONT ID="LN">1959</FONT><A NAME="1959"></A>
<FONT ID="LN">1960</FONT><A NAME="1960"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1961</FONT><A NAME="1961"></A>   * Returns the tip text for this property
<FONT ID="LN">1962</FONT><A NAME="1962"></A>   *
<FONT ID="LN">1963</FONT><A NAME="1963"></A>   * @return tip text for this property suitable for
<FONT ID="LN">1964</FONT><A NAME="1964"></A>   * displaying in the explorer/experimenter gui
<FONT ID="LN">1965</FONT><A NAME="1965"></A>   */</FONT>
<FONT ID="LN">1966</FONT><A NAME="1966"></A>  <FONT ID="Public">public</FONT> String minimaxTipText() {
<FONT ID="LN">1967</FONT><A NAME="1967"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"Whether the MIMinimax feature space is to be used."</FONT>;
<FONT ID="LN">1968</FONT><A NAME="1968"></A>  }
<FONT ID="LN">1969</FONT><A NAME="1969"></A>
<FONT ID="LN">1970</FONT><A NAME="1970"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1971</FONT><A NAME="1971"></A>   * Check if the MIMinimax feature space is to be used.
<FONT ID="LN">1972</FONT><A NAME="1972"></A>   * @return true if minimax
<FONT ID="LN">1973</FONT><A NAME="1973"></A>   */</FONT>
<FONT ID="LN">1974</FONT><A NAME="1974"></A>  <FONT ID="Public">public</FONT> <FONT ID="Boolean">boolean</FONT> getMinimax() {
<FONT ID="LN">1975</FONT><A NAME="1975"></A>
<FONT ID="LN">1976</FONT><A NAME="1976"></A>    <FONT ID="Return">return</FONT> m_minimax;
<FONT ID="LN">1977</FONT><A NAME="1977"></A>  }
<FONT ID="LN">1978</FONT><A NAME="1978"></A>
<FONT ID="LN">1979</FONT><A NAME="1979"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1980</FONT><A NAME="1980"></A>   * Set if the MIMinimax feature space is to be used.
<FONT ID="LN">1981</FONT><A NAME="1981"></A>   * @param v  true if RBF
<FONT ID="LN">1982</FONT><A NAME="1982"></A>   */</FONT>
<FONT ID="LN">1983</FONT><A NAME="1983"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setMinimax(<FONT ID="Boolean">boolean</FONT> v) {
<FONT ID="LN">1984</FONT><A NAME="1984"></A>    m_minimax = v;
<FONT ID="LN">1985</FONT><A NAME="1985"></A>  }
<FONT ID="LN">1986</FONT><A NAME="1986"></A>
<FONT ID="LN">1987</FONT><A NAME="1987"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1988</FONT><A NAME="1988"></A>   * Returns the tip text for this property
<FONT ID="LN">1989</FONT><A NAME="1989"></A>   * @return tip text for this property suitable for
<FONT ID="LN">1990</FONT><A NAME="1990"></A>   * displaying in the explorer/experimenter gui
<FONT ID="LN">1991</FONT><A NAME="1991"></A>   */</FONT>
<FONT ID="LN">1992</FONT><A NAME="1992"></A>  <FONT ID="Public">public</FONT> String buildLogisticModelsTipText() {
<FONT ID="LN">1993</FONT><A NAME="1993"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"Whether to fit logistic models to the outputs (for proper "</FONT>
<FONT ID="LN">1994</FONT><A NAME="1994"></A>      + <FONT ID="StringLiteral">"probability estimates)."</FONT>;
<FONT ID="LN">1995</FONT><A NAME="1995"></A>  }
<FONT ID="LN">1996</FONT><A NAME="1996"></A>
<FONT ID="LN">1997</FONT><A NAME="1997"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">1998</FONT><A NAME="1998"></A>   * Get the value of buildLogisticModels.
<FONT ID="LN">1999</FONT><A NAME="1999"></A>   *
<FONT ID="LN">2000</FONT><A NAME="2000"></A>   * @return Value of buildLogisticModels.
<FONT ID="LN">2001</FONT><A NAME="2001"></A>   */</FONT>
<FONT ID="LN">2002</FONT><A NAME="2002"></A>  <FONT ID="Public">public</FONT> <FONT ID="Boolean">boolean</FONT> getBuildLogisticModels() {
<FONT ID="LN">2003</FONT><A NAME="2003"></A>
<FONT ID="LN">2004</FONT><A NAME="2004"></A>    <FONT ID="Return">return</FONT> m_fitLogisticModels;
<FONT ID="LN">2005</FONT><A NAME="2005"></A>  }
<FONT ID="LN">2006</FONT><A NAME="2006"></A>
<FONT ID="LN">2007</FONT><A NAME="2007"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">2008</FONT><A NAME="2008"></A>   * Set the value of buildLogisticModels.
<FONT ID="LN">2009</FONT><A NAME="2009"></A>   *
<FONT ID="LN">2010</FONT><A NAME="2010"></A>   * @param newbuildLogisticModels Value to assign to buildLogisticModels.
<FONT ID="LN">2011</FONT><A NAME="2011"></A>   */</FONT>
<FONT ID="LN">2012</FONT><A NAME="2012"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setBuildLogisticModels(<FONT ID="Boolean">boolean</FONT> newbuildLogisticModels) {
<FONT ID="LN">2013</FONT><A NAME="2013"></A>
<FONT ID="LN">2014</FONT><A NAME="2014"></A>    m_fitLogisticModels = newbuildLogisticModels;
<FONT ID="LN">2015</FONT><A NAME="2015"></A>  }
<FONT ID="LN">2016</FONT><A NAME="2016"></A>
<FONT ID="LN">2017</FONT><A NAME="2017"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">2018</FONT><A NAME="2018"></A>   * Returns the tip text for this property
<FONT ID="LN">2019</FONT><A NAME="2019"></A>   * @return tip text for this property suitable for
<FONT ID="LN">2020</FONT><A NAME="2020"></A>   * displaying in the explorer/experimenter gui
<FONT ID="LN">2021</FONT><A NAME="2021"></A>   */</FONT>
<FONT ID="LN">2022</FONT><A NAME="2022"></A>  <FONT ID="Public">public</FONT> String numFoldsTipText() {
<FONT ID="LN">2023</FONT><A NAME="2023"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"The number of folds for cross-validation used to generate "</FONT>
<FONT ID="LN">2024</FONT><A NAME="2024"></A>      + <FONT ID="StringLiteral">"training data for logistic models (-1 means use training data)."</FONT>;
<FONT ID="LN">2025</FONT><A NAME="2025"></A>  }
<FONT ID="LN">2026</FONT><A NAME="2026"></A>
<FONT ID="LN">2027</FONT><A NAME="2027"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">2028</FONT><A NAME="2028"></A>   * Get the value of numFolds.
<FONT ID="LN">2029</FONT><A NAME="2029"></A>   *
<FONT ID="LN">2030</FONT><A NAME="2030"></A>   * @return Value of numFolds.
<FONT ID="LN">2031</FONT><A NAME="2031"></A>   */</FONT>
<FONT ID="LN">2032</FONT><A NAME="2032"></A>  <FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> getNumFolds() {
<FONT ID="LN">2033</FONT><A NAME="2033"></A>
<FONT ID="LN">2034</FONT><A NAME="2034"></A>    <FONT ID="Return">return</FONT> m_numFolds;
<FONT ID="LN">2035</FONT><A NAME="2035"></A>  }
<FONT ID="LN">2036</FONT><A NAME="2036"></A>
<FONT ID="LN">2037</FONT><A NAME="2037"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">2038</FONT><A NAME="2038"></A>   * Set the value of numFolds.
<FONT ID="LN">2039</FONT><A NAME="2039"></A>   *
<FONT ID="LN">2040</FONT><A NAME="2040"></A>   * @param newnumFolds Value to assign to numFolds.
<FONT ID="LN">2041</FONT><A NAME="2041"></A>   */</FONT>
<FONT ID="LN">2042</FONT><A NAME="2042"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setNumFolds(<FONT ID="Int">int</FONT> newnumFolds) {
<FONT ID="LN">2043</FONT><A NAME="2043"></A>
<FONT ID="LN">2044</FONT><A NAME="2044"></A>    m_numFolds = newnumFolds;
<FONT ID="LN">2045</FONT><A NAME="2045"></A>  }
<FONT ID="LN">2046</FONT><A NAME="2046"></A>
<FONT ID="LN">2047</FONT><A NAME="2047"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">2048</FONT><A NAME="2048"></A>   * Returns the tip text for this property
<FONT ID="LN">2049</FONT><A NAME="2049"></A>   * @return tip text for this property suitable for
<FONT ID="LN">2050</FONT><A NAME="2050"></A>   * displaying in the explorer/experimenter gui
<FONT ID="LN">2051</FONT><A NAME="2051"></A>   */</FONT>
<FONT ID="LN">2052</FONT><A NAME="2052"></A>  <FONT ID="Public">public</FONT> String randomSeedTipText() {
<FONT ID="LN">2053</FONT><A NAME="2053"></A>    <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"Random number seed for the cross-validation."</FONT>;
<FONT ID="LN">2054</FONT><A NAME="2054"></A>  }
<FONT ID="LN">2055</FONT><A NAME="2055"></A>
<FONT ID="LN">2056</FONT><A NAME="2056"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">2057</FONT><A NAME="2057"></A>   * Get the value of randomSeed.
<FONT ID="LN">2058</FONT><A NAME="2058"></A>   *
<FONT ID="LN">2059</FONT><A NAME="2059"></A>   * @return Value of randomSeed.
<FONT ID="LN">2060</FONT><A NAME="2060"></A>   */</FONT>
<FONT ID="LN">2061</FONT><A NAME="2061"></A>  <FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> getRandomSeed() {
<FONT ID="LN">2062</FONT><A NAME="2062"></A>
<FONT ID="LN">2063</FONT><A NAME="2063"></A>    <FONT ID="Return">return</FONT> m_randomSeed;
<FONT ID="LN">2064</FONT><A NAME="2064"></A>  }
<FONT ID="LN">2065</FONT><A NAME="2065"></A>
<FONT ID="LN">2066</FONT><A NAME="2066"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">2067</FONT><A NAME="2067"></A>   * Set the value of randomSeed.
<FONT ID="LN">2068</FONT><A NAME="2068"></A>   *
<FONT ID="LN">2069</FONT><A NAME="2069"></A>   * @param newrandomSeed Value to assign to randomSeed.
<FONT ID="LN">2070</FONT><A NAME="2070"></A>   */</FONT>
<FONT ID="LN">2071</FONT><A NAME="2071"></A>  <FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setRandomSeed(<FONT ID="Int">int</FONT> newrandomSeed) {
<FONT ID="LN">2072</FONT><A NAME="2072"></A>
<FONT ID="LN">2073</FONT><A NAME="2073"></A>    m_randomSeed = newrandomSeed;
<FONT ID="LN">2074</FONT><A NAME="2074"></A>  }
<FONT ID="LN">2075</FONT><A NAME="2075"></A>
<FONT ID="LN">2076</FONT><A NAME="2076"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">2077</FONT><A NAME="2077"></A>   * Prints out the classifier.
<FONT ID="LN">2078</FONT><A NAME="2078"></A>   *
<FONT ID="LN">2079</FONT><A NAME="2079"></A>   * @return a description of the classifier as a string
<FONT ID="LN">2080</FONT><A NAME="2080"></A>   */</FONT>
<FONT ID="LN">2081</FONT><A NAME="2081"></A>  <FONT ID="Public">public</FONT> String toString() {
<FONT ID="LN">2082</FONT><A NAME="2082"></A>
<FONT ID="LN">2083</FONT><A NAME="2083"></A>    StringBuffer text = <FONT ID="New">new</FONT> StringBuffer();
<FONT ID="LN">2084</FONT><A NAME="2084"></A>
<FONT ID="LN">2085</FONT><A NAME="2085"></A>    <FONT ID="If">if</FONT> ((m_classAttribute == <FONT ID="Null">null</FONT>)) {
<FONT ID="LN">2086</FONT><A NAME="2086"></A>      <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"SMO: No model built yet."</FONT>;
<FONT ID="LN">2087</FONT><A NAME="2087"></A>    }
<FONT ID="LN">2088</FONT><A NAME="2088"></A>    <FONT ID="Try">try</FONT> {
<FONT ID="LN">2089</FONT><A NAME="2089"></A>      text.append(<FONT ID="StringLiteral">"SMO\n\n"</FONT>);
<FONT ID="LN">2090</FONT><A NAME="2090"></A>      <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; m_classAttribute.numValues(); i++) {
<FONT ID="LN">2091</FONT><A NAME="2091"></A>        <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> j = i + <FONT ID="IntegerLiteral">1</FONT>; j &lt; m_classAttribute.numValues(); j++) {
<FONT ID="LN">2092</FONT><A NAME="2092"></A>          text.append(<FONT ID="StringLiteral">"Classifier for classes: "</FONT> + 
<FONT ID="LN">2093</FONT><A NAME="2093"></A>              m_classAttribute.value(i) + <FONT ID="StringLiteral">", "</FONT> +
<FONT ID="LN">2094</FONT><A NAME="2094"></A>              m_classAttribute.value(j) + <FONT ID="StringLiteral">"\n\n"</FONT>);
<FONT ID="LN">2095</FONT><A NAME="2095"></A>          text.append(m_classifiers[i][j]);
<FONT ID="LN">2096</FONT><A NAME="2096"></A>          <FONT ID="If">if</FONT> (m_fitLogisticModels) {
<FONT ID="LN">2097</FONT><A NAME="2097"></A>            text.append(<FONT ID="StringLiteral">"\n\n"</FONT>);
<FONT ID="LN">2098</FONT><A NAME="2098"></A>            <FONT ID="If">if</FONT> ( m_classifiers[i][j].m_logistic == <FONT ID="Null">null</FONT>) {
<FONT ID="LN">2099</FONT><A NAME="2099"></A>              text.append(<FONT ID="StringLiteral">"No logistic model has been fit.\n"</FONT>);
<FONT ID="LN">2100</FONT><A NAME="2100"></A>            } <FONT ID="Else">else</FONT> {
<FONT ID="LN">2101</FONT><A NAME="2101"></A>              text.append(m_classifiers[i][j].m_logistic);
<FONT ID="LN">2102</FONT><A NAME="2102"></A>            }
<FONT ID="LN">2103</FONT><A NAME="2103"></A>          }
<FONT ID="LN">2104</FONT><A NAME="2104"></A>          text.append(<FONT ID="StringLiteral">"\n\n"</FONT>);
<FONT ID="LN">2105</FONT><A NAME="2105"></A>        }
<FONT ID="LN">2106</FONT><A NAME="2106"></A>      }
<FONT ID="LN">2107</FONT><A NAME="2107"></A>    } <FONT ID="Catch">catch</FONT> (Exception e) {
<FONT ID="LN">2108</FONT><A NAME="2108"></A>      <FONT ID="Return">return</FONT> <FONT ID="StringLiteral">"Can't print SMO classifier."</FONT>;
<FONT ID="LN">2109</FONT><A NAME="2109"></A>    }
<FONT ID="LN">2110</FONT><A NAME="2110"></A>
<FONT ID="LN">2111</FONT><A NAME="2111"></A>    <FONT ID="Return">return</FONT> text.toString();
<FONT ID="LN">2112</FONT><A NAME="2112"></A>  }
<FONT ID="LN">2113</FONT><A NAME="2113"></A>  
<FONT ID="LN">2114</FONT><A NAME="2114"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">2115</FONT><A NAME="2115"></A>   * Returns the revision string.
<FONT ID="LN">2116</FONT><A NAME="2116"></A>   * 
<FONT ID="LN">2117</FONT><A NAME="2117"></A>   * @return        the revision
<FONT ID="LN">2118</FONT><A NAME="2118"></A>   */</FONT>
<FONT ID="LN">2119</FONT><A NAME="2119"></A>  <FONT ID="Public">public</FONT> String getRevision() {
<FONT ID="LN">2120</FONT><A NAME="2120"></A>    <FONT ID="Return">return</FONT> RevisionUtils.extract(<FONT ID="StringLiteral">"$Revision: 5987 $"</FONT>);
<FONT ID="LN">2121</FONT><A NAME="2121"></A>  }
<FONT ID="LN">2122</FONT><A NAME="2122"></A>
<FONT ID="LN">2123</FONT><A NAME="2123"></A>  <FONT ID="FormalComment">/**
<FONT ID="LN">2124</FONT><A NAME="2124"></A>   * Main method for testing this class.
<FONT ID="LN">2125</FONT><A NAME="2125"></A>   * 
<FONT ID="LN">2126</FONT><A NAME="2126"></A>   * @param argv the commandline parameters
<FONT ID="LN">2127</FONT><A NAME="2127"></A>   */</FONT>
<FONT ID="LN">2128</FONT><A NAME="2128"></A>  <FONT ID="Public">public</FONT> <FONT ID="Static">static</FONT> <FONT ID="Void">void</FONT> main(String[] argv) {
<FONT ID="LN">2129</FONT><A NAME="2129"></A>    runClassifier(<FONT ID="New">new</FONT> <A HREF="../../../weka/classifiers/mi/MISMO.java.html">MISMO</A>(), argv);
<FONT ID="LN">2130</FONT><A NAME="2130"></A>  }
<FONT ID="LN">2131</FONT><A NAME="2131"></A>}
<FONT ID="LN">2132</FONT><A NAME="2132"></A></pre><TABLE id="Header" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td colspan="2" width="33%">&nbsp;</td>
<td align="center" colspan="2" width="33%">
<font size="4">MISMO.java</font>
</td>
<td align="right" colspan="2" width="33%">&nbsp;</td>
</tr>
</TABLE>

</BODY>
</HTML>